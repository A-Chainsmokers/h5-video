(this["webpackJsonp"] = this["webpackJsonp"] || []).push([["app-service"],[
/* 0 */
/*!*************************************!*\
  !*** E:/work/html/H5-Video/main.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("__webpack_require__(/*! uni-pages */ 1);var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 11));\nvar _App = _interopRequireDefault(__webpack_require__(/*! ./App */ 12));\nvar _uviewUi = _interopRequireDefault(__webpack_require__(/*! uview-ui */ 15));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);if (enumerableOnly) symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;});keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};if (i % 2) {ownKeys(Object(source), true).forEach(function (key) {_defineProperty(target, key, source[key]);});} else if (Object.getOwnPropertyDescriptors) {Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));} else {ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n_vue.default.use(_uviewUi.default);\n\n_vue.default.config.productionTip = false;\n\n_App.default.mpType = 'app';\n\nvar app = new _vue.default(_objectSpread({},\n_App.default));\n\napp.$mount();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVuaS1hcHA6Ly8vbWFpbi5qcyJdLCJuYW1lcyI6WyJWdWUiLCJ1c2UiLCJ1VmlldyIsImNvbmZpZyIsInByb2R1Y3Rpb25UaXAiLCJBcHAiLCJtcFR5cGUiLCJhcHAiLCIkbW91bnQiXSwibWFwcGluZ3MiOiJBQUFBLHdDQUFtQjtBQUNuQjtBQUNBLCtFO0FBQ0FBLGFBQUlDLEdBQUosQ0FBUUMsZ0JBQVI7O0FBRUFGLGFBQUlHLE1BQUosQ0FBV0MsYUFBWCxHQUEyQixLQUEzQjs7QUFFQUMsYUFBSUMsTUFBSixHQUFhLEtBQWI7O0FBRUEsSUFBTUMsR0FBRyxHQUFHLElBQUlQLFlBQUo7QUFDTEssWUFESyxFQUFaOztBQUdBRSxHQUFHLENBQUNDLE1BQUoiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAndW5pLXBhZ2VzJztpbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcclxuaW1wb3J0IEFwcCBmcm9tICcuL0FwcCdcclxuaW1wb3J0IHVWaWV3IGZyb20gXCJ1dmlldy11aVwiO1xyXG5WdWUudXNlKHVWaWV3KTtcclxuXHJcblZ1ZS5jb25maWcucHJvZHVjdGlvblRpcCA9IGZhbHNlXHJcblxyXG5BcHAubXBUeXBlID0gJ2FwcCdcclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBWdWUoe1xyXG4gICAgLi4uQXBwXHJcbn0pXHJcbmFwcC4kbW91bnQoKSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!****************************************!*\
  !*** E:/work/html/H5-Video/pages.json ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function (callback) {
    var promise = this.constructor;
    return this.then(
    function (value) {return promise.resolve(callback()).then(function () {return value;});},
    function (reason) {return promise.resolve(callback()).then(function () {
        throw reason;
      });});

  };
}

if (uni.restoreGlobal) {
  uni.restoreGlobal(weex, plus, setTimeout, clearTimeout, setInterval, clearInterval);
}
__definePage('pages/video/index', function () {return Vue.extend(__webpack_require__(/*! pages/video/index.vue?mpType=page */ 2).default);});

/***/ }),
/* 2 */
/*!***************************************************************!*\
  !*** E:/work/html/H5-Video/pages/video/index.vue?mpType=page ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.vue?vue&type=template&id=70092125&mpType=page */ 3);\n/* harmony import */ var _index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.vue?vue&type=script&lang=js&mpType=page */ 5);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 10);\n\nvar renderjs\n\n\n\n\n/* normalize component */\n\nvar component = Object(_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\n  _index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  _index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__[\"render\"],\n  _index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"],\n  false,\n  null,\n  null,\n  null,\n  false,\n  _index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__[\"components\"],\n  renderjs\n)\n\ncomponent.options.__file = \"pages/video/index.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBNkg7QUFDN0g7QUFDb0U7QUFDTDs7O0FBRy9EO0FBQ2lMO0FBQ2pMLGdCQUFnQix3TEFBVTtBQUMxQixFQUFFLHNGQUFNO0FBQ1IsRUFBRSwyRkFBTTtBQUNSLEVBQUUsb0dBQWU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsK0ZBQVU7QUFDWjtBQUNBOztBQUVBO0FBQ2UsZ0YiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zLCByZWN5Y2xhYmxlUmVuZGVyLCBjb21wb25lbnRzIH0gZnJvbSBcIi4vaW5kZXgudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTcwMDkyMTI1Jm1wVHlwZT1wYWdlXCJcbnZhciByZW5kZXJqc1xuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9pbmRleC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmbXBUeXBlPXBhZ2VcIlxuZXhwb3J0ICogZnJvbSBcIi4vaW5kZXgudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJm1wVHlwZT1wYWdlXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL2phdmFfdG9vbHMvSEJ1aWxkZXJYL3BsdWdpbnMvdW5pYXBwLWNsaS9ub2RlX21vZHVsZXMvQGRjbG91ZGlvL3Z1ZS1jbGktcGx1Z2luLXVuaS9wYWNrYWdlcy92dWUtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBudWxsLFxuICBudWxsLFxuICBmYWxzZSxcbiAgY29tcG9uZW50cyxcbiAgcmVuZGVyanNcbilcblxuY29tcG9uZW50Lm9wdGlvbnMuX19maWxlID0gXCJwYWdlcy92aWRlby9pbmRleC52dWVcIlxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!*********************************************************************************************!*\
  !*** E:/work/html/H5-Video/pages/video/index.vue?vue&type=template&id=70092125&mpType=page ***!
  \*********************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_0_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_filter_modules_template_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-0!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/filter-modules-template.js!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./index.vue?vue&type=template&id=70092125&mpType=page */ 4);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_0_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_filter_modules_template_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_0_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_filter_modules_template_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_0_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_filter_modules_template_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_0_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_filter_modules_template_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_template_id_70092125_mpType_page__WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),
/* 4 */
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/filter-modules-template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!E:/work/html/H5-Video/pages/video/index.vue?vue&type=template&id=70092125&mpType=page ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c("view", [_c("view", { attrs: { id: "xgplayer", _i: 1 } })])
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),
/* 5 */
/*!***************************************************************************************!*\
  !*** E:/work/html/H5-Video/pages/video/index.vue?vue&type=script&lang=js&mpType=page ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-1!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/using-components.js!../../../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./index.vue?vue&type=script&lang=js&mpType=page */ 6);\n/* harmony import */ var _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n /* harmony default export */ __webpack_exports__[\"default\"] = (_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js_mpType_page__WEBPACK_IMPORTED_MODULE_0___default.a); //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQW9tQixDQUFnQixrbkJBQUcsRUFBQyIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9qYXZhX3Rvb2xzL0hCdWlsZGVyWC9wbHVnaW5zL3VuaWFwcC1jbGkvbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanMhLi4vLi4vLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdnVlLWNsaS1wbHVnaW4tdW5pL3BhY2thZ2VzL3dlYnBhY2stcHJlcHJvY2Vzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uLy4uLy4uL2phdmFfdG9vbHMvSEJ1aWxkZXJYL3BsdWdpbnMvdW5pYXBwLWNsaS9ub2RlX21vZHVsZXMvQGRjbG91ZGlvL3Z1ZS1jbGktcGx1Z2luLXVuaS9wYWNrYWdlcy93ZWJwYWNrLXVuaS1hcHAtbG9hZGVyL3VzaW5nLWNvbXBvbmVudHMuanMhLi4vLi4vLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdnVlLWNsaS1wbHVnaW4tdW5pL3BhY2thZ2VzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9pbmRleC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmbXBUeXBlPXBhZ2VcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9qYXZhX3Rvb2xzL0hCdWlsZGVyWC9wbHVnaW5zL3VuaWFwcC1jbGkvbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanMhLi4vLi4vLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdnVlLWNsaS1wbHVnaW4tdW5pL3BhY2thZ2VzL3dlYnBhY2stcHJlcHJvY2Vzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uLy4uLy4uL2phdmFfdG9vbHMvSEJ1aWxkZXJYL3BsdWdpbnMvdW5pYXBwLWNsaS9ub2RlX21vZHVsZXMvQGRjbG91ZGlvL3Z1ZS1jbGktcGx1Z2luLXVuaS9wYWNrYWdlcy93ZWJwYWNrLXVuaS1hcHAtbG9hZGVyL3VzaW5nLWNvbXBvbmVudHMuanMhLi4vLi4vLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdnVlLWNsaS1wbHVnaW4tdW5pL3BhY2thZ2VzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9pbmRleC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmbXBUeXBlPXBhZ2VcIiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/using-components.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!E:/work/html/H5-Video/pages/video/index.vue?vue&type=script&lang=js&mpType=page ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("Object.defineProperty(exports, \"__esModule\", { value: true });exports.default = void 0;\n\n\n\n\nvar _xgplayer = _interopRequireDefault(__webpack_require__(/*! xgplayer */ 7));\nvar _xgplayerHls = _interopRequireDefault(__webpack_require__(/*! xgplayer-hls.js */ 9));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };} //\n//\n//\n//\nvar _default = { data: function data() {return { xg: null,\n      config: {\n        id: 'xgplayer',\n        url: 'https://wy.bigmao.top/api/GetDownUrlTt/d273758be9f14821ab72792c80e0b3e2/c3009e4624184fc6bc5cf0f2581637f6.mp4',\n        lang: 'zh-cn',\n        width: '100%',\n        height: '100%',\n        autoplay: false,\n        videoInit: true,\n        screenShot: true,\n        keyShortcut: 'off',\n        crossOrigin: true,\n        cssFullscreen: true,\n        defaultPlaybackRate: 1,\n        playbackRate: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2],\n        playPrev: true,\n        playNextOne: true,\n        videoStop: true,\n        showList: true,\n        showHistory: true,\n        quitMiniMode: true,\n        videoTitle: true,\n        airplay: true,\n        closeVideoTouch: true,\n        ignores: ['replay', 'error'], // 为了切换播放器类型时避免显示错误刷新，暂时忽略错误\n        preloadTime: 300 } };\n\n\n  },\n  components: {},\n  // onLoad() {\n  // \tthis.init();\n  // },\n  mounted: function mounted() {\n    this.init();\n  },\n  methods: {\n    init: function init() {\n      // this.xg = new HlsJsPlayer(this.config);\n      this.xg = new _xgplayer.default(this.config);\n    } } };exports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVuaS1hcHA6Ly8vcGFnZXMvdmlkZW8vaW5kZXgudnVlIl0sIm5hbWVzIjpbImRhdGEiLCJ4ZyIsImNvbmZpZyIsImlkIiwidXJsIiwibGFuZyIsIndpZHRoIiwiaGVpZ2h0IiwiYXV0b3BsYXkiLCJ2aWRlb0luaXQiLCJzY3JlZW5TaG90Iiwia2V5U2hvcnRjdXQiLCJjcm9zc09yaWdpbiIsImNzc0Z1bGxzY3JlZW4iLCJkZWZhdWx0UGxheWJhY2tSYXRlIiwicGxheWJhY2tSYXRlIiwicGxheVByZXYiLCJwbGF5TmV4dE9uZSIsInZpZGVvU3RvcCIsInNob3dMaXN0Iiwic2hvd0hpc3RvcnkiLCJxdWl0TWluaU1vZGUiLCJ2aWRlb1RpdGxlIiwiYWlycGxheSIsImNsb3NlVmlkZW9Ub3VjaCIsImlnbm9yZXMiLCJwcmVsb2FkVGltZSIsImNvbXBvbmVudHMiLCJtb3VudGVkIiwiaW5pdCIsIm1ldGhvZHMiLCJQbGF5ZXIiXSwibWFwcGluZ3MiOiI7Ozs7O0FBS0E7QUFDQSx5Riw4RkFOQTtBQUNBO0FBQ0E7QUFDQTtlQUllLEVBQ2RBLElBRGMsa0JBQ1AsQ0FDTixPQUFPLEVBQ05DLEVBQUUsRUFBRSxJQURFO0FBRU5DLFlBQU0sRUFBRTtBQUNQQyxVQUFFLEVBQUUsVUFERztBQUVQQyxXQUFHLEVBQUUsOEdBRkU7QUFHUEMsWUFBSSxFQUFFLE9BSEM7QUFJUEMsYUFBSyxFQUFFLE1BSkE7QUFLUEMsY0FBTSxFQUFFLE1BTEQ7QUFNUEMsZ0JBQVEsRUFBRSxLQU5IO0FBT1BDLGlCQUFTLEVBQUUsSUFQSjtBQVFQQyxrQkFBVSxFQUFFLElBUkw7QUFTUEMsbUJBQVcsRUFBRSxLQVROO0FBVVBDLG1CQUFXLEVBQUUsSUFWTjtBQVdQQyxxQkFBYSxFQUFFLElBWFI7QUFZUEMsMkJBQW1CLEVBQUUsQ0FaZDtBQWFQQyxvQkFBWSxFQUFFLENBQUMsSUFBRCxFQUFPLEdBQVAsRUFBWSxJQUFaLEVBQWtCLENBQWxCLEVBQXFCLElBQXJCLEVBQTJCLEdBQTNCLEVBQWdDLElBQWhDLEVBQXNDLENBQXRDLENBYlA7QUFjUEMsZ0JBQVEsRUFBRSxJQWRIO0FBZVBDLG1CQUFXLEVBQUUsSUFmTjtBQWdCUEMsaUJBQVMsRUFBRSxJQWhCSjtBQWlCUEMsZ0JBQVEsRUFBRSxJQWpCSDtBQWtCUEMsbUJBQVcsRUFBRSxJQWxCTjtBQW1CUEMsb0JBQVksRUFBRSxJQW5CUDtBQW9CUEMsa0JBQVUsRUFBRSxJQXBCTDtBQXFCUEMsZUFBTyxFQUFFLElBckJGO0FBc0JQQyx1QkFBZSxFQUFFLElBdEJWO0FBdUJQQyxlQUFPLEVBQUUsQ0FBQyxRQUFELEVBQVcsT0FBWCxDQXZCRixFQXVCdUI7QUFDOUJDLG1CQUFXLEVBQUUsR0F4Qk4sRUFGRixFQUFQOzs7QUE2QkEsR0EvQmE7QUFnQ2RDLFlBQVUsRUFBRSxFQWhDRTtBQWlDZDtBQUNBO0FBQ0E7QUFDQUMsU0FwQ2MscUJBb0NKO0FBQ1QsU0FBS0MsSUFBTDtBQUNBLEdBdENhO0FBdUNkQyxTQUFPLEVBQUU7QUFDUkQsUUFEUSxrQkFDRDtBQUNOO0FBQ0EsV0FBSzVCLEVBQUwsR0FBVSxJQUFJOEIsaUJBQUosQ0FBVyxLQUFLN0IsTUFBaEIsQ0FBVjtBQUNBLEtBSk8sRUF2Q0ssRSIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9cclxuLy9cclxuLy9cclxuLy9cclxuXHJcbmltcG9ydCBQbGF5ZXIgZnJvbSAneGdwbGF5ZXInO1xyXG5pbXBvcnQgSGxzSnNQbGF5ZXIgZnJvbSAneGdwbGF5ZXItaGxzLmpzJztcclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdGRhdGEoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR4ZzogbnVsbCxcclxuXHRcdFx0Y29uZmlnOiB7XHJcblx0XHRcdFx0aWQ6ICd4Z3BsYXllcicsXHJcblx0XHRcdFx0dXJsOiAnaHR0cHM6Ly93eS5iaWdtYW8udG9wL2FwaS9HZXREb3duVXJsVHQvZDI3Mzc1OGJlOWYxNDgyMWFiNzI3OTJjODBlMGIzZTIvYzMwMDllNDYyNDE4NGZjNmJjNWNmMGYyNTgxNjM3ZjYubXA0JyxcclxuXHRcdFx0XHRsYW5nOiAnemgtY24nLFxyXG5cdFx0XHRcdHdpZHRoOiAnMTAwJScsXHJcblx0XHRcdFx0aGVpZ2h0OiAnMTAwJScsXHJcblx0XHRcdFx0YXV0b3BsYXk6IGZhbHNlLFxyXG5cdFx0XHRcdHZpZGVvSW5pdDogdHJ1ZSxcclxuXHRcdFx0XHRzY3JlZW5TaG90OiB0cnVlLFxyXG5cdFx0XHRcdGtleVNob3J0Y3V0OiAnb2ZmJyxcclxuXHRcdFx0XHRjcm9zc09yaWdpbjogdHJ1ZSxcclxuXHRcdFx0XHRjc3NGdWxsc2NyZWVuOiB0cnVlLFxyXG5cdFx0XHRcdGRlZmF1bHRQbGF5YmFja1JhdGU6IDEsXHJcblx0XHRcdFx0cGxheWJhY2tSYXRlOiBbMC4yNSwgMC41LCAwLjc1LCAxLCAxLjI1LCAxLjUsIDEuNzUsIDJdLFxyXG5cdFx0XHRcdHBsYXlQcmV2OiB0cnVlLFxyXG5cdFx0XHRcdHBsYXlOZXh0T25lOiB0cnVlLFxyXG5cdFx0XHRcdHZpZGVvU3RvcDogdHJ1ZSxcclxuXHRcdFx0XHRzaG93TGlzdDogdHJ1ZSxcclxuXHRcdFx0XHRzaG93SGlzdG9yeTogdHJ1ZSxcclxuXHRcdFx0XHRxdWl0TWluaU1vZGU6IHRydWUsXHJcblx0XHRcdFx0dmlkZW9UaXRsZTogdHJ1ZSxcclxuXHRcdFx0XHRhaXJwbGF5OiB0cnVlLFxyXG5cdFx0XHRcdGNsb3NlVmlkZW9Ub3VjaDogdHJ1ZSxcclxuXHRcdFx0XHRpZ25vcmVzOiBbJ3JlcGxheScsICdlcnJvciddLCAvLyDkuLrkuobliIfmjaLmkq3mlL7lmajnsbvlnovml7bpgb/lhY3mmL7npLrplJnor6/liLfmlrDvvIzmmoLml7blv73nlaXplJnor69cclxuXHRcdFx0XHRwcmVsb2FkVGltZTogMzAwXHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSxcclxuXHRjb21wb25lbnRzOiB7fSxcclxuXHQvLyBvbkxvYWQoKSB7XHJcblx0Ly8gXHR0aGlzLmluaXQoKTtcclxuXHQvLyB9LFxyXG5cdG1vdW50ZWQoKSB7XHJcblx0XHR0aGlzLmluaXQoKTtcclxuXHR9LFxyXG5cdG1ldGhvZHM6IHtcclxuXHRcdGluaXQoKSB7XHJcblx0XHRcdC8vIHRoaXMueGcgPSBuZXcgSGxzSnNQbGF5ZXIodGhpcy5jb25maWcpO1xyXG5cdFx0XHR0aGlzLnhnID0gbmV3IFBsYXllcih0aGlzLmNvbmZpZyk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!*****************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/xgplayer/dist/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__f__) {!function (e, t) { true ? module.exports = t() : undefined;}(this, function () {return function (e) {var t = {};function n(r) {if (t[r]) return t[r].exports;var i = t[r] = { i: r, l: !1, exports: {} };return e[r].call(i.exports, i, i.exports, n), i.l = !0, i.exports;}return n.m = e, n.c = t, n.d = function (e, t, r) {n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r });}, n.r = function (e) {"undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 });}, n.t = function (e, t) {if (1 & t && (e = n(e)), 8 & t) return e;if (4 & t && "object" == typeof e && e && e.__esModule) return e;var r = Object.create(null);if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var i in e) {n.d(r, i, function (t) {return e[t];}.bind(null, i));}return r;}, n.n = function (e) {var t = e && e.__esModule ? function () {return e.default;} : function () {return e;};return n.d(t, "a", t), t;}, n.o = function (e, t) {return Object.prototype.hasOwnProperty.call(e, t);}, n.p = "", n(n.s = 79);}([function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 }), t.util = void 0, t.createDom = o, t.hasClass = l, t.addClass = s, t.removeClass = u, t.toggleClass = c, t.findDom = p, t.padStart = d, t.format = f, t.event = g, t.typeOf = h, t.deepCopy = y, t.getBgImage = x, t.copyDom = v, t._setInterval = m, t._clearInterval = b, t.createImgBtn = k, t.isWeiXin = w, t.isUc = _, t.computeWatchDur = E, t.offInDestroy = T, t.on = C, t.once = S, t.getBuffered2 = P, t.checkIsBrowser = O, t.setStyle = L;var r,i = n(7),a = (r = i) && r.__esModule ? r : { default: r };function o() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "div",t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "",i = document.createElement(e);return i.className = r, i.innerHTML = t, Object.keys(n).forEach(function (t) {var r = t,a = n[t];"video" === e || "audio" === e ? a && i.setAttribute(r, a) : i.setAttribute(r, a);}), i;}function l(e, t) {return !!e && (e.classList ? Array.prototype.some.call(e.classList, function (e) {return e === t;}) : !!e.className && !!e.className.match(new RegExp("(\\s|^)" + t + "(\\s|$)")));}function s(e, t) {e && (e.classList ? t.replace(/(^\s+|\s+$)/g, "").split(/\s+/g).forEach(function (t) {t && e.classList.add(t);}) : l(e, t) || (e.className += " " + t));}function u(e, t) {e && (e.classList ? t.split(/\s+/g).forEach(function (t) {e.classList.remove(t);}) : l(e, t) && t.split(/\s+/g).forEach(function (t) {var n = new RegExp("(\\s|^)" + t + "(\\s|$)");e.className = e.className.replace(n, " ");}));}function c(e, t) {e && t.split(/\s+/g).forEach(function (t) {l(e, t) ? u(e, t) : s(e, t);});}function p() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : document,t = arguments[1],n = void 0;try {n = e.querySelector(t);} catch (r) {0 === t.indexOf("#") && (n = e.getElementById(t.slice(1)));}return n;}function d(e, t, n) {for (var r = String(n), i = t >> 0, a = Math.ceil(i / r.length), o = [], l = String(e); a--;) {o.push(r);}return o.join("").substring(0, i - l.length) + l;}function f(e) {if (window.isNaN(e)) return "";var t = d(Math.floor(e / 3600), 2, 0),n = d(Math.floor((e - 3600 * t) / 60), 2, 0),r = d(Math.floor(e - 3600 * t - 60 * n), 2, 0);return ("00" === t ? [n, r] : [t, n, r]).join(":");}function g(e) {if (e.touches) {var t = e.touches[0] || e.changedTouches[0];e.clientX = t.clientX || 0, e.clientY = t.clientY || 0, e.offsetX = t.pageX - t.target.offsetLeft, e.offsetY = t.pageY - t.target.offsetTop;}e._target = e.target || e.srcElement;}function h(e) {return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0];}function y(e, t) {if ("Object" === h(t) && "Object" === h(e)) return Object.keys(t).forEach(function (n) {"Object" !== h(t[n]) || t[n] instanceof Node ? "Array" === h(t[n]) ? e[n] = "Array" === h(e[n]) ? e[n].concat(t[n]) : t[n] : e[n] = t[n] : e[n] ? y(e[n], t[n]) : e[n] = t[n];}), e;}function x(e) {var t = (e.currentStyle || window.getComputedStyle(e, null)).backgroundImage;if (!t || "none" === t) return "";var n = document.createElement("a");return n.href = t.replace(/url\("|"\)/g, ""), n.href;}function v(e) {if (e && 1 === e.nodeType) {var t = document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes, function (e) {t.setAttribute(e.name, e.value);}), e.innerHTML && (t.innerHTML = e.innerHTML), t;}return "";}function m(e, t, n, r) {e._interval[t] || (e._interval[t] = setInterval(n.bind(e), r));}function b(e, t) {clearInterval(e._interval[t]), e._interval[t] = null;}function k(e, t, n, r) {var i = o("xg-" + e, "", {}, "xgplayer-" + e + "-img");if (i.style.backgroundImage = 'url("' + t + '")', n && r) {var a = void 0,l = void 0,s = void 0;["px", "rem", "em", "pt", "dp", "vw", "vh", "vm", "%"].every(function (e) {return !(n.indexOf(e) > -1 && r.indexOf(e) > -1) || (a = Number(n.slice(0, n.indexOf(e)).trim()), l = Number(r.slice(0, r.indexOf(e)).trim()), s = e, !1);}), i.style.width = "" + a + s, i.style.height = "" + l + s, i.style.backgroundSize = "" + a + s + " " + l + s, i.style.margin = "start" === e ? "-" + l / 2 + s + " auto auto -" + a / 2 + s : "auto 5px auto 5px";}return i;}function w() {return window.navigator.userAgent.toLowerCase().indexOf("micromessenger") > -1;}function _() {return window.navigator.userAgent.toLowerCase().indexOf("ucbrowser") > -1;}function E() {for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = [], n = 0; n < e.length; n++) {if (!(!e[n].end || e[n].begin < 0 || e[n].end < 0 || e[n].end < e[n].begin)) if (t.length < 1) t.push({ begin: e[n].begin, end: e[n].end });else for (var r = 0; r < t.length; r++) {var i = e[n].begin,a = e[n].end;if (a < t[r].begin) {t.splice(r, 0, { begin: i, end: a });break;}if (!(i > t[r].end)) {var o = t[r].begin,l = t[r].end;t[r].begin = Math.min(i, o), t[r].end = Math.max(a, l);break;}if (r > t.length - 2) {t.push({ begin: i, end: a });break;}}}for (var s = 0, u = 0; u < t.length; u++) {s += t[u].end - t[u].begin;}return s;}function T(e, t, n, r) {e.once(r, function i() {e.off(t, n), e.off(r, i);});}function C(e, t, n, r) {if (r) e.on(t, n), T(e, t, n, r);else {e.on(t, function r(i) {n(i), e.off(t, r);});}}function S(e, t, n, r) {if (r) e.once(t, n), T(e, t, n, r);else {e.once(t, function r(i) {n(i), e.off(t, r);});}}function P(e) {for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .5, n = [], r = 0; r < e.length; r++) {n.push({ start: e.start(r) < .5 ? 0 : e.start(r), end: e.end(r) });}n.sort(function (e, t) {var n = e.start - t.start;return n || t.end - e.end;});var i = [];if (t) for (var o = 0; o < n.length; o++) {var l = i.length;if (l) {var s = i[l - 1].end;n[o].start - s < t ? n[o].end > s && (i[l - 1].end = n[o].end) : i.push(n[o]);} else i.push(n[o]);} else i = n;return new a.default(i);}function O() {return !("undefined" == typeof window || void 0 === window.document || void 0 === window.document.createElement);}function L(e, t, n) {var r = e.style;try {r[t] = n;} catch (e) {r.setProperty(t, n);}}t.util = { createDom: o, hasClass: l, addClass: s, removeClass: u, toggleClass: c, findDom: p, padStart: d, format: f, event: g, typeOf: h, deepCopy: y, getBgImage: x, copyDom: v, setInterval: m, clearInterval: b, createImgBtn: k, isWeiXin: w, isUc: _, computeWatchDur: E, offInDestroy: T, on: C, once: S, getBuffered2: P, checkIsBrowser: O, setStyle: L };}, function (e, t) {e.exports = function (e) {var t = [];return t.toString = function () {return this.map(function (t) {var n = function (e, t) {var n = e[1] || "",r = e[3];if (!r) return n;if (t && "function" == typeof btoa) {var i = (o = r, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(o)))) + " */"),a = r.sources.map(function (e) {return "/*# sourceURL=" + r.sourceRoot + e + " */";});return [n].concat(a).concat([i]).join("\n");}var o;return [n].join("\n");}(t, e);return t[2] ? "@media " + t[2] + "{" + n + "}" : n;}).join("");}, t.i = function (e, n) {"string" == typeof e && (e = [[null, e, ""]]);for (var r = {}, i = 0; i < this.length; i++) {var a = this[i][0];"number" == typeof a && (r[a] = !0);}for (i = 0; i < e.length; i++) {var o = e[i];"number" == typeof o[0] && r[o[0]] || (n && !o[2] ? o[2] = n : n && (o[2] = "(" + o[2] + ") and (" + n + ")"), t.push(o));}}, t;};}, function (e, t, n) {var r,i,a = {},o = (r = function r() {return window && document && document.all && !window.atob;}, function () {return void 0 === i && (i = r.apply(this, arguments)), i;}),l = function l(e) {return document.querySelector(e);},s = function (e) {var t = {};return function (e) {if ("function" == typeof e) return e();if (void 0 === t[e]) {var n = l.call(this, e);if (window.HTMLIFrameElement && n instanceof window.HTMLIFrameElement) try {n = n.contentDocument.head;} catch (e) {n = null;}t[e] = n;}return t[e];};}(),u = null,c = 0,p = [],d = n(36);function f(e, t) {for (var n = 0; n < e.length; n++) {var r = e[n],i = a[r.id];if (i) {i.refs++;for (var o = 0; o < i.parts.length; o++) {i.parts[o](r.parts[o]);}for (; o < r.parts.length; o++) {i.parts.push(m(r.parts[o], t));}} else {var l = [];for (o = 0; o < r.parts.length; o++) {l.push(m(r.parts[o], t));}a[r.id] = { id: r.id, refs: 1, parts: l };}}}function g(e, t) {for (var n = [], r = {}, i = 0; i < e.length; i++) {var a = e[i],o = t.base ? a[0] + t.base : a[0],l = { css: a[1], media: a[2], sourceMap: a[3] };r[o] ? r[o].parts.push(l) : n.push(r[o] = { id: o, parts: [l] });}return n;}function h(e, t) {var n = s(e.insertInto);if (!n) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r = p[p.length - 1];if ("top" === e.insertAt) r ? r.nextSibling ? n.insertBefore(t, r.nextSibling) : n.appendChild(t) : n.insertBefore(t, n.firstChild), p.push(t);else if ("bottom" === e.insertAt) n.appendChild(t);else {if ("object" != typeof e.insertAt || !e.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i = s(e.insertInto + " " + e.insertAt.before);n.insertBefore(t, i);}}function y(e) {if (null === e.parentNode) return !1;e.parentNode.removeChild(e);var t = p.indexOf(e);t >= 0 && p.splice(t, 1);}function x(e) {var t = document.createElement("style");return e.attrs.type = "text/css", v(t, e.attrs), h(e, t), t;}function v(e, t) {Object.keys(t).forEach(function (n) {e.setAttribute(n, t[n]);});}function m(e, t) {var n, r, i, a;if (t.transform && e.css) {if (!(a = t.transform(e.css))) return function () {};e.css = a;}if (t.singleton) {var o = c++;n = u || (u = x(t)), r = w.bind(null, n, o, !1), i = w.bind(null, n, o, !0);} else e.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (n = function (e) {var t = document.createElement("link");return e.attrs.type = "text/css", e.attrs.rel = "stylesheet", v(t, e.attrs), h(e, t), t;}(t), r = E.bind(null, n, t), i = function i() {y(n), n.href && URL.revokeObjectURL(n.href);}) : (n = x(t), r = _.bind(null, n), i = function i() {y(n);});return r(e), function (t) {if (t) {if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;r(e = t);} else i();};}e.exports = function (e, t) {if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document) throw new Error("The style-loader cannot be used in a non-browser environment");(t = t || {}).attrs = "object" == typeof t.attrs ? t.attrs : {}, t.singleton || "boolean" == typeof t.singleton || (t.singleton = o()), t.insertInto || (t.insertInto = "head"), t.insertAt || (t.insertAt = "bottom");var n = g(e, t);return f(n, t), function (e) {for (var r = [], i = 0; i < n.length; i++) {var o = n[i];(l = a[o.id]).refs--, r.push(l);}e && f(g(e, t), t);for (i = 0; i < r.length; i++) {var l;if (0 === (l = r[i]).refs) {for (var s = 0; s < l.parts.length; s++) {l.parts[s]();}delete a[l.id];}}};};var b,k = (b = [], function (e, t) {return b[e] = t, b.filter(Boolean).join("\n");});function w(e, t, n, r) {var i = n ? "" : r.css;if (e.styleSheet) e.styleSheet.cssText = k(t, i);else {var a = document.createTextNode(i),o = e.childNodes;o[t] && e.removeChild(o[t]), o.length ? e.insertBefore(a, o[t]) : e.appendChild(a);}}function _(e, t) {var n = t.css,r = t.media;if (r && e.setAttribute("media", r), e.styleSheet) e.styleSheet.cssText = n;else {for (; e.firstChild;) {e.removeChild(e.firstChild);}e.appendChild(document.createTextNode(n));}}function E(e, t, n) {var r = n.css,i = n.sourceMap,a = void 0 === t.convertToAbsoluteUrls && i;(t.convertToAbsoluteUrls || a) && (r = d(r)), i && (r += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(i)))) + " */");var o = new Blob([r], { type: "text/css" }),l = e.href;e.href = URL.createObjectURL(o), l && URL.revokeObjectURL(l);}}, function (e, t, n) {"use strict";var r = n(24)();e.exports = function (e) {return e !== r && null !== e;};}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = {};Object.defineProperty(r, "device", { get: function get() {return r.os.isPc ? "pc" : "mobile";} }), Object.defineProperty(r, "browser", { get: function get() {var e = navigator.userAgent.toLowerCase(),t = { ie: /rv:([\d.]+)\) like gecko/, firfox: /firefox\/([\d.]+)/, chrome: /chrome\/([\d.]+)/, opera: /opera.([\d.]+)/, safari: /version\/([\d.]+).*safari/ };return [].concat(Object.keys(t).filter(function (n) {return t[n].test(e);}))[0] || "";} }), Object.defineProperty(r, "os", { get: function get() {var e = navigator.userAgent,t = /(?:Windows Phone)/.test(e),n = /(?:SymbianOS)/.test(e) || t,r = /(?:Android)/.test(e),i = /(?:Firefox)/.test(e),a = /(?:iPad|PlayBook)/.test(e) || r && !/(?:Mobile)/.test(e) || i && /(?:Tablet)/.test(e),o = /(?:iPhone)/.test(e) && !a;return { isTablet: a, isPhone: o, isAndroid: r, isPc: !(o || r || n || a), isSymbian: n, isWindowsPhone: t, isFireFox: i };} }), t.default = r, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(8);function i(e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}var a = { network: { code: 1, msg: "视频下载错误", remark: "只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在" }, mse: { code: 2, msg: "流追加错误", remark: "追加流的时候如果类型不对、无法被正确解码则会触发此类错误" }, parse: { code: 3, msg: "解析错误", remark: "mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误" }, format: { code: 4, msg: "格式错误", remark: "如果浏览器不支持的格式导致播放错误" }, decoder: { code: 5, msg: "解码错误", remark: "浏览器解码异常会抛出此类型错误" }, runtime: { code: 6, msg: "语法错误", remark: "播放器语法错误" }, timeout: { code: 7, msg: "播放超时", remark: "播放过程中无法正常请求下一个分段导致播放中断" }, other: { code: 8, msg: "其他错误", remark: "不可知的错误或被忽略的错误类型" } };t.default = function e(t, n, o, l, s, u, c, p) {var d = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : { line: "", handle: "", msg: "", version: "" },f = arguments[9],g = arguments[10];i(this, e);var h = {};if (arguments.length > 1) h.playerVersion = r.version, h.errorType = t, h.domain = document.domain, h.duration = o, h.currentTime = n, h.networkState = l, h.readyState = s, h.currentSrc = c, h.src = u, h.ended = p, h.errd = d, h.ex = (a[t] || {}).msg, h.errorCode = f, h.mediaError = g;else {var y = arguments[0];Object.keys(y).map(function (e) {h[e] = y[e];}), h.ex = (y.type && a[y.type] || {}).msg;}return h;}, e.exports = t.default;}, function (e, t, n) {"use strict";e.exports = function (e) {return null != e;};}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}();var i = function () {function e(t) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, e), this.bufferedList = t;}return r(e, [{ key: "start", value: function value(e) {return this.bufferedList[e].start;} }, { key: "end", value: function value(e) {return this.bufferedList[e].end;} }, { key: "length", get: function get() {return this.bufferedList.length;} }]), e;}();t.default = i, e.exports = t.default;}, function (e) {e.exports = JSON.parse('{"version":"2.24.3"}');}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = function e(t, n, r) {null === t && (t = Function.prototype);var i = Object.getOwnPropertyDescriptor(t, n);if (void 0 === i) {var a = Object.getPrototypeOf(t);return null === a ? void 0 : e(a, n, r);}if ("value" in i) return i.value;var o = i.get;return void 0 !== o ? o.call(r) : void 0;},a = f(n(11)),o = n(0),l = f(n(4)),s = f(n(7)),u = f(n(5)),c = f(n(31)),p = f(n(10));n(34);var d = n(8);function f(e) {return e && e.__esModule ? e : { default: e };}function g(e, t) {if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != typeof t && "function" != typeof t ? e : t;}var h = function (e) {function t(e) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, t);var n = g(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));if (n.config = (0, o.deepCopy)({ width: 600, height: 337.5, ignores: [], whitelist: [], lang: (document.documentElement.getAttribute("lang") || navigator.language || "zh-cn").toLocaleLowerCase(), inactive: 3e3, volume: .6, controls: !0, controlsList: ["nodownload"] }, e), n.version = d.version, n.userTimer = null, n.waitTimer = null, n.history = [], n.isProgressMoving = !1, n.root = (0, o.findDom)(document, "#" + n.config.id), n.controls = (0, o.createDom)("xg-controls", "", { unselectable: "on", onselectstart: "return false" }, "xgplayer-controls"), n.config.isShowControl && (n.controls.style.display = "none"), !n.root) {var r = n.config.el;if (!r || 1 !== r.nodeType) return n.emit("error", new u.default({ type: "use", errd: { line: 45, handle: "Constructor", msg: "container id can't be empty" }, vid: n.config.vid })), __f__("error", "container id can't be empty", " at node_modules/xgplayer/dist/index.js:1"), !1, g(n, !1);n.root = r;}if ((0, o.addClass)(n.root, "xgplayer xgplayer-" + l.default.device + " xgplayer-nostart " + (n.config.controls ? "" : "xgplayer-no-controls")), n.root.appendChild(n.controls), n.config.fluid ? (n.root.style["max-width"] = "100%", n.root.style.width = "100%", n.root.style.height = "0", n.root.style["padding-top"] = 100 * n.config.height / n.config.width + "%", n.video.style.position = "absolute", n.video.style.top = "0", n.video.style.left = "0") : (n.config.width && ("number" != typeof n.config.width ? n.root.style.width = n.config.width : n.root.style.width = n.config.width + "px"), n.config.height && ("number" != typeof n.config.height ? n.root.style.height = n.config.height : n.root.style.height = n.config.height + "px")), n.config.execBeforePluginsCall && n.config.execBeforePluginsCall.forEach(function (e) {e.call(n, n);}), n.config.closeI18n || t.install(p.default.name, p.default.method), n.config.controlStyle && "String" === (0, o.typeOf)(n.config.controlStyle)) {var i = n;fetch(i.config.controlStyle, { method: "GET", headers: { Accept: "application/json" } }).then(function (e) {e.ok && e.json().then(function (e) {for (var t in e) {e.hasOwnProperty(t) && (i.config[t] = e[t]);}i.pluginsCall();});}).catch(function (e) {__f__("log", "Fetch错误:" + e, " at node_modules/xgplayer/dist/index.js:1");});} else n.pluginsCall();n.config.controlPlugins && t.controlsRun(n.config.controlPlugins, n), n.ev.forEach(function (e) {var t = Object.keys(e)[0],r = n[e[t]];r && n.on(t, r);}), ["focus", "blur"].forEach(function (e) {n.on(e, n["on" + e.charAt(0).toUpperCase() + e.slice(1)]);});var a = n;return n.mousemoveFunc = function () {a.emit("focus"), a.config.closeFocusVideoFocus || a.video.focus();}, n.root.addEventListener("mousemove", n.mousemoveFunc), n.playFunc = function () {a.emit("focus"), a.config.closePlayVideoFocus || a.video.focus();}, a.once("play", n.playFunc), n.getVideoSize = function () {if (this.video.videoWidth && this.video.videoHeight) {var e = a.root.getBoundingClientRect();"auto" === a.config.fitVideoSize ? e.width / e.height > this.video.videoWidth / this.video.videoHeight ? a.root.style.height = this.video.videoHeight / this.video.videoWidth * e.width + "px" : a.root.style.width = this.video.videoWidth / this.video.videoHeight * e.height + "px" : "fixWidth" === a.config.fitVideoSize ? a.root.style.height = this.video.videoHeight / this.video.videoWidth * e.width + "px" : "fixHeight" === a.config.fitVideoSize && (a.root.style.width = this.video.videoWidth / this.video.videoHeight * e.height + "px");}}, a.once("loadeddata", n.getVideoSize), setTimeout(function () {n.emit("ready"), n.isReady = !0;}, 0), n.config.videoInit && (0, o.hasClass)(n.root, "xgplayer-nostart") && n.start(), a.config.rotate && (a.on("requestFullscreen", n.updateRotateDeg), a.on("exitFullscreen", n.updateRotateDeg)), a.once("destroy", function e() {a.root.removeEventListener("mousemove", a.mousemoveFunc), a.off("destroy", e);}), n;}return function (e, t) {if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);}(t, e), r(t, [{ key: "attachVideo", value: function value() {var e = this;this.video && 1 === this.video.nodeType && this.root.insertBefore(this.video, this.root.firstChild), setTimeout(function () {e.emit("complete"), e.danmu && "function" == typeof e.danmu.resize && e.danmu.resize();}, 1);} }, { key: "start", value: function value() {var e = this,t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.config.url;if (this.video) {var n = this;t && "" !== t || this.emit("urlNull"), this.canPlayFunc = function () {n.off("canplay", n.canPlayFunc);var e = n.video.play();void 0 !== e && e && e.then(function () {n.emit("autoplay started");}).catch(function () {n.emit("autoplay was prevented"), (0, o.addClass)(n.root, "xgplayer-is-autoplay");});}, "Array" !== (0, o.typeOf)(t) ? "String" === (0, o.typeOf)(t) && t.indexOf("blob:") > -1 && t === this.video.src || (this.video.src = t) : t.forEach(function (t) {e.video.appendChild((0, o.createDom)("source", "", { src: "" + t.src, type: "" + (t.type || "") }));}), this.config.autoplay && (l.default.os.isPhone ? this.canPlayFunc() : this.on("canplay", this.canPlayFunc)), this.config.disableStartLoad || this.video.load(), this.attachVideo();}} }, { key: "reload", value: function value() {this.video.load(), this.reloadFunc = function () {var e = this.play();void 0 !== e && e && e.catch(function (e) {});}, this.once("loadeddata", this.reloadFunc);} }, { key: "destroy", value: function value() {var e = this,n = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0],r = this;for (var a in clearInterval(this.bulletResizeTimer), this._interval) {clearInterval(this._interval[a]), this._interval[a] = null;}function o() {if (this.emit("destroy"), this.video.removeAttribute("src"), this.video.load(), n) {this.root.innerHTML = "";var e = this.root.className.split(" ");e.length > 0 ? this.root.className = e.filter(function (e) {return e.indexOf("xgplayer") < 0;}).join(" ") : this.root.className = "";}for (var t in this) {delete this[t];}(0, c.default)(this);}this.checkTimer && clearInterval(this.checkTimer), this.waitTimer && clearTimeout(this.waitTimer), this.ev.forEach(function (t) {var n = Object.keys(t)[0],r = e[t[n]];r && e.off(n, r);}), this.loadeddataFunc && this.off("loadeddata", this.loadeddataFunc), this.reloadFunc && this.off("loadeddata", this.reloadFunc), this.replayFunc && this.off("play", this.replayFunc), this.playFunc && this.off("play", this.playFunc), this.getVideoSize && this.off("loadeddata", this.getVideoSize), ["focus", "blur"].forEach(function (t) {e.off(t, e["on" + t.charAt(0).toUpperCase() + t.slice(1)]);}), this.config.keyShortcut && "on" !== this.config.keyShortcut || ["video", "controls"].forEach(function (t) {e[t] && e[t].removeEventListener("keydown", function (e) {r.onKeydown(e, r);});}), this.paused ? o.call(this) : (this.pause(), this.once("pause", o)), i(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this);} }, { key: "replay", value: function value() {var e = this._replay;if ((0, o.removeClass)(this.root, "xgplayer-ended"), l.default.browser.indexOf("ie") > -1 && (this.emit("play"), this.emit("playing")), e && e instanceof Function) e();else {this.currentTime = 0;var t = this.play();void 0 !== t && t && t.catch(function (e) {});}} }, { key: "userGestureTrigEvent", value: function value(e, t) {var n = this,r = function r(e, t) {n.emit(e, t);};this.config.userGestureEventMiddleware && "function" == typeof this.config.userGestureEventMiddleware[e] ? this.config.userGestureEventMiddleware[e].call(this, this, e, t, r) : r.call(this, e, t);} }, { key: "pluginsCall", value: function value() {var e = this;t.plugins.s_i18n && t.plugins.s_i18n.call(this, this);var n = this;if (t.plugins) {var r = this.config.ignores;Object.keys(t.plugins).forEach(function (i) {var a = t.plugins[i];a && "function" == typeof a ? r.some(function (e) {return i === e || i === "s_" + e;}) || "s_i18n" === i || (["pc", "tablet", "mobile"].some(function (e) {return e === i;}) ? i === l.default.device && setTimeout(function () {n.video && a.call(n, n);}, 0) : a.call(e, e)) : __f__("warn", "plugin name", i, "is invalid", " at node_modules/xgplayer/dist/index.js:1");});}} }, { key: "onFocus", value: function value() {var e = this;(0, o.hasClass)(this.root, "xgplayer-inactive") && e.emit("controlShow"), (0, o.removeClass)(this.root, "xgplayer-inactive"), e.userTimer && clearTimeout(e.userTimer), e.userTimer = setTimeout(function () {e.emit("blur");}, e.config.inactive);} }, { key: "onBlur", value: function value() {!this.config.enablePausedInactive && this.paused || this.ended || this.config.closeInactive || ((0, o.hasClass)(this.root, "xgplayer-inactive") || this.emit("controlHide"), (0, o.addClass)(this.root, "xgplayer-inactive"));} }, { key: "onPlay", value: function value() {(0, o.addClass)(this.root, "xgplayer-isloading"), (0, o.addClass)(this.root, "xgplayer-playing"), (0, o.removeClass)(this.root, "xgplayer-pause");} }, { key: "onPause", value: function value() {(0, o.addClass)(this.root, "xgplayer-pause"), this.userTimer && clearTimeout(this.userTimer), this.emit("focus");} }, { key: "onEnded", value: function value() {(0, o.addClass)(this.root, "xgplayer-ended"), (0, o.removeClass)(this.root, "xgplayer-playing");} }, { key: "onSeeking", value: function value() {this.isSeeking = !0, this.onWaiting();} }, { key: "onSeeked", value: function value() {this.isSeeking = !1, this.waitTimer && clearTimeout(this.waitTimer), (0, o.removeClass)(this.root, "xgplayer-isloading");} }, { key: "onWaiting", value: function value() {var e = this;e.waitTimer && clearTimeout(e.waitTimer), e.checkTimer && (clearInterval(e.checkTimer), e.checkTimer = null);var t = e.currentTime;e.waitTimer = setTimeout(function () {(0, o.addClass)(e.root, "xgplayer-isloading"), e.checkTimer = setInterval(function () {e.currentTime !== t && ((0, o.removeClass)(e.root, "xgplayer-isloading"), clearInterval(e.checkTimer), e.checkTimer = null);}, 1e3);}, 500);} }, { key: "onPlaying", value: function value() {this.paused || (this.isSeeking = !1, this.waitTimer && clearTimeout(this.waitTimer), (0, o.removeClass)(this.root, "xgplayer-isloading xgplayer-nostart xgplayer-pause xgplayer-ended xgplayer-is-error xgplayer-replay"), (0, o.addClass)(this.root, "xgplayer-playing"));} }], [{ key: "install", value: function value(e, n) {(0, o.checkIsBrowser)() && (t.plugins || (t.plugins = {}), t.plugins[e] || (t.plugins[e] = n));} }, { key: "installAll", value: function value(e) {for (var n = 0; n < e.length; n++) {t.install(e[n].name, e[n].method);}} }, { key: "use", value: function value(e, n) {t.plugins || (t.plugins = {}), t.plugins[e] = n;} }, { key: "useAll", value: function value(e) {for (var n in e) {t.use(e[n].name, e[n].method);}} }, { key: "controlsRun", value: function value(e, t) {e.forEach(function (e) {e.method.call(t);});} }]), t;}(a.default);h.util = o.util, h.sniffer = l.default, h.Errors = u.default, h.XgplayerTimeRange = s.default, t.default = h, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "s_i18n", method: function method() {var e = this,t = { en: { HAVE_NOTHING: "There is no information on whether audio/video is ready", HAVE_METADATA: "Audio/video metadata is ready ", HAVE_CURRENT_DATA: "Data about the current play location is available, but there is not enough data to play the next frame/millisecond", HAVE_FUTURE_DATA: "Current and at least one frame of data is available", HAVE_ENOUGH_DATA: "The available data is sufficient to start playing", NETWORK_EMPTY: "Audio/video has not been initialized", NETWORK_IDLE: "Audio/video is active and has been selected for resources, but no network is used", NETWORK_LOADING: "The browser is downloading the data", NETWORK_NO_SOURCE: "No audio/video source was found", MEDIA_ERR_ABORTED: "The fetch process is aborted by the user", MEDIA_ERR_NETWORK: "An error occurred while downloading", MEDIA_ERR_DECODE: "An error occurred while decoding", MEDIA_ERR_SRC_NOT_SUPPORTED: "Audio/video is not supported", REPLAY: "Replay", ERROR: "Network is offline", PLAY_TIPS: "Play", PAUSE_TIPS: "Pause", PLAYNEXT_TIPS: "Play next", DOWNLOAD_TIPS: "Download", ROTATE_TIPS: "Rotate", RELOAD_TIPS: "Reload", FULLSCREEN_TIPS: "Fullscreen", EXITFULLSCREEN_TIPS: "Exit fullscreen", CSSFULLSCREEN_TIPS: "Cssfullscreen", EXITCSSFULLSCREEN_TIPS: "Exit cssfullscreen", TEXTTRACK: "Caption", PIP: "Pip", MINIPLAYER: "Miniplayer", SCREENSHOT: "Screenshot", LIVE: "LIVE", OFF: "Off", MINIPLAYER_DRAG: "Click and hold to drag", AIRPLAY_TIPS: "Airplay" }, "zh-cn": { HAVE_NOTHING: "没有关于音频/视频是否就绪的信息", HAVE_METADATA: "音频/视频的元数据已就绪", HAVE_CURRENT_DATA: "关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒", HAVE_FUTURE_DATA: "当前及至少下一帧的数据是可用的", HAVE_ENOUGH_DATA: "可用数据足以开始播放", NETWORK_EMPTY: "音频/视频尚未初始化", NETWORK_IDLE: "音频/视频是活动的且已选取资源，但并未使用网络", NETWORK_LOADING: "浏览器正在下载数据", NETWORK_NO_SOURCE: "未找到音频/视频来源", MEDIA_ERR_ABORTED: "取回过程被用户中止", MEDIA_ERR_NETWORK: "当下载时发生错误", MEDIA_ERR_DECODE: "当解码时发生错误", MEDIA_ERR_SRC_NOT_SUPPORTED: "不支持的音频/视频格式", REPLAY: "重播", ERROR: "网络连接似乎出现了问题", PLAY_TIPS: "播放", PAUSE_TIPS: "暂停", PLAYNEXT_TIPS: "下一集", DOWNLOAD_TIPS: "下载", ROTATE_TIPS: "旋转", RELOAD_TIPS: "重新载入", FULLSCREEN_TIPS: "进入全屏", EXITFULLSCREEN_TIPS: "退出全屏", CSSFULLSCREEN_TIPS: "进入样式全屏", EXITCSSFULLSCREEN_TIPS: "退出样式全屏", TEXTTRACK: "字幕", PIP: "画中画", MINIPLAYER: "迷你播放器", SCREENSHOT: "截图", LIVE: "正在直播", OFF: "关闭", MINIPLAYER_DRAG: "点击按住可拖动视频", AIRPLAY_TIPS: "隔空播放" }, "zh-hk": { HAVE_NOTHING: "沒有關於音頻/視頻是否就緒的信息", HAVE_METADATA: "音頻/視頻的元數據已就緒", HAVE_CURRENT_DATA: "關於當前播放位置的數據是可用的，但沒有足夠的數據來播放下壹幀/毫秒", HAVE_FUTURE_DATA: "當前及至少下壹幀的數據是可用的", HAVE_ENOUGH_DATA: "可用數據足以開始播放", NETWORK_EMPTY: "音頻/視頻尚未初始化", NETWORK_IDLE: "音頻/視頻是活動的且已選取資源，但並未使用網絡", NETWORK_LOADING: "瀏覽器正在下載數據", NETWORK_NO_SOURCE: "未找到音頻/視頻來源", MEDIA_ERR_ABORTED: "取回過程被用戶中止", MEDIA_ERR_NETWORK: "當下載時發生錯誤", MEDIA_ERR_DECODE: "當解碼時發生錯誤", MEDIA_ERR_SRC_NOT_SUPPORTED: "不支持的音頻/視頻格式", REPLAY: "重播", ERROR: "網絡連接似乎出現了問題", PLAY_TIPS: "播放", PAUSE_TIPS: "暫停", PLAYNEXT_TIPS: "下壹集", DOWNLOAD_TIPS: "下載", ROTATE_TIPS: "旋轉", RELOAD_TIPS: "重新載入", FULLSCREEN_TIPS: "進入全屏", EXITFULLSCREEN_TIPS: "退出全屏", CSSFULLSCREEN_TIPS: "進入樣式全屏", EXITCSSFULLSCREEN_TIPS: "退出樣式全屏", TEXTTRACK: "字幕", PIP: "畫中畫", MINIPLAYER: "迷妳播放器", SCREENSHOT: "截圖", LIVE: "正在直播", OFF: "關閉", MINIPLAYER_DRAG: "點擊按住可拖動視頻", AIRPLAY_TIPS: "隔空播放" }, jp: { HAVE_NOTHING: "オーディオ/ビデオが準備できているか情報がありません", HAVE_METADATA: "オーディオ/ビデオのメタデータは準備できています", HAVE_CURRENT_DATA: "現在の再生位置に関するデータは利用可能ですが、次のフレーム/ミリ秒を再生するのに十分なデータがありません", HAVE_FUTURE_DATA: "現在、少なくとも次のフレームのデータが利用可能です", HAVE_ENOUGH_DATA: "利用可能なデータは再生を開始するのに十分です", NETWORK_EMPTY: "オーディオ/ビデオが初期化されていません", NETWORK_IDLE: "オーディオ/ビデオはアクティブでリソースが選択されていますが、ネットワークが使用されていません", NETWORK_LOADING: "ブラウザーはデータをダウンロードしています", NETWORK_NO_SOURCE: "オーディオ/ビデオ のソースが見つかりません", MEDIA_ERR_ABORTED: "ユーザーによってフェッチプロセスが中止されました", MEDIA_ERR_NETWORK: "ダウンロード中にエラーが発生しました", MEDIA_ERR_DECODE: "デコード中にエラーが発生しました", MEDIA_ERR_SRC_NOT_SUPPORTED: "オーディオ/ビデオ の形式がサポートされていません", REPLAY: "リプレイ", ERROR: "ネットワークの接続に問題が発生しました", PLAY_TIPS: "プレイ", PAUSE_TIPS: "一時停止", PLAYNEXT_TIPS: "次をプレイ", DOWNLOAD_TIPS: "ダウンロード", ROTATE_TIPS: "回転", RELOAD_TIPS: "再読み込み", FULLSCREEN_TIPS: "フルスクリーン", EXITFULLSCREEN_TIPS: "フルスクリーンを終了", CSSFULLSCREEN_TIPS: "シアターモード", EXITCSSFULLSCREEN_TIPS: "シアターモードを終了", TEXTTRACK: "字幕", PIP: "ミニプレーヤー", MINIPLAYER: "ミニプレーヤー", SCREENSHOT: "スクリーンショット", LIVE: "生放送", OFF: "オフ", MINIPLAYER_DRAG: "ボタンを押して働画をドラッグする", AIRPLAY_TIPS: "隔空放送" } };Object.defineProperty(e, "lang", { get: function get() {return e.config && t[e.config.lang] || t.en;}, set: function set(e) {"Object" === (0, r.typeOf)(e) && Object.keys(e).forEach(function (n) {t[n] = e[n];});} });} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = l(n(12)),a = n(0),o = l(n(5));function l(e) {return e && e.__esModule ? e : { default: e };}var s = function () {function e(t) {var n = this;!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, e), this._hasStart = !1, this.videoConfig = { controls: !!t.isShowControl, autoplay: t.autoplay, playsinline: t.playsinline, "webkit-playsinline": t.playsinline, "x5-playsinline": t.playsinline, "x5-video-player-type": t["x5-video-player-type"] || t.x5VideoPlayerType, "x5-video-player-fullscreen": t["x5-video-player-fullscreen"] || t.x5VideoPlayerFullscreen, "x5-video-orientation": t["x5-video-orientation"] || t.x5VideoOrientation, airplay: t.airplay, "webkit-airplay": t.airplay, tabindex: 2, mediaType: t.mediaType || "video" }, t.muted && (this.videoConfig.muted = "muted"), t.loop && (this.videoConfig.loop = "loop");var r = "";if (this.textTrackShowDefault = !0, t.nativeTextTrack && Array.isArray(t.nativeTextTrack) && (t.nativeTextTrack.length > 0 && !t.nativeTextTrack.some(function (e) {return e.default;}) && (t.nativeTextTrack[0].default = !0, this.textTrackShowDefault = !1), t.nativeTextTrack.some(function (e) {if (e.src && e.label && e.default) return r += '<track src="' + e.src + '" ', e.kind && (r += 'kind="' + e.kind + '" '), r += 'label="' + e.label + '" ', e.srclang && (r += 'srclang="' + e.srclang + '" '), r += (e.default ? "default" : "") + ">", !0;}), this.videoConfig.crossorigin = "anonymous"), t.textTrackStyle) {var o = document.createElement("style");this.textTrackStyle = o, document.head.appendChild(o);var l = "";for (var s in t.textTrackStyle) {l += s + ": " + t.textTrackStyle[s] + ";";}var u = t.id ? "#" + t.id : t.el.id ? "#" + t.el.id : "." + t.el.className;o.sheet.insertRule ? o.sheet.insertRule(u + " video::cue { " + l + " }", 0) : o.sheet.addRule && o.sheet.addRule(u + " video::cue", l);}var c = t.el ? t.el : (0, a.findDom)(document, "#" + t.id),p = this.constructor.XgVideoProxy;(p && this.videoConfig.mediaType === p.mediaType ? this.video = new p(c, t) : this.video = (0, a.createDom)(this.videoConfig.mediaType, r, this.videoConfig, ""), t.videoStyle && Object.keys(t.videoStyle).forEach(function (e) {(0, a.setStyle)(n.video, e, t.videoStyle[e]);}), !this.textTrackShowDefault && r) && (this.video.getElementsByTagName("Track")[0].track.mode = "hidden");t.autoplay && (this.video.autoplay = !0, t.autoplayMuted && (this.video.muted = !0)), this.ev = ["play", "playing", "pause", "ended", "error", "seeking", "seeked", "progress", "timeupdate", "waiting", "canplay", "canplaythrough", "durationchange", "volumechange", "loadedmetadata", "loadeddata", "loadstart"].map(function (e) {return t = {}, n = e, r = "on" + e.charAt(0).toUpperCase() + e.slice(1), n in t ? Object.defineProperty(t, n, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : t[n] = r, t;var t, n, r;}), (0, i.default)(this), this._interval = {};var d = "0,0",f = this,g = function g(e) {n && ("play" === e ? n.hasStart = !0 : "canplay" === e ? (0, a.removeClass)(n.root, "xgplayer-is-enter") : "waiting" === e ? n.inWaitingStart = new Date().getTime() : "playing" === e && ((0, a.removeClass)(n.root, "xgplayer-is-enter"), n.inWaitingStart && (n.inWaitingStart = void 0)), "error" === e ? n._onError(e) : n.emit(e, n), n.hasOwnProperty("_interval") && (["ended", "error", "timeupdate"].indexOf(e) < 0 ? ((0, a._clearInterval)(n, "bufferedChange"), (0, a._setInterval)(n, "bufferedChange", function () {if (this.video && this.video.buffered) {for (var e = [], t = 0, n = this.video.buffered.length; t < n; t++) {e.push([this.video.buffered.start(t), this.video.buffered.end(t)]);}e.toString() !== d && (d = e.toString(), this.emit("bufferedChange", e));}}, 200)) : "timeupdate" !== e && (0, a._clearInterval)(n, "bufferedChange")));},h = function h(e) {t.videoEventMiddleware && "function" == typeof t.videoEventMiddleware[e] ? t.videoEventMiddleware[e].call(n, n, e, g) : g.call(n, e);};this.ev.forEach(function (e) {f.evItem = Object.keys(e)[0];var t = Object.keys(e)[0];f.video.addEventListener(Object.keys(e)[0], h.bind(f, t));});}return r(e, [{ key: "_onError", value: function value(e) {this.video && this.video.error && this.emit(e, new o.default("other", this.currentTime, this.duration, this.networkState, this.readyState, this.currentSrc, this.src, this.ended, { line: 162, msg: this.error, handle: "Constructor" }, this.video.error.code, this.video.error));} }, { key: "destroy", value: function value() {this.textTrackStyle && this.textTrackStyle.parentNode.removeChild(this.textTrackStyle);} }, { key: "play", value: function value() {return this.video.play();} }, { key: "pause", value: function value() {this.video.pause();} }, { key: "canPlayType", value: function value(e) {return this.video.canPlayType(e);} }, { key: "getBufferedRange", value: function value(e) {var t = [0, 0],n = this.video;e || (e = n.buffered);var r = n.currentTime;if (e) for (var i = 0, a = e.length; i < a && (t[0] = e.start(i), t[1] = e.end(i), !(t[0] <= r && r <= t[1])); i++) {;}return t[0] - r <= 0 && r - t[1] <= 0 ? t : [0, 0];} }, { key: "proxyOn", value: function value(e, t) {(0, a.on)(this, e, t, "destroy");} }, { key: "proxyOnce", value: function value(e, t) {(0, a.once)(this, e, t, "destroy");} }, { key: "hasStart", get: function get() {return this._hasStart;}, set: function set(e) {"boolean" != typeof e || !0 !== e || this._hasStart || (this._hasStart = !0, this.emit("hasstart"));} }, { key: "autoplay", set: function set(e) {this.video && (this.video.autoplay = e);}, get: function get() {return !!this.video && this.video.autoplay;} }, { key: "buffered", get: function get() {return this.video ? this.video.buffered : void 0;} }, { key: "buffered2", get: function get() {return (0, a.getBuffered2)(this.video.buffered);} }, { key: "crossOrigin", get: function get() {return !!this.video && this.video.crossOrigin;}, set: function set(e) {this.video && (this.video.crossOrigin = e);} }, { key: "currentSrc", get: function get() {return this.video ? this.video.currentSrc : void 0;} }, { key: "currentTime", get: function get() {return this.video && this.video.currentTime || 0;}, set: function set(e) {var t = this;("function" != typeof isFinite || isFinite(e)) && ((0, a.hasClass)(this.root, "xgplayer-ended") ? (this.once("playing", function () {t.video.currentTime = e;}), this.replay()) : this.video.currentTime = e, this.emit("currentTimeChange"));} }, { key: "defaultMuted", get: function get() {return !!this.video && this.video.defaultMuted;}, set: function set(e) {this.video && (this.video.defaultMuted = e);} }, { key: "duration", get: function get() {return this.config.duration ? this.video ? Math.min(this.config.duration, this.video.duration) : this.config.duration : this.video ? this.video.duration : null;} }, { key: "ended", get: function get() {return !this.video || this.video.ended || !1;} }, { key: "error", get: function get() {var e = this.video.error;if (!e) return null;var t = [{ en: "MEDIA_ERR_ABORTED", cn: "取回过程被用户中止" }, { en: "MEDIA_ERR_NETWORK", cn: "当下载时发生错误" }, { en: "MEDIA_ERR_DECODE", cn: "当解码时发生错误" }, { en: "MEDIA_ERR_SRC_NOT_SUPPORTED", cn: "不支持音频/视频" }];return this.lang ? this.lang[t[e.code - 1].en] : t[e.code - 1].en;} }, { key: "loop", get: function get() {return !!this.video && this.video.loop;}, set: function set(e) {this.video && (this.video.loop = e);} }, { key: "muted", get: function get() {return !!this.video && this.video.muted;}, set: function set(e) {this.video && (this.video.muted = e);} }, { key: "networkState", get: function get() {var e = [{ en: "NETWORK_EMPTY", cn: "音频/视频尚未初始化" }, { en: "NETWORK_IDLE", cn: "音频/视频是活动的且已选取资源，但并未使用网络" }, { en: "NETWORK_LOADING", cn: "浏览器正在下载数据" }, { en: "NETWORK_NO_SOURCE", cn: "未找到音频/视频来源" }];return this.lang ? this.lang[e[this.video.networkState].en] : e[this.video.networkState].en;} }, { key: "paused", get: function get() {return !!this.video && this.video.paused;} }, { key: "playbackRate", get: function get() {return this.video ? this.video.playbackRate : 1;}, set: function set(e) {this.video && (this.video.playbackRate = e);} }, { key: "played", get: function get() {return this.video ? this.video.played : void 0;} }, { key: "preload", get: function get() {return !!this.video && this.video.preload;}, set: function set(e) {this.video && (this.video.preload = e);} }, { key: "readyState", get: function get() {var e = [{ en: "HAVE_NOTHING", cn: "没有关于音频/视频是否就绪的信息" }, { en: "HAVE_METADATA", cn: "关于音频/视频就绪的元数据" }, { en: "HAVE_CURRENT_DATA", cn: "关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒" }, { en: "HAVE_FUTURE_DATA", cn: "当前及至少下一帧的数据是可用的" }, { en: "HAVE_ENOUGH_DATA", cn: "可用数据足以开始播放" }];return this.lang ? this.lang[e[this.video.readyState].en] : e[this.video.readyState];} }, { key: "seekable", get: function get() {return !!this.video && this.video.seekable;} }, { key: "seeking", get: function get() {return !!this.video && this.video.seeking;} }, { key: "src", get: function get() {return this.video ? this.video.src : void 0;}, set: function set(e) {(0, a.hasClass)(this.root, "xgplayer-ended") || this.emit("urlchange", this.video.src), this.autoplay = !0, this.video.pause(), this.video.src = e, this.emit("srcChange");} }, { key: "poster", set: function set(e) {var t = (0, a.findDom)(this.root, ".xgplayer-poster");t && (t.style.backgroundImage = "url(" + e + ")");} }, { key: "volume", get: function get() {return this.video ? this.video.volume : 1;}, set: function set(e) {this.video && (this.video.volume = e);} }, { key: "fullscreen", get: function get() {return (0, a.hasClass)(this.root, "xgplayer-is-fullscreen") || (0, a.hasClass)(this.root, "xgplayer-fullscreen-active");} }, { key: "bullet", get: function get() {return !!(0, a.findDom)(this.root, "xg-danmu") && (0, a.hasClass)((0, a.findDom)(this.root, "xg-danmu"), "xgplayer-has-danmu");} }, { key: "textTrack", get: function get() {return (0, a.hasClass)(this.root, "xgplayer-is-textTrack");} }, { key: "pip", get: function get() {return (0, a.hasClass)(this.root, "xgplayer-pip-active");} }]), e;}();t.default = s, e.exports = t.default;}, function (e, t, n) {"use strict";var r,i,a,o,l,s,u,c = n(13),p = n(30),d = Function.prototype.apply,f = Function.prototype.call,g = Object.create,h = Object.defineProperty,y = Object.defineProperties,x = Object.prototype.hasOwnProperty,v = { configurable: !0, enumerable: !1, writable: !0 };i = function i(e, t) {var _n2, i;return p(t), i = this, r.call(this, e, _n2 = function n() {a.call(i, e, _n2), d.call(t, this, arguments);}), _n2.__eeOnceListener__ = t, this;}, l = { on: r = function r(e, t) {var n;return p(t), x.call(this, "__ee__") ? n = this.__ee__ : (n = v.value = g(null), h(this, "__ee__", v), v.value = null), n[e] ? "object" == typeof n[e] ? n[e].push(t) : n[e] = [n[e], t] : n[e] = t, this;}, once: i, off: a = function a(e, t) {var n, r, i, a;if (p(t), !x.call(this, "__ee__")) return this;if (!(n = this.__ee__)[e]) return this;if ("object" == typeof (r = n[e])) for (a = 0; i = r[a]; ++a) {i !== t && i.__eeOnceListener__ !== t || (2 === r.length ? n[e] = r[a ? 0 : 1] : r.splice(a, 1));} else r !== t && r.__eeOnceListener__ !== t || delete n[e];return this;}, emit: o = function o(e) {var t, n, r, i, a;if (x.call(this, "__ee__") && (i = this.__ee__[e])) if ("object" == typeof i) {for (n = arguments.length, a = new Array(n - 1), t = 1; t < n; ++t) {a[t - 1] = arguments[t];}for (i = i.slice(), t = 0; r = i[t]; ++t) {d.call(r, this, a);}} else switch (arguments.length) {case 1:f.call(i, this);break;case 2:f.call(i, this, arguments[1]);break;case 3:f.call(i, this, arguments[1], arguments[2]);break;default:for (n = arguments.length, a = new Array(n - 1), t = 1; t < n; ++t) {a[t - 1] = arguments[t];}d.call(i, this, a);}} }, s = { on: c(r), once: c(i), off: c(a), emit: c(o) }, u = y({}, s), e.exports = t = function t(e) {return null == e ? g(u) : y(Object(e), s);}, t.methods = l;}, function (e, t, n) {"use strict";var r = n(6),i = n(14),a = n(18),o = n(26),l = n(27);(e.exports = function (e, t) {var n, i, s, u, c;return arguments.length < 2 || "string" != typeof e ? (u = t, t = e, e = null) : u = arguments[2], r(e) ? (n = l.call(e, "c"), i = l.call(e, "e"), s = l.call(e, "w")) : (n = s = !0, i = !1), c = { value: t, configurable: n, enumerable: i, writable: s }, u ? a(o(u), c) : c;}).gs = function (e, t, n) {var s, u, c, p;return "string" != typeof e ? (c = n, n = t, t = e, e = null) : c = arguments[3], r(t) ? i(t) ? r(n) ? i(n) || (c = n, n = void 0) : n = void 0 : (c = t, t = n = void 0) : t = void 0, r(e) ? (s = l.call(e, "c"), u = l.call(e, "e")) : (s = !0, u = !1), p = { get: t, set: n, configurable: s, enumerable: u }, c ? a(o(c), p) : p;};}, function (e, t, n) {"use strict";var r = n(15),i = /^\s*class[\s{/}]/,a = Function.prototype.toString;e.exports = function (e) {return !!r(e) && !i.test(a.call(e));};}, function (e, t, n) {"use strict";var r = n(16);e.exports = function (e) {if ("function" != typeof e) return !1;if (!hasOwnProperty.call(e, "length")) return !1;try {if ("number" != typeof e.length) return !1;if ("function" != typeof e.call) return !1;if ("function" != typeof e.apply) return !1;} catch (e) {return !1;}return !r(e);};}, function (e, t, n) {"use strict";var r = n(17);e.exports = function (e) {if (!r(e)) return !1;try {return !!e.constructor && e.constructor.prototype === e;} catch (e) {return !1;}};}, function (e, t, n) {"use strict";var r = n(6),i = { object: !0, function: !0, undefined: !0 };e.exports = function (e) {return !!r(e) && hasOwnProperty.call(i, typeof e);};}, function (e, t, n) {"use strict";e.exports = n(19)() ? Object.assign : n(20);}, function (e, t, n) {"use strict";e.exports = function () {var e,t = Object.assign;return "function" == typeof t && (t(e = { foo: "raz" }, { bar: "dwa" }, { trzy: "trzy" }), e.foo + e.bar + e.trzy === "razdwatrzy");};}, function (e, t, n) {"use strict";var r = n(21),i = n(25),a = Math.max;e.exports = function (e, t) {var n,o,l,s = a(arguments.length, 2);for (e = Object(i(e)), l = function l(r) {try {e[r] = t[r];} catch (e) {n || (n = e);}}, o = 1; o < s; ++o) {r(t = arguments[o]).forEach(l);}if (void 0 !== n) throw n;return e;};}, function (e, t, n) {"use strict";e.exports = n(22)() ? Object.keys : n(23);}, function (e, t, n) {"use strict";e.exports = function () {try {return Object.keys("primitive"), !0;} catch (e) {return !1;}};}, function (e, t, n) {"use strict";var r = n(3),i = Object.keys;e.exports = function (e) {return i(r(e) ? Object(e) : e);};}, function (e, t, n) {"use strict";e.exports = function () {};}, function (e, t, n) {"use strict";var r = n(3);e.exports = function (e) {if (!r(e)) throw new TypeError("Cannot use null or undefined");return e;};}, function (e, t, n) {"use strict";var r = n(3),i = Array.prototype.forEach,a = Object.create,o = function o(e, t) {var n;for (n in e) {t[n] = e[n];}};e.exports = function (e) {var t = a(null);return i.call(arguments, function (e) {r(e) && o(Object(e), t);}), t;};}, function (e, t, n) {"use strict";e.exports = n(28)() ? String.prototype.contains : n(29);}, function (e, t, n) {"use strict";var r = "razdwatrzy";e.exports = function () {return "function" == typeof r.contains && !0 === r.contains("dwa") && !1 === r.contains("foo");};}, function (e, t, n) {"use strict";var r = String.prototype.indexOf;e.exports = function (e) {return r.call(this, e, arguments[1]) > -1;};}, function (e, t, n) {"use strict";e.exports = function (e) {if ("function" != typeof e) throw new TypeError(e + " is not a function");return e;};}, function (e, t, n) {"use strict";var r = n(32),i = Object.prototype.hasOwnProperty;e.exports = function (e) {var t,n = arguments[1];if (r(e), void 0 === n) i.call(e, "__ee__") && delete e.__ee__;else {if (!(t = i.call(e, "__ee__") && e.__ee__)) return;t[n] && delete t[n];}};}, function (e, t, n) {"use strict";var r = n(33);e.exports = function (e) {if (!r(e)) throw new TypeError(e + " is not an Object");return e;};}, function (e, t, n) {"use strict";var r = n(3),i = { function: !0, object: !0 };e.exports = function (e) {return r(e) && i[typeof e] || !1;};}, function (e, t, n) {var r = n(35);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default{background:#000;width:100%;height:100%;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.xgplayer-skin-default *{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}.xgplayer-skin-default.xgplayer-rotate-fullscreen{position:absolute;top:0;left:100%;bottom:0;right:0;height:100vw!important;width:100vh!important;-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.xgplayer-skin-default.xgplayer-is-fullscreen{width:100%!important;height:100%!important;padding-top:0!important;z-index:9999}.xgplayer-skin-default.xgplayer-is-fullscreen.xgplayer-inactive{cursor:none}.xgplayer-skin-default video{width:100%;height:100%;outline:none}.xgplayer-skin-default .xgplayer-none{display:none}@-webkit-keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}@keyframes loadingDashOffset{0%{stroke-dashoffset:236}to{stroke-dashoffset:0}}.xgplayer-skin-default .xgplayer-controls{display:-webkit-flex;display:-moz-box;display:flex;position:absolute;bottom:0;left:0;right:0;height:40px;background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.37),rgba(0,0,0,.75),rgba(0,0,0,.75));z-index:10}.xgplayer-skin-default.xgplayer-inactive .xgplayer-controls,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-progress,.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-time,.xgplayer-skin-default.xgplayer-no-controls .xgplayer-controls,.xgplayer-skin-default.xgplayer-nostart .xgplayer-controls{display:none}.xgplayer-skin-default.xgplayer-is-live .xgplayer-controls .xgplayer-live{display:block}.xgplayer-skin-default .xgplayer-live{display:block;font-size:12px;color:#fff;line-height:40px;-webkit-order:1;-moz-box-ordinal-group:2;order:1}.xgplayer-skin-default .xgplayer-icon{display:block;width:40px;height:40px;overflow:hidden;fill:#fff}.xgplayer-skin-default .xgplayer-icon svg{position:absolute}.xgplayer-skin-default .xgplayer-tips{background:rgba(0,0,0,.54);border-radius:1px;display:none;position:absolute;font-family:PingFangSC-Regular;font-size:11px;color:#fff;padding:2px 4px;text-align:center;top:-30px;left:50%;margin-left:-16px;width:auto;white-space:nowrap}.xgplayer-skin-default.xgplayer-mobile .xgplayer-tips{display:none!important}.xgplayer-skin-default .xgplayer-screen-container{display:block;width:100%}", ""]);}, function (e, t) {e.exports = function (e) {var t = "undefined" != typeof window && window.location;if (!t) throw new Error("fixUrls requires window.location");if (!e || "string" != typeof e) return e;var n = t.protocol + "//" + t.host,r = n + t.pathname.replace(/\/[^\/]*$/, "/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function (e, t) {var i,a = t.trim().replace(/^"(.*)"$/, function (e, t) {return t;}).replace(/^'(.*)'$/, function (e, t) {return t;});return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a) ? e : (i = 0 === a.indexOf("//") ? a : 0 === a.indexOf("/") ? n + a : r + a.replace(/^\.\//, ""), "url(" + JSON.stringify(i) + ")");});};}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "mobile", method: function method() {var e = this,t = e.root,n = 0,i = void 0,a = { first: "", second: "" };function o(t) {e.video.addEventListener("touchend", function (t) {e.onElementTouchend(t, e.video);}), e.video.addEventListener("touchstart", function () {e.isTouchMove = !1;}), e.video.addEventListener("touchmove", function () {e.isTouchMove = !0;}), e.config.autoplay && e.start();}e.onElementTouchend = function (e, o) {this.config.closeVideoPreventDefault || e.preventDefault(), this.config.closeVideoStopPropagation || e.stopPropagation();var l = this;if ((0, r.hasClass)(t, "xgplayer-inactive") ? l.emit("focus") : l.emit("blur"), !l.config.closeVideoTouch && !l.isTouchMove) {var s = function s() {i = setTimeout(function () {if ((0, r.hasClass)(l.root, "xgplayer-nostart")) return !1;if (!l.ended) if (l.paused) {var e = l.play();void 0 !== e && e && e.catch(function (e) {});} else l.pause();n = 0;}, 200);};l.config.closeVideoClick || (n++, i && clearTimeout(i), 1 === n ? l.config.enableVideoDbltouch ? a.first = new Date() : s() : 2 === n && l.config.enableVideoDbltouch ? (a.second = new Date(), Math.abs(a.first - a.second) < 400 ? s() : (a.first = new Date(), n = 1)) : n = 0);}}, e.once("ready", o), e.once("destroy", function t() {e.off("ready", o), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "pc", method: function method() {var e = this;if (e.controls && e.video) {var t = e.controls,n = e.root,i = 0,a = void 0;e.onElementClick = function (e, t) {this.config.closeVideoPreventDefault || e.preventDefault(), this.config.closeVideoStopPropagation || e.stopPropagation();var n = this;n.config.closeVideoClick || (i++, a && clearTimeout(a), 1 === i ? a = setTimeout(function () {if ((0, r.hasClass)(n.root, "xgplayer-nostart")) return !1;if (!n.ended) if (n.paused) {var e = n.play();void 0 !== e && e && e.catch(function (e) {});} else n.pause();i = 0;}, 200) : i = 0);}, e.video.addEventListener("click", function (t) {e.onElementClick(t, e.video);}, !1), e.onElementDblclick = function (e, n) {this.config.closeVideoPreventDefault || e.preventDefault(), this.config.closeVideoStopPropagation || e.stopPropagation();if (!this.config.closeVideoDblclick) {var r = t.querySelector(".xgplayer-fullscreen");if (r) {var i = void 0;document.createEvent ? (i = document.createEvent("Event")).initEvent("click", !0, !0) : i = new Event("click"), r.dispatchEvent(i);}}}, e.video.addEventListener("dblclick", function (t) {e.onElementDblclick(t, e.video);}, !1), n.addEventListener("mouseenter", o), n.addEventListener("mouseleave", l), t.addEventListener("mouseenter", function (t) {e.userTimer && clearTimeout(e.userTimer);}), t.addEventListener("mouseleave", function (t) {e.config.closeControlsBlur || e.emit("focus", e);}), t.addEventListener("click", function (e) {e.preventDefault(), e.stopPropagation();}), e.once("ready", s), e.once("destroy", function t() {n.removeEventListener("mouseenter", o), n.removeEventListener("mouseleave", l), e.off("ready", s), e.off("destroy", t);});}function o() {clearTimeout(e.leavePlayerTimer), e.emit("focus", e);}function l() {e.config.closePlayerBlur || (e.leavePlayerTimer = setTimeout(function () {e.emit("blur", e);}, e.config.leavePlayerTime || 0));}function s(t) {e.config.autoplay && e.start();}} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "start", method: function method() {var e = this,t = e.root;function n() {e.off("canplay", n);var t = e.play();void 0 !== t && t && t.catch(function (e) {});}function i() {(0, r.hasClass)(t, "xgplayer-nostart") ? ((0, r.removeClass)(t, "xgplayer-nostart"), (0, r.addClass)(t, "xgplayer-is-enter"), "function" == typeof t.contains ? e.video && 1 === e.video.nodeType && !t.contains(e.video) || e.video && 1 !== e.video.nodeType && "ready" !== e.video.audioPlayer.status ? (e.once("canplay", n), e.start()) : n() : e.video && 1 === e.video.nodeType && !t.querySelector(this.videoConfig.mediaType) || e.video && 1 !== e.video.nodeType && !t.querySelector("canvas") && "ready" !== e.video.audioPlayer.status ? (e.once("canplay", n), e.start()) : n()) : e.paused && ((0, r.removeClass)(t, "xgplayer-nostart xgplayer-isloading"), setTimeout(function () {var t = e.play();void 0 !== t && t && t.catch(function (e) {});}, 10));}e.on("startBtnClick", i), e.once("destroy", function t() {e.off("startBtnClick", i), e.off("canplay", n), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0),i = o(n(41)),a = o(n(42));function o(e) {return e && e.__esModule ? e : { default: e };}n(43);t.default = { name: "s_start", method: function method() {var e = this,t = e.root,n = (0, r.createDom)("xg-start", '<div class="xgplayer-icon-play">' + i.default + '</div>\n                                      <div class="xgplayer-icon-pause">' + a.default + "</div>", {}, "xgplayer-start");function o(e) {(0, r.addClass)(e.root, "xgplayer-skin-default"), e.config && (e.config.autoplay && !(0, r.isWeiXin)() && !(0, r.isUc)() && (0, r.addClass)(e.root, "xgplayer-is-enter"), e.config.lang && "en" === e.config.lang ? (0, r.addClass)(e.root, "xgplayer-lang-is-en") : "jp" === e.config.lang && (0, r.addClass)(e.root, "xgplayer-lang-is-jp"), e.config.enableContextmenu || e.video.addEventListener("contextmenu", function (e) {e.preventDefault(), e.stopPropagation();}));}e.config && e.config.hideStartBtn && (0, r.addClass)(t, "xgplayer-start-hide"), e.isReady ? (t.appendChild(n), o(e)) : e.once("ready", function () {t.appendChild(n), o(e);}), e.once("autoplay was prevented", function () {(0, r.removeClass)(e.root, "xgplayer-is-enter"), (0, r.addClass)(e.root, "xgplayer-nostart");}), e.once("canplay", function () {(0, r.removeClass)(e.root, "xgplayer-is-enter");}), n.onclick = function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("startBtnClick");};} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n  <path transform="translate(15,15) scale(0.04,0.04)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n';}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n  <path transform="translate(15,15) scale(0.04 0.04)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n';}, function (e, t, n) {var r = n(44);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-start{border-radius:50%;display:inline-block;width:70px;height:70px;background:rgba(0,0,0,.38);overflow:hidden;text-align:center;line-height:70px;vertical-align:middle;position:absolute;left:50%;top:50%;z-index:115;margin:-35px auto auto -35px;cursor:pointer}.xgplayer-skin-default .xgplayer-start div{position:absolute}.xgplayer-skin-default .xgplayer-start div svg{fill:hsla(0,0%,100%,.7)}.xgplayer-skin-default .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-start:hover{opacity:.85}.xgplayer-skin-default.xgplayer-pause.xgplayer-start-hide .xgplayer-start,.xgplayer-skin-default.xgplayer-playing .xgplayer-start,.xgplayer-skin-default.xgplayer-playing .xgplayer-start .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-start-hide .xgplayer-start{display:none}.xgplayer-skin-default.xgplayer-playing .xgplayer-start .xgplayer-icon-pause{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-start{display:inline-block}.xgplayer-skin-default.xgplayer-pause .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default.xgplayer-is-replay .xgplayer-start,.xgplayer-skin-default.xgplayer-pause .xgplayer-start .xgplayer-icon-pause{display:none}.xgplayer-skin-default.xgplayer-is-replay .xgplayer-start .xgplayer-icon-play{display:block}.xgplayer-skin-default.xgplayer-is-replay .xgplayer-start .xgplayer-icon-pause{display:none}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "fullscreen", method: function method() {var e = this,t = e.root;function n() {e.config.rotateFullscreen ? (0, r.hasClass)(t, "xgplayer-rotate-fullscreen") ? e.exitRotateFullscreen() : e.getRotateFullscreen() : (0, r.hasClass)(t, "xgplayer-is-fullscreen") ? e.exitFullscreen(t) : e.getFullscreen(t);}function i() {var n = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;n && n === t ? ((0, r.addClass)(t, "xgplayer-is-fullscreen"), e.emit("requestFullscreen")) : (0, r.hasClass)(t, "xgplayer-is-fullscreen") && ((0, r.removeClass)(t, "xgplayer-is-fullscreen"), e.emit("exitFullscreen")), e.danmu && "function" == typeof e.danmu.resize && e.danmu.resize();}e.on("fullscreenBtnClick", n), ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"].forEach(function (e) {document.addEventListener(e, i);}), e.video.addEventListener("webkitbeginfullscreen", function () {(0, r.addClass)(t, "xgplayer-is-fullscreen"), e.emit("requestFullscreen");}), e.video.addEventListener("webkitendfullscreen", function () {(0, r.removeClass)(t, "xgplayer-is-fullscreen"), e.emit("exitFullscreen");}), e.once("destroy", function t() {e.off("fullscreenBtnClick", n), ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"].forEach(function (e) {document.removeEventListener(e, i);}), e.off("destroy", t);}), e.getFullscreen = function (e) {var t = this;if (e.requestFullscreen) {var n = e.requestFullscreen();n && n.catch(function () {t.emit("fullscreen error");});} else e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen ? e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT) : t.video.webkitSupportsFullscreen ? t.video.webkitEnterFullscreen() : e.msRequestFullscreen ? e.msRequestFullscreen() : (0, r.addClass)(e, "xgplayer-is-cssfullscreen");}, e.exitFullscreen = function (e) {document.exitFullscreen ? document.exitFullscreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.msExitFullscreen && document.msExitFullscreen(), (0, r.removeClass)(e, "xgplayer-is-cssfullscreen");}, e.getRotateFullscreen = function () {document.documentElement.style.width = "100%", document.documentElement.style.height = "100%", this.config.fluid && (this.root.style["padding-top"] = "", this.root.style["max-width"] = "unset"), this.root && !(0, r.hasClass)(this.root, "xgplayer-rotate-fullscreen") && (0, r.addClass)(this.root, "xgplayer-rotate-fullscreen"), this.emit("getRotateFullscreen");}, e.exitRotateFullscreen = function () {document.documentElement.style.width = "unset", document.documentElement.style.height = "unset", this.config.fluid && (this.root.style.width = "100%", this.root.style.height = "0", this.root.style["padding-top"] = 100 * this.config.height / this.config.width + "%", this.root.style["max-width"] = "100%"), this.root && (0, r.hasClass)(this.root, "xgplayer-rotate-fullscreen") && (0, r.removeClass)(this.root, "xgplayer-rotate-fullscreen"), this.emit("exitRotateFullscreen");};} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "play", method: function method() {var e = this;function t() {if (e.config.allowPlayAfterEnded || !e.ended) if (e.paused) {var t = e.play();void 0 !== t && t && t.catch(function (e) {});} else e.pause();}e.on("playBtnClick", t), e.once("destroy", function n() {e.off("playBtnClick", t), e.off("destroy", n);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "replay", method: function method() {var e = this,t = e.root;function n() {(0, r.removeClass)(t, "xgplayer-is-replay"), e.replay();}e.on("replayBtnClick", n), e.on("ended", function () {e.config.loop || (0, r.addClass)(t, "xgplayer-is-replay");}), e.once("destroy", function t() {e.off("replayBtnClick", n), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0),i = o(n(49)),a = o(n(50));function o(e) {return e && e.__esModule ? e : { default: e };}n(51);t.default = { name: "s_play", method: function method() {var e = this,t = e.config.playBtn ? e.config.playBtn : {},n = void 0;n = "img" === t.type ? (0, r.createImgBtn)("play", t.url.play, t.width, t.height) : (0, r.createDom)("xg-play", '<xg-icon class="xgplayer-icon">\n                                      <div class="xgplayer-icon-play">' + i.default + '</div>\n                                      <div class="xgplayer-icon-pause">' + a.default + "</div>\n                                     </xg-icon>", {}, "xgplayer-play");var o = {};o.play = e.lang.PLAY_TIPS, o.pause = e.lang.PAUSE_TIPS;var l = (0, r.createDom)("xg-tips", '<span class="xgplayer-tip-play">' + o.play + '</span>\n                                        <span class="xgplayer-tip-pause">' + o.pause + "</span>", {}, "xgplayer-tips");n.appendChild(l), e.once("ready", function () {e.controls && e.controls.appendChild(n);}), ["click", "touchend"].forEach(function (t) {n.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("playBtnClick");});});} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="translate(2,2) scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n';}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="translate(2,2) scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n';}, function (e, t, n) {var r = n(52);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-play,.xgplayer-skin-default .xgplayer-play-img{width:40px;position:relative;-webkit-order:0;-moz-box-ordinal-group:1;order:0;display:block;cursor:pointer;margin-left:3px}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-play .xgplayer-icon{margin-top:3px;width:32px}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-play .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default .xgplayer-play .xgplayer-icon .xgplayer-icon-play{display:block}.xgplayer-skin-default .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:none}.xgplayer-skin-default .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:block}.xgplayer-skin-default .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:none}.xgplayer-skin-default .xgplayer-play-img:hover,.xgplayer-skin-default .xgplayer-play:hover{opacity:.85}.xgplayer-skin-default .xgplayer-play-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-play:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-icon .xgplayer-icon-play{display:none}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:block}.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-icon .xgplayer-icon-play,.xgplayer-skin-default.xgplayer-playing .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default.xgplayer-playing .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-icon .xgplayer-icon-pause,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-icon .xgplayer-icon-pause{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-tips .xgplayer-tip-play,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-tips .xgplayer-tip-play{display:block}.xgplayer-skin-default.xgplayer-pause .xgplayer-play-img .xgplayer-tips .xgplayer-tip-pause,.xgplayer-skin-default.xgplayer-pause .xgplayer-play .xgplayer-tips .xgplayer-tip-pause{display:none}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(54);t.default = { name: "s_poster", method: function method() {var e = this.root;if (this.config.poster) {var t = (0, r.createDom)("xg-poster", "", {}, "xgplayer-poster");t.style.backgroundImage = "url(" + this.config.poster + ")", e.appendChild(t);}} }, e.exports = t.default;}, function (e, t, n) {var r = n(55);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-poster{display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:100;background-size:cover;background-position:50%}.xgplayer-skin-default.xgplayer-nostart .xgplayer-poster{display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(57);t.default = { name: "s_flex", method: function method() {var e = (0, r.createDom)("xg-placeholder", "", {}, "xgplayer-placeholder");this.controls.appendChild(e);} }, e.exports = t.default;}, function (e, t, n) {var r = n(58);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-placeholder{-webkit-flex:1;-moz-box-flex:1;flex:1;-webkit-order:3;-moz-box-ordinal-group:4;order:3;display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0),i = o(n(60)),a = o(n(61));function o(e) {return e && e.__esModule ? e : { default: e };}n(62);t.default = { name: "s_fullscreen", method: function method() {var e = this,t = e.config.fullscreenBtn ? e.config.fullscreenBtn : {},n = void 0;n = "img" === t.type ? (0, r.createImgBtn)("fullscreen", t.url.request, t.width, t.height) : (0, r.createDom)("xg-fullscreen", '<xg-icon class="xgplayer-icon">\n                                             <div class="xgplayer-icon-requestfull">' + i.default + '</div>\n                                             <div class="xgplayer-icon-exitfull">' + a.default + "</div>\n                                           </xg-icon>", {}, "xgplayer-fullscreen");var o = {};o.requestfull = e.lang.FULLSCREEN_TIPS, o.exitfull = e.lang.EXITFULLSCREEN_TIPS;var l = (0, r.createDom)("xg-tips", '<span class="xgplayer-tip-requestfull">' + o.requestfull + '</span>\n                                        <span class="xgplayer-tip-exitfull">' + o.exitfull + "</span>", {}, "xgplayer-tips");n.appendChild(l), e.once("ready", function () {e.controls && e.controls.appendChild(n);}), ["click", "touchend"].forEach(function (t) {n.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("fullscreenBtnClick");});});} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n';}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n';}, function (e, t, n) {var r = n(63);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-fullscreen,.xgplayer-skin-default .xgplayer-fullscreen-img{position:relative;-webkit-order:13;-moz-box-ordinal-group:14;order:13;display:block;cursor:pointer;margin-left:5px;margin-right:3px}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon{margin-top:3px}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:block}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:none}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips{position:absolute;right:0;left:auto}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:block}.xgplayer-skin-default .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:none}.xgplayer-skin-default .xgplayer-fullscreen-img:hover,.xgplayer-skin-default .xgplayer-fullscreen:hover{opacity:.85}.xgplayer-skin-default .xgplayer-fullscreen-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-fullscreen:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-rotate-fullscreen .xgplayer-fullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(65),o = (r = a) && r.__esModule ? r : { default: r };n(66);t.default = { name: "s_loading", method: function method() {var e = this.root,t = (0, i.createDom)("xg-loading", "" + o.default, {}, "xgplayer-loading");this.once("ready", function () {e.appendChild(t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n';}, function (e, t, n) {var r = n(67);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-loading{display:none;width:100px;height:100px;overflow:hidden;-webkit-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);position:absolute;left:50%;top:50%;margin:-50px auto auto -50px}.xgplayer-skin-default .xgplayer-loading svg{border-radius:50%;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-animation:loadingRotate 1s linear infinite;animation:loadingRotate 1s linear infinite}.xgplayer-skin-default .xgplayer-loading svg path{stroke:#ddd;stroke-dasharray:236;-webkit-animation:loadingDashOffset 2s linear infinite;animation:loadingDashOffset 2s linear infinite;animation-direction:alternate-reverse;fill:none;stroke-width:12px}.xgplayer-skin-default.xgplayer-nostart .xgplayer-loading{display:none}.xgplayer-skin-default.xgplayer-pause .xgplayer-loading{display:none!important}.xgplayer-skin-default.xgplayer-isloading .xgplayer-loading{display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(4),o = (r = a) && r.__esModule ? r : { default: r };n(69);var l = function l(e) {return (0, i.hasClass)(e.root, "xgplayer-rotate-fullscreen");};t.default = { name: "s_progress", method: function method() {var e = this,t = (0, i.createDom)("xg-progress", '<xg-outer class="xgplayer-progress-outer">\n                                                   <xg-cache class="xgplayer-progress-cache"></xg-cache>\n                                                   <xg-played class="xgplayer-progress-played">\n                                                     <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n                                                     <xg-point class="xgplayer-progress-point xgplayer-tips"></xg-point>\n                                                     <xg-thumbnail class="xgplayer-progress-thumbnail xgplayer-tips"></xg-thumbnail>\n                                                   </xg-played>\n                                                 </xg-outer>', { tabindex: 1 }, "xgplayer-progress"),n = void 0;e.controls.appendChild(t);var r = t.querySelector(".xgplayer-progress-played"),a = t.querySelector(".xgplayer-progress-outer"),s = t.querySelector(".xgplayer-progress-cache"),u = t.querySelector(".xgplayer-progress-point"),c = t.querySelector(".xgplayer-progress-thumbnail");function p(n, r) {n.addEventListener("mouseenter", function (e) {r && ((0, i.addClass)(n, "xgplayer-progress-dot-show"), (0, i.addClass)(t, "xgplayer-progress-dot-active"));}), n.addEventListener("mouseleave", function (e) {r && ((0, i.removeClass)(n, "xgplayer-progress-dot-show"), (0, i.removeClass)(t, "xgplayer-progress-dot-active"));}), n.addEventListener("touchend", function (a) {a.stopPropagation(), r && ((0, i.hasClass)(n, "xgplayer-progress-dot-show") || Object.keys(e.dotArr).forEach(function (t) {e.dotArr[t] && (0, i.removeClass)(e.dotArr[t], "xgplayer-progress-dot-show");}), (0, i.toggleClass)(n, "xgplayer-progress-dot-show"), (0, i.toggleClass)(t, "xgplayer-progress-dot-active"));});}function d() {e.config.progressDot && "Array" === (0, i.typeOf)(e.config.progressDot) && e.config.progressDot.forEach(function (t) {if (t.time >= 0 && t.time <= e.duration) {var n = (0, i.createDom)("xg-progress-dot", t.text ? '<span class="xgplayer-progress-tip">' + t.text + "</span>" : "", {}, "xgplayer-progress-dot");if (n.style.left = t.time / e.duration * 100 + "%", t.duration >= 0 && (n.style.width = Math.min(t.duration, e.duration - t.time) / e.duration * 100 + "%"), t.style) for (var r in t.style) {n.style[r] = t.style[r];}a.appendChild(n), e.dotArr[t.time] = n, p(n, t.text);}});}e.dotArr = {}, e.once("canplay", d), e.addProgressDot = function (t, n, r, o) {if (!e.dotArr[t] && t >= 0 && t <= e.duration) {var l = (0, i.createDom)("xg-progress-dot", n ? '<span class="xgplayer-progress-tip">' + n + "</span>" : "", {}, "xgplayer-progress-dot");if (l.style.left = t / e.duration * 100 + "%", r >= 0 && (l.style.width = Math.min(r, e.duration - t) / e.duration * 100 + "%"), o) for (var s in o) {l.style[s] = o[s];}a.appendChild(l), e.dotArr[t] = l, p(l, n);}}, e.removeProgressDot = function (t) {if (t >= 0 && t <= e.duration && e.dotArr[t]) {var n = e.dotArr[t];n.parentNode.removeChild(n), n = null, e.dotArr[t] = null;}}, e.removeAllProgressDot = function () {Object.keys(e.dotArr).forEach(function (t) {if (e.dotArr[t]) {var n = e.dotArr[t];n.parentNode.removeChild(n), n = null, e.dotArr[t] = null;}});};var f = 0,g = 0,h = 0,y = 0,x = 0,v = 0,m = [],b = void 0,k = void 0,w = function w() {e.config.thumbnail && (e.config.thumbnail.isShowCoverPreview && !b && (r.removeChild(c), b = (0, i.createDom)("xg-coverpreview", '<xg-outer class="xgplayer-coverpreview-outer">\n            <xg-thumbnail class="xgplayer-coverpreview-thumbnail"></xg-thumbnail>\n            <xg-point class="xgplayer-coverpreview-point"></xg-point>\n          </xg-outer>', { tabindex: 1 }, "xgplayer-coverpreview"), b.querySelector(".xgplayer-coverpreview-outer"), k = b.querySelector(".xgplayer-coverpreview-point"), c = b.querySelector(".xgplayer-coverpreview-thumbnail"), e.root.appendChild(b)), f = e.config.thumbnail.pic_num, g = e.config.thumbnail.width, h = e.config.thumbnail.height, y = e.config.thumbnail.col, x = e.config.thumbnail.row, m = e.config.thumbnail.urls, c.style.width = g + "px", c.style.height = h + "px");};e.on("loadedmetadata", w), "function" == typeof e.config.disableSwipeHandler && "function" == typeof e.config.enableSwipeHandler && (e.root.addEventListener("touchmove", function (t) {t.preventDefault(), e.disableSwipe || (e.disableSwipe = !0, e.config.disableSwipeHandler.call(e));}), e.root.addEventListener("touchstart", function (t) {e.disableSwipe = !0, e.config.disableSwipeHandler.call(e);}), e.root.addEventListener("touchend", function (t) {e.disableSwipe = !1, e.config.enableSwipeHandler.call(e);})), ["touchstart", "mousedown"].forEach(function (a) {t.addEventListener(a, function (a) {if (!e.config.disableProgress) {if (a.stopPropagation(), (0, i.event)(a), a._target === u || !e.config.allowSeekAfterEnded && e.ended) return !0;t.focus();var s = r.getBoundingClientRect().left,p = l(e);p ? (s = r.getBoundingClientRect().top, n = t.getBoundingClientRect().height) : (n = t.getBoundingClientRect().width, s = r.getBoundingClientRect().left);var d = function d(t) {t.stopPropagation(), (0, i.event)(t), e.isProgressMoving = !0;var a = (p ? t.clientY : t.clientX) - s;a > n && (a = n);var o = a / n * e.duration;if (o < 0 && (o = 0), e.config.allowSeekPlayed && Number(o).toFixed(1) > e.maxPlayedTime) ;else if (r.style.width = 100 * a / n + "%", "video" !== e.videoConfig.mediaType || e.dash || e.config.closeMoveSeek) {var l = (0, i.findDom)(e.controls, ".xgplayer-time");l && (l.innerHTML = '<span class="xgplayer-time-current">' + (0, i.format)(o || 0) + "</span><span>" + (0, i.format)(e.duration) + "</span>");} else e.currentTime = Number(o).toFixed(1);if (e.config.thumbnail && e.config.thumbnail.isShowCoverPreview) {k.innerHTML = "<span>" + (0, i.format)(o) + "</span> / " + (0, i.format)(e.duration || 0), v = e.duration / f;var u = Math.floor(o / v);c.style.backgroundImage = "url(" + m[Math.ceil((u + 1) / (y * x)) - 1] + ")";var d = u + 1 - y * x * (Math.ceil((u + 1) / (y * x)) - 1),w = Math.ceil(d / x) - 1,_ = d - w * x - 1;c.style["background-position"] = "-" + _ * g + "px -" + w * h + "px", b.style.display = "block";}e.emit("focus");},w = function a(l) {if (l.stopPropagation(), (0, i.event)(l), window.removeEventListener("mousemove", d), window.removeEventListener("touchmove", d, { passive: !1 }), window.removeEventListener("mouseup", a), window.removeEventListener("touchend", a), o.default.browser.indexOf("ie") < 0 && t.blur(), !e.isProgressMoving || e.videoConfig && "audio" === e.videoConfig.mediaType || e.dash || e.config.closeMoveSeek) {var u = (p ? l.clientY : l.clientX) - s;u > n && (u = n);var c = u / n * e.duration;c < 0 && (c = 0), e.config.allowSeekPlayed && Number(c).toFixed(1) > e.maxPlayedTime || (r.style.width = 100 * u / n + "%", e.currentTime = Number(c).toFixed(1));}e.config.thumbnail && e.config.thumbnail.isShowCoverPreview && (b.style.display = "none"), e.emit("focus"), e.isProgressMoving = !1;};return window.addEventListener("mousemove", d), window.addEventListener("touchmove", d, { passive: !1 }), window.addEventListener("mouseup", w), window.addEventListener("touchend", w), !0;}});}), t.addEventListener("mouseenter", function (n) {if (!e.config.allowSeekAfterEnded && e.ended) return !0;var r = l(e),a = r ? t.getBoundingClientRect().top : t.getBoundingClientRect().left,o = r ? t.getBoundingClientRect().height : t.getBoundingClientRect().width,s = function s(n) {var l = ((r ? n.clientY : n.clientX) - a) / o * e.duration;l = l < 0 ? 0 : l, u.textContent = (0, i.format)(l);var s = u.getBoundingClientRect().width;if (e.config.thumbnail && !e.config.thumbnail.isShowCoverPreview) {v = e.duration / f;var p = Math.floor(l / v);c.style.backgroundImage = "url(" + m[Math.ceil((p + 1) / (y * x)) - 1] + ")";var d = p + 1 - y * x * (Math.ceil((p + 1) / (y * x)) - 1),b = Math.ceil(d / x) - 1,k = d - b * x - 1;c.style["background-position"] = "-" + k * g + "px -" + b * h + "px";var w = (r ? n.clientY : n.clientX) - a - g / 2;w = (w = w > 0 ? w : 0) < o - g ? w : o - g, c.style.left = w + "px", c.style.top = -10 - h + "px", c.style.display = "block", u.style.left = w + g / 2 - s / 2 + "px";} else {var _ = n.clientX - a - s / 2;_ = (_ = _ > 0 ? _ : 0) > o - s ? o - s : _, u.style.left = _ + "px";}(0, i.hasClass)(t, "xgplayer-progress-dot-active") ? u.style.display = "none" : u.style.display = "block";},p = function p(e) {s(e);};t.addEventListener("mousemove", p, !1), t.addEventListener("mouseleave", function n(r) {t.removeEventListener("mousemove", p, !1), t.removeEventListener("mouseleave", n, !1), s(r), u.style.display = "none", e.config.thumbnail && !e.config.thumbnail.isShowCoverPreview && (c.style.display = "none");}, !1), s(n);}, !1);var _ = function _() {if (void 0 === e.maxPlayedTime && (e.maxPlayedTime = 0), e.maxPlayedTime < e.currentTime && (e.maxPlayedTime = e.currentTime), !n && t && (n = t.getBoundingClientRect().width), !e.isProgressMoving) {var i = e.currentTime / e.duration,a = Number(r.style.width.replace("%", "") || "0") / Number(t.style.width || "100");Math.abs(i - a) <= 1 && (r.style.width = 100 * e.currentTime / e.duration + "%");}};e.on("timeupdate", _);var E = function E() {r.style.width = 100 * e.currentTime / e.duration + "%";};e.on("currentTimeChange", E);var T = function T() {r.style.width = "0%";};e.on("srcChange", T);var C = function C() {var t = e.buffered;if (t && t.length > 0) {for (var n = t.end(t.length - 1), r = 0, i = t.length; r < i; r++) {if (e.currentTime >= t.start(r) && e.currentTime <= t.end(r)) {n = t.end(r);for (var a = r + 1; a < t.length; a++) {if (t.start(a) - t.end(a - 1) >= 2) {n = t.end(a - 1);break;}}break;}}s.style.width = n / e.duration * 100 + "%";}},S = ["bufferedChange", "cacheupdate", "ended", "timeupdate"];S.forEach(function (t) {e.on(t, C);}), e.once("destroy", function t() {e.removeAllProgressDot(), e.off("canplay", d), e.off("timeupdate", _), e.off("currentTimeChange", E), e.off("srcChange", T), e.off("loadedmetadata", w), S.forEach(function (t) {e.off(t, C);}), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {var r = n(70);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-progress{display:block;position:absolute;height:20px;line-height:20px;left:12px;right:12px;outline:none;top:-15px;z-index:35}.xgplayer-skin-default .xgplayer-progress-outer{background:hsla(0,0%,100%,.3);display:block;height:3px;line-height:3px;margin-top:8.5px;width:100%;position:relative;cursor:pointer}.xgplayer-skin-default .xgplayer-progress-cache,.xgplayer-skin-default .xgplayer-progress-played{display:block;height:100%;line-height:1;position:absolute;left:0;top:0}.xgplayer-skin-default .xgplayer-progress-cache{width:0;background:hsla(0,0%,100%,.5)}.xgplayer-skin-default .xgplayer-progress-played{display:block;width:0;background-image:linear-gradient(-90deg,#fa1f41,#e31106);border-radius:0 1.5px 1.5px 0}.xgplayer-skin-default .xgplayer-progress-btn{display:none;position:absolute;left:0;top:-5px;width:13px;height:13px;border-radius:30px;background:#fff;box-shadow:0 0 2px 0 rgba(0,0,0,.26);left:100%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);z-index:36}.xgplayer-skin-default .xgplayer-progress-point{position:absolute}.xgplayer-skin-default .xgplayer-progress-point.xgplayer-tips{margin-left:0;top:-25px;display:none;z-index:100}.xgplayer-skin-default .xgplayer-progress-dot{display:inline-block;position:absolute;height:3px;width:5px;top:0;background:#fff;border-radius:6px;z-index:16}.xgplayer-skin-default .xgplayer-progress-dot .xgplayer-progress-tip{position:absolute;bottom:200%;right:50%;-webkit-transform:translateX(50%);-ms-transform:translateX(50%);transform:translateX(50%);height:auto;line-height:30px;width:auto;background:rgba(0,0,0,.3);border-radius:6px;border:1px solid rgba(0,0,0,.8);cursor:default;white-space:nowrap;display:none}.xgplayer-skin-default .xgplayer-progress-dot-show .xgplayer-progress-tip{display:block}.xgplayer-skin-default .xgplayer-progress-thumbnail{position:absolute;-moz-box-sizing:border-box;box-sizing:border-box}.xgplayer-skin-default .xgplayer-progress-thumbnail.xgplayer-tips{margin-left:0;display:none;z-index:99}.xgplayer-skin-default .xgplayer-coverpreview{position:absolute;width:100%;height:100%;top:0;left:0;display:none}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer{position:absolute;display:block;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer .xgplayer-coverpreview-thumbnail{display:block}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer .xgplayer-coverpreview-point{display:block;text-align:center;font-family:PingFangSC-Regular;font-size:11px;color:#ccc;padding:2px 4px}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer .xgplayer-coverpreview-point span{color:#fff}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-outer{height:6px;margin-top:7px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-dot,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-dot{height:6px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-btn{display:block;top:-3px}.xgplayer-skin-default.xgplayer-definition-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-playbackrate-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-texttrack-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-volume-active .xgplayer-progress{z-index:15}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress-btn{display:block!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-outer{height:3px!important;margin-top:8.5px!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-btn{display:block!important;top:-5px!important}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(72);t.default = { name: "s_time", method: function method() {var e = this,t = (0, r.createDom)("xg-time", '<span class="xgplayer-time-current">' + (e.currentTime || (0, r.format)(0)) + "</span>\n                                           <span>" + (e.duration || (0, r.format)(0)) + "</span>", {}, "xgplayer-time");e.once("ready", function () {e.controls && e.controls.appendChild(t);});var n = function n() {"audio" === e.videoConfig.mediaType && e.isProgressMoving && e.dash || (t.innerHTML = '<span class="xgplayer-time-current">' + (0, r.format)(e.currentTime || 0) + "</span><span>" + (0, r.format)(e.duration) + "</span>");};e.on("durationchange", n), e.on("timeupdate", n), e.once("destroy", function t() {e.off("durationchange", n), e.off("timeupdate", n), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {var r = n(73);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, '.xgplayer-skin-default .xgplayer-time{-webkit-order:2;-moz-box-ordinal-group:3;order:2;font-family:ArialMT;font-size:13px;color:#fff;line-height:40px;height:40px;text-align:center;display:inline-block;margin:auto 8px}.xgplayer-skin-default .xgplayer-time span{color:hsla(0,0%,100%,.5)}.xgplayer-skin-default .xgplayer-time .xgplayer-time-current{color:#fff}.xgplayer-skin-default .xgplayer-time .xgplayer-time-current:after{content:"/";display:inline-block;padding:0 3px}', ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(75),o = (r = a) && r.__esModule ? r : { default: r };n(76);t.default = { name: "s_replay", method: function method() {var e = this,t = e.root,n = e.lang.REPLAY,r = (0, i.createDom)("xg-replay", o.default + '\n                                         <xg-replay-txt class="xgplayer-replay-txt">' + n + "</xg-replay-txt>\n                                        ", {}, "xgplayer-replay");function a() {var e = r.querySelector("path");if (e) {var t = window.getComputedStyle(e).getPropertyValue("transform");if ("string" == typeof t && t.indexOf("none") > -1) return;e.setAttribute("transform", t);}}e.once("ready", function () {t.appendChild(r);}), e.on("ended", a), r.addEventListener("click", function (e) {e.preventDefault(), e.stopPropagation();});var l = r.querySelector("svg");["click", "touchend"].forEach(function (t) {l.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("replayBtnClick");});}), e.once("destroy", function t() {e.off("ended", a), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n';}, function (e, t, n) {var r = n(77);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-replay{position:absolute;left:0;top:0;width:100%;height:100%;z-index:105;display:none;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;background:rgba(0,0,0,.54);-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column}.xgplayer-skin-default .xgplayer-replay svg{background:rgba(0,0,0,.58);border-radius:100%;cursor:pointer}.xgplayer-skin-default .xgplayer-replay svg path{-webkit-transform:translate(20px,21px);-ms-transform:translate(20px,21px);transform:translate(20px,21px);fill:#ddd}.xgplayer-skin-default .xgplayer-replay svg:hover{background:rgba(0,0,0,.38)}.xgplayer-skin-default .xgplayer-replay svg:hover path{fill:#fff}.xgplayer-skin-default .xgplayer-replay .xgplayer-replay-txt{display:inline-block;font-family:PingFangSC-Regular;font-size:14px;color:#fff;line-height:34px}.xgplayer-skin-default.xgplayer.xgplayer-ended .xgplayer-controls{display:none}.xgplayer-skin-default.xgplayer.xgplayer-ended .xgplayer-replay{display:-webkit-flex;display:-moz-box;display:flex}", ""]);}, function (e, t, n) {var r = n(158);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {e.exports = n(80);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = C(n(9)),i = C(n(81)),a = C(n(82)),o = C(n(83)),l = C(n(84)),s = C(n(85)),u = C(n(88)),c = C(n(45)),p = C(n(89)),d = C(n(90)),f = C(n(91)),g = C(n(92)),h = C(n(37)),y = C(n(38)),x = C(n(98)),v = C(n(46)),m = C(n(99)),b = C(n(100)),k = C(n(47)),w = C(n(101)),_ = C(n(102)),E = C(n(39)),T = C(n(103));function C(e) {return e && e.__esModule ? e : { default: e };}n(104), r.default.installAll([i.default, a.default, o.default, l.default, s.default, u.default, c.default, p.default, d.default, f.default, g.default, h.default, y.default, x.default, v.default, m.default, b.default, k.default, w.default, _.default, E.default, T.default]), t.default = r.default, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "airplay", method: function method() {var e = this;function t() {e.video.webkitShowPlaybackTargetPicker();}e.config.airplay && window.WebKitPlaybackTargetAvailabilityEvent && (e.on("airplayBtnClick", t), e.once("destroy", function n() {e.off("airplayBtnClick", t), e.off("destroy", n);}));} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "cssFullscreen", method: function method() {var e = this,t = e.root;function n() {(0, r.hasClass)(t, "xgplayer-is-cssfullscreen") ? e.exitCssFullscreen() : e.getCssFullscreen();}e.on("cssFullscreenBtnClick", n), e.on("exitFullscreen", function () {(0, r.removeClass)(t, "xgplayer-is-cssfullscreen");}), e.once("destroy", function t() {e.off("cssFullscreenBtnClick", n), e.off("destroy", t);}), e.getCssFullscreen = function () {this.config.fluid && (this.root.style["padding-top"] = ""), (0, r.addClass)(this.root, "xgplayer-is-cssfullscreen"), this.emit("requestCssFullscreen");}, e.exitCssFullscreen = function () {this.config.fluid && (this.root.style.width = "100%", this.root.style.height = "0", this.root.style["padding-top"] = 100 * this.config.height / this.config.width + "%"), (0, r.removeClass)(this.root, "xgplayer-is-cssfullscreen"), this.emit("exitCssFullscreen");};} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "danmu", method: function method() {var e = this;e.on("initDefaultDanmu", function (t) {var n = e.root.querySelector("xg-danmu");if ((0, r.addClass)(n, "xgplayer-has-danmu"), !e.config.danmu.closeDefaultBtn) {var i = function i() {t.start();},a = function a() {(0, r.hasClass)(e.danmuBtn, "danmu-switch-active") && t.pause();},o = function o() {(0, r.hasClass)(e.danmuBtn, "danmu-switch-active") && t.play();},l = function l() {(0, r.hasClass)(e.danmuBtn, "danmu-switch-active") && (t.stop(), t.start());};e.danmuBtn = (0, r.copyDom)(t.bulletBtn.createSwitch(!0)), e.controls.appendChild(e.danmuBtn), ["click", "touchend"].forEach(function (a) {e.danmuBtn.addEventListener(a, function (a) {a.preventDefault(), a.stopPropagation(), (0, r.toggleClass)(e.danmuBtn, "danmu-switch-active"), (0, r.hasClass)(e.danmuBtn, "danmu-switch-active") ? (e.emit("danmuBtnOn"), (0, r.addClass)(n, "xgplayer-has-danmu"), e.once("timeupdate", i)) : (e.emit("danmuBtnOff"), (0, r.removeClass)(n, "xgplayer-has-danmu"), t.stop());});}), e.onElementClick && n.addEventListener("click", function (t) {e.onElementClick(t, n);}, !1), e.onElementDblclick && n.addEventListener("dblclick", function (t) {e.onElementDblclick(t, n);}, !1), e.on("pause", a), e.on("play", o), e.on("seeked", l), e.once("destroy", function t() {e.off("timeupdate", i), e.off("pause", a), e.off("play", o), e.off("seeked", l), e.off("destroy", t);});}});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "definition", method: function method() {var e = this;e.once("destroy", function t() {e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(86),a = (r = i) && r.__esModule ? r : { default: r },o = n(87);t.default = { name: "download", method: function method() {var e = this;function t() {e.download();}e.on("downloadBtnClick", t), e.once("destroy", function n() {e.off("downloadBtnClick", t), e.off("destroy", n);}), e.download = function () {var e = (0, o.getAbsoluteURL)(this.config.url);(0, a.default)(e);};} }, e.exports = t.default;}, function (e, t, n) {var r, i, a;i = [], void 0 === (a = "function" == typeof (r = function r() {return function e(t, n, r) {var i,a,o = window,l = "application/octet-stream",s = r || l,u = t,c = !n && !r && u,p = document.createElement("a"),d = function d(e) {return String(e);},f = o.Blob || o.MozBlob || o.WebKitBlob || d,g = n || "download";if (f = f.call ? f.bind(o) : Blob, "true" === String(this) && (s = (u = [u, s])[0], u = u[1]), c && c.length < 2048 && (g = c.split("/").pop().split("?")[0], p.href = c, -1 !== p.href.indexOf(c))) {var h = new XMLHttpRequest();return h.open("GET", c, !0), h.responseType = "blob", h.onload = function (t) {e(t.target.response, g, l);}, setTimeout(function () {h.send();}, 0), h;}if (/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)) {if (!(u.length > 2096103.424 && f !== d)) return navigator.msSaveBlob ? navigator.msSaveBlob(m(u), g) : b(u);s = (u = m(u)).type || l;} else if (/([\x80-\xff])/.test(u)) {for (var y = 0, x = new Uint8Array(u.length), v = x.length; y < v; ++y) {x[y] = u.charCodeAt(y);}u = new f([x], { type: s });}function m(e) {for (var t = e.split(/[:;,]/), n = t[1], r = ("base64" == t[2] ? atob : decodeURIComponent)(t.pop()), i = r.length, a = 0, o = new Uint8Array(i); a < i; ++a) {o[a] = r.charCodeAt(a);}return new f([o], { type: n });}function b(e, t) {if ("download" in p) return p.href = e, p.setAttribute("download", g), p.className = "download-js-link", p.innerHTML = "downloading...", p.style.display = "none", document.body.appendChild(p), setTimeout(function () {p.click(), document.body.removeChild(p), !0 === t && setTimeout(function () {o.URL.revokeObjectURL(p.href);}, 250);}, 66), !0;if (/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)) return /^data:/.test(e) && (e = "data:" + e.replace(/^data:([\w\/\-\+]+)/, l)), window.open(e) || confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.") && (location.href = e), !0;var n = document.createElement("iframe");document.body.appendChild(n), !t && /^data:/.test(e) && (e = "data:" + e.replace(/^data:([\w\/\-\+]+)/, l)), n.src = e, setTimeout(function () {document.body.removeChild(n);}, 333);}if (i = u instanceof f ? u : new f([u], { type: s }), navigator.msSaveBlob) return navigator.msSaveBlob(i, g);if (o.URL) b(o.URL.createObjectURL(i), !0);else {if ("string" == typeof i || i.constructor === d) try {return b("data:" + s + ";base64," + o.btoa(i));} catch (e) {return b("data:" + s + "," + encodeURIComponent(i));}(a = new FileReader()).onload = function (e) {b(this.result);}, a.readAsDataURL(i);}return !0;};}) ? r.apply(t, i) : r) || (e.exports = a);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.getAbsoluteURL = function (e) {if (!e.match(/^https?:\/\//)) {var t = document.createElement("div");t.innerHTML = '<a href="' + e + '">x</a>', e = t.firstChild.href;}return e;};}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(5),a = (r = i) && r.__esModule ? r : { default: r };var o = { maxCount: 3, backupUrl: "", isFetch: !0, fetchTimeout: 100 };t.default = { name: "errorretry", method: function method() {var e = this,t = this;if (t.config.errorConfig && !(t.src.indexOf("blob:") > -1)) {var n = {},r = t.config.errorConfig;for (var i in o) {void 0 === r[i] ? n[i] = o[i] : n[i] = r[i];}t.retryData = { count: 0, errfTimer: null, isFetchReturn: !1, currentTime: 0 };var l = t._onError;t._onError = function (r) {var i = e.retryData.count;if (i > n.maxCount) n.isFetch ? function (e, t, n) {var r = function r(t, n) {e.retryData.isFetchReturn || (e.retryData.isFetchReturn = !0, t(n));};return new Promise(function (i, a) {try {var o = new window.XMLHttpRequest();o.open("get", t), o.onload = function () {r(i, { status: o.status, statusText: o.statusText, xhr: o });}, o.onerror = function () {r(i, { status: o.status, statusText: o.statusText || "The network environment is disconnected or the address is invalid", xhr: o });}, o.onabort = function () {}, e.retryData.errfTimer = window.setTimeout(function () {var t = e.retryData.errfTimer;window.clearTimeout(t), e.retryData.errfTimer = null, r(i, { status: -1, statusText: "request timeout" });}, n), o.send();} catch (t) {e.retryData.isFetchReturn = !0, r(i, { status: -2, statusText: "request error" });}});}(e, e.currentSrc, n.fetchTimeout).then(function (t) {e.emit("error", new a.default({ type: "network", currentTime: e.currentTime, duration: e.duration || 0, networkState: e.networkState, readyState: e.readyState, currentSrc: e.currentSrc, src: e.src, ended: e.ended, httpCode: t.status, httpMsg: t.statusText, errd: { line: 101, msg: e.error, handle: "plugin errorRetry" }, errorCode: e.video && e.video.error.code, mediaError: e.video && e.video.error })), l.call(e, t);}) : l.call(e, r);else {0 === i && (e.retryData.currentTime = e.currentTime, e.once("canplay", s.bind(e)));var o = "";o = n.count < 2 ? n.backupUrl ? n.backupUrl : t.currentSrc : n.backupUrl && i > 1 ? n.backupUrl : t.currentSrc, e.retryData.count++, e.src = o;}};}function s() {this.currentTime = this.retryData.currentTime, this.play(), this.retryData.retryCode = 0, this.retryData.isFetchReturn = !1, this.retryData.currentTime = 0;}} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = n(0);var a = function () {function e(t) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, e), this.player = t, this.state = { playbackRate: 0, isRepeat: !1, keyCode: 0, repeat: 0, isBody: !1 }, this.timer = null, this.initEvents();}return r(e, [{ key: "initEvents", value: function value() {var e = this,t = this.player,n = t.root,r = t.config;if (this.player.onBodyKeydown = this.onBodyKeydown.bind(this), this.player.onKeydown = this.onKeydown.bind(this), this.player.onKeyup = this.onKeyup.bind(this), !r.keyShortcut || "on" === r.keyShortcut) {document.addEventListener("keydown", this.player.onBodyKeydown), n.addEventListener("keydown", this.player.onKeydown);(0, i.on)(this.player, "destroy", function () {document.removeEventListener("keydown", e.player.onBodyKeydown), n.removeEventListener("keydown", e.player.onKeydown), clearTimeout(e.timer), e.timer = null;});}} }, { key: "checkTarget", value: function value(e) {var t = this.player;return e.target === t.root || e.target === t.video || e.target === t.controls;} }, { key: "onBodyKeydown", value: function value(e) {var t = e || window.event,n = t.keyCode;if (t.target === document.body && (37 === n || 39 === n || 32 === n)) return t.preventDefault(), t.cancelBubble = !0, t.returnValue = !1, t.repeat || document.addEventListener("keyup", this.player.onKeyup), this.handler(t), !1;} }, { key: "onKeydown", value: function value(e) {var t = e || window.event,n = t.keyCode;if (this.checkTarget(t) && (37 === n || 38 === n || 39 === n || 40 === n || 32 === n || 27 === n)) return t.preventDefault(), t.cancelBubble = !0, t.returnValue = !1, this.player.emit("focus"), t.repeat || this.player.root.addEventListener("keyup", this.player.onKeyup), this.handler(t), !1;} }, { key: "onKeyup", value: function value() {var e = this.state,t = this.player;document.removeEventListener("keyup", this.player.onKeyup), t.root.removeEventListener("keyup", this.player.onKeyup), e.keyCode && (0 !== e.playbackRate && (t.playbackRate = e.playbackRate), e.isRepeat || this.handlerKeyCode(e.keyCode, !1), e.playbackRate = 0, e.isRepeat = !1, e.keyCode = 0, e.repeat = 0, this.changeVolumeSlide());} }, { key: "handler", value: function value(e) {var t = this.state,n = this.player;t.keyCode = e.keyCode, t.isRepeat = e.repeat, e.repeat && (n.config.disableLongPress ? this.handlerKeyCode(t.keyCode, !1) : t.repeat % 2 == 0 && this.handlerKeyCode(t.keyCode, !0), t.repeat++);} }, { key: "handlerKeyCode", value: function value(e, t) {var n = this.player,r = this.state;switch (e) {case 39:t ? 0 === r.repeat && this.changeRate() : this.seek(!1, t);break;case 37:this.seek(!0, t);break;case 38:this.changeVolume(!0);break;case 40:this.changeVolume(!1);break;case 32:t || (n.paused ? n.play() : n.pause());break;case 27:(0, i.hasClass)(n.root, "xgplayer-is-cssfullscreen") && n.exitCssFullscreen();}} }, { key: "seek", value: function value(e, t) {var n = this.player,r = (n.config.keyShortcutStep || {}).currentTime || 10;n.isLoading || n.isSeeking || t && this.state.repeat % 8 > 0 || (e ? n.currentTime - r >= 0 ? n.currentTime -= r : n.currentTime = 0 : n.maxPlayedTime && n.config.allowSeekPlayed && n.currentTime + r > n.maxPlayedTime ? n.currentTime = n.maxPlayedTime : n.currentTime + r <= n.duration ? n.currentTime += r : n.currentTime = n.duration - 1);} }, { key: "changeRate", value: function value() {this.state.playbackRate = this.player.playbackRate, this.player.playbackRate = this.player.config.keyboardRate || 5;} }, { key: "changeVolumeSlide", value: function value(e) {var t = this.player;t.controls && (e ? (t.emit("focus"), (0, i.hasClass)(t.root, "xgplayer-volume-active") || (0, i.addClass)(t.root, "xgplayer-volume-active")) : (clearTimeout(this.timer), this.timer = setTimeout(function () {(0, i.removeClass)(t.root, "xgplayer-volume-active");}, 1e3)));} }, { key: "changeVolume", value: function value(e) {var t = this.player,n = (t.config.keyShortcutStep || {}).volume || .1;this.changeVolumeSlide(!0);var r = t.volume;e && r + n <= 1 ? t.volume = r + n : !e && r - n >= 0 && (t.volume = r - n);} }]), e;}();t.default = { name: "keyboard", method: function method() {this.keyboard = new a(this);} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "localPreview", method: function method() {var e = this,t = e.root;function n(n) {e.uploadFile = n.files[0];var i = URL.createObjectURL(e.uploadFile);if ((0, r.hasClass)(t, "xgplayer-nostart")) e.config.url = i, e.start();else {e.src = i;var a = e.play();void 0 !== a && a && a.catch(function (e) {});}}e.on("upload", n), e.once("destroy", function t() {e.off("upload", n), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "memoryPlay", method: function method() {var e = this;e.on("memoryPlayStart", function (t) {e.currentTime = t;});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(93),o = (r = a) && r.__esModule ? r : { default: r };t.default = { name: "miniplayer", method: function method() {var e = this,t = e.root;function n() {(0, i.hasClass)(t, "xgplayer-miniplayer-active") ? e.exitMiniplayer() : e.getMiniplayer();}e.on("miniplayerBtnClick", n), e.once("destroy", function t() {e.off("miniplayerBtnClick", n), e.off("destroy", t);}), e.getMiniplayer = function () {(0, i.hasClass)(t, "xgplayer-is-fullscreen") && this.exitFullscreen(t), (0, i.hasClass)(t, "xgplayer-is-cssfullscreen") && this.exitCssFullscreen(), (0, i.hasClass)(t, "xgplayer-rotate-fullscreen") && this.exitRotateFullscreen();var e = (0, i.createDom)("xg-miniplayer-lay", "<div></div>", {}, "xgplayer-miniplayer-lay");this.root.appendChild(e);var n = (0, i.createDom)("xg-miniplayer-drag", '<div class="drag-handle"><span>' + this.lang.MINIPLAYER_DRAG + "</span></div>", { tabindex: 9 }, "xgplayer-miniplayer-drag");this.root.appendChild(n);new o.default(".xgplayer", { handle: ".drag-handle" });(0, i.addClass)(this.root, "xgplayer-miniplayer-active"), this.root.style.right = 0, this.root.style.bottom = "200px", this.root.style.top = "", this.root.style.left = "", this.root.style.width = "320px", this.root.style.height = "180px", this.config.miniplayerConfig && (void 0 !== this.config.miniplayerConfig.top && (this.root.style.top = this.config.miniplayerConfig.top + "px", this.root.style.bottom = ""), void 0 !== this.config.miniplayerConfig.bottom && (this.root.style.bottom = this.config.miniplayerConfig.bottom + "px"), void 0 !== this.config.miniplayerConfig.left && (this.root.style.left = this.config.miniplayerConfig.left + "px", this.root.style.right = ""), void 0 !== this.config.miniplayerConfig.right && (this.root.style.right = this.config.miniplayerConfig.right + "px"), void 0 !== this.config.miniplayerConfig.width && (this.root.style.width = this.config.miniplayerConfig.width + "px"), void 0 !== this.config.miniplayerConfig.height && (this.root.style.height = this.config.miniplayerConfig.height + "px")), this.config.fluid && (this.root.style["padding-top"] = "");var r = this;["click", "touchend"].forEach(function (t) {e.addEventListener(t, function (e) {e.preventDefault(), e.stopPropagation(), r.exitMiniplayer();});});}, e.exitMiniplayer = function () {(0, i.removeClass)(this.root, "xgplayer-miniplayer-active"), this.root.style.right = "", this.root.style.bottom = "", this.root.style.top = "", this.root.style.left = "", this.config.fluid ? (this.root.style.width = "100%", this.root.style.height = "0", this.root.style["padding-top"] = 100 * this.config.height / this.config.width + "%") : (this.config.width && ("number" != typeof this.config.width ? this.root.style.width = this.config.width : this.root.style.width = this.config.width + "px"), this.config.height && ("number" != typeof this.config.height ? this.root.style.height = this.config.height : this.root.style.height = this.config.height + "px"));var e = (0, i.findDom)(this.root, ".xgplayer-miniplayer-lay");e && e.parentNode && e.parentNode.removeChild(e);var t = (0, i.findDom)(this.root, ".xgplayer-miniplayer-drag");t && t.parentNode && t.parentNode.removeChild(t);};} }, e.exports = t.default;}, function (e, t, n) {var r, i;
    /*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * Draggabilly v2.3.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * Make that shiz draggable
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * https://draggabilly.desandro.com
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * MIT license
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */!function (a, o) {r = [n(94), n(95)], void 0 === (i = function (e, t) {return function (e, t, n) {function r(e, t) {for (var n in t) {e[n] = t[n];}return e;}var i = e.jQuery;function a(e, t) {this.element = "string" == typeof e ? document.querySelector(e) : e, i && (this.$element = i(this.element)), this.options = r({}, this.constructor.defaults), this.option(t), this._create();}var o = a.prototype = Object.create(n.prototype);a.defaults = {}, o.option = function (e) {r(this.options, e);};var l = { relative: !0, absolute: !0, fixed: !0 };function s(e, t, n) {return n = n || "round", t ? Math[n](e / t) * t : e;}o._create = function () {this.position = {}, this._getPosition(), this.startPoint = { x: 0, y: 0 }, this.dragPoint = { x: 0, y: 0 }, this.startPosition = r({}, this.position);var e = getComputedStyle(this.element);l[e.position] || (this.element.style.position = "relative"), this.on("pointerMove", this.onPointerMove), this.on("pointerUp", this.onPointerUp), this.enable(), this.setHandles();}, o.setHandles = function () {this.handles = this.options.handle ? this.element.querySelectorAll(this.options.handle) : [this.element], this.bindHandles();}, o.dispatchEvent = function (e, t, n) {var r = [t].concat(n);this.emitEvent(e, r), this.dispatchJQueryEvent(e, t, n);}, o.dispatchJQueryEvent = function (t, n, r) {var i = e.jQuery;if (i && this.$element) {var a = i.Event(n);a.type = t, this.$element.trigger(a, r);}}, o._getPosition = function () {var e = getComputedStyle(this.element),t = this._getPositionCoord(e.left, "width"),n = this._getPositionCoord(e.top, "height");this.position.x = isNaN(t) ? 0 : t, this.position.y = isNaN(n) ? 0 : n, this._addTransformPosition(e);}, o._getPositionCoord = function (e, n) {if (-1 != e.indexOf("%")) {var r = t(this.element.parentNode);return r ? parseFloat(e) / 100 * r[n] : 0;}return parseInt(e, 10);}, o._addTransformPosition = function (e) {var t = e.transform;if (0 === t.indexOf("matrix")) {var n = t.split(","),r = 0 === t.indexOf("matrix3d") ? 12 : 4,i = parseInt(n[r], 10),a = parseInt(n[r + 1], 10);this.position.x += i, this.position.y += a;}}, o.onPointerDown = function (e, t) {this.element.classList.add("is-pointer-down"), this.dispatchJQueryEvent("pointerDown", e, [t]);}, o.pointerDown = function (e, t) {this.okayPointerDown(e) && this.isEnabled ? (this.pointerDownPointer = { pageX: t.pageX, pageY: t.pageY }, e.preventDefault(), this.pointerDownBlur(), this._bindPostStartEvents(e), this.element.classList.add("is-pointer-down"), this.dispatchEvent("pointerDown", e, [t])) : this._pointerReset();}, o.dragStart = function (e, t) {this.isEnabled && (this._getPosition(), this.measureContainment(), this.startPosition.x = this.position.x, this.startPosition.y = this.position.y, this.setLeftTop(), this.dragPoint.x = 0, this.dragPoint.y = 0, this.element.classList.add("is-dragging"), this.dispatchEvent("dragStart", e, [t]), this.animate());}, o.measureContainment = function () {var e = this.getContainer();if (e) {var n = t(this.element),r = t(e),i = this.element.getBoundingClientRect(),a = e.getBoundingClientRect(),o = r.borderLeftWidth + r.borderRightWidth,l = r.borderTopWidth + r.borderBottomWidth,s = this.relativeStartPosition = { x: i.left - (a.left + r.borderLeftWidth), y: i.top - (a.top + r.borderTopWidth) };this.containSize = { width: r.width - o - s.x - n.width, height: r.height - l - s.y - n.height };}}, o.getContainer = function () {var e = this.options.containment;if (e) return e instanceof HTMLElement ? e : "string" == typeof e ? document.querySelector(e) : this.element.parentNode;}, o.onPointerMove = function (e, t, n) {this.dispatchJQueryEvent("pointerMove", e, [t, n]);}, o.dragMove = function (e, t, n) {if (this.isEnabled) {var r = n.x,i = n.y,a = this.options.grid,o = a && a[0],l = a && a[1];r = s(r, o), i = s(i, l), r = this.containDrag("x", r, o), i = this.containDrag("y", i, l), r = "y" == this.options.axis ? 0 : r, i = "x" == this.options.axis ? 0 : i, this.position.x = this.startPosition.x + r, this.position.y = this.startPosition.y + i, this.dragPoint.x = r, this.dragPoint.y = i, this.dispatchEvent("dragMove", e, [t, n]);}}, o.containDrag = function (e, t, n) {if (!this.options.containment) return t;var r = "x" == e ? "width" : "height",i = s(-this.relativeStartPosition[e], n, "ceil"),a = this.containSize[r];return a = s(a, n, "floor"), Math.max(i, Math.min(a, t));}, o.onPointerUp = function (e, t) {this.element.classList.remove("is-pointer-down"), this.dispatchJQueryEvent("pointerUp", e, [t]);}, o.dragEnd = function (e, t) {this.isEnabled && (this.element.style.transform = "", this.setLeftTop(), this.element.classList.remove("is-dragging"), this.dispatchEvent("dragEnd", e, [t]));}, o.animate = function () {if (this.isDragging) {this.positionDrag();var e = this;requestAnimationFrame(function () {e.animate();});}}, o.setLeftTop = function () {this.element.style.left = this.position.x + "px", this.element.style.top = this.position.y + "px";}, o.positionDrag = function () {this.element.style.transform = "translate3d( " + this.dragPoint.x + "px, " + this.dragPoint.y + "px, 0)";}, o.staticClick = function (e, t) {this.dispatchEvent("staticClick", e, [t]);}, o.setPosition = function (e, t) {this.position.x = e, this.position.y = t, this.setLeftTop();}, o.enable = function () {this.isEnabled = !0;}, o.disable = function () {this.isEnabled = !1, this.isDragging && this.dragEnd();}, o.destroy = function () {this.disable(), this.element.style.transform = "", this.element.style.left = "", this.element.style.top = "", this.element.style.position = "", this.unbindHandles(), this.$element && this.$element.removeData("draggabilly");}, o._init = function () {}, i && i.bridget && i.bridget("draggabilly", a);return a;}(a, e, t);}.apply(t, r)) || (e.exports = i);}(window);}, function (e, t, n) {var r, i;
    /*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * getSize v2.0.3
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * measure size of elements
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * MIT license
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */window, void 0 === (i = "function" == typeof (r = function r() {"use strict";function e(e) {var t = parseFloat(e);return -1 == e.indexOf("%") && !isNaN(t) && t;}var t = "undefined" == typeof console ? function () {} : function (e) {__f__("error", e, " at node_modules/xgplayer/dist/index.js:12");},n = ["paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth"],r = n.length;function i(e) {var n = getComputedStyle(e);return n || t("Style returned " + n + ". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"), n;}var a,o = !1;function l(t) {if (function () {if (!o) {o = !0;var t = document.createElement("div");t.style.width = "200px", t.style.padding = "1px 2px 3px 4px", t.style.borderStyle = "solid", t.style.borderWidth = "1px 2px 3px 4px", t.style.boxSizing = "border-box";var n = document.body || document.documentElement;n.appendChild(t);var r = i(t);a = 200 == Math.round(e(r.width)), l.isBoxSizeOuter = a, n.removeChild(t);}}(), "string" == typeof t && (t = document.querySelector(t)), t && "object" == typeof t && t.nodeType) {var s = i(t);if ("none" == s.display) return function () {for (var e = { width: 0, height: 0, innerWidth: 0, innerHeight: 0, outerWidth: 0, outerHeight: 0 }, t = 0; t < r; t++) {e[n[t]] = 0;}return e;}();var u = {};u.width = t.offsetWidth, u.height = t.offsetHeight;for (var c = u.isBorderBox = "border-box" == s.boxSizing, p = 0; p < r; p++) {var d = n[p],f = s[d],g = parseFloat(f);u[d] = isNaN(g) ? 0 : g;}var h = u.paddingLeft + u.paddingRight,y = u.paddingTop + u.paddingBottom,x = u.marginLeft + u.marginRight,v = u.marginTop + u.marginBottom,m = u.borderLeftWidth + u.borderRightWidth,b = u.borderTopWidth + u.borderBottomWidth,k = c && a,w = e(s.width);!1 !== w && (u.width = w + (k ? 0 : h + m));var _ = e(s.height);return !1 !== _ && (u.height = _ + (k ? 0 : y + b)), u.innerWidth = u.width - (h + m), u.innerHeight = u.height - (y + b), u.outerWidth = u.width + x, u.outerHeight = u.height + v, u;}}return l;}) ? r.call(t, n, t, e) : r) || (e.exports = i);}, function (e, t, n) {var r, i;
    /*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Unidragger v2.3.1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Draggable base class
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * MIT license
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */!function (a, o) {r = [n(96)], void 0 === (i = function (e) {return function (e, t) {"use strict";function n() {}var r = n.prototype = Object.create(t.prototype);r.bindHandles = function () {this._bindHandles(!0);}, r.unbindHandles = function () {this._bindHandles(!1);}, r._bindHandles = function (t) {for (var n = (t = void 0 === t || t) ? "addEventListener" : "removeEventListener", r = t ? this._touchActionValue : "", i = 0; i < this.handles.length; i++) {var a = this.handles[i];this._bindStartEvent(a, t), a[n]("click", this), e.PointerEvent && (a.style.touchAction = r);}}, r._touchActionValue = "none", r.pointerDown = function (e, t) {this.okayPointerDown(e) && (this.pointerDownPointer = { pageX: t.pageX, pageY: t.pageY }, e.preventDefault(), this.pointerDownBlur(), this._bindPostStartEvents(e), this.emitEvent("pointerDown", [e, t]));};var i = { TEXTAREA: !0, INPUT: !0, SELECT: !0, OPTION: !0 },a = { radio: !0, checkbox: !0, button: !0, submit: !0, image: !0, file: !0 };return r.okayPointerDown = function (e) {var t = i[e.target.nodeName],n = a[e.target.type],r = !t || n;return r || this._pointerReset(), r;}, r.pointerDownBlur = function () {var e = document.activeElement;e && e.blur && e != document.body && e.blur();}, r.pointerMove = function (e, t) {var n = this._dragPointerMove(e, t);this.emitEvent("pointerMove", [e, t, n]), this._dragMove(e, t, n);}, r._dragPointerMove = function (e, t) {var n = { x: t.pageX - this.pointerDownPointer.pageX, y: t.pageY - this.pointerDownPointer.pageY };return !this.isDragging && this.hasDragStarted(n) && this._dragStart(e, t), n;}, r.hasDragStarted = function (e) {return Math.abs(e.x) > 3 || Math.abs(e.y) > 3;}, r.pointerUp = function (e, t) {this.emitEvent("pointerUp", [e, t]), this._dragPointerUp(e, t);}, r._dragPointerUp = function (e, t) {this.isDragging ? this._dragEnd(e, t) : this._staticClick(e, t);}, r._dragStart = function (e, t) {this.isDragging = !0, this.isPreventingClicks = !0, this.dragStart(e, t);}, r.dragStart = function (e, t) {this.emitEvent("dragStart", [e, t]);}, r._dragMove = function (e, t, n) {this.isDragging && this.dragMove(e, t, n);}, r.dragMove = function (e, t, n) {e.preventDefault(), this.emitEvent("dragMove", [e, t, n]);}, r._dragEnd = function (e, t) {this.isDragging = !1, setTimeout(function () {delete this.isPreventingClicks;}.bind(this)), this.dragEnd(e, t);}, r.dragEnd = function (e, t) {this.emitEvent("dragEnd", [e, t]);}, r.onclick = function (e) {this.isPreventingClicks && e.preventDefault();}, r._staticClick = function (e, t) {this.isIgnoringMouseUp && "mouseup" == e.type || (this.staticClick(e, t), "mouseup" != e.type && (this.isIgnoringMouseUp = !0, setTimeout(function () {delete this.isIgnoringMouseUp;}.bind(this), 400)));}, r.staticClick = function (e, t) {this.emitEvent("staticClick", [e, t]);}, n.getPointerPoint = t.getPointerPoint, n;}(a, e);}.apply(t, r)) || (e.exports = i);}(window);}, function (e, t, n) {var r, i;
    /*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * Unipointer v2.3.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * base class for doing one thing with pointer event
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         * MIT license
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         */!function (a, o) {r = [n(97)], void 0 === (i = function (e) {return function (e, t) {"use strict";function n() {}var r = n.prototype = Object.create(t.prototype);r.bindStartEvent = function (e) {this._bindStartEvent(e, !0);}, r.unbindStartEvent = function (e) {this._bindStartEvent(e, !1);}, r._bindStartEvent = function (t, n) {var r = (n = void 0 === n || n) ? "addEventListener" : "removeEventListener",i = "mousedown";e.PointerEvent ? i = "pointerdown" : "ontouchstart" in e && (i = "touchstart"), t[r](i, this);}, r.handleEvent = function (e) {var t = "on" + e.type;this[t] && this[t](e);}, r.getTouch = function (e) {for (var t = 0; t < e.length; t++) {var n = e[t];if (n.identifier == this.pointerIdentifier) return n;}}, r.onmousedown = function (e) {var t = e.button;t && 0 !== t && 1 !== t || this._pointerDown(e, e);}, r.ontouchstart = function (e) {this._pointerDown(e, e.changedTouches[0]);}, r.onpointerdown = function (e) {this._pointerDown(e, e);}, r._pointerDown = function (e, t) {e.button || this.isPointerDown || (this.isPointerDown = !0, this.pointerIdentifier = void 0 !== t.pointerId ? t.pointerId : t.identifier, this.pointerDown(e, t));}, r.pointerDown = function (e, t) {this._bindPostStartEvents(e), this.emitEvent("pointerDown", [e, t]);};var i = { mousedown: ["mousemove", "mouseup"], touchstart: ["touchmove", "touchend", "touchcancel"], pointerdown: ["pointermove", "pointerup", "pointercancel"] };return r._bindPostStartEvents = function (t) {if (t) {var n = i[t.type];n.forEach(function (t) {e.addEventListener(t, this);}, this), this._boundPointerEvents = n;}}, r._unbindPostStartEvents = function () {this._boundPointerEvents && (this._boundPointerEvents.forEach(function (t) {e.removeEventListener(t, this);}, this), delete this._boundPointerEvents);}, r.onmousemove = function (e) {this._pointerMove(e, e);}, r.onpointermove = function (e) {e.pointerId == this.pointerIdentifier && this._pointerMove(e, e);}, r.ontouchmove = function (e) {var t = this.getTouch(e.changedTouches);t && this._pointerMove(e, t);}, r._pointerMove = function (e, t) {this.pointerMove(e, t);}, r.pointerMove = function (e, t) {this.emitEvent("pointerMove", [e, t]);}, r.onmouseup = function (e) {this._pointerUp(e, e);}, r.onpointerup = function (e) {e.pointerId == this.pointerIdentifier && this._pointerUp(e, e);}, r.ontouchend = function (e) {var t = this.getTouch(e.changedTouches);t && this._pointerUp(e, t);}, r._pointerUp = function (e, t) {this._pointerDone(), this.pointerUp(e, t);}, r.pointerUp = function (e, t) {this.emitEvent("pointerUp", [e, t]);}, r._pointerDone = function () {this._pointerReset(), this._unbindPostStartEvents(), this.pointerDone();}, r._pointerReset = function () {this.isPointerDown = !1, delete this.pointerIdentifier;}, r.pointerDone = function () {}, r.onpointercancel = function (e) {e.pointerId == this.pointerIdentifier && this._pointerCancel(e, e);}, r.ontouchcancel = function (e) {var t = this.getTouch(e.changedTouches);t && this._pointerCancel(e, t);}, r._pointerCancel = function (e, t) {this._pointerDone(), this.pointerCancel(e, t);}, r.pointerCancel = function (e, t) {this.emitEvent("pointerCancel", [e, t]);}, n.getPointerPoint = function (e) {return { x: e.pageX, y: e.pageY };}, n;}(a, e);}.apply(t, r)) || (e.exports = i);}(window);}, function (e, t, n) {var r, i;"undefined" != typeof window && window, void 0 === (i = "function" == typeof (r = function r() {"use strict";function e() {}var t = e.prototype;return t.on = function (e, t) {if (e && t) {var n = this._events = this._events || {},r = n[e] = n[e] || [];return -1 == r.indexOf(t) && r.push(t), this;}}, t.once = function (e, t) {if (e && t) {this.on(e, t);var n = this._onceEvents = this._onceEvents || {};return (n[e] = n[e] || {})[t] = !0, this;}}, t.off = function (e, t) {var n = this._events && this._events[e];if (n && n.length) {var r = n.indexOf(t);return -1 != r && n.splice(r, 1), this;}}, t.emitEvent = function (e, t) {var n = this._events && this._events[e];if (n && n.length) {n = n.slice(0), t = t || [];for (var r = this._onceEvents && this._onceEvents[e], i = 0; i < n.length; i++) {var a = n[i];r && r[a] && (this.off(e, a), delete r[a]), a.apply(this, t);}return this;}}, t.allOff = function () {delete this._events, delete this._onceEvents;}, e;}) ? r.call(t, n, t, e) : r) || (e.exports = i);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "pip", method: function method() {var e = this;function t() {e.video !== document.pictureInPictureElement ? e.video.requestPictureInPicture() : document.exitPictureInPicture();}e.on("pipBtnClick", t), e.video.addEventListener("enterpictureinpicture", function (t) {e.emit("requestPictureInPicture", t);}), e.video.addEventListener("leavepictureinpicture", function () {e.emit("exitPictureInPicture");}), e.once("destroy", function n() {e.off("pipBtnClick", t), e.off("destroy", n);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "playNext", method: function method() {var e = this,t = e.config.playNext;function n() {e.currentVideoIndex + 1 < t.urlList.length && (e.currentVideoIndex++, e.video.autoplay = !0, e.src = t.urlList[e.currentVideoIndex], e.emit("playerNext", e.currentVideoIndex + 1), e.currentVideoIndex + 1 === t.urlList.length && e.emit("urlListEnd"));}e.currentVideoIndex = -1, e.on("playNextBtnClick", n), e.once("destroy", function t() {e.off("playNextBtnClick", n), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "reload", method: function method() {var e = this;function t() {(0, r.removeClass)(e.root, "xgplayer-is-error"), e.src = e.config.url;}e.config.reload && (e.on("reloadBtnClick", t), e.once("destroy", function n() {e.off("reloadBtnClick", t), e.off("destroy", n);}));} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "rotate", method: function method() {var e = this,t = e.config.rotate;function n() {e.rotate(t.clockwise, t.innerRotate);}t && (e.on("rotateBtnClick", n), e.once("destroy", function t() {e.off("rotateBtnClick", n), e.off("destroy", t);}), e.updateRotateDeg = function () {this.rotateDeg || (this.rotateDeg = 0);var e = this.root.offsetWidth,t = this.root.offsetHeight,n = this.video.videoWidth,r = this.video.videoHeight;!this.config.rotate.innerRotate && this.config.rotate.controlsFix && (this.root.style.width = t + "px", this.root.style.height = e + "px");var i = void 0;if (.25 === this.rotateDeg || .75 === this.rotateDeg) {if (this.config.rotate.innerRotate) {if (n / r > t / e) {i = t / (r / n > t / e ? t * n / r : e);} else {i = e / (r / n > t / e ? t : e * r / n);}} else i = e >= t ? e / t : t / e;i = Number(i.toFixed(5));} else i = 1;this.config.rotate.innerRotate || this.config.rotate.controlsFix ? (this.video.style.transformOrigin = "center center", this.video.style.transform = "rotate(" + this.rotateDeg + "turn) scale(" + i + ")", this.video.style.webKitTransform = "rotate(" + this.rotateDeg + "turn) scale(" + i + ")") : (this.root.style.transformOrigin = "center center", this.root.style.transform = "rotate(" + this.rotateDeg + "turn) scale(1)", this.root.style.webKitTransform = "rotate(" + this.rotateDeg + "turn) scale(1)");}, e.rotate = function () {var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,n = this;n.rotateDeg || (n.rotateDeg = 0);var r = e ? 1 : -1;n.rotateDeg = (n.rotateDeg + 1 + .25 * r * t) % 1, this.updateRotateDeg(), n.emit("rotate", 360 * n.rotateDeg);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });t.default = { name: "screenShot", method: function method() {var e = this,t = e.config.screenShot;if (t) {e.video.setAttribute("crossOrigin", "anonymous");var n = .92;(t.quality || 0 === t.quality) && (n = t.quality);var r = void 0 === t.type ? "image/png" : t.type,i = void 0 === t.format ? ".png" : t.format,a = document.createElement("canvas"),o = a.getContext("2d"),l = new Image();a.width = this.config.width || 600, a.height = this.config.height || 337.5;var s = function s(e, t) {var n = document.createElement("a");n.href = e, n.download = t;var r = document.createEvent("MouseEvents");r.initMouseEvent("click", !0, !1, window, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), n.dispatchEvent(r);};e.screenShot = function () {var u = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];u = void 0 === t.saveImg ? u : t.saveImg, a.width = e.video.videoWidth || 600, a.height = e.video.videoHeight || 337.5, l.onload = function () {o.drawImage(e.video, 0, 0, a.width, a.height), l.src = a.toDataURL(r, n).replace(r, "image/octet-stream");var t = l.src.replace(/^data:image\/[^;]+/, "data:application/octet-stream");e.emit("screenShot", t), u && s(t, "截图" + i);}();}, e.on("screenShotBtnClick", e.screenShot), e.once("destroy", function t() {e.off("screenShotBtnClick", e.screenShot), e.off("destroy", t);});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(4),o = (r = a) && r.__esModule ? r : { default: r };t.default = { name: "volume", method: function method() {var e = this,t = e.root,n = void 0,r = void 0,a = void 0,l = void 0;function s() {e.controls && (e.volume = e.config.volume, (n = e.controls.querySelector(".xgplayer-volume")) && (r = n.querySelector(".xgplayer-slider"), a = n.querySelector(".xgplayer-bar"), l = n.querySelector(".xgplayer-drag"), "mobile" === o.default.device && g()));}function u(t) {if (r) {e.video.muted = !1, r.focus(), (0, i.event)(t);var n = a.getBoundingClientRect(),o = (t.clientX, t.clientY),s = l.getBoundingClientRect().height,u = !1,c = function c(t) {t.preventDefault(), t.stopPropagation(), (0, i.event)(t), u = !0;var r = s - t.clientY + o,a = r / n.height;l.style.height = r + "px", e.volume = Math.max(Math.min(a, 1), 0);},p = function t(a) {if (a.preventDefault(), a.stopPropagation(), (0, i.event)(a), window.removeEventListener("mousemove", c), window.removeEventListener("touchmove", c), window.removeEventListener("mouseup", t), window.removeEventListener("touchend", t), !u) {var o = n.height - (a.clientY - n.top),s = o / n.height;l.style.height = o + "px", s <= 0 && (e.volume > 0 ? l.volume = e.video.volume : s = l.volume), e.volume = Math.max(Math.min(s, 1), 0);}r.volume = e.volume, u = !1;};return window.addEventListener("mousemove", c), window.addEventListener("touchmove", c), window.addEventListener("mouseup", p), window.addEventListener("touchend", p), !1;}}function c() {if ("mobile" === o.default.device) e.video.muted ? (e.video.muted = !1, e.emit("unmute"), e.volume = 1) : (e.video.muted = !0, e.emit("mute"), e.volume = 0);else {if (!r) return;e.video.muted = !1, e.volume < .1 ? (r.volume < .1 ? e.volume = .6 : e.volume = r.volume, e.emit("unmute")) : (e.volume = 0, e.emit("mute"));}}function p() {(0, i.addClass)(t, "xgplayer-volume-active"), n && n.focus();}function d() {(0, i.removeClass)(t, "xgplayer-volume-active");}e.once("canplay", s), e.on("volumeBarClick", u), e.on("volumeIconClick", c), e.on("volumeIconEnter", p), e.on("volumeIconLeave", d);var f = null;function g() {f && clearTimeout(f), f = setTimeout(function () {if ("mobile" === o.default.device) (0, i.removeClass)(t, "xgplayer-volume-muted"), (0, i.removeClass)(t, "xgplayer-volume-large"), e.video.muted || e.video.defaultMuted ? (e.video.muted || (e.video.muted = !0), e.video.defaultMuted = !1, (0, i.addClass)(t, "xgplayer-volume-muted")) : (0, i.addClass)(t, "xgplayer-volume-large");else {if ((0, i.removeClass)(t, "xgplayer-volume-muted"), (0, i.removeClass)(t, "xgplayer-volume-small"), (0, i.removeClass)(t, "xgplayer-volume-large"), 0 === e.volume ? (0, i.addClass)(t, "xgplayer-volume-muted") : e.volume < .5 ? (0, i.addClass)(t, "xgplayer-volume-small") : (0, i.addClass)(t, "xgplayer-volume-large"), !a) return;var n = a.getBoundingClientRect().height || 76;l.style.height = e.volume * n + "px";}}, 50);}e.on("volumechange", g), e.once("destroy", function t() {e.off("canplay", s), e.off("volumeBarClick", u), e.off("volumeIconClick", c), e.off("volumeIconEnter", p), e.off("volumeIconLeave", d), e.off("volumechange", g), e.off("destroy", t), f && (clearTimeout(f), f = null);});} }, e.exports = t.default;}, function (e, t, n) {"use strict";var r = D(n(9)),i = D(n(10)),a = D(n(105)),o = D(n(48)),l = D(n(40)),s = D(n(53)),u = D(n(56)),c = D(n(59)),p = D(n(108)),d = D(n(113)),f = D(n(119)),g = D(n(64)),h = D(n(68)),y = D(n(71)),x = D(n(74)),v = D(n(122)),m = D(n(125)),b = D(n(126)),k = D(n(130)),w = D(n(136)),_ = D(n(139)),E = D(n(142)),T = D(n(146)),C = D(n(150)),S = D(n(154)),P = D(n(157)),O = D(n(159)),L = D(n(161)),M = D(n(164)),R = D(n(167));function D(e) {return e && e.__esModule ? e : { default: e };}r.default.installAll([i.default, a.default, o.default, l.default, s.default, u.default, c.default, p.default, d.default, f.default, g.default, h.default, y.default, x.default, v.default, m.default, b.default, k.default, w.default, _.default, E.default, T.default, C.default, S.default, P.default, O.default, L.default, M.default, R.default]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(106);t.default = { name: "s_enter", method: function method() {for (var e = this.root, t = "", n = 1; n <= 12; n++) {t += '<div class="xgplayer-enter-bar' + n + '"></div>';}var i = (0, r.createDom)("xg-enter", '<div class="xgplayer-enter-spinner">\n                                                  ' + t + "\n                                                </div>", {}, "xgplayer-enter");e.appendChild(i);} }, e.exports = t.default;}, function (e, t, n) {var r = n(107);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-enter{display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:#000;z-index:120}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner{display:block;position:absolute;left:50%;top:50%;height:100px;width:100px;position:relative;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div{width:12%;height:26%;background-color:hsla(0,0%,100%,.7);position:absolute;left:44%;top:37%;opacity:0;border-radius:30px;-webkit-animation:fade 1s linear infinite;animation:fade 1s linear infinite}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar1{-webkit-transform:rotate(0deg) translateY(-142%);-ms-transform:rotate(0deg) translateY(-142%);transform:rotate(0deg) translateY(-142%);-webkit-animation-delay:0s;animation-delay:0s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar2{-webkit-transform:rotate(30deg) translateY(-142%);-ms-transform:rotate(30deg) translateY(-142%);transform:rotate(30deg) translateY(-142%);-webkit-animation-delay:-.9163s;animation-delay:-.9163s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar3{-webkit-transform:rotate(60deg) translateY(-142%);-ms-transform:rotate(60deg) translateY(-142%);transform:rotate(60deg) translateY(-142%);-webkit-animation-delay:-.833s;animation-delay:-.833s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar4{-webkit-transform:rotate(90deg) translateY(-142%);-ms-transform:rotate(90deg) translateY(-142%);transform:rotate(90deg) translateY(-142%);-webkit-animation-delay:-.7497s;animation-delay:-.7497s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar5{-webkit-transform:rotate(120deg) translateY(-142%);-ms-transform:rotate(120deg) translateY(-142%);transform:rotate(120deg) translateY(-142%);-webkit-animation-delay:-.6664s;animation-delay:-.6664s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar6{-webkit-transform:rotate(150deg) translateY(-142%);-ms-transform:rotate(150deg) translateY(-142%);transform:rotate(150deg) translateY(-142%);-webkit-animation-delay:-.5831s;animation-delay:-.5831s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar7{-webkit-transform:rotate(180deg) translateY(-142%);-ms-transform:rotate(180deg) translateY(-142%);transform:rotate(180deg) translateY(-142%);-webkit-animation-delay:-.4998s;animation-delay:-.4998s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar8{-webkit-transform:rotate(210deg) translateY(-142%);-ms-transform:rotate(210deg) translateY(-142%);transform:rotate(210deg) translateY(-142%);-webkit-animation-delay:-.4165s;animation-delay:-.4165s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar9{-webkit-transform:rotate(240deg) translateY(-142%);-ms-transform:rotate(240deg) translateY(-142%);transform:rotate(240deg) translateY(-142%);-webkit-animation-delay:-.3332s;animation-delay:-.3332s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar10{-webkit-transform:rotate(270deg) translateY(-142%);-ms-transform:rotate(270deg) translateY(-142%);transform:rotate(270deg) translateY(-142%);-webkit-animation-delay:-.2499s;animation-delay:-.2499s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar11{-webkit-transform:rotate(300deg) translateY(-142%);-ms-transform:rotate(300deg) translateY(-142%);transform:rotate(300deg) translateY(-142%);-webkit-animation-delay:-.1666s;animation-delay:-.1666s}.xgplayer-skin-default .xgplayer-enter .xgplayer-enter-spinner div.xgplayer-enter-bar12{-webkit-transform:rotate(330deg) translateY(-142%);-ms-transform:rotate(330deg) translateY(-142%);transform:rotate(330deg) translateY(-142%);-webkit-animation-delay:-.0833s;animation-delay:-.0833s}@-webkit-keyframes fade{0%{opacity:1}to{opacity:.25}}@keyframes fade{0%{opacity:1}to{opacity:.25}}.xgplayer-skin-default.xgplayer-is-enter .xgplayer-enter{display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0),i = o(n(109)),a = o(n(110));function o(e) {return e && e.__esModule ? e : { default: e };}n(111);t.default = { name: "s_cssFullscreen", method: function method() {var e = this;if (e.config.cssFullscreen) {var t = (0, r.createDom)("xg-cssfullscreen", '<xg-icon class="xgplayer-icon">\n                                             <div class="xgplayer-icon-requestfull">' + i.default + '</div>\n                                             <div class="xgplayer-icon-exitfull">' + a.default + "</div>\n                                           </xg-icon>", {}, "xgplayer-cssfullscreen"),n = {};n.requestfull = e.lang.CSSFULLSCREEN_TIPS, n.exitfull = e.lang.EXITCSSFULLSCREEN_TIPS;var o = (0, r.createDom)("xg-tips", '<span class="xgplayer-tip-requestfull">' + n.requestfull + '</span>\n                                        <span class="xgplayer-tip-exitfull">' + n.exitfull + "</span>", {}, "xgplayer-tips");t.appendChild(o), e.once("ready", function () {e.controls.appendChild(t);}), ["click", "touchend"].forEach(function (n) {t.addEventListener(n, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("cssFullscreenBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.028 0.028)" d="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z"></path>\n</svg>\n';}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.028 0.028)" d="M834.56 81.92H189.44c-59.392 0-107.52 48.128-107.52 107.52v645.12c0 59.392 48.128 107.52 107.52 107.52h645.12c59.392 0 107.52-48.128 107.52-107.52V189.44c0-59.392-48.128-107.52-107.52-107.52zM458.24 727.04c0 14.848-12.288 26.624-26.624 26.624S404.48 741.888 404.48 727.04v-69.632L289.28 773.12c-10.752 10.24-27.648 10.24-37.888 0-10.24-10.752-10.24-27.648 0-37.888L366.592 619.52H296.96c-14.848 0-26.624-12.288-26.624-26.624s12.288-26.624 26.624-26.624h134.144c14.848 0 26.624 12.288 26.624 26.624V727.04z m0-295.936c0 14.848-12.288 26.624-26.624 26.624H296.96c-14.848 0-26.624-12.288-26.624-26.624S282.112 404.48 296.96 404.48h69.632L251.392 289.28c-10.24-10.752-10.24-27.648 0-37.888 5.12-5.12 12.288-7.68 18.944-7.68 6.656 0 13.824 2.56 18.944 7.68L404.48 366.592V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v134.144zM773.12 773.12c-10.752 10.24-27.648 10.24-37.888 0L619.52 657.408V727.04c0 14.848-12.288 26.624-26.624 26.624s-26.624-11.776-26.624-26.624v-134.144c0-14.848 12.288-26.624 26.624-26.624H727.04c14.848 0 26.624 12.288 26.624 26.624s-12.288 26.624-26.624 26.624h-69.632l115.2 115.2c10.752 10.752 10.752 27.648 0.512 38.4z m0-483.84L657.408 404.48H727.04c14.848 0 26.624 12.288 26.624 26.624 0 14.848-12.288 26.624-26.624 26.624h-134.144c-14.848 0-26.624-12.288-26.624-26.624V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v69.632L734.72 250.88c5.12-5.12 12.288-7.68 18.944-7.68s13.824 2.56 18.944 7.68c10.752 10.752 10.752 27.648 0.512 38.4z"></path>\n</svg>\n';}, function (e, t, n) {var r = n(112);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-cssfullscreen,.xgplayer-skin-default .xgplayer-cssfullscreen-img{position:relative;-webkit-order:12;-moz-box-ordinal-group:13;order:12;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon{width:32px;margin-top:5px}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon div,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:none}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-40px}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:block}.xgplayer-skin-default .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:none}.xgplayer-skin-default .xgplayer-cssfullscreen-img:hover,.xgplayer-skin-default .xgplayer-cssfullscreen:hover{opacity:.85}.xgplayer-skin-default .xgplayer-cssfullscreen-img:hover .xgplayer-tips,.xgplayer-skin-default .xgplayer-cssfullscreen:hover .xgplayer-tips{display:block}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-requestfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-icon .xgplayer-icon-exitfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-icon .xgplayer-icon-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-47px}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-requestfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-requestfull{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips .xgplayer-tip-exitfull,.xgplayer-skin-default.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips .xgplayer-tip-exitfull{display:block}.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-cssfullscreen,.xgplayer-skin-default.xgplayer-is-fullscreen .xgplayer-cssfullscreen-img{display:none}.xgplayer-skin-default.xgplayer-is-cssfullscreen{position:fixed!important;left:0!important;top:0!important;width:100%!important;height:100%!important;z-index:99999!important}.xgplayer-lang-is-en .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-lang-is-en .xgplayer-cssfullscreen .xgplayer-tips,.xgplayer-lang-is-en.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.xgplayer-lang-is-en.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-46px}.lang-is-jp .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-jp .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-120px}.lang-is-jp.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen-img .xgplayer-tips,.lang-is-jp.xgplayer-is-cssfullscreen .xgplayer-cssfullscreen .xgplayer-tips{margin-left:-60px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0),i = l(n(114)),a = l(n(115)),o = l(n(116));function l(e) {return e && e.__esModule ? e : { default: e };}n(117);t.default = { name: "s_volume", method: function method() {var e = this,t = (0, r.createDom)("xg-volume", '<xg-icon class="xgplayer-icon">\n                                         <div class="xgplayer-icon-large">' + o.default + '</div>\n                                         <div class="xgplayer-icon-small">' + a.default + '</div>\n                                         <div class="xgplayer-icon-muted">' + i.default + '</div>\n                                       </xg-icon>\n                                       <xg-slider class="xgplayer-slider" tabindex="2">\n                                         <xg-bar class="xgplayer-bar">\n                                           <xg-drag class="xgplayer-drag"></xg-drag>\n                                         </xg-bar>\n                                       </xg-slider>', {}, "xgplayer-volume");e.once("ready", function () {e.controls && e.controls.appendChild(t);});var n = t.querySelector(".xgplayer-slider"),l = t.querySelector(".xgplayer-bar"),s = t.querySelector(".xgplayer-drag"),u = t.querySelector(".xgplayer-icon");s.style.height = 100 * e.config.volume + "%", n.volume = e.config.volume, l.addEventListener("mousedown", function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("volumeBarClick", t);}), ["click", "touchend"].forEach(function (t) {u.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("volumeIconClick");});}), u.addEventListener("mouseenter", function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("volumeIconEnter");}), ["blur", "mouseleave"].forEach(function (n) {t.addEventListener(n, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("volumeIconLeave");});});} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n';}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n';}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n';}, function (e, t, n) {var r = n(118);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, '.xgplayer-skin-default .xgplayer-volume{outline:none;-webkit-order:4;-moz-box-ordinal-group:5;order:4;width:40px;height:40px;display:block;position:relative;z-index:18}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon{margin-top:8px;cursor:pointer;position:absolute;bottom:-9px}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:block}.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted,.xgplayer-skin-default .xgplayer-volume .xgplayer-icon .xgplayer-icon-small{display:none}.xgplayer-skin-default .xgplayer-slider{display:none;position:absolute;width:28px;height:92px;background:rgba(0,0,0,.54);border-radius:1px;bottom:42px;outline:none}.xgplayer-skin-default .xgplayer-slider:after{content:" ";display:block;height:15px;width:28px;position:absolute;bottom:-15px;left:0;z-index:20}.xgplayer-skin-default .xgplayer-bar,.xgplayer-skin-default .xgplayer-drag{display:block;position:absolute;bottom:6px;left:12px;background:hsla(0,0%,100%,.3);border-radius:100px;width:4px;height:76px;outline:none;cursor:pointer}.xgplayer-skin-default .xgplayer-drag{bottom:0;left:0;background:#fa1f41;max-height:76px}.xgplayer-skin-default .xgplayer-drag:after{content:" ";display:inline-block;width:8px;height:8px;background:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,.26);position:absolute;border-radius:50%;left:-2px;top:-6px}.xgplayer-skin-default.xgplayer-volume-active .xgplayer-slider,.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:block}.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted,.xgplayer-skin-default.xgplayer-volume-large .xgplayer-volume .xgplayer-icon .xgplayer-icon-small,.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-large{display:none}.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-small{display:block}.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-large,.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-small,.xgplayer-skin-default.xgplayer-volume-small .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted{display:none}.xgplayer-skin-default.xgplayer-volume-muted .xgplayer-volume .xgplayer-icon .xgplayer-icon-muted{display:block}.xgplayer-skin-default.xgplayer-mobile .xgplayer-volume .xgplayer-slider{display:none}', ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(4),o = (r = a) && r.__esModule ? r : { default: r };n(120);t.default = { name: "s_definition", method: function method() {var e = this,t = e.root,n = void 0,r = (0, i.createDom)("xg-definition", "", { tabindex: 3 }, "xgplayer-definition");function a() {var n = e.definitionList,a = ["<ul>"],o = e.config.url,l = document.createElement("a");e.switchURL ? ["mp4", "hls", "__flv__", "dash"].every(function (t) {return !e[t] || (e[t].url && (l.href = e[t].url), "__flv__" === t && (e[t]._options ? l.href = e[t]._options.url : l.href = e[t]._mediaDataSource.url), "hls" === t && (l.href = e[t].originUrl || e[t].url, o = l.href), o = l.href, !1);}) : o = e.currentSrc || e.src, n.forEach(function (t) {l.href = t.url, e.dash ? a.push("<li url='" + t.url + "' cname='" + t.name + "' class='" + (t.selected ? "selected" : "") + "'>" + t.name + "</li>") : a.push("<li url='" + t.url + "' cname='" + t.name + "' class='" + (l.href === o ? "selected" : "") + "'>" + t.name + "</li>");});var s = n.filter(function (t) {return l.href = t.url, e.dash ? !0 === t.selected : l.href === o;});a.push("</ul><p class='name'>" + (s[0] || { name: "" }).name + "</p>");var u = t.querySelector(".xgplayer-definition");if (u) {u.innerHTML = a.join("");var c = u.querySelector(".name");e.config.definitionActive && "hover" !== e.config.definitionActive || c.addEventListener("mouseenter", function (t) {t.preventDefault(), t.stopPropagation(), (0, i.addClass)(e.root, "xgplayer-definition-active"), u.focus();});} else {r.innerHTML = a.join("");var p = r.querySelector(".name");e.config.definitionActive && "hover" !== e.config.definitionActive || p.addEventListener("mouseenter", function (t) {t.preventDefault(), t.stopPropagation(), (0, i.addClass)(e.root, "xgplayer-definition-active"), r.focus();}), e.controls.appendChild(r);}}function l(n) {e.definitionList = n, n && n instanceof Array && n.length > 1 && ((0, i.addClass)(t, "xgplayer-is-definition"), e.once("canplay", a));}function s() {if (e.currentTime = e.curTime, !n) {var t = e.play();void 0 !== t && t && t.catch(function (e) {});}}function u() {e.once("timeupdate", s);}function c() {(0, i.removeClass)(t, "xgplayer-definition-active");}"mobile" === o.default.device && (e.config.definitionActive = "click"), e.on("resourceReady", l), ["touchend", "click"].forEach(function (t) {r.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation();var a = e.definitionList,l = t.target || t.srcElement,c = document.createElement("a");if (l && "li" === l.tagName.toLocaleLowerCase()) {var p,d = void 0;if (Array.prototype.forEach.call(l.parentNode.childNodes, function (t) {(0, i.hasClass)(t, "selected") && (d = t.getAttribute("cname"), (0, i.removeClass)(t, "selected"), e.emit("beforeDefinitionChange", t.getAttribute("url")));}), e.dash && a.forEach(function (e) {e.selected = !1, e.name === l.innerHTML && (e.selected = !0);}), (0, i.addClass)(l, "selected"), p = l.getAttribute("cname"), l.parentNode.nextSibling.innerHTML = "" + l.getAttribute("cname"), c.href = l.getAttribute("url"), e.switchURL) {var f = document.createElement("a");["mp4", "hls", "__flv__", "dash"].every(function (t) {return !e[t] || (e[t].url && (f.href = e[t].url), "__flv__" === t && (e[t]._options ? f.href = e[t]._options.url : f.href = e[t]._mediaDataSource.url), "hls" === t && (f.href = e[t].originUrl || e[t].url), !1);}), f.href === c.href || e.ended || e.switchURL(c.href);} else {if (e.hls) {document.createElement("a");e.hls.url;}c.href !== e.currentSrc && (e.curTime = e.currentTime, n = e.paused, e.ended || (e.src = c.href, navigator.userAgent.toLowerCase().indexOf("android") > -1 ? e.once("timeupdate", u) : e.once("playing", s)));}e.emit("definitionChange", { from: d, to: p }), "mobile" === o.default.device && (0, i.removeClass)(e.root, "xgplayer-definition-active");} else "click" !== e.config.definitionActive || !l || "p" !== l.tagName.toLocaleLowerCase() && "em" !== l.tagName.toLocaleLowerCase() || ("mobile" === o.default.device ? (0, i.toggleClass)(e.root, "xgplayer-definition-active") : (0, i.addClass)(e.root, "xgplayer-definition-active"), r.focus());e.emit("focus");}, !1);}), r.addEventListener("mouseleave", function (e) {e.preventDefault(), e.stopPropagation(), (0, i.removeClass)(t, "xgplayer-definition-active");}), e.on("blur", c), e.once("destroy", function t() {e.off("resourceReady", l), e.off("canplay", a), navigator.userAgent.toLowerCase().indexOf("android") > -1 ? (e.off("timeupdate", u), e.off("timeupdate", s)) : e.off("playing", s), e.off("blur", c), e.off("destroy", t);}), e.getCurrentDefinition = function () {for (var t = e.controls.querySelectorAll(".xgplayer-definition ul li"), n = 0; n < t.length; n++) {if (t[n].className && t[n].className.indexOf("selected") > -1) return { name: t[n].getAttribute("cname"), url: t[n].getAttribute("url") };}return { name: t[0].getAttribute("cname"), url: t[0].getAttribute("url") };}, e.switchDefinition = function () {for (var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = e.controls.querySelectorAll(".xgplayer-definition ul li"), r = 0; r < n.length; r++) {n[r].getAttribute("cname") !== t.name && n[r].getAttribute("url") !== t.url && r !== t.index || n[r].click();}};} }, e.exports = t.default;}, function (e, t, n) {var r = n(121);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-definition{-webkit-order:5;-moz-box-ordinal-group:6;order:5;width:60px;height:150px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin-left:10px;margin-top:-119px}.xgplayer-skin-default .xgplayer-definition ul{display:none;list-style:none;width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:30px;left:0;text-align:center;white-space:nowrap;margin-left:-10px;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-definition ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);padding:6px 13px}.xgplayer-skin-default .xgplayer-definition ul li.selected,.xgplayer-skin-default .xgplayer-definition ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-definition .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;cursor:pointer;color:hsla(0,0%,100%,.8);position:absolute;bottom:0;width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default.xgplayer-definition-active .xgplayer-definition ul,.xgplayer-skin-default.xgplayer-is-definition .xgplayer-definition{display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(4),o = (r = a) && r.__esModule ? r : { default: r };n(123);t.default = { name: "s_playbackRate", method: function method() {var e = this,t = [];if (!e.config.playbackRate) return !1;(t = [].concat(e.config.playbackRate)).sort(function (e, t) {return t - e;});var n = void 0 !== e.config.playbackRateUnit ? e.config.playbackRateUnit : "x",r = (0, i.createDom)("xg-playbackrate", " ", {}, "xgplayer-playbackrate");"mobile" === o.default.device && (e.config.playbackRateActive = "click");var a = [];t.forEach(function (e) {a.push({ name: "" + e, rate: "" + e + n, selected: !1 });});var l = 1,s = ["<ul>"];a.forEach(function (t) {e.config.defaultPlaybackRate && e.config.defaultPlaybackRate.toString() === t.name ? (t.selected = !0, l = e.config.defaultPlaybackRate, e.once("playing", function () {e.video.playbackRate = e.config.defaultPlaybackRate;})) : "1.0" !== t.name && "1" !== t.name || e.config.defaultPlaybackRate && 1 !== e.config.defaultPlaybackRate || (t.selected = !0), s.push("<li cname='" + t.name + "' class='" + (t.selected ? "selected" : "") + "'>" + t.rate + "</li>");}), s.push("</ul><p class='name'>" + l + n + "</p>");var u = e.root.querySelector(".xgplayer-playbackrate");if (u) {u.innerHTML = s.join("");var c = u.querySelector(".name");e.config.playbackRateActive && "hover" !== e.config.playbackRateActive || c.addEventListener("mouseenter", function (t) {t.preventDefault(), t.stopPropagation(), (0, i.addClass)(e.root, "xgplayer-playbackrate-active"), u.focus();});} else {r.innerHTML = s.join("");var p = r.querySelector(".name");e.config.playbackRateActive && "hover" !== e.config.playbackRateActive || p.addEventListener("mouseenter", function (t) {t.preventDefault(), t.stopPropagation(), (0, i.addClass)(e.root, "xgplayer-playbackrate-active"), r.focus();}), e.once("ready", function () {e.controls.appendChild(r);});}["touchend", "click"].forEach(function (t) {r.addEventListener(t, function (t) {t.stopPropagation(), t.preventDefault();var s = t.target;if (s && "li" === s.tagName.toLocaleLowerCase()) {var u,c = void 0;a.forEach(function (t) {t.selected = !1, s.textContent.replace(/\s+/g, "") === t.rate && (Array.prototype.forEach.call(s.parentNode.childNodes, function (e) {(0, i.hasClass)(e, "selected") && (c = Number(e.getAttribute("cname")), (0, i.removeClass)(e, "selected"));}), t.selected = !0, e.video.playbackRate = 1 * t.name, l = 1 * t.name);}), (0, i.addClass)(s, "selected"), u = Number(s.getAttribute("cname")), s.parentNode.nextSibling.innerHTML = "" + s.getAttribute("cname") + n, e.emit("playbackrateChange", { from: c, to: u }), "mobile" === o.default.device && (0, i.removeClass)(e.root, "xgplayer-playbackrate-active");} else "click" !== e.config.playbackRateActive || !s || "p" !== s.tagName.toLocaleLowerCase() && "span" !== s.tagName.toLocaleLowerCase() || ("mobile" === o.default.device ? (0, i.toggleClass)(e.root, "xgplayer-playbackrate-active") : (0, i.addClass)(e.root, "xgplayer-playbackrate-active"), r.focus());e.emit("focus");}, !1);}), r.addEventListener("mouseleave", function (t) {t.preventDefault(), t.stopPropagation(), (0, i.removeClass)(e.root, "xgplayer-playbackrate-active");}), e.on("blur", function () {(0, i.removeClass)(e.root, "xgplayer-playbackrate-active");}), e.on("play", function () {e.video.playbackRate.toFixed(1) !== l.toFixed(1) && (e.video.playbackRate = l);});} }, e.exports = t.default;}, function (e, t, n) {var r = n(124);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-playbackrate{-webkit-order:8;-moz-box-ordinal-group:9;order:8;width:60px;height:150px;z-index:18;position:relative;display:inline-block;cursor:default;margin-top:-119px}.xgplayer-skin-default .xgplayer-playbackrate ul{display:none;list-style:none;width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:30px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);text-align:left;white-space:nowrap;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-playbackrate ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);position:relative;padding:4px 0;text-align:center}.xgplayer-skin-default .xgplayer-playbackrate ul li.selected,.xgplayer-skin-default .xgplayer-playbackrate ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-playbackrate ul li:first-child{position:relative;margin-top:12px}.xgplayer-skin-default .xgplayer-playbackrate ul li:last-child{position:relative;margin-bottom:12px}.xgplayer-skin-default .xgplayer-playbackrate .name{width:60px;height:20px;position:absolute;bottom:0;text-align:center;font-family:PingFangSC-Regular;font-size:13px;background:rgba(0,0,0,.38);color:hsla(0,0%,100%,.8);border-radius:10px;line-height:20px}.xgplayer-skin-default .xgplayer-playbackrate span{position:relative;top:19px;font-weight:700;text-shadow:0 0 4px rgba(0,0,0,.6)}.xgplayer-skin-default .xgplayer-playbackrate:hover{opacity:1}.xgplayer-skin-default.xgplayer-playbackrate-active .xgplayer-playbackrate ul{display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);t.default = { name: "s_localPreview", method: function method() {var e = this;if (e.config.preview && e.config.preview.uploadEl) {var t = (0, r.createDom)("xg-preview", '<input type="file">', {}, "xgplayer-preview"),n = t.querySelector("input");e.config.preview.uploadEl.appendChild(t), n.onchange = function () {e.emit("upload", n);};}} }, e.exports = t.default;}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(127),o = (r = a) && r.__esModule ? r : { default: r };n(128);t.default = { name: "s_download", method: function method() {var e = this;if (e.config.download) {var t = (0, i.createDom)("xg-download", '<xg-icon class="xgplayer-icon">' + o.default + "</xg-icon>", {}, "xgplayer-download"),n = e.lang.DOWNLOAD_TIPS,r = (0, i.createDom)("xg-tips", '<span class="xgplayer-tip-download">' + n + "</span>", {}, "xgplayer-tips");t.appendChild(r), e.once("ready", function () {e.controls.appendChild(t);}), ["click", "touchend"].forEach(function (n) {t.addEventListener(n, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("downloadBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n';}, function (e, t, n) {var r = n(129);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-download{position:relative;-webkit-order:9;-moz-box-ordinal-group:10;order:9;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-download .xgplayer-icon{margin-top:3px}.xgplayer-skin-default .xgplayer-download .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-download .xgplayer-icon svg{position:relative;top:5px;left:5px}.xgplayer-skin-default .xgplayer-download .xgplayer-tips{margin-left:-20px}.xgplayer-skin-default .xgplayer-download .xgplayer-tips .xgplayer-tip-download{display:block}.xgplayer-skin-default .xgplayer-download:hover{opacity:.85}.xgplayer-skin-default .xgplayer-download:hover .xgplayer-tips{display:block}.xgplayer-lang-is-en .xgplayer-download .xgplayer-tips{margin-left:-32px}.xgplayer-lang-is-jp .xgplayer-download .xgplayer-tips{margin-left:-40px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0),i = o(n(131)),a = o(n(133));function o(e) {return e && e.__esModule ? e : { default: e };}n(134);t.default = { name: "s_danmu", method: function method() {var e = this,t = e.root;if (e.config.danmu) {var n = (0, r.createDom)("xg-danmu", "", {}, "xgplayer-danmu");e.once("ready", function () {t.appendChild(n);});var o = (0, r.deepCopy)({ container: n, player: e.video, comments: [], area: { start: 0, end: 1 } }, e.config.danmu),l = void 0;e.config.danmu.panel && (l = (0, r.createDom)("xg-panel", '<xg-panel-icon class="xgplayer-panel-icon">\n                                                ' + a.default + '\n                                              </xg-panel-icon>\n                                              <xg-panel-slider class="xgplayer-panel-slider">\n                                                <xg-hidemode class="xgplayer-hidemode">\n                                                  <p class="xgplayer-hidemode-font">屏蔽类型</p>\n                                                  <ul class="xgplayer-hidemode-radio">\n                                                    <li class="xgplayer-hidemode-scroll" id="false">滚动</li><li class="xgplayer-hidemode-top" id="false">顶部</li><li class="xgplayer-hidemode-bottom" id="false">底部</li><li class="xgplayer-hidemode-color" id="false">色彩</li>\n                                                  </ul>\n                                                </xg-hidemode>\n                                                <xg-transparency class="xgplayer-transparency">\n                                                  <span>不透明度</span>\n                                                  <input class="xgplayer-transparency-line xgplayer-transparency-color xgplayer-transparency-bar xgplayer-transparency-gradient" type="range" min="0" max="100" step="0.1" value="50"></input>\n                                                </xg-transparency>\n                                                <xg-showarea class="xgplayer-showarea">\n                                                  <div class="xgplayer-showarea-name">显示区域</div>\n                                                  <div class="xgplayer-showarea-control">\n                                                    <div class="xgplayer-showarea-control-up">\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-onequarters">1/4</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-twoquarters selected-color">1/2</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-threequarters">3/4</span>\n                                                      <span class="xgplayer-showarea-control-up-item xgplayer-showarea-full">1</span>\n                                                    </div>\n                                                    <div class="xgplayer-showarea-control-down">\n                                                      <div class="xgplayer-showarea-control-down-dots">\n                                                        <span class="xgplayer-showarea-onequarters-dot"></span>\n                                                        <span class="xgplayer-showarea-twoquarters-dot"></span>\n                                                        <span class="xgplayer-showarea-threequarters-dot"></span>\n                                                        <span class="xgplayer-showarea-full-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-showarea-line xgplayer-showarea-color xgplayer-showarea-bar xgplayer-gradient" type="range" min="1" max="4" step="1" value="1">\n                                                    </div>\n                                                  </div>\n                                                </xg-showarea>\n                                                <xg-danmuspeed class="xgplayer-danmuspeed">\n                                                  <div class="xgplayer-danmuspeed-name">弹幕速度</div>\n                                                  <div class="xgplayer-danmuspeed-control">\n                                                    <div class="xgplayer-danmuspeed-control-up">\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-small">慢</span>\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-middle selected-color">中</span>\n                                                      <span class="xgplayer-danmuspeed-control-up-item xgplayer-danmuspeed-large">快</span>\n                                                    </div>\n                                                    <div class="xgplayer-danmuspeed-control-down">\n                                                      <div class="xgplayer-danmuspeed-control-down-dots">\n                                                        <span class="xgplayer-danmuspeed-small-dot"></span>\n                                                        <span class="xgplayer-danmuspeed-middle-dot"></span>\n                                                        <span class="xgplayer-danmuspeed-large-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-danmuspeed-line xgplayer-danmuspeed-color xgplayer-danmuspeed-bar xgplayer-gradient" type="range" min="50" max="150" step="50" value="100">\n                                                    </div>\n                                                  </div>\n                                                </xg-danmuspeed>\n                                                <xg-danmufont class="xgplayer-danmufont">\n                                                  <div class="xgplayer-danmufont-name">字体大小</div>\n                                                  <div class="xgplayer-danmufont-control">\n                                                    <div class="xgplayer-danmufont-control-up">\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-small">小</span>\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-middle">中</span>\n                                                      <span class="xgplayer-danmufont-control-up-item xgplayer-danmufont-large selected-color">大</span>\n                                                    </div>\n                                                    <div class="xgplayer-danmufont-control-down">\n                                                      <div class="xgplayer-danmufont-control-down-dots">\n                                                        <span class="xgplayer-danmufont-small-dot"></span>\n                                                        <span class="xgplayer-danmufont-middle-dot"></span>\n                                                        <span class="xgplayer-danmufont-large-dot"></span>\n                                                      </div>\n                                                      <input class="xgplayer-danmufont-line xgplayer-danmufont-color xgplayer-danmufont-bar xgplayer-gradient" type="range" min="20" max="30" step="5" value="25">\n                                                    </div>\n                                                  </div>\n                                                </xg-danmufont>\n                                              </xg-panel-slider>', { tabindex: 7 }, "xgplayer-panel"), e.once("ready", function () {e.controls.appendChild(l);})), e.once("complete", function () {var t = new i.default(o);if (e.emit("initDefaultDanmu", t), e.danmu = t, e.config.danmu.panel) {var n = l.querySelector(".xgplayer-panel-slider"),a = void 0;["mouseenter", "touchend", "click"].forEach(function (e) {l.addEventListener(e, function (e) {e.preventDefault(), e.stopPropagation(), (0, r.addClass)(n, "xgplayer-panel-active"), l.focus(), a = !0;});}), l.addEventListener("mouseleave", function (e) {e.preventDefault(), e.stopPropagation(), (0, r.removeClass)(n, "xgplayer-panel-active"), a = !1;}), n.addEventListener("mouseleave", function (e) {e.preventDefault(), e.stopPropagation(), !1 === a && (0, r.removeClass)(n, "xgplayer-panel-active");});var s = e.config.danmu,u = { scroll: l.querySelector(".xgplayer-hidemode-scroll"), top: l.querySelector(".xgplayer-hidemode-top"), bottom: l.querySelector(".xgplayer-hidemode-bottom"), color: l.querySelector(".xgplayer-hidemode-color") },c = function c(t) {var n = t;["touchend", "click"].forEach(function (t) {u[n].addEventListener(t, function (t) {"true" !== u[n].getAttribute("id") ? (u[n].style.color = "#f85959", u[n].setAttribute("id", "true"), e.danmu.hide(n)) : (u[n].style.color = "#aaa", u[n].setAttribute("id", "false"), e.danmu.show(n));});});};for (var p in u) {c(p);}var d = l.querySelector(".xgplayer-transparency-line"),f = l.querySelector(".xgplayer-transparency-gradient"),g = 50;if (f.style.background = "linear-gradient(to right, #f85959 0%, #f85959 " + g + "%, #aaa " + g + "%, #aaa)", d.addEventListener("input", function (e) {e.preventDefault(), e.stopPropagation(), g = e.target.value, f.style.background = "linear-gradient(to right, #f85959 0%, #f85959 " + g + "%, #aaa " + g + "%, #aaa)", s.comments.forEach(function (e) {e.style.opacity = g / 100;});}), l.querySelector(".xgplayer-showarea-line").addEventListener("input", function (t) {t.preventDefault(), t.stopPropagation();var n = t.target.value;e.danmu.config.area.end = n / 100, e.config.danmu.area.end = n / 100, e.danmu.bulletBtn.main.channel.resize();}), l.querySelector(".xgplayer-danmuspeed-line").addEventListener("input", function (e) {e.preventDefault(), e.stopPropagation();var t = e.target.value;s.comments.forEach(function (e) {e.duration = 100 * (200 - t);});}), l.querySelector(".xgplayer-danmufont-line").addEventListener("input", function (e) {e.preventDefault(), e.stopPropagation();var t = e.target.value;s.comments.forEach(function (e) {e.style.fontSize = t + "px";});}), navigator.userAgent.indexOf("Firefox") > -1) for (var h = 0; h < n.querySelectorAll("input").length; h++) {n.querySelectorAll("input")[h].style.marginTop = "10px";}}});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";(function (e) {var n,r,i,a,o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {return typeof e;} : function (e) {return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;};window, a = function a() {return function (e) {var t = {};function n(r) {if (t[r]) return t[r].exports;var i = t[r] = { i: r, l: !1, exports: {} };return e[r].call(i.exports, i, i.exports, n), i.l = !0, i.exports;}return n.m = e, n.c = t, n.d = function (e, t, r) {n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r });}, n.r = function (e) {"undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 });}, n.t = function (e, t) {if (1 & t && (e = n(e)), 8 & t) return e;if (4 & t && "object" == (void 0 === e ? "undefined" : o(e)) && e && e.__esModule) return e;var r = Object.create(null);if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var i in e) {n.d(r, i, function (t) {return e[t];}.bind(null, i));}return r;}, n.n = function (e) {var t = e && e.__esModule ? function () {return e.default;} : function () {return e;};return n.d(t, "a", t), t;}, n.o = function (e, t) {return Object.prototype.hasOwnProperty.call(e, t);}, n.p = "", n(n.s = 4);}([function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r,i = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),a = (r = n(26)) && r.__esModule ? r : { default: r },o = function () {function e() {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, e);}return i(e, [{ key: "setLogger", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";this.logger = new a.default(e + ".js");} }]), e;}();t.default = o, e.exports = t.default;}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = { createDom: function createDom() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "div",t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "",i = document.createElement(e);return i.className = r, i.innerHTML = t, Object.keys(n).forEach(function (t) {var r = t,a = n[t];"video" === e || "audio" === e ? a && i.setAttribute(r, a) : i.setAttribute(r, a);}), i;}, hasClass: function hasClass(e, t) {return e.classList ? Array.prototype.some.call(e.classList, function (e) {return e === t;}) : !!e.className.match(new RegExp("(\\s|^)" + t + "(\\s|$)"));}, addClass: function addClass(e, t) {e.classList ? t.replace(/(^\s+|\s+$)/g, "").split(/\s+/g).forEach(function (t) {t && e.classList.add(t);}) : r.hasClass(e, t) || (e.className += " " + t);}, removeClass: function removeClass(e, t) {e.classList ? t.split(/\s+/g).forEach(function (t) {e.classList.remove(t);}) : r.hasClass(e, t) && t.split(/\s+/g).forEach(function (t) {var n = new RegExp("(\\s|^)" + t + "(\\s|$)");e.className = e.className.replace(n, " ");});}, toggleClass: function toggleClass(e, t) {t.split(/\s+/g).forEach(function (t) {r.hasClass(e, t) ? r.removeClass(e, t) : r.addClass(e, t);});}, findDom: function findDom() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : document,t = arguments[1],n = void 0;try {n = e.querySelector(t);} catch (r) {t.startsWith("#") && (n = e.getElementById(t.slice(1)));}return n;}, deepCopy: function deepCopy(e, t) {if ("Object" === r.typeOf(t) && "Object" === r.typeOf(e)) return Object.keys(t).forEach(function (n) {"Object" !== r.typeOf(t[n]) || t[n] instanceof Node ? "Array" === r.typeOf(t[n]) ? e[n] = "Array" === r.typeOf(e[n]) ? e[n].concat(t[n]) : t[n] : e[n] = t[n] : e[n] ? r.deepCopy(e[n], t[n]) : e[n] = t[n];}), e;}, typeOf: function typeOf(e) {return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0];}, copyDom: function copyDom(e) {if (e && 1 === e.nodeType) {var t = document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes, function (e) {t.setAttribute(e.name, e.value);}), e.innerHTML && (t.innerHTML = e.innerHTML), t;}return "";}, formatTime: function formatTime(e) {var t = Math.floor(e);return 1e3 * t + (e - t);}, offInDestroy: function offInDestroy(e, t, n, r) {e.once(r, function i() {e.off(t, n), e.off(r, i);});}, on: function on(e, t, n, i) {i ? (e.on(t, n), r.offInDestroy(e, t, n, i)) : e.on(t, function r(i) {n(i), e.off(t, r);});} };t.default = r, e.exports = t.default;}, function (e, t, n) {var r = n(19)();e.exports = function (e) {return e !== r && null !== e;};}, function (e, t, n) {e.exports = function (e) {return null != e;};}, function (e, t, n) {e.exports = n(5);}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r,i = (r = n(6)) && r.__esModule ? r : { default: r };n(34), t.default = i.default, e.exports = t.default;}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = d(n(7)),a = d(n(0)),l = d(n(27)),s = d(n(31)),u = d(n(1)),c = n(32),p = n(33);function d(e) {return e && e.__esModule ? e : { default: e };}function f(e, t) {if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != (void 0 === t ? "undefined" : o(t)) && "function" != typeof t ? e : t;}var g = function (e) {function t(e) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, t);var n = f(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));n.setLogger("danmu"), n.logger.info("danmu.js version: " + c.version);var r = n;if (r.config = u.default.deepCopy({ overlap: !1, area: { start: 0, end: 1 }, live: !1, comments: [], direction: "r2l", needResizeObserver: !1 }, e), r.hideArr = [], r.domObj = new s.default(), (0, i.default)(r), r.config.comments.forEach(function (e) {e.duration = e.duration ? e.duration : 5e3, e.mode || (e.mode = "scroll");}), !r.config.container || 1 !== r.config.container.nodeType) return r.emit("error", "container id can't be empty"), f(n, !1);if (r.container = r.config.container, r.config.containerStyle) {var a = r.config.containerStyle;Object.keys(a).forEach(function (e) {r.container.style[e] = a[e];});}return r.live = r.config.live, r.player = r.config.player, r.direction = r.config.direction, u.default.addClass(r.container, "danmu"), r.bulletBtn = new l.default(r), r.isReady = !0, r.emit("ready"), n.logger.info("ready"), n.addResizeObserver(), n;}return function (e, t) {if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : o(t)));e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);}(t, e), r(t, [{ key: "addResizeObserver", value: function value() {var e = this;this.config.needResizeObserver && (0, p.addObserver)(this.container, function () {e.logger.info("needResizeObserver"), e.resize();});} }, { key: "start", value: function value() {this.logger.info("start"), this.bulletBtn.main.start();} }, { key: "pause", value: function value() {this.logger.info("pause"), this.bulletBtn.main.pause();} }, { key: "play", value: function value() {this.logger.info("play"), this.bulletBtn.main.play();} }, { key: "stop", value: function value() {this.logger.info("stop"), this.bulletBtn.main.stop();} }, { key: "clear", value: function value() {this.logger.info("clear"), this.bulletBtn.main.clear();} }, { key: "destroy", value: function value() {for (var e in (0, p.unObserver)(this.container), this.logger.info("destroy"), this.stop(), this.bulletBtn.destroy(), this.domObj.destroy(), this) {delete this[e];}this.emit("destroy");} }, { key: "sendComment", value: function value(e) {this.logger.info("sendComment: " + (e.txt || "[DOM Element]")), e.duration || (e.duration = 15e3), e && e.id && e.duration && (e.el || e.txt) && (e.duration = e.duration ? e.duration : 5e3, e.style && (this.opacity && this.opacity !== e.style.opacity && (e.style.opacity = this.opacity), this.fontSize && this.fontSize !== e.style.fontSize && (e.style.fontSize = this.fontSize), this.like && (e.like = e.like ? e.like : this.like)), e.prior || e.realTime ? (this.bulletBtn.main.data.unshift(e), e.realTime && (this.bulletBtn.main.readData(), this.bulletBtn.main.dataHandle())) : this.bulletBtn.main.data.push(e));} }, { key: "setCommentID", value: function value(e, t) {var n = this;this.logger.info("setCommentID: oldID " + e + " newID " + t);var r = this.container.getBoundingClientRect();e && t && (this.bulletBtn.main.data.some(function (n) {return n.id === e && (n.id = t, !0);}), this.bulletBtn.main.queue.some(function (i) {return i.id === e && (i.id = t, i.pauseMove(r), "paused" !== n.bulletBtn.main.status && i.startMove(r), !0);}));} }, { key: "setCommentDuration", value: function value(e, t) {var n = this;this.logger.info("setCommentDuration: id " + e + " duration " + t);var r = this.container.getBoundingClientRect();e && t && (t = t || 5e3, this.bulletBtn.main.data.some(function (n) {return n.id === e && (n.duration = t, !0);}), this.bulletBtn.main.queue.some(function (i) {return i.id === e && (i.duration = t, i.pauseMove(r), "paused" !== n.bulletBtn.main.status && i.startMove(r), !0);}));} }, { key: "setCommentLike", value: function value(e, t) {this.logger.info("setCommentLike: id " + e + " like " + t);var n = this.container.getBoundingClientRect();this.like = t, e && t && (this.bulletBtn.main.data.some(function (n) {return n.id === e && (n.like = t, !0);}), this.bulletBtn.main.queue.some(function (r) {return r.id === e && (r.pauseMove(n), r.setLikeDom(t.el, t.style), "paused" !== r.danmu.bulletBtn.main.status && r.startMove(n), !0);}));} }, { key: "restartComment", value: function value(e) {this.logger.info("restartComment: id " + e), this.mouseControl = !1;var t = this.container.getBoundingClientRect();e && this.bulletBtn.main.queue.some(function (n) {return n.id === e && ("paused" !== n.danmu.bulletBtn.main.status ? n.startMove(t, !0) : n.status = "paused", !0);});} }, { key: "freezeComment", value: function value(e) {this.logger.info("freezeComment: id " + e), this.mouseControl = !0;var t = this.container.getBoundingClientRect();e && this.bulletBtn.main.queue.some(function (n) {return n.id === e && (n.status = "forcedPause", n.pauseMove(t), n.el && n.el.style && (n.el.style.zIndex = 10), !0);});} }, { key: "removeComment", value: function value(e) {this.logger.info("removeComment: id " + e), e && (this.bulletBtn.main.queue.some(function (t) {return t.id === e && (t.remove(), !0);}), this.bulletBtn.main.data = this.bulletBtn.main.data.filter(function (t) {return t.id !== e;}));} }, { key: "setAllDuration", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "scroll",t = arguments[1],n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];this.logger.info("setAllDuration: mode " + e + " duration " + t + " force " + n);var r = this.container.getBoundingClientRect();t && (t = t || 5e3, n && (this.bulletBtn.main.forceDuration = t), this.bulletBtn.main.data.forEach(function (n) {e === n.mode && (n.duration = t);}), this.bulletBtn.main.queue.forEach(function (n) {e === n.mode && (n.duration = t, n.pauseMove(r), "paused" !== n.danmu.bulletBtn.main.status && n.startMove(r));}));} }, { key: "setOpacity", value: function value(e) {this.logger.info("setOpacity: opacity " + e), this.container.style.opacity = e;} }, { key: "setFontSize", value: function value(e, t) {var n = this;this.logger.info("setFontSize: size " + e + " channelSize " + t), this.fontSize = e + "px", e && (this.bulletBtn.main.data.forEach(function (e) {e.style && (e.style.fontSize = n.fontSize);}), this.bulletBtn.main.queue.forEach(function (e) {e.options.style || (e.options.style = {}), e.options.style.fontSize = n.fontSize, e.setFontSize(n.fontSize), t && (e.top = e.channel_id[0] * t, e.topInit());})), t && (this.config.channelSize = t, this.bulletBtn.main.channel.resize(!0));} }, { key: "setArea", value: function value(e) {this.logger.info("setArea: area " + e), this.config.area = e, this.bulletBtn.main.channel.resize(!0);} }, { key: "hide", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "scroll";this.logger.info("hide: mode " + e), this.hideArr.indexOf(e) < 0 && this.hideArr.push(e);var t = this.bulletBtn.main.queue.filter(function (t) {return e === t.mode || "color" === e && t.color;});t.forEach(function (e) {return e.remove();});} }, { key: "show", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "scroll";this.logger.info("show: mode " + e);var t = this.hideArr.indexOf(e);t > -1 && this.hideArr.splice(t, 1);} }, { key: "setDirection", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "r2l";this.logger.info("setDirection: direction " + e), this.emit("changeDirection", e);} }, { key: "resize", value: function value() {this.logger.info("resize"), this.emit("channel_resize");} }]), t;}(a.default);t.default = g, e.exports = t.default;}, function (e, t, n) {var r,i,a,l,s,u,c,p = n(8),d = n(25),f = Function.prototype.apply,g = Function.prototype.call,h = Object.create,y = Object.defineProperty,x = Object.defineProperties,v = Object.prototype.hasOwnProperty,m = { configurable: !0, enumerable: !1, writable: !0 };i = function i(e, t) {var _n3, i;return d(t), i = this, r.call(this, e, _n3 = function n() {a.call(i, e, _n3), f.call(t, this, arguments);}), _n3.__eeOnceListener__ = t, this;}, s = { on: r = function r(e, t) {var n;return d(t), v.call(this, "__ee__") ? n = this.__ee__ : (n = m.value = h(null), y(this, "__ee__", m), m.value = null), n[e] ? "object" == o(n[e]) ? n[e].push(t) : n[e] = [n[e], t] : n[e] = t, this;}, once: i, off: a = function a(e, t) {var n, r, i, a;if (d(t), !v.call(this, "__ee__")) return this;if (!(n = this.__ee__)[e]) return this;if ("object" == o(r = n[e])) for (a = 0; i = r[a]; ++a) {i !== t && i.__eeOnceListener__ !== t || (2 === r.length ? n[e] = r[a ? 0 : 1] : r.splice(a, 1));} else r !== t && r.__eeOnceListener__ !== t || delete n[e];return this;}, emit: l = function l(e) {var t, n, r, i, a;if (v.call(this, "__ee__") && (i = this.__ee__[e])) if ("object" == (void 0 === i ? "undefined" : o(i))) {for (n = arguments.length, a = new Array(n - 1), t = 1; t < n; ++t) {a[t - 1] = arguments[t];}for (i = i.slice(), t = 0; r = i[t]; ++t) {f.call(r, this, a);}} else switch (arguments.length) {case 1:g.call(i, this);break;case 2:g.call(i, this, arguments[1]);break;case 3:g.call(i, this, arguments[1], arguments[2]);break;default:for (n = arguments.length, a = new Array(n - 1), t = 1; t < n; ++t) {a[t - 1] = arguments[t];}f.call(i, this, a);}} }, u = { on: p(r), once: p(i), off: p(a), emit: p(l) }, c = x({}, u), e.exports = t = function t(e) {return null == e ? h(c) : x(Object(e), u);}, t.methods = s;}, function (e, t, n) {var r = n(3),i = n(9),a = n(13),o = n(21),l = n(22);(e.exports = function (e, t) {var n, i, s, u, c;return arguments.length < 2 || "string" != typeof e ? (u = t, t = e, e = null) : u = arguments[2], r(e) ? (n = l.call(e, "c"), i = l.call(e, "e"), s = l.call(e, "w")) : (n = s = !0, i = !1), c = { value: t, configurable: n, enumerable: i, writable: s }, u ? a(o(u), c) : c;}).gs = function (e, t, n) {var s, u, c, p;return "string" != typeof e ? (c = n, n = t, t = e, e = null) : c = arguments[3], r(t) ? i(t) ? r(n) ? i(n) || (c = n, n = void 0) : n = void 0 : (c = t, t = n = void 0) : t = void 0, r(e) ? (s = l.call(e, "c"), u = l.call(e, "e")) : (s = !0, u = !1), p = { get: t, set: n, configurable: s, enumerable: u }, c ? a(o(c), p) : p;};}, function (e, t, n) {var r = n(10),i = /^\s*class[\s{/}]/,a = Function.prototype.toString;e.exports = function (e) {return !!r(e) && !i.test(a.call(e));};}, function (e, t, n) {var r = n(11);e.exports = function (e) {if ("function" != typeof e) return !1;if (!hasOwnProperty.call(e, "length")) return !1;try {if ("number" != typeof e.length) return !1;if ("function" != typeof e.call) return !1;if ("function" != typeof e.apply) return !1;} catch (e) {return !1;}return !r(e);};}, function (e, t, n) {var r = n(12);e.exports = function (e) {if (!r(e)) return !1;try {return !!e.constructor && e.constructor.prototype === e;} catch (e) {return !1;}};}, function (e, t, n) {var r = n(3),i = { object: !0, function: !0, undefined: !0 };e.exports = function (e) {return !!r(e) && hasOwnProperty.call(i, void 0 === e ? "undefined" : o(e));};}, function (e, t, n) {e.exports = n(14)() ? Object.assign : n(15);}, function (e, t, n) {e.exports = function () {var e,t = Object.assign;return "function" == typeof t && (t(e = { foo: "raz" }, { bar: "dwa" }, { trzy: "trzy" }), e.foo + e.bar + e.trzy === "razdwatrzy");};}, function (e, t, n) {var r = n(16),i = n(20),a = Math.max;e.exports = function (e, t) {var n,o,l,s = a(arguments.length, 2);for (e = Object(i(e)), l = function l(r) {try {e[r] = t[r];} catch (e) {n || (n = e);}}, o = 1; o < s; ++o) {r(t = arguments[o]).forEach(l);}if (void 0 !== n) throw n;return e;};}, function (e, t, n) {e.exports = n(17)() ? Object.keys : n(18);}, function (e, t, n) {e.exports = function () {try {return Object.keys("primitive"), !0;} catch (e) {return !1;}};}, function (e, t, n) {var r = n(2),i = Object.keys;e.exports = function (e) {return i(r(e) ? Object(e) : e);};}, function (e, t, n) {e.exports = function () {};}, function (e, t, n) {var r = n(2);e.exports = function (e) {if (!r(e)) throw new TypeError("Cannot use null or undefined");return e;};}, function (e, t, n) {var r = n(2),i = Array.prototype.forEach,a = Object.create,o = function o(e, t) {var n;for (n in e) {t[n] = e[n];}};e.exports = function (e) {var t = a(null);return i.call(arguments, function (e) {r(e) && o(Object(e), t);}), t;};}, function (e, t, n) {e.exports = n(23)() ? String.prototype.contains : n(24);}, function (e, t, n) {var r = "razdwatrzy";e.exports = function () {return "function" == typeof r.contains && !0 === r.contains("dwa") && !1 === r.contains("foo");};}, function (e, t, n) {var r = String.prototype.indexOf;e.exports = function (e) {return r.call(this, e, arguments[1]) > -1;};}, function (e, t, n) {e.exports = function (e) {if ("function" != typeof e) throw new TypeError(e + " is not a function");return e;};}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = window.location.href.indexOf("danmu-debug") > -1,a = function () {function e(t) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, e), this.constructorName = t || "";}return r(e, [{ key: "info", value: function value(e) {for (var t, n = arguments.length, r = Array(n > 1 ? n - 1 : 0), a = 1; a < n; a++) {r[a - 1] = arguments[a];}i && (t = console).log.apply(t, ["[Danmu Log][" + this.constructorName + "]", e].concat(r));} }]), e;}();t.default = a, e.exports = t.default;}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = s(n(0)),a = s(n(1)),l = s(n(28));function s(e) {return e && e.__esModule ? e : { default: e };}var u = function (e) {function t(e) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, t);var n = function (e, t) {if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != (void 0 === t ? "undefined" : o(t)) && "function" != typeof t ? e : t;}(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));return n.setLogger("control"), n.danmu = e, n.main = new l.default(e), e.config.defaultOff || n.main.start(), n;}return function (e, t) {if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : o(t)));e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);}(t, e), r(t, [{ key: "createSwitch", value: function value() {var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];return this.logger.info("createSwitch"), this.switchBtn = a.default.createDom("dk-switch", '<span class="txt">弹</span>', {}, "danmu-switch " + (e ? "danmu-switch-active" : "")), this.switchBtn;} }, { key: "destroy", value: function value() {for (var e in this.logger.info("destroy"), this.main.destroy(), this) {delete this[e];}} }]), t;}(i.default);t.default = u, e.exports = t.default;}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = u(n(0)),a = u(n(29)),l = u(n(30)),s = u(n(1));function u(e) {return e && e.__esModule ? e : { default: e };}var c = function (e) {function t(e) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, t);var n = function (e, t) {if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != (void 0 === t ? "undefined" : o(t)) && "function" != typeof t ? e : t;}(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));n.setLogger("main"), n.danmu = e, n.container = e.container, n.channel = new a.default(e), n.data = [].concat(e.config.comments), n.playedData = [], n.queue = [], n.timer = null, n.retryTimer = null, n.retryStatus = "normal", n.interval = e.config.interval || 2e3, n.status = "idle", s.default.on(e, "bullet_remove", n.updateQueue.bind(n), "destroy");var r = n;return s.default.on(n.danmu, "changeDirection", function (e) {r.danmu.direction = e;}, "destroy"), n.nums = 0, n;}return function (e, t) {if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : o(t)));e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);}(t, e), r(t, [{ key: "destroy", value: function value() {for (var e in this.logger.info("destroy"), clearTimeout(this.dataHandleTimer), this.channel.destroy(), this.data = [], this) {delete this[e];}} }, { key: "updateQueue", value: function value(e) {this.logger.info("updateQueue");var t = this;t.queue.some(function (n, r) {return n.id === e.bullet.id && (t.queue.splice(r, 1), !0);}), t.data.some(function (t, n) {return t.id === e.bullet.id && (t.hasAttached = !1, !0);});} }, { key: "init", value: function value(e, t) {t.logger.info("init"), t || (t = this), t.retryStatus = "normal", t.data.sort(function (e, t) {return e.start - t.start;}), t.retryTimer || function e() {"closed" === t.status && "stop" === t.retryStatus || ("playing" === t.status && (t.readData(), t.dataHandle()), "stop" === t.retryStatus && "paused" !== t.status || (t.dataHandleTimer = setTimeout(function () {e();}, t.interval - 1e3)));}();} }, { key: "start", value: function value() {this.logger.info("start"), this.status = "playing", this.queue = [], this.container.innerHTML = "", this.channel.resetWithCb(this.init, this);} }, { key: "stop", value: function value() {this.logger.info("stop"), this.status = "closed", this.retryTimer = null, this.retryStatus = "stop", this.channel.reset(), this.queue = [], this.container.innerHTML = "";} }, { key: "clear", value: function value() {this.logger.info("clear"), this.channel.reset(), this.data = [], this.queue = [], this.container.innerHTML = "";} }, { key: "play", value: function value() {var e = this;this.logger.info("play"), this.status = "playing";var t = this.channel.channels,n = this.danmu.container.getBoundingClientRect();t && t.length > 0 && ["scroll", "top", "bottom"].forEach(function (r) {e.queue.forEach(function (e) {e.startMove(n), e.resized = !0;});for (var i = 0; i < t.length; i++) {t[i].queue[r].forEach(function (e) {e.resized = !1;});}});} }, { key: "pause", value: function value() {this.logger.info("pause"), this.status = "paused";var e = this.channel.channels,t = this.danmu.container.getBoundingClientRect();e && e.length > 0 && this.queue.forEach(function (e) {e.pauseMove(t);});} }, { key: "dataHandle", value: function value() {var e = this;"paused" !== this.status && "closed" !== this.status && e.queue.length && e.queue.forEach(function (t) {"waiting" === t.status && t.startMove(e.channel.containerPos);});} }, { key: "readData", value: function value() {var e = this,t = this.danmu;if (t.isReady) {var n = 0;t.player && t.player.currentTime && (n = s.default.formatTime(t.player.currentTime));var r = void 0,i = e.interval,a = e.channel,o = void 0;t.player ? (o = e.data.filter(function (t) {return !t.start && e.danmu.hideArr.indexOf(t.mode) < 0 && (!t.color || e.danmu.hideArr.indexOf("color") < 0) && (t.start = n), e.danmu.hideArr.indexOf(t.mode) < 0 && (!t.color || e.danmu.hideArr.indexOf("color") < 0) && t.start - i <= n && n <= t.start + i;}), t.live && (e.data = e.data.filter(function (e) {return e.start || (e.start = n), e.start > n - 3 * i;}))) : 0 === (o = e.data.splice(0, 1)).length && (o = e.playedData.splice(0, 1)), o.length > 0 && o.forEach(function (n) {e.forceDuration && e.forceDuration != n.duration && (n.duration = e.forceDuration), r = new l.default(t, n), n.hasAttached || (r.attach(), n.hasAttached = !0, a.addBullet(r).result ? (e.queue.push(r), e.nums++, r.topInit()) : (r.detach(), r = null, n.hasAttached = !1, n.noDiscard && (n.prior ? e.data.unshift(n) : e.data.push(n))));});}} }]), t;}(i.default);t.default = c, e.exports = t.default;}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = l(n(0)),a = l(n(1));function l(e) {return e && e.__esModule ? e : { default: e };}var s = function (e) {function t(e) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, t);var n = function (e, t) {if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != (void 0 === t ? "undefined" : o(t)) && "function" != typeof t ? e : t;}(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));n.setLogger("channel"), n.danmu = e, n.reset(!0);var r = n;return a.default.on(n.danmu, "bullet_remove", function (e) {r.removeBullet(e.bullet);}, "destroy"), n.direction = e.direction, a.default.on(n.danmu, "changeDirection", function (e) {r.direction = e;}, "destroy"), n.containerPos = n.danmu.container.getBoundingClientRect(), n.containerWidth = n.containerPos.width, n.containerHeight = n.containerPos.height, n.containerLeft = n.containerPos.left, n.containerRight = n.containerPos.right, a.default.on(n.danmu, "channel_resize", function () {r.containerPos = r.danmu.container.getBoundingClientRect(), r.resizing || (r.containerWidth = r.containerPos.width, r.containerHeight = r.containerPos.height, r.containerLeft = r.containerPos.left, r.containerRight = r.containerPos.right, r.resize(!0));}, "destroy"), n;}return function (e, t) {if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : o(t)));e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);}(t, e), r(t, [{ key: "destroy", value: function value() {for (var e in this.logger.info("destroy"), clearTimeout(this.resizeTimer), this.channels = [], this) {delete this[e];}} }, { key: "resize", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];this.logger.info("resize");var t = this.danmu.container,n = this;n.resizing || (n.resizing = !0, this.resizeTimer = setTimeout(function () {n.danmu.bulletBtn.main.data && n.danmu.bulletBtn.main.data.forEach(function (e) {e.bookChannelId && (delete e.bookChannelId, n.logger.info("resize导致" + e.id + "号优先弹幕预定取消"));}), n.logger.info("resize导致所有轨道恢复正常使用");var r = t.getBoundingClientRect();n.width = r.width, n.height = r.height, n.danmu.config.area && n.danmu.config.area.start >= 0 && n.danmu.config.area.end >= n.danmu.config.area.start && ("b2t" === n.direction ? n.width = n.width * (n.danmu.config.area.end - n.danmu.config.area.start) : n.height = n.height * (n.danmu.config.area.end - n.danmu.config.area.start)), n.container = t;var i,a = n.danmu.config.channelSize || (/mobile/gi.test(navigator.userAgent) ? 10 : 12);i = "b2t" === n.direction ? Math.floor(n.width / a) : Math.floor(n.height / a);for (var o = [], l = 0; l < i; l++) {o[l] = { id: l, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} };}if (n.channels && n.channels.length <= o.length) {for (var s = function s(t) {o[t] = { id: t, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} }, ["scroll", "top"].forEach(function (r) {n.channels[t].queue[r].forEach(function (i) {i.el && (o[t].queue[r].push(i), i.resized || (i.pauseMove(n.containerPos, e), "paused" !== i.danmu.bulletBtn.main.status && i.startMove(n.containerPos), i.resized = !0));});}), n.channels[t].queue.bottom.forEach(function (r) {if (r.el) {if (o[t + o.length - n.channels.length].queue.bottom.push(r), r.channel_id[0] + r.channel_id[1] - 1 === t) {var i = [].concat(r.channel_id);r.channel_id = [i[0] - n.channels.length + o.length, i[1]], r.top = r.channel_id[0] * a, n.danmu.config.area && n.danmu.config.area.start && (r.top += n.containerHeight * n.danmu.config.area.start), r.topInit();}r.resized || (r.pauseMove(n.containerPos, e), "paused" !== r.danmu.bulletBtn.main.status && r.startMove(n.containerPos), r.resized = !0);}});}, u = 0; u < n.channels.length; u++) {s(u);}for (var c = function c(e) {["scroll", "top", "bottom"].forEach(function (t) {o[e].queue[t].forEach(function (e) {e.resized = !1;});});}, p = 0; p < o.length; p++) {c(p);}n.channels = o, "b2t" === n.direction ? n.channelWidth = a : n.channelHeight = a;} else if (n.channels && n.channels.length > o.length) {for (var d = function d(t) {o[t] = { id: t, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} }, ["scroll", "top", "bottom"].forEach(function (r) {if ("top" === r && t > Math.floor(o.length / 2)) ;else if ("bottom" === r && t <= Math.floor(o.length / 2)) ;else {var i = "bottom" === r ? t - o.length + n.channels.length : t;n.channels[i].queue[r].forEach(function (l, s) {if (l.el) {if (o[t].queue[r].push(l), "bottom" === r && l.channel_id[0] + l.channel_id[1] - 1 === i) {var u = [].concat(l.channel_id);l.channel_id = [u[0] - n.channels.length + o.length, u[1]], l.top = l.channel_id[0] * a, n.danmu.config.area && n.danmu.config.area.start && (l.top += n.containerHeight * n.danmu.config.area.start), l.topInit();}l.pauseMove(n.containerPos, e), "paused" !== l.danmu.bulletBtn.main.status && l.startMove(n.containerPos), l.resized || (l.resized = !0);}n.channels[i].queue[r].splice(s, 1);});}});}, f = 0; f < o.length; f++) {d(f);}for (var g = function g(e) {["scroll", "top", "bottom"].forEach(function (t) {o[e].queue[t].forEach(function (e) {e.resized = !1;});});}, h = 0; h < o.length; h++) {g(h);}n.channels = o, "b2t" === n.direction ? n.channelWidth = a : n.channelHeight = a;}n.resizing = !1;}, 10));} }, { key: "addBullet", value: function value(e) {var t = this,n = this.danmu,r = this.channels,i = void 0,a = void 0,o = void 0;if ("b2t" === t.direction ? (a = this.channelWidth, o = Math.ceil(e.width / a)) : (i = this.channelHeight, o = Math.ceil(e.height / i)), o > r.length) return { result: !1, message: "exceed channels.length, occupy=" + o + ",channelsSize=" + r.length };for (var l = !0, s = void 0, u = -1, c = 0, p = r.length; c < p; c++) {if (r[c].queue[e.mode].some(function (t) {return t.id === e.id;})) return { result: !1, message: "exsited, channelOrder=" + c + ",danmu_id=" + e.id };}if ("scroll" === e.mode) for (var d = 0, f = r.length - o; d <= f; d++) {l = !0;for (var g = d; g < d + o; g++) {if ((s = r[g]).operating.scroll) {l = !1;break;}if ((s.bookId.scroll || e.prior) && s.bookId.scroll !== e.id) {l = !1;break;}s.operating.scroll = !0;var h = s.queue.scroll[0];if (h) {var y = h.el.getBoundingClientRect();if ("b2t" === t.direction) {if (y.bottom > t.containerPos.bottom) {l = !1, s.operating.scroll = !1;break;}} else if (y.right > t.containerPos.right) {l = !1, s.operating.scroll = !1;break;}var x,v = void 0,m = void 0,b = void 0,k = void 0;if ("b2t" === t.direction ? (m = (y.top - t.containerPos.top + y.height) / (v = (t.containerPos.height + y.height) / h.duration), b = t.containerPos.height, k = (t.containerPos.height + e.height) / e.duration) : (m = (y.left - t.containerPos.left + y.width) / (v = (t.containerPos.width + y.width) / h.duration), b = t.containerPos.width, k = (t.containerPos.width + e.width) / e.duration), x = b / k, n.config.bOffset || (n.config.bOffset = 0), v < k && m + n.config.bOffset > x) {l = !1, s.operating.scroll = !1;break;}}s.operating.scroll = !1;}if (l) {u = d;break;}} else if ("top" === e.mode) for (var w = 0, _ = r.length - o; w <= _; w++) {l = !0;for (var E = w; E < w + o; E++) {if (E > Math.floor(r.length / 2)) {l = !1;break;}if ((s = r[E]).operating[e.mode]) {l = !1;break;}if ((s.bookId[e.mode] || e.prior) && s.bookId[e.mode] !== e.id) {l = !1;break;}if (s.operating[e.mode] = !0, s.queue[e.mode].length > 0) {l = !1, s.operating[e.mode] = !1;break;}s.operating[e.mode] = !1;}if (l) {u = w;break;}} else if ("bottom" === e.mode) for (var T = r.length - o; T >= 0; T--) {l = !0;for (var C = T; C < T + o; C++) {if (C <= Math.floor(r.length / 2)) {l = !1;break;}if ((s = r[C]).operating[e.mode]) {l = !1;break;}if ((s.bookId[e.mode] || e.prior) && s.bookId[e.mode] !== e.id) {l = !1;break;}if (s.operating[e.mode] = !0, s.queue[e.mode].length > 0) {l = !1, s.operating[e.mode] = !1;break;}s.operating[e.mode] = !1;}if (l) {u = T;break;}}if (-1 !== u) {for (var S = u, P = u + o; S < P; S++) {(s = r[S]).operating[e.mode] = !0, s.queue[e.mode].unshift(e), e.prior && (delete s.bookId[e.mode], t.logger.info(S + "号轨道恢复正常使用")), s.operating[e.mode] = !1;}return e.prior && (t.logger.info(e.id + "号优先弹幕运行完毕"), delete e.bookChannelId, n.player && n.bulletBtn.main.data.some(function (t) {return t.id === e.id && (delete t.bookChannelId, !0);})), e.channel_id = [u, o], "b2t" === t.direction ? (e.top = u * a, t.danmu.config.area && t.danmu.config.area.start && (e.top += t.containerWidth * t.danmu.config.area.start)) : (e.top = u * i, t.danmu.config.area && t.danmu.config.area.start && (e.top += t.containerHeight * t.danmu.config.area.start)), { result: e, message: "success" };}if (e.options.realTime) {var O = 0,L = -1,M = null;if (t.danmu.bulletBtn.main.queue.forEach(function (e, n) {!e.prior && !e.options.realTime && e.el && e.el.getBoundingClientRect().left > t.containerPos.right && e.start >= O && (O = e.start, L = n, M = e);}), M) {M.remove(), t.removeBullet(M), t.danmu.bulletBtn.main.queue.splice(L, 1), e.channel_id = M.channel_id;for (var R = M.channel_id[0], D = M.channel_id[0] + M.channel_id[1]; R < D; R++) {(s = r[R]).operating[e.mode] = !0, s.queue[e.mode].unshift(e), e.prior && delete s.bookId[e.mode], s.operating[e.mode] = !1;}return e.top = M.top, t.danmu.config.area && t.danmu.config.area.start && (e.top += t.containerHeight * t.danmu.config.area.start), { result: e, message: "success" };}}if (e.prior) if (e.bookChannelId) n.player && n.bulletBtn.main.data.some(function (n) {return n.id === e.id && (t.logger.info(e.id + "号优先弹幕将于2秒后再次请求注册"), n.start += 2e3, !0);});else {u = -1;for (var A = 0, j = r.length - o; A <= j; A++) {l = !0;for (var I = A; I < A + o; I++) {if (r[I].bookId[e.mode]) {l = !1;break;}}if (l) {u = A;break;}}if (-1 !== u) {for (var z = u; z < u + o; z++) {r[z].bookId[e.mode] = e.id, t.logger.info(z + "号轨道被" + e.id + "号优先弹幕预定");}n.player && n.bulletBtn.main.data.some(function (n) {return n.id === e.id && (t.logger.info(e.id + "号优先弹幕将于2秒后再次请求注册"), n.start += 2e3, n.bookChannelId = [u, o], t.logger.info(e.id + "号优先弹幕预定了" + u + "~" + (u + o - 1) + "号轨道"), !0);});}}return { result: !1, message: "no surplus will right" };} }, { key: "removeBullet", value: function value(e) {this.logger.info("removeBullet " + (e.options.txt || "[DOM Element]"));for (var t = this.channels, n = e.channel_id, r = void 0, i = n[0], a = n[0] + n[1]; i < a; i++) {if (r = t[i]) {r.operating[e.mode] = !0;var o = -1;r.queue[e.mode].some(function (t, n) {return t.id === e.id && (o = n, !0);}), o > -1 && r.queue[e.mode].splice(o, 1), r.operating[e.mode] = !1;}}e.options.loop && this.danmu.bulletBtn.main.playedData.push(e.options);} }, { key: "resetArea", value: function value() {this.logger.info("resetArea");var e = this.danmu.container,t = this,n = e.getBoundingClientRect();t.width = n.width, t.height = n.height, t.danmu.config.area && t.danmu.config.area.start >= 0 && t.danmu.config.area.end >= t.danmu.config.area.start && ("b2t" === t.direction ? t.width = t.width * (t.danmu.config.area.end - t.danmu.config.area.start) : t.height = t.height * (t.danmu.config.area.end - t.danmu.config.area.start)), t.container = e;var r,i = t.danmu.config.channelSize || (/mobile/gi.test(navigator.userAgent) ? 10 : 12);r = "b2t" === t.direction ? Math.floor(t.width / i) : Math.floor(t.height / i);for (var a = [], o = 0; o < r; o++) {a[o] = { id: o, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} };}if (t.channels && t.channels.length <= a.length) {for (var l = function l(e) {a[e] = { id: e, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} }, ["scroll", "top"].forEach(function (n) {t.channels[e].queue[n].forEach(function (r) {r.el && (a[e].queue[n].push(r), r.resized || (r.pauseMove(t.containerPos, !1), r.startMove(t.containerPos), r.resized = !0));});}), t.channels[e].queue.bottom.forEach(function (n) {if (n.el) {if (a[e + a.length - t.channels.length].queue.bottom.push(n), n.channel_id[0] + n.channel_id[1] - 1 === e) {var r = [].concat(n.channel_id);n.channel_id = [r[0] - t.channels.length + a.length, r[1]], n.top = n.channel_id[0] * i, t.danmu.config.area && t.danmu.config.area.start && (n.top += t.containerHeight * t.danmu.config.area.start), n.topInit();}n.resized || (n.pauseMove(t.containerPos, !1), n.startMove(t.containerPos), n.resized = !0);}});}, s = 0; s < t.channels.length; s++) {l(s);}for (var u = function u(e) {["scroll", "top", "bottom"].forEach(function (t) {a[e].queue[t].forEach(function (e) {e.resized = !1;});});}, c = 0; c < a.length; c++) {u(c);}t.channels = a, "b2t" === t.direction ? t.channelWidth = i : t.channelHeight = i;} else if (t.channels && t.channels.length > a.length) {for (var p = function p(e) {a[e] = { id: e, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} }, ["scroll", "top", "bottom"].forEach(function (n) {if ("top" === n && e > Math.floor(a.length / 2)) ;else if ("bottom" === n && e <= Math.floor(a.length / 2)) ;else {var r = "bottom" === n ? e - a.length + t.channels.length : e;t.channels[r].queue[n].forEach(function (o, l) {if (o.el) {if (a[e].queue[n].push(o), "bottom" === n && o.channel_id[0] + o.channel_id[1] - 1 === r) {var s = [].concat(o.channel_id);o.channel_id = [s[0] - t.channels.length + a.length, s[1]], o.top = o.channel_id[0] * i, t.danmu.config.area && t.danmu.config.area.start && (o.top += t.containerHeight * t.danmu.config.area.start), o.topInit();}o.resized || (o.pauseMove(t.containerPos, !1), o.startMove(t.containerPos), o.resized = !0);}t.channels[r].queue[n].splice(l, 1);});}});}, d = 0; d < a.length; d++) {p(d);}for (var f = function f(e) {["scroll", "top", "bottom"].forEach(function (t) {a[e].queue[t].forEach(function (e) {e.resized = !1;});});}, g = 0; g < a.length; g++) {f(g);}t.channels = a, "b2t" === t.direction ? t.channelWidth = i : t.channelHeight = i;}} }, { key: "reset", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];this.logger.info("reset");var t = this.danmu.container,n = this;function r() {var e = t.getBoundingClientRect();n.width = e.width, n.height = e.height, n.danmu.config.area && n.danmu.config.area.start >= 0 && n.danmu.config.area.end >= n.danmu.config.area.start && ("b2t" === n.direction ? n.width = n.width * (n.danmu.config.area.end - n.danmu.config.area.start) : n.height = n.height * (n.danmu.config.area.end - n.danmu.config.area.start)), n.container = t;var r,i = n.danmu.config.channelSize || (/mobile/gi.test(navigator.userAgent) ? 10 : 12);r = "b2t" === n.direction ? Math.floor(n.width / i) : Math.floor(n.height / i);for (var a = [], o = 0; o < r; o++) {a[o] = { id: o, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} };}n.channels = a, "b2t" === n.direction ? n.channelWidth = i : n.channelHeight = i;}n.danmu.bulletBtn && n.danmu.bulletBtn.main && n.danmu.bulletBtn.main.queue.forEach(function (e) {e.pauseMove(n.containerPos), e.remove();}), n.channels && n.channels.length > 0 && ["scroll", "top", "bottom"].forEach(function (e) {for (var t = 0; t < n.channels.length; t++) {n.channels[t].queue[e].forEach(function (e) {e.pauseMove(n.containerPos), e.remove();});}}), n.danmu.bulletBtn && n.danmu.bulletBtn.main && n.danmu.bulletBtn.main.data && n.danmu.bulletBtn.main.data.forEach(function (e) {e.hasAttached = !1;}), e ? this.resetTimer = setTimeout(r, 200) : r();} }, { key: "resetWithCb", value: function value(e, t) {this.logger.info("resetWithCb");var n = this.danmu.container,r = this;r.channels && r.channels.length > 0 && ["scroll", "top", "bottom"].forEach(function (e) {for (var t = 0; t < r.channels.length; t++) {r.channels[t].queue[e].forEach(function (e) {e.pauseMove(r.containerPos), e.remove();});}});var i = n.getBoundingClientRect();r.width = i.width, r.height = i.height, r.danmu.config.area && r.danmu.config.area.start >= 0 && r.danmu.config.area.end >= r.danmu.config.area.start && ("b2t" === r.direction ? r.width = r.width * (r.danmu.config.area.end - r.danmu.config.area.start) : r.height = r.height * (r.danmu.config.area.end - r.danmu.config.area.start)), r.container = n;var a,o = r.danmu.config.channelSize || (/mobile/gi.test(navigator.userAgent) ? 10 : 12);a = "b2t" === r.direction ? Math.floor(r.width / o) : Math.floor(r.height / o);for (var l = [], s = 0; s < a; s++) {l[s] = { id: s, queue: { scroll: [], top: [], bottom: [] }, operating: { scroll: !1, top: !1, bottom: !1 }, bookId: {} };}r.channels = l, r.channelHeight = o, e && e(!0, t);} }]), t;}(i.default);t.default = s, e.exports = t.default;}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = l(n(0)),a = l(n(1));function l(e) {return e && e.__esModule ? e : { default: e };}var s = function (e) {function t(e, n) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, t);var r = function (e, t) {if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != (void 0 === t ? "undefined" : o(t)) && "function" != typeof t ? e : t;}(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));r.setLogger("bullet"), r.danmu = e, r.options = n, r.duration = n.duration, r.moveV = n.moveV, r.id = n.id, r.container = e.container, r.start = n.start, r.prior = n.prior, r.color = n.color, r.bookChannelId = n.bookChannelId, r.direction = e.direction;var i = r;r.onChangeDirection = function (e) {i.direction = e;}, r.danmu.on("changeDirection", r.onChangeDirection);var l = void 0;if (r.domObj = e.domObj, n.el && 1 === n.el.nodeType) {l = r.domObj.use();var s = a.default.copyDom(n.el);n.eventListeners && n.eventListeners.length > 0 && n.eventListeners.forEach(function (e) {s.addEventListener(e.event, e.listener, e.useCapture || !1);}), l.appendChild(s);} else if ((l = r.domObj.use()).textContent = n.txt, n.style) {var u = n.style;Object.keys(u).forEach(function (e) {l.style[e] = u[e];});}"top" === n.mode || "bottom" === n.mode ? r.mode = n.mode : r.mode = "scroll", r.el = l, n.like && n.like.el && r.setLikeDom(n.like.el, n.like.style), r.status = "waiting";var c = r.container.getBoundingClientRect(),p = Math.floor(Math.random() * (c.width / 10 > 100 ? 200 : c.width / 10));return n.realTime && (p = 0), r.el.style.left = c.width + p + "px", r.containerPos = c, r;}return function (e, t) {if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : o(t)));e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);}(t, e), r(t, [{ key: "attach", value: function value() {if (this.container.appendChild(this.el), this.elPos = this.el.getBoundingClientRect(), "b2t" === this.direction ? (this.width = this.elPos.height, this.height = this.elPos.width) : (this.width = this.elPos.width, this.height = this.elPos.height), this.moveV) {var e = this.containerPos;this.duration = (e.width + this.width) / this.moveV * 1e3;}this.danmu.config.mouseControl && this.el.addEventListener("mouseover", this.mouseoverFun.bind(this));} }, { key: "mouseoverFun", value: function value(e) {this.danmu.mouseControl && this.danmu.config.mouseControlPause || "waiting" === this.status || "end" === this.status || this.danmu.emit("bullet_hover", { bullet: this, event: e });} }, { key: "detach", value: function value() {this.container && this.el && (this.el.parentNode && this.el.parentNode.removeChild(this.el), this.domObj.unuse(this.el), this.el = null), this.danmu.off("changeDirection", this.onChangeDirection);} }, { key: "topInit", value: function value() {if (this.logger.info("topInit #" + (this.options.txt || "[DOM Element]") + "#"), "b2t" === this.direction) {var e = this.containerPos;this.el.style.transformOrigin = "left top", this.el.style.transform = "translateX(-" + this.top + "px) translateY(" + e.height + "px) translateZ(0px) rotate(90deg)", this.el.style.transition = "transform 0s linear 0s";} else this.el.style.top = this.top + "px";} }, { key: "pauseMove", value: function value(e) {var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];this.logger.info("pauseMove #" + (this.options.txt || "[DOM Element]") + "#");var n = this;if ("paused" !== this.status && ("forcedPause" !== n.status && (this.status = "paused"), clearTimeout(n.removeTimer), this.el)) if (this.el.style.willChange = "auto", "scroll" === this.mode) {if (t) {var r = (new Date().getTime() - n.moveTime) / 1e3,i = r * this.moveV,a = 0;a = n.moveMoreS - i >= 0 ? "b2t" === this.direction ? (n.moveMoreS - i) / n.moveContainerHeight * e.height : (n.moveMoreS - i) / n.moveContainerWidth * e.width : n.moveMoreS - i, "b2t" === this.direction ? this.el.style.transform = "translateX(-" + this.top + "px) translateY(" + a + "px) translateZ(0px) rotate(90deg)" : this.el.style.left = a + "px";} else "b2t" === this.direction ? this.el.style.transform = "translateX(-" + this.top + "px) translateY(" + (this.el.getBoundingClientRect().top - e.top) + "px) translateZ(0px) rotate(90deg)" : this.el.style.left = this.el.getBoundingClientRect().left - e.left + "px";"b2t" === this.direction || (this.el.style.transform = "translateX(0px) translateY(0px) translateZ(0px)"), this.el.style.transition = "transform 0s linear 0s";} else this.pastDuration && this.startTime ? this.pastDuration = this.pastDuration + new Date().getTime() - this.startTime : this.pastDuration = 1;} }, { key: "startMove", value: function value(e, t) {this.logger.info("startMove #" + (this.options.txt || "[DOM Element]") + "#");var n = this;if (n.hasMove || (n.danmu.emit("bullet_start", n), n.hasMove = !0), ("forcedPause" !== n.status || t) && this.el && "start" !== this.status) if (this.status = "start", this.el.style.willChange = "transform", "scroll" === this.mode) {if ("b2t" === this.direction) {this.moveV = (e.height + this.height) / this.duration * 1e3;var r = (n.el.getBoundingClientRect().bottom - e.top) / this.moveV;this.el.style.transition = "transform " + r + "s linear 0s", this.startMoveTimer = setTimeout(function () {n.el && (n.el.style.transform = "translateX(-" + n.top + "px) translateY(-" + n.height + "px) translateZ(0px) rotate(90deg)", n.moveTime = new Date().getTime(), n.moveMoreS = n.el.getBoundingClientRect().top - e.top, n.moveContainerHeight = e.height, n.removeTimer = setTimeout(l, 1e3 * r));}, 20);} else {var i = this.el.getBoundingClientRect();this.moveV = (e.width + this.width) / this.duration * 1e3;var a = (i.right - e.left) / this.moveV;this.el.style.transition = "transform " + a + "s linear 0s", this.startMoveTimer = setTimeout(function () {if (n.el) {var t = n.el.getBoundingClientRect(),r = (t.right - e.left) / a;t.right > e.left && r > n.moveV - 1 && r < n.moveV + 1 ? (n.el.style.transform = "translateX(-" + (t.right - e.left) + "px) translateY(0px) translateZ(0px)", n.moveTime = new Date().getTime(), n.moveMoreS = t.left - e.left, n.moveContainerWidth = e.width, n.removeTimer = setTimeout(l, 1e3 * a)) : (n.status = "end", n.remove());}}, 0);}} else {this.el.style.left = "50%", this.el.style.margin = "0 0 0 -" + this.width / 2 + "px", this.pastDuration || (this.pastDuration = 1);var o = this.duration >= this.pastDuration ? this.duration - this.pastDuration : 0;this.removeTimer = setTimeout(l, o), this.startTime = new Date().getTime();}function l() {if (n.el) if ("scroll" === n.mode) {var e = n.containerPos,t = n.el.getBoundingClientRect();"b2t" === n.direction ? t && t.bottom <= e.top + 100 ? (n.status = "end", n.remove()) : (n.pauseMove(e), "paused" !== n.danmu.bulletBtn.main.status && n.startMove(e)) : t && t.right <= e.left + 100 ? (n.status = "end", n.remove()) : (n.pauseMove(e), "paused" !== n.danmu.bulletBtn.main.status && n.startMove(e));} else n.status = "end", n.remove();}} }, { key: "remove", value: function value() {this.logger.info("remove #" + (this.options.txt || "[DOM Element]") + "#"), this.removeTimer && clearTimeout(this.removeTimer), this.startMoveTimer && clearTimeout(this.startMoveTimer), this.el && this.el.parentNode && (this.el.style.willChange = "auto", this.danmu.off("changeDirection", this.onChangeDirection), this.domObj.unuse(this.el), this.el.parentNode.removeChild(this.el), this.el = null, this.danmu.emit("bullet_remove", { bullet: this }));} }, { key: "setFontSize", value: function value(e) {this.el && (this.el.style.fontSize = e);} }, { key: "setLikeDom", value: function value(e, t) {if (e && (Object.keys(t).forEach(function (n) {e.style[n] = t[n];}), e.className = "danmu-like", this.el)) {var n = this.el.querySelector(".danmu-like");n && this.el.removeChild(n), this.el.innerHTML = "" + this.el.innerHTML + e.outerHTML;}return e;} }]), t;}(i.default);t.default = s, e.exports = t.default;}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = function () {function e(t) {!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, e), t = { initDOM: function initDOM() {return document.createElement("div");}, initSize: 10 }, this.init(t);}return r(e, [{ key: "init", value: function value(e) {this.idleList = [], this.usingList = [], this._id = 0, this.options = e, this._expand(e.initSize);} }, { key: "use", value: function value() {this.idleList.length || this._expand(1);var e = this.idleList.shift();return this.usingList.push(e), e;} }, { key: "unuse", value: function value(e) {var t = this.usingList.indexOf(e);t < 0 || (this.usingList.splice(t, 1), e.innerHTML = "", e.textcontent = "", this.clearElementStyle(e), this.idleList.push(e));} }, { key: "_expand", value: function value(e) {for (var t = 0; t < e; t++) {this.idleList.push(this.options.initDOM(this._id++));}} }, { key: "destroy", value: function value() {for (var e = 0; e < this.idleList.length; e++) {this.idleList[e].innerHTML = "", this.idleList[e].textcontent = "", this.clearElementStyle(this.idleList[e]);}for (var t = 0; t < this.usingList.length; t++) {this.usingList[t].innerHTML = "", this.usingList[t].textcontent = "", this.clearElementStyle(this.usingList[t]);}for (var n in this) {delete this[n];}} }, { key: "clearElementStyle", value: function value(e) {var t = window.navigator.userAgent;t.indexOf("MSIE ") > -1 || t.indexOf("Trident/") > -1 ? e.style.transform = "none" : e.style = "";} }]), e;}();t.default = i, e.exports = t.default;}, function (e) {e.exports = JSON.parse('{"version":"0.3.6"}');}, function (e, t, n) {Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {function e(e, t) {for (var n = 0; n < t.length; n++) {var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}(),i = new (function () {function e() {var t = this;!function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");}(this, e), this.__handlers = [], window.ResizeObserver && (this.observer = new window.ResizeObserver(function (e) {var n = new Date().getTime();n - t.timeStampe < 200 || (t.timeStampe = n, t.__trigger(e));}), this.timeStampe = new Date().getTime());}return r(e, [{ key: "addObserver", value: function value(e, t) {if (this.observer) {this.observer && this.observer.observe(e);for (var n = this.__handlers, r = -1, i = 0; i < n.length; i++) {n[i] && e === n[i].target && (r = i);}r > -1 ? this.__handlers[r].handler.push(t) : this.__handlers.push({ target: e, handler: [t] });}} }, { key: "unObserver", value: function value(e) {var t = -1;this.__handlers.map(function (n, r) {e === n.target && (t = r);}), this.observer && this.observer.unobserve(e), t > -1 && this.__handlers.splice(t, 1);} }, { key: "destroyObserver", value: function value() {this.observer && this.observer.disconnect(), this.observer = null, this.__handlers = null;} }, { key: "__runHandler", value: function value(e) {for (var t = this.__handlers, n = 0; n < t.length; n++) {if (t[n] && e === t[n].target) {t[n].handler && t[n].handler.map(function (e) {try {e();} catch (e) {__f__("error", e, " at node_modules/xgplayer/dist/index.js:22");}});break;}}} }, { key: "__trigger", value: function value(e) {var t = this;e.map(function (e) {t.__runHandler(e.target);});} }]), e;}())();window.resizeObserver = i, t.addObserver = function (e, t) {i.addObserver(e, t);}, t.unObserver = function (e, t) {i.unObserver(e, t);}, t.destroyObserver = function (e, t) {i.destroyObserver(e, t);};}, function (e, t, n) {var r = n(35);"string" == typeof r && (r = [[e.i, r, ""]]), n(37)(r, { hmr: !0, transform: void 0, insertInto: void 0 }), r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(36)(!1)).push([e.i, ".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\n", ""]);}, function (e, t) {e.exports = function (e) {var t = [];return t.toString = function () {return this.map(function (t) {var n = function (e, t) {var n,r = e[1] || "",i = e[3];if (!i) return r;if (t && "function" == typeof btoa) {var a = (n = i, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(n)))) + " */"),o = i.sources.map(function (e) {return "/*# sourceURL=" + i.sourceRoot + e + " */";});return [r].concat(o).concat([a]).join("\n");}return [r].join("\n");}(t, e);return t[2] ? "@media " + t[2] + "{" + n + "}" : n;}).join("");}, t.i = function (e, n) {"string" == typeof e && (e = [[null, e, ""]]);for (var r = {}, i = 0; i < this.length; i++) {var a = this[i][0];"number" == typeof a && (r[a] = !0);}for (i = 0; i < e.length; i++) {var o = e[i];"number" == typeof o[0] && r[o[0]] || (n && !o[2] ? o[2] = n : n && (o[2] = "(" + o[2] + ") and (" + n + ")"), t.push(o));}}, t;};}, function (e, t, n) {var r,i,a = {},l = (r = function r() {return window && document && document.all && !window.atob;}, function () {return void 0 === i && (i = r.apply(this, arguments)), i;}),s = function s(e) {return document.querySelector(e);},u = function (e) {var t = {};return function (e) {if ("function" == typeof e) return e();if (void 0 === t[e]) {var n = s.call(this, e);if (window.HTMLIFrameElement && n instanceof window.HTMLIFrameElement) try {n = n.contentDocument.head;} catch (e) {n = null;}t[e] = n;}return t[e];};}(),c = null,p = 0,d = [],f = n(38);function g(e, t) {for (var n = 0; n < e.length; n++) {var r = e[n],i = a[r.id];if (i) {i.refs++;for (var o = 0; o < i.parts.length; o++) {i.parts[o](r.parts[o]);}for (; o < r.parts.length; o++) {i.parts.push(b(r.parts[o], t));}} else {var l = [];for (o = 0; o < r.parts.length; o++) {l.push(b(r.parts[o], t));}a[r.id] = { id: r.id, refs: 1, parts: l };}}}function h(e, t) {for (var n = [], r = {}, i = 0; i < e.length; i++) {var a = e[i],o = t.base ? a[0] + t.base : a[0],l = { css: a[1], media: a[2], sourceMap: a[3] };r[o] ? r[o].parts.push(l) : n.push(r[o] = { id: o, parts: [l] });}return n;}function y(e, t) {var n = u(e.insertInto);if (!n) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r = d[d.length - 1];if ("top" === e.insertAt) r ? r.nextSibling ? n.insertBefore(t, r.nextSibling) : n.appendChild(t) : n.insertBefore(t, n.firstChild), d.push(t);else if ("bottom" === e.insertAt) n.appendChild(t);else {if ("object" != o(e.insertAt) || !e.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i = u(e.insertInto + " " + e.insertAt.before);n.insertBefore(t, i);}}function x(e) {if (null === e.parentNode) return !1;e.parentNode.removeChild(e);var t = d.indexOf(e);t >= 0 && d.splice(t, 1);}function v(e) {var t = document.createElement("style");return void 0 === e.attrs.type && (e.attrs.type = "text/css"), m(t, e.attrs), y(e, t), t;}function m(e, t) {Object.keys(t).forEach(function (n) {e.setAttribute(n, t[n]);});}function b(e, t) {var n, r, i, a;if (t.transform && e.css) {if (!(a = t.transform(e.css))) return function () {};e.css = a;}if (t.singleton) {var o = p++;n = c || (c = v(t)), r = _.bind(null, n, o, !1), i = _.bind(null, n, o, !0);} else e.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (n = function (e) {var t = document.createElement("link");return void 0 === e.attrs.type && (e.attrs.type = "text/css"), e.attrs.rel = "stylesheet", m(t, e.attrs), y(e, t), t;}(t), r = T.bind(null, n, t), i = function i() {x(n), n.href && URL.revokeObjectURL(n.href);}) : (n = v(t), r = E.bind(null, n), i = function i() {x(n);});return r(e), function (t) {if (t) {if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;r(e = t);} else i();};}e.exports = function (e, t) {if ("undefined" != typeof DEBUG && DEBUG && "object" != ("undefined" == typeof document ? "undefined" : o(document))) throw new Error("The style-loader cannot be used in a non-browser environment");(t = t || {}).attrs = "object" == o(t.attrs) ? t.attrs : {}, t.singleton || "boolean" == typeof t.singleton || (t.singleton = l()), t.insertInto || (t.insertInto = "head"), t.insertAt || (t.insertAt = "bottom");var n = h(e, t);return g(n, t), function (e) {for (var r = [], i = 0; i < n.length; i++) {var o = n[i];(l = a[o.id]).refs--, r.push(l);}for (e && g(h(e, t), t), i = 0; i < r.length; i++) {var l;if (0 === (l = r[i]).refs) {for (var s = 0; s < l.parts.length; s++) {l.parts[s]();}delete a[l.id];}}};};var k,w = (k = [], function (e, t) {return k[e] = t, k.filter(Boolean).join("\n");});function _(e, t, n, r) {var i = n ? "" : r.css;if (e.styleSheet) e.styleSheet.cssText = w(t, i);else {var a = document.createTextNode(i),o = e.childNodes;o[t] && e.removeChild(o[t]), o.length ? e.insertBefore(a, o[t]) : e.appendChild(a);}}function E(e, t) {var n = t.css,r = t.media;if (r && e.setAttribute("media", r), e.styleSheet) e.styleSheet.cssText = n;else {for (; e.firstChild;) {e.removeChild(e.firstChild);}e.appendChild(document.createTextNode(n));}}function T(e, t, n) {var r = n.css,i = n.sourceMap,a = void 0 === t.convertToAbsoluteUrls && i;(t.convertToAbsoluteUrls || a) && (r = f(r)), i && (r += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(i)))) + " */");var o = new Blob([r], { type: "text/css" }),l = e.href;e.href = URL.createObjectURL(o), l && URL.revokeObjectURL(l);}}, function (e, t) {e.exports = function (e) {var t = "undefined" != typeof window && window.location;if (!t) throw new Error("fixUrls requires window.location");if (!e || "string" != typeof e) return e;var n = t.protocol + "//" + t.host,r = n + t.pathname.replace(/\/[^\/]*$/, "/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function (e, t) {var i,a = t.trim().replace(/^"(.*)"$/, function (e, t) {return t;}).replace(/^'(.*)'$/, function (e, t) {return t;});return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a) ? e : (i = 0 === a.indexOf("//") ? a : 0 === a.indexOf("/") ? n + a : r + a.replace(/^\.\//, ""), "url(" + JSON.stringify(i) + ")");});};}]);}, "object" == o(t) && "object" == o(e) ? e.exports = a() : (r = [], void 0 === (i = "function" == typeof (n = a) ? n.apply(t, r) : n) || (e.exports = i));}).call(this, n(132)(e));}, function (e, t) {e.exports = function (e) {return e.webpackPolyfill || (e.deprecate = function () {}, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", { enumerable: !0, get: function get() {return e.l;} }), Object.defineProperty(e, "id", { enumerable: !0, get: function get() {return e.i;} }), e.webpackPolyfill = 1), e;};}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40">\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M36.5,18.73a1.19,1.19,0,0,0,1-1.14V16.33a1.2,1.2,0,0,0-1-1.13l-.61-.08a1.75,1.75,0,0,1-1.3-.86l-.21-.36-.2-.36A1.72,1.72,0,0,1,34,12l.23-.58a1.18,1.18,0,0,0-.5-1.42l-1.1-.62a1.18,1.18,0,0,0-1.47.3l-.39.51a1.82,1.82,0,0,1-1.41.72c-.44,0-1.88-.27-2.22-.7l-.39-.49a1.18,1.18,0,0,0-1.48-.28l-1.09.64a1.19,1.19,0,0,0-.47,1.43l.25.59a1.87,1.87,0,0,1-.08,1.58c-.26.37-1.17,1.5-1.71,1.58l-.63.09a1.19,1.19,0,0,0-1,1.14l0,1.27a1.17,1.17,0,0,0,1,1.12l.61.08a1.74,1.74,0,0,1,1.3.87l.21.36.2.35A1.69,1.69,0,0,1,24,22.08l-.23.59a1.19,1.19,0,0,0,.5,1.42l1.1.62a1.19,1.19,0,0,0,1.48-.31l.38-.5a1.83,1.83,0,0,1,1.41-.72c.44,0,1.88.25,2.22.69l.39.49a1.18,1.18,0,0,0,1.48.28L33.86,24a1.19,1.19,0,0,0,.47-1.43L34.09,22a1.84,1.84,0,0,1,.07-1.58c.26-.37,1.17-1.5,1.72-1.58ZM31,18.94a2.76,2.76,0,0,1-4.65-1.2A2.71,2.71,0,0,1,27,15.13a2.76,2.76,0,0,1,4.64,1.2A2.7,2.7,0,0,1,31,18.94Z"/>\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M32,0H3.59A3.59,3.59,0,0,0,0,3.59v17A3.59,3.59,0,0,0,3.59,24.2H19.72a12.59,12.59,0,0,1-.81-1.2A11.73,11.73,0,0,1,35.54,7.28V3.59A3.59,3.59,0,0,0,32,0ZM13,14.18H4.29a1.52,1.52,0,0,1,0-3H13a1.52,1.52,0,0,1,0,3ZM16.45,8H4.29a1.51,1.51,0,0,1,0-3H16.45a1.51,1.51,0,1,1,0,3Z"/>\n</svg>\n';}, function (e, t, n) {var r = n(135);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .danmu-switch{-webkit-order:6;-moz-box-ordinal-group:7;order:6;z-index:26}.xgplayer-skin-default .xgplayer-danmu{display:none;position:absolute;top:0;left:0;right:0;height:100%;overflow:hidden;z-index:9;outline:none}.xgplayer-skin-default .xgplayer-danmu>*{position:absolute;white-space:nowrap;z-index:9}.xgplayer-skin-default .xgplayer-danmu.xgplayer-has-danmu{display:block}.xgplayer-skin-default .xgplayer-panel{outline:none;-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:40px;height:40px;display:inline-block;position:relative;font-family:PingFangSC-Regular;font-size:13px;color:hsla(0,0%,100%,.8);z-index:36}.xgplayer-skin-default .xgplayer-panel .xgplayer-panel-icon{cursor:pointer;position:absolute;margin-left:5px;top:10px}.xgplayer-skin-default .xgplayer-panel-active{display:block!important;bottom:30px}.xgplayer-skin-default .xgplayer-panel-slider{z-index:36;display:none;position:absolute;width:230px;height:230px;background:rgba(0,0,0,.54);border-radius:1px;padding:10px 20px;outline:none;left:-115px;bottom:40px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode{padding-bottom:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode-radio li{display:inline;list-style:none;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode ul{display:-webkit-flex;display:-moz-box;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode li{margin:0 12px;font-size:11px;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-hidemode-font{margin-bottom:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency{display:block;margin-top:10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-transparency .xgplayer-transparency-bar::-moz-range-progress{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:4px;border-radius:4px;background:linear-gradient(90deg,#f85959,#f85959 100%,#aaa)}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea{display:block;margin-top:8px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-threequarters,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-twoquarters{margin-left:-6px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea-full{margin-right:3px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-full-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-onequarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-threequarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-twoquarters-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-showarea .xgplayer-showarea-zero-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed{display:block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-large-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-middle-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmuspeed .xgplayer-danmuspeed-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont{display:block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-name{display:inline-block;position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control{display:inline-block}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-down{position:relative;top:-10px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-line::-moz-focus-outer{border:0!important}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-large-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-middle-dot,.xgplayer-skin-default .xgplayer-panel-slider .xgplayer-danmufont .xgplayer-danmufont-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(137);t.default = { name: "s_pip", method: function method() {var e = this;if (e.config.pip) {var t = e.lang.PIP,n = (0, r.createDom)("xg-pip", '<p class="name"><span>' + t + "</span></p>", { tabindex: 9 }, "xgplayer-pip");e.once("ready", function () {e.controls.appendChild(n);}), ["click", "touchend"].forEach(function (t) {n.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("pipBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {var r = n(138);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-pip{-webkit-order:9;-moz-box-ordinal-group:10;order:9;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:10px}.xgplayer-skin-default .xgplayer-pip .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-pip .name span{width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.lang-is-jp .xgplayer-pip .name span{width:70px;height:20px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(140);t.default = { name: "s_miniplayer", method: function method() {var e = this;if (e.config.miniplayer) {var t = e.lang.MINIPLAYER,n = (0, r.createDom)("xg-miniplayer", '<p class="name"><span>' + t + "</span></p>", { tabindex: 9 }, "xgplayer-miniplayer");e.once("ready", function () {e.controls.appendChild(n);}), ["click", "touchend"].forEach(function (t) {n.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("miniplayerBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {var r = n(141);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-miniplayer{-webkit-order:9;-moz-box-ordinal-group:10;order:9;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:10px}.xgplayer-skin-default .xgplayer-miniplayer .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-miniplayer .name span{width:80px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-skin-default .xgplayer-miniplayer-lay{position:absolute;top:26px;left:0;width:100%;height:100%;z-index:130;cursor:pointer;background-color:transparent;display:none}.xgplayer-skin-default .xgplayer-miniplayer-lay div{width:100%;height:100%}.xgplayer-skin-default .xgplayer-miniplayer-drag{cursor:move;position:absolute;top:0;left:0;width:100%;height:26px;line-height:26px;background-image:linear-gradient(rgba(0,0,0,.3),transparent);z-index:130;display:none}.xgplayer-skin-default .xgplayer-miniplayer-drag .drag-handle{width:100%}.xgplayer-skin-default.xgplayer-miniplayer-active{position:fixed;right:0;bottom:200px;width:320px;height:180px;z-index:110}.xgplayer-skin-default.xgplayer-miniplayer-active .xgplayer-controls,.xgplayer-skin-default.xgplayer-miniplayer-active .xgplayer-danmu{display:none}.xgplayer-skin-default.xgplayer-miniplayer-active .xgplayer-miniplayer-lay{display:block}.xgplayer-skin-default.xgplayer-miniplayer-active .xgplayer-miniplayer-drag{display:-webkit-flex;display:-moz-box;display:flex}.xgplayer-skin-default.xgplayer-inactive .xgplayer-miniplayer-drag{display:none}.lang-is-jp .xgplayer-miniplayer .name span{width:70px;height:20px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(143),o = (r = a) && r.__esModule ? r : { default: r };n(144);t.default = { name: "s_playNext", method: function method() {var e = this,t = e.config.playNext;if (t && t.urlList) {var n = (0, i.createDom)("xg-playnext", '<xg-icon class="xgplayer-icon">' + o.default + "</xg-icon>", {}, "xgplayer-playnext"),r = e.lang.PLAYNEXT_TIPS,a = (0, i.createDom)("xg-tips", '<span class="xgplayer-tip-playnext">' + r + "</span>", {}, "xgplayer-tips");n.appendChild(a), e.once("ready", function () {e.controls.appendChild(n);}), ["click", "touchend"].forEach(function (t) {n.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), (0, i.addClass)(e.root, "xgplayer-is-enter"), e.userGestureTrigEvent("playNextBtnClick");});});var l = function l() {(0, i.addClass)(e.root, "xgplayer-playnext-inactive");};e.on("urlListEnd", l), e.once("destroy", function t() {e.off("urlListEnd", l), e.off("destroy", t);});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n';}, function (e, t, n) {var r = n(145);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-playnext{position:relative;-webkit-order:1;-moz-box-ordinal-group:2;order:1;display:block;cursor:pointer;top:-2px}.xgplayer-skin-default .xgplayer-playnext .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-playnext .xgplayer-tips .xgplayer-tip-playnext{display:block}.xgplayer-skin-default .xgplayer-playnext:hover{opacity:.85}.xgplayer-skin-default .xgplayer-playnext:hover .xgplayer-tips{display:block}.xgplayer-lang-is-en .xgplayer-playnext .xgplayer-tips{margin-left:-25px}.xgplayer-lang-is-jp .xgplayer-playnext .xgplayer-tips{margin-left:-38px}.xgplayer-skin-default.xgplayer-playnext-inactive .xgplayer-playnext{display:none}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(147),o = (r = a) && r.__esModule ? r : { default: r };n(148);t.default = { name: "s_rotate", method: function method() {var e = this;if (e.config.rotate) {var t = (0, i.createDom)("xg-rotate", '<xg-icon class="xgplayer-icon">' + o.default + "</xg-icon>", {}, "xgplayer-rotate"),n = e.lang.ROTATE_TIPS,r = (0, i.createDom)("xg-tips", '<span class="xgplayer-tip-rotate">' + n + "</span>", {}, "xgplayer-tips");t.appendChild(r), e.once("ready", function () {e.controls.appendChild(t);}), ["click", "touchend"].forEach(function (n) {t.addEventListener(n, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("rotateBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n';}, function (e, t, n) {var r = n(149);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-rotate{position:relative;-webkit-order:10;-moz-box-ordinal-group:11;order:10;display:block;cursor:pointer}.xgplayer-skin-default .xgplayer-rotate .xgplayer-icon{margin-top:7px;width:26px}.xgplayer-skin-default .xgplayer-rotate .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-rotate .xgplayer-tips{margin-left:-22px}.xgplayer-skin-default .xgplayer-rotate .xgplayer-tips .xgplayer-tip-rotate{display:block}.xgplayer-skin-default .xgplayer-rotate:hover{opacity:.85}.xgplayer-skin-default .xgplayer-rotate:hover .xgplayer-tips{display:block}.xgplayer-lang-is-en .xgplayer-rotate .xgplayer-tips{margin-left:-26px}.xgplayer-lang-is-jp .xgplayer-rotate .xgplayer-tips{margin-left:-38px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(151),o = (r = a) && r.__esModule ? r : { default: r };n(152);t.default = { name: "s_reload", method: function method() {var e = this;if (e.config.reload) {var t = (0, i.createDom)("xg-reload", '<xg-icon class="xgplayer-icon">' + o.default + "</xg-icon>", {}, "xgplayer-reload"),n = e.lang.RELOAD_TIPS,r = (0, i.createDom)("xg-tips", '<span class="xgplayer-tip-reload">' + n + "</span>", {}, "xgplayer-tips");t.appendChild(r), e.once("ready", function () {e.controls.appendChild(t);}), ["click", "touchend"].forEach(function (n) {t.addEventListener(n, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("reloadBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <path fill="#FFF" fill-opacity="1" fill-rule="nonzero" d="M18.17 19.988a7.182 7.182 0 0 1-4.256 1.318 7.806 7.806 0 0 1-.595-.03c-.08-.008-.16-.021-.242-.031a8.004 8.004 0 0 1-.458-.071c-.094-.018-.185-.042-.276-.063a7.743 7.743 0 0 1-.439-.113c-.068-.022-.136-.047-.205-.07a7.03 7.03 0 0 1-.492-.181c-.037-.015-.072-.032-.108-.049a7.295 7.295 0 0 1-.554-.269l-.025-.012a7.347 7.347 0 0 1-2.111-1.753c-.03-.036-.057-.074-.086-.11a7.305 7.305 0 0 1-1.594-4.557h1.686a.123.123 0 0 0 .108-.064.119.119 0 0 0-.006-.125L5.684 9.532a.123.123 0 0 0-.103-.056.123.123 0 0 0-.102.056l-2.834 4.276a.121.121 0 0 0-.005.125c.022.04.064.064.107.064h1.687c0 2.025.627 3.902 1.693 5.454.013.021.022.044.037.066.11.159.233.305.352.455.043.057.085.116.13.171.175.213.36.413.55.61.02.018.036.038.054.055a9.447 9.447 0 0 0 2.91 1.996c.058.026.115.054.175.079.202.084.41.158.619.228.098.034.196.069.296.1.183.054.37.1.558.145.125.029.249.06.376.085.052.01.102.027.155.035.177.032.355.05.533.071.064.007.128.018.19.026.32.03.639.052.956.052a9.46 9.46 0 0 0 5.47-1.746 1.16 1.16 0 0 0 .282-1.608 1.143 1.143 0 0 0-1.6-.283zm5.397-5.991a9.604 9.604 0 0 0-1.685-5.441c-.016-.027-.026-.054-.043-.078-.132-.19-.276-.366-.419-.543-.017-.022-.032-.044-.05-.065a9.467 9.467 0 0 0-3.571-2.7l-.114-.051a11.2 11.2 0 0 0-.673-.248c-.082-.027-.163-.057-.247-.082a9.188 9.188 0 0 0-.6-.156c-.113-.026-.224-.055-.337-.077-.057-.011-.109-.028-.164-.037-.151-.027-.304-.039-.455-.058-.104-.013-.208-.03-.313-.04a10.05 10.05 0 0 0-.759-.039c-.045 0-.09-.007-.136-.007l-.025.003a9.45 9.45 0 0 0-5.46 1.737 1.16 1.16 0 0 0-.284 1.608c.363.523 1.08.65 1.6.284a7.182 7.182 0 0 1 4.222-1.32c.217.002.429.013.639.033.065.007.129.017.193.025.173.021.344.046.513.08.075.014.149.033.221.05.166.037.331.077.494.127l.152.051c.185.061.366.127.545.201l.054.025a7.308 7.308 0 0 1 2.741 2.067l.013.018a7.302 7.302 0 0 1 1.652 4.633h-1.686a.123.123 0 0 0-.108.064.12.12 0 0 0 .006.124l2.834 4.277c.022.033.06.054.103.054.042 0 .08-.021.102-.054l2.833-4.277a.12.12 0 0 0 .005-.124.123.123 0 0 0-.108-.064h-1.685z"/>\n</svg>\n';}, function (e, t, n) {var r = n(153);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-reload{position:relative;-webkit-order:1;-moz-box-ordinal-group:2;order:1;display:block;width:40px;height:40px;cursor:pointer}.xgplayer-skin-default .xgplayer-reload .xgplayer-icon{margin-top:7px;width:26px}.xgplayer-skin-default .xgplayer-reload .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-reload .xgplayer-tips{margin-left:-22px}.xgplayer-skin-default .xgplayer-reload .xgplayer-tips .xgplayer-tip-reload{display:block}.xgplayer-skin-default .xgplayer-reload:hover{opacity:.85}.xgplayer-skin-default .xgplayer-reload:hover .xgplayer-tips{display:block}.xgplayer-lang-is-en .xgplayer-reload .xgplayer-tips{margin-left:-26px}.xgplayer-lang-is-jp .xgplayer-reload .xgplayer-tips{margin-left:-38px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(155);t.default = { name: "s_screenShot", method: function method() {var e = this;if (e.config.screenShot && !e.config.screenShot.hideButton) {var t = e.lang.SCREENSHOT,n = (0, r.createDom)("xg-screenshot", '<p class="name"><span>' + (e.config.screenShot.iconText || t) + "</span></p>", { tabindex: 11 }, "xgplayer-screenshot");e.once("ready", function () {e.controls.appendChild(n);}), ["click", "touchend"].forEach(function (t) {n.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("screenShotBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {var r = n(156);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-screenshot{-webkit-order:11;-moz-box-ordinal-group:12;order:11;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:10px}.xgplayer-skin-default .xgplayer-screenshot .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-screenshot .name span{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:0 10px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-lang-is-en .xgplayer-screenshot .name span,.xgplayer-lang-is-jp .xgplayer-screenshot .name span{width:75px;height:20px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(9),a = (r = i) && r.__esModule ? r : { default: r };n(78);t.default = { name: "s_nativeTextTrack", method: function method() {if (this.config.nativeTextTrack) {var e = this,t = e.root,n = a.default.util,r = n.createDom("xg-texttrack", "", { tabindex: 7 }, "xgplayer-texttrack"),i = e.config.nativeTextTrack;i && Array.isArray(i) && i.length > 0 && (n.addClass(e.root, "xgplayer-is-texttrack"), e.once("canplay", function () {var a = this,o = ["<ul>"];o.push("<li class='" + (this.textTrackShowDefault ? "" : "selected") + "'}'>" + e.lang.OFF + "</li>"), i.forEach(function (e) {o.push("<li class='" + (e.default && a.textTrackShowDefault ? "selected" : "") + "'>" + e.label + "</li>");});var l = e.lang.TEXTTRACK;o.push('</ul><p class="name">' + l + "</p>");var s = t.querySelector(".xgplayer-texttrack");if (s) {s.innerHTML = o.join("");var u = s.querySelector(".name");e.config.textTrackActive && "hover" !== e.config.textTrackActive || u.addEventListener("mouseenter", function (e) {e.preventDefault(), e.stopPropagation(), n.addClass(t, "xgplayer-texttrack-active"), s.focus();});} else {r.innerHTML = o.join("");var c = r.querySelector(".name");e.config.textTrackActive && "hover" !== e.config.textTrackActive || c.addEventListener("mouseenter", function (t) {t.preventDefault(), t.stopPropagation(), n.addClass(e.root, "xgplayer-texttrack-active"), r.focus();}), e.controls.appendChild(r);}})), ["touchend", "click"].forEach(function (t) {r.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation();var a = t.target || t.srcElement;if (a && "li" === a.tagName.toLocaleLowerCase()) {Array.prototype.forEach.call(a.parentNode.childNodes, function (e) {n.removeClass(e, "selected");}), n.addClass(a, "selected");var o = e.root.getElementsByTagName("Track");a.innerHTML === e.lang.OFF ? (o[0].track.mode = "hidden", o[0].src = "", n.removeClass(e.root, "xgplayer-texttrack-active")) : (o[0].style.display = "block", n.addClass(e.root, "xgplayer-texttrack-active"), o[0].track.mode = "showing", i.some(function (e) {if (e.label === a.innerHTML) return o[0].src = e.src, e.kind && (o[0].kind = e.kind), o[0].label = e.label, e.srclang && (o[0].srclang = e.srclang), !0;}), e.emit("textTrackChange", a.innerHTML));} else "click" !== e.config.textTrackActive || !a || "p" !== a.tagName.toLocaleLowerCase() && "em" !== a.tagName.toLocaleLowerCase() || (n.addClass(e.root, "xgplayer-texttrack-active"), r.focus());}, !1);}), e.on("play", function () {var r = t.querySelector(".xgplayer-texttrack ul"),a = t.getElementsByTagName("Track");e.hls && r && a && (a[0].src = "", Array.prototype.forEach.call(r.childNodes, function (t) {n.hasClass(t, "selected") && (t.innerHTML === e.lang.OFF ? (a[0].track.mode = "hidden", a[0].src = "") : (a[0].track.mode = "hidden", i.some(function (e) {if (e.label !== t.innerHTML) return a[0].src = e.src, e.kind && (a[0].kind = e.kind), a[0].label = e.label, e.srclang && (a[0].srclang = e.srclang), !0;}), i.some(function (e) {if (e.label === t.innerHTML) return setTimeout(function () {a[0].src = e.src, e.kind && (a[0].kind = e.kind), a[0].label = e.label, e.srclang && (a[0].srclang = e.srclang), a[0].track.mode = "showing";}), !0;})));}), n.removeClass(e.root, "xgplayer-texttrack-active"));}), r.addEventListener("mouseleave", function (t) {t.preventDefault(), t.stopPropagation(), n.removeClass(e.root, "xgplayer-texttrack-active");});}} }, e.exports = t.default;}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-texttrack{-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:60px;height:150px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin-top:-119px}.xgplayer-skin-default .xgplayer-texttrack ul{display:none;list-style:none;min-width:78px;background:rgba(0,0,0,.54);border-radius:1px;position:absolute;bottom:30px;text-align:center;white-space:nowrap;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:26;cursor:pointer}.xgplayer-skin-default .xgplayer-texttrack ul li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:hsla(0,0%,100%,.8);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:auto;padding:6px 13px}.xgplayer-skin-default .xgplayer-texttrack ul li.selected,.xgplayer-skin-default .xgplayer-texttrack ul li:hover{color:#fff;opacity:1}.xgplayer-skin-default .xgplayer-texttrack .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;cursor:pointer;color:hsla(0,0%,100%,.8);position:absolute;bottom:0;width:60px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}xg-text-track{transition:bottom .3s ease}.xgplayer-skin-default.xgplayer-is-texttrack .xgplayer-texttrack,.xgplayer-skin-default.xgplayer-texttrack-active .xgplayer-texttrack ul{display:block}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(160),o = (r = a) && r.__esModule ? r : { default: r };n(78);var l = { follow: !0, mode: "stroke", followBottom: 50, fitVideo: !0, offsetBottom: 2, baseSizeX: 49, baseSizeY: 28, minSize: 16, minMobileSize: 13, line: "double", fontColor: "#fff" };t.default = { name: "s_textTrack", method: function method() {var e = this,t = e.root;if (this.config.textTrack) {var n = this.config.textTrack,r = this.config.textTrackStyle || {};Object.keys(l).map(function (e) {void 0 === r[e] && (r[e] = l[e]);}), e.textTrackShowDefault = !1, n.map(function (t, n) {t.id || t.language || (t.id = n), !t.url && (t.url = t.src), !t.language && (t.language = t.srclang), void 0 === t.isDefault && (t.isDefault = t.default), !e.textTrackShowDefault && (e.textTrackShowDefault = t.isDefault || t.default);});var a = function (e) {var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2],r = { subTitles: e, defaultOpen: n };return Object.keys(t).map(function (e) {r[e] = t[e];}), new o.default(r);}(n, r, e.textTrackShowDefault);a.attachPlayer(e);var s = {},u = (0, i.createDom)("xg-texttrack", "", { tabindex: 7 }, "xgplayer-texttrack");n && Array.isArray(n) && n.length > 0 && ((0, i.addClass)(e.root, "xgplayer-is-texttrack"), e.once("canplay", function () {var r = ["<ul>"];r.push('<li data-type="off" class="' + (e.textTrackShowDefault ? "" : "selected") + '">' + e.lang.OFF + "</li>"), n.forEach(function (t) {r.push("<li data-id=" + t.id + " data-language=" + t.language + ' class="' + (t.isDefault && e.textTrackShowDefault ? "selected" : "") + '">' + t.label + "</li>");});var a = e.lang.TEXTTRACK;r.push('</ul><p class="name">' + a + "</p>");var o = t.querySelector(".xgplayer-texttrack");if (o) {o.innerHTML = r.join("");var l = o.querySelector(".name");e.config.textTrackActive && "hover" !== e.config.textTrackActive || l.addEventListener("mouseenter", function (e) {e.preventDefault(), e.stopPropagation(), (0, i.addClass)(t, "xgplayer-texttrack-active"), o.focus();});} else {u.innerHTML = r.join("");var s = u.querySelector(".name");e.config.textTrackActive && "hover" !== e.config.textTrackActive || s.addEventListener("mouseenter", function (t) {t.preventDefault(), t.stopPropagation(), (0, i.addClass)(e.root, "xgplayer-texttrack-active"), u.focus();}), e.controls.appendChild(u);}})), ["touchend", "click"].forEach(function (t) {u.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation();var n = t.target || t.srcElement;if (n && "li" === n.tagName.toLocaleLowerCase()) {var r = n.getAttribute("data-id"),o = n.getAttribute("data-type"),l = n.getAttribute("data-language");Array.prototype.forEach.call(n.parentNode.childNodes, function (e) {(0, i.removeClass)(e, "selected");}), (0, i.addClass)(n, "selected"), "off" === o ? (a.switchOff(), (0, i.removeClass)(e.root, "xgplayer-texttrack-active")) : (a.switch({ id: r, language: l }), (0, i.addClass)(e.root, "xgplayer-texttrack-active"), e.emit("textTrackChange", n.innerHTML));} else "click" !== e.config.textTrackActive || !n || "p" !== n.tagName.toLocaleLowerCase() && "em" !== n.tagName.toLocaleLowerCase() || ((0, i.addClass)(e.root, "xgplayer-texttrack-active"), u.focus());}, !1);});var c = !1,p = r.followBottom;e.controls && r.follow && (a.on("resize", g), e.on("focus", d), e.on("blur", f)), e.once("destroy", function () {a.off("resize", g), e.off("focus", d), e.off("blur", f), a.destroy(), a = null;}), u.addEventListener("mouseleave", function (t) {t.preventDefault(), t.stopPropagation(), (0, i.removeClass)(e.root, "xgplayer-texttrack-active");});}function d() {var e = s.marginBottom,t = s.vBottom;if (!c && e) {c = !0;var n = e + t;p > n && (n = p), a && (a.root.style.bottom = n + "px");}}function f() {c = !1;var e = s.vBottom + s.marginBottom;a && (a.root.style.bottom = e + "px");}function g(e) {s.vBottom = e.vBottom, s.marginBottom = e.marginBottom;}} }, e.exports = t.default;}, function (e, t, n) {e.exports = function () {"use strict";function e(e) {return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;}function t(e, t) {return e(t = { exports: {} }, t.exports), t.exports;}function n(e) {var t, n;this.promise = new e(function (e, r) {if (void 0 !== t || void 0 !== n) throw TypeError("Bad Promise constructor");t = e, n = r;}), this.resolve = h(t), this.reject = h(n);}function r(e) {var t = e.length;return 3 === t ? (60 * (60 * Number(e[0]) + Number(e[1])) * 1e3 + 1e3 * Number(e[2])) / 1e3 : 2 === t ? (60 * Number(e[0]) * 1e3 + 1e3 * Number(e[1])) / 1e3 : Number(e[0]);}function i(e) {return /^(\-|\+)?\d+(\.\d+)?$/.test(e);}function a(e, t) {return e >= 0 && e < t.length ? t[e] : "";}function o(e, t) {if (!e) return !1;if (e.classList) return Array.prototype.some.call(e.classList, function (e) {return e === t;});var n = e.className && "object" === Er(e.className) ? e.getAttribute("class") : e.className;return n && !!n.match(new RegExp("(\\s|^)" + t + "(\\s|$)"));}function l(e, t) {e && (e.classList ? t.replace(/(^\s+|\s+$)/g, "").split(/\s+/g).forEach(function (t) {t && e.classList.add(t);}) : o(e, t) || (e.className && "object" === Er(e.className) ? e.setAttribute("class", e.getAttribute("class") + " " + t) : e.className += " " + t));}function s(e, t, n) {var r = t.length;if (r < 1) return -1;if (t[n = n < 0 ? 0 : n >= r ? r - 1 : n].start <= e && e < t[n].end) return n;for (var i = t[n].end <= e ? n + 1 : 0; i < r; i++) {if (t[i].start <= e && e < t[i].end) return i;if (e > t[i].end && i + 1 < r && e < t[i + 1].start) return -1;if (e > t[i].end && i + 1 >= r) return -1;}return -1;}function u(e) {var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},n = { code: Sr[e].code, msg: Sr[e].msg };return Xt(t).map(function (e) {n[e] = t[e];}), n;}function c(e) {return new Wt(function (t, n) {e.list && t(e), new xn({ url: e.url, type: "text" }).then(function (r) {Pn.parse(r.res.response, function (r, i) {if (i) {var a = u(2, i);console.trace(a), n(a, { format: r.format });} else if (r.format) e.list = r.list, e.format = r.format, e.styles = r.styles, t(e);else {var o = u(3);console.trace(o), n(o);}});}).catch(function (e) {var t = u(1, { statusText: e.statusText, status: e.status, type: e.type, message: "http load error" });console.trace(t), n(t);});});}function p(e, t) {return !!(e.id && e.id === t.id || e.language && e.language === t.language);}var d = e(t(function (e, t) {t.__esModule = !0, t.default = function (e, t) {if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");};})),f = t(function (e) {var t = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();"number" == typeof __g && (__g = t);}),g = t(function (e) {var t = e.exports = { version: "2.6.12" };"number" == typeof __e && (__e = t);}),h = (g.version, function (e) {if ("function" != typeof e) throw TypeError(e + " is not a function!");return e;}),y = function y(e, t, n) {if (h(e), void 0 === t) return e;switch (n) {case 1:return function (n) {return e.call(t, n);};case 2:return function (n, r) {return e.call(t, n, r);};case 3:return function (n, r, i) {return e.call(t, n, r, i);};}return function () {return e.apply(t, arguments);};},x = function x(e) {return "object" == typeof e ? null !== e : "function" == typeof e;},v = function v(e) {if (!x(e)) throw TypeError(e + " is not an object!");return e;},m = function m(e) {try {return !!e();} catch (e) {return !0;}},b = !m(function () {return 7 != Object.defineProperty({}, "a", { get: function get() {return 7;} }).a;}),k = f.document,w = x(k) && x(k.createElement),_ = function _(e) {return w ? k.createElement(e) : {};},E = !b && !m(function () {return 7 != Object.defineProperty(_("div"), "a", { get: function get() {return 7;} }).a;}),T = function T(e, t) {if (!x(e)) return e;var n, r;if (t && "function" == typeof (n = e.toString) && !x(r = n.call(e))) return r;if ("function" == typeof (n = e.valueOf) && !x(r = n.call(e))) return r;if (!t && "function" == typeof (n = e.toString) && !x(r = n.call(e))) return r;throw TypeError("Can't convert object to primitive value");},C = Object.defineProperty,S = { f: b ? Object.defineProperty : function (e, t, n) {if (v(e), t = T(t, !0), v(n), E) try {return C(e, t, n);} catch (e) {}if ("get" in n || "set" in n) throw TypeError("Accessors not supported!");return "value" in n && (e[t] = n.value), e;} },P = function P(e, t) {return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t };},O = b ? function (e, t, n) {return S.f(e, t, P(1, n));} : function (e, t, n) {return e[t] = n, e;},L = {}.hasOwnProperty,M = function M(e, t) {return L.call(e, t);},R = function R(e, t, n) {var r,i,a,o = e & R.F,l = e & R.G,s = e & R.S,u = e & R.P,c = e & R.B,p = e & R.W,d = l ? g : g[t] || (g[t] = {}),h = d.prototype,x = l ? f : s ? f[t] : (f[t] || {}).prototype;for (r in l && (n = t), n) {(i = !o && x && void 0 !== x[r]) && M(d, r) || (a = i ? x[r] : n[r], d[r] = l && "function" != typeof x[r] ? n[r] : c && i ? y(a, f) : p && x[r] == a ? function (e) {var t = function t(_t2, n, r) {if (this instanceof e) {switch (arguments.length) {case 0:return new e();case 1:return new e(_t2);case 2:return new e(_t2, n);}return new e(_t2, n, r);}return e.apply(this, arguments);};return t.prototype = e.prototype, t;}(a) : u && "function" == typeof a ? y(Function.call, a) : a, u && ((d.virtual || (d.virtual = {}))[r] = a, e & R.R && h && !h[r] && O(h, r, a)));}};R.F = 1, R.G = 2, R.S = 4, R.P = 8, R.B = 16, R.W = 32, R.U = 64, R.R = 128;var D = R;D(D.S + D.F * !b, "Object", { defineProperty: S.f });var A = g.Object,j = function j(e, t, n) {return A.defineProperty(e, t, n);},I = t(function (e) {e.exports = { default: j, __esModule: !0 };});e(I);var z = e(t(function (e, t) {t.__esModule = !0;var n = function (e) {return e && e.__esModule ? e : { default: e };}(I);t.default = function () {function e(e, t) {for (var r = 0; r < t.length; r++) {var i = t[r];i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), (0, n.default)(e, i.key, i);}}return function (t, n, r) {return n && e(t.prototype, n), r && e(t, r), t;};}();})),B = Math.ceil,N = Math.floor,F = function F(e) {return isNaN(e = +e) ? 0 : (e > 0 ? N : B)(e);},q = function q(e) {if (null == e) throw TypeError("Can't call method on  " + e);return e;},H = O,U = {},V = {}.toString,W = function W(e) {return V.call(e).slice(8, -1);},Y = Object("z").propertyIsEnumerable(0) ? Object : function (e) {return "String" == W(e) ? e.split("") : Object(e);},X = function X(e) {return Y(q(e));},K = Math.min,G = function G(e) {return e > 0 ? K(F(e), 9007199254740991) : 0;},$ = Math.max,J = Math.min,Z = t(function (e) {var t = f["__core-js_shared__"] || (f["__core-js_shared__"] = {});(e.exports = function (e, n) {return t[e] || (t[e] = void 0 !== n ? n : {});})("versions", []).push({ version: g.version, mode: "pure", copyright: "© 2020 Denis Pushkarev (zloirock.ru)" });}),Q = 0,ee = Math.random(),te = function te(e) {return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++Q + ee).toString(36));},ne = Z("keys"),re = function re(e) {return ne[e] || (ne[e] = te(e));},ie = function ie(e, t, n) {for (var r = X(e), i = G(r.length), a = function (e, t) {return (e = F(e)) < 0 ? $(e + t, 0) : J(e, t);}(n, i); i > a; a++) {if (a in r && r[a] === t) return a || 0;}return -1;},ae = re("IE_PROTO"),oe = function oe(e, t) {var n,r = X(e),i = 0,a = [];for (n in r) {n != ae && M(r, n) && a.push(n);}for (; t.length > i;) {M(r, n = t[i++]) && (~ie(a, n) || a.push(n));}return a;},le = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),se = Object.keys || function (e) {return oe(e, le);},ue = b ? Object.defineProperties : function (e, t) {v(e);for (var n, r = se(t), i = r.length, a = 0; i > a;) {S.f(e, n = r[a++], t[n]);}return e;},ce = f.document,pe = ce && ce.documentElement,de = re("IE_PROTO"),fe = function fe() {},_ge = function ge() {var e,t = _("iframe"),n = le.length;for (t.style.display = "none", pe.appendChild(t), t.src = "javascript:", (e = t.contentWindow.document).open(), e.write("<script>document.F=Object<\/script>"), e.close(), _ge = e.F; n--;) {delete _ge.prototype[le[n]];}return _ge();},he = Object.create || function (e, t) {var n;return null !== e ? (fe.prototype = v(e), n = new fe(), fe.prototype = null, n[de] = e) : n = _ge(), void 0 === t ? n : ue(n, t);},ye = t(function (e) {var t = Z("wks"),n = f.Symbol,r = "function" == typeof n;(e.exports = function (e) {return t[e] || (t[e] = r && n[e] || (r ? n : te)("Symbol." + e));}).store = t;}),xe = S.f,ve = ye("toStringTag"),me = function me(e, t, n) {e && !M(e = n ? e : e.prototype, ve) && xe(e, ve, { configurable: !0, value: t });},be = {};O(be, ye("iterator"), function () {return this;});var ke = function ke(e) {return Object(q(e));},we = re("IE_PROTO"),_e = Object.prototype,Ee = Object.getPrototypeOf || function (e) {return e = ke(e), M(e, we) ? e[we] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? _e : null;},Te = ye("iterator"),Ce = !([].keys && "next" in [].keys()),Se = function Se() {return this;},Pe = function Pe(e, t, n, r, i, a, o) {!function (e, t, n) {e.prototype = he(be, { next: P(1, n) }), me(e, t + " Iterator");}(n, t, r);var l,s,u,c = function c(e) {if (!Ce && e in g) return g[e];switch (e) {case "keys":case "values":return function () {return new n(this, e);};}return function () {return new n(this, e);};},p = t + " Iterator",d = "values" == i,f = !1,g = e.prototype,h = g[Te] || g["@@iterator"] || i && g[i],y = h || c(i),x = i ? d ? c("entries") : y : void 0,v = "Array" == t && g.entries || h;if (v && (u = Ee(v.call(new e()))) !== Object.prototype && u.next && me(u, p, !0), d && h && "values" !== h.name && (f = !0, y = function y() {return h.call(this);}), o && (Ce || f || !g[Te]) && O(g, Te, y), U[t] = y, U[p] = Se, i) if (l = { values: d ? y : c("values"), keys: a ? y : c("keys"), entries: x }, o) for (s in l) {s in g || H(g, s, l[s]);} else D(D.P + D.F * (Ce || f), t, l);return l;},Oe = function Oe(e, t) {var n,r,i = String(q(e)),a = F(t),o = i.length;return a < 0 || a >= o ? "" : (n = i.charCodeAt(a)) < 55296 || n > 56319 || a + 1 === o || (r = i.charCodeAt(a + 1)) < 56320 || r > 57343 ? i.charAt(a) : i.slice(a, a + 2);};Pe(String, "String", function (e) {this._t = String(e), this._i = 0;}, function () {var e,t = this._t,n = this._i;return n >= t.length ? { value: void 0, done: !0 } : (e = Oe(t, n), this._i += e.length, { value: e, done: !1 });});var Le = function Le(e, t) {return { value: t, done: !!e };};Pe(Array, "Array", function (e, t) {this._t = X(e), this._i = 0, this._k = t;}, function () {var e = this._t,t = this._k,n = this._i++;return !e || n >= e.length ? (this._t = void 0, Le(1)) : Le(0, "keys" == t ? n : "values" == t ? e[n] : [n, e[n]]);}, "values"), U.Arguments = U.Array;for (var Me = ye("toStringTag"), Re = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), De = 0; De < Re.length; De++) {var Ae = Re[De],je = f[Ae],Ie = je && je.prototype;Ie && !Ie[Me] && O(Ie, Me, Ae), U[Ae] = U.Array;}var ze,Be,Ne,Fe = ye("toStringTag"),qe = "Arguments" == W(function () {return arguments;}()),He = function He(e) {var t, n, r;return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (n = function (e, t) {try {return e[t];} catch (e) {}}(t = Object(e), Fe)) ? n : qe ? W(t) : "Object" == (r = W(t)) && "function" == typeof t.callee ? "Arguments" : r;},Ue = function Ue(e, t, n, r) {try {return r ? t(v(n)[0], n[1]) : t(n);} catch (t) {var i = e.return;throw void 0 !== i && v(i.call(e)), t;}},Ve = ye("iterator"),We = Array.prototype,Ye = ye("iterator"),Xe = g.getIteratorMethod = function (e) {if (null != e) return e[Ye] || e["@@iterator"] || U[He(e)];},Ke = t(function (e) {var t = {},n = {},r = e.exports = function (e, r, i, a, o) {var l,s,u,c,p = o ? function () {return e;} : Xe(e),d = y(i, a, r ? 2 : 1),f = 0;if ("function" != typeof p) throw TypeError(e + " is not iterable!");if (function (e) {return void 0 !== e && (U.Array === e || We[Ve] === e);}(p)) {for (l = G(e.length); l > f; f++) {if ((c = r ? d(v(s = e[f])[0], s[1]) : d(e[f])) === t || c === n) return c;}} else for (u = p.call(e); !(s = u.next()).done;) {if ((c = Ue(u, d, s.value, r)) === t || c === n) return c;}};r.BREAK = t, r.RETURN = n;}),Ge = ye("species"),$e = function $e(e, t) {var n,r = v(e).constructor;return void 0 === r || null == (n = v(r)[Ge]) ? t : h(n);},Je = function Je(e, t, n) {var r = void 0 === n;switch (t.length) {case 0:return r ? e() : e.call(n);case 1:return r ? e(t[0]) : e.call(n, t[0]);case 2:return r ? e(t[0], t[1]) : e.call(n, t[0], t[1]);case 3:return r ? e(t[0], t[1], t[2]) : e.call(n, t[0], t[1], t[2]);case 4:return r ? e(t[0], t[1], t[2], t[3]) : e.call(n, t[0], t[1], t[2], t[3]);}return e.apply(n, t);},Ze = f.process,Qe = f.setImmediate,et = f.clearImmediate,tt = f.MessageChannel,nt = f.Dispatch,rt = 0,it = {},at = function at() {var e = +this;if (it.hasOwnProperty(e)) {var t = it[e];delete it[e], t();}},ot = function ot(e) {at.call(e.data);};Qe && et || (Qe = function Qe(e) {for (var t = [], n = 1; arguments.length > n;) {t.push(arguments[n++]);}return it[++rt] = function () {Je("function" == typeof e ? e : Function(e), t);}, ze(rt), rt;}, et = function et(e) {delete it[e];}, "process" == W(Ze) ? ze = function ze(e) {Ze.nextTick(y(at, e, 1));} : nt && nt.now ? ze = function ze(e) {nt.now(y(at, e, 1));} : tt ? (Ne = (Be = new tt()).port2, Be.port1.onmessage = ot, ze = y(Ne.postMessage, Ne, 1)) : f.addEventListener && "function" == typeof postMessage && !f.importScripts ? (ze = function ze(e) {f.postMessage(e + "", "*");}, f.addEventListener("message", ot, !1)) : ze = "onreadystatechange" in _("script") ? function (e) {pe.appendChild(_("script")).onreadystatechange = function () {pe.removeChild(this), at.call(e);};} : function (e) {setTimeout(y(at, e, 1), 0);});var lt = { set: Qe, clear: et },st = lt.set,ut = f.MutationObserver || f.WebKitMutationObserver,ct = f.process,pt = f.Promise,dt = "process" == W(ct),ft = { f: function f(e) {return new n(e);} },gt = function gt(e) {try {return { e: !1, v: e() };} catch (e) {return { e: !0, v: e };}},ht = f.navigator,yt = ht && ht.userAgent || "",xt = function xt(e, t) {if (v(e), x(t) && t.constructor === e) return t;var n = ft.f(e);return (0, n.resolve)(t), n.promise;},vt = ye("species"),mt = ye("iterator"),bt = !1;try {var kt = [7][mt]();kt.return = function () {bt = !0;}, Array.from(kt, function () {throw 2;});} catch (e) {}var wt,_t,Et,Tt,Ct = lt.set,St = function () {var e,t,n,r = function r() {var r, i;for (dt && (r = ct.domain) && r.exit(); e;) {i = e.fn, e = e.next;try {i();} catch (r) {throw e ? n() : t = void 0, r;}}t = void 0, r && r.enter();};if (dt) n = function n() {ct.nextTick(r);};else if (!ut || f.navigator && f.navigator.standalone) {if (pt && pt.resolve) {var i = pt.resolve(void 0);n = function n() {i.then(r);};} else n = function n() {st.call(f, r);};} else {var a = !0,o = document.createTextNode("");new ut(r).observe(o, { characterData: !0 }), n = function n() {o.data = a = !a;};}return function (r) {var i = { fn: r, next: void 0 };t && (t.next = i), e || (e = i, n()), t = i;};}(),Pt = f.TypeError,Ot = f.process,Lt = Ot && Ot.versions,Mt = Lt && Lt.v8 || "",_Rt = f.Promise,Dt = "process" == He(Ot),At = function At() {},jt = _t = ft.f,It = !!function () {try {var e = _Rt.resolve(1),t = (e.constructor = {})[ye("species")] = function (e) {e(At, At);};return (Dt || "function" == typeof PromiseRejectionEvent) && e.then(At) instanceof t && 0 !== Mt.indexOf("6.6") && -1 === yt.indexOf("Chrome/66");} catch (e) {}}(),zt = function zt(e) {var t;return !(!x(e) || "function" != typeof (t = e.then)) && t;},Bt = function Bt(e, t) {if (!e._n) {e._n = !0;var n = e._c;St(function () {for (var r = e._v, i = 1 == e._s, a = 0; n.length > a;) {!function (t) {var n,a,o,l = i ? t.ok : t.fail,s = t.resolve,u = t.reject,c = t.domain;try {l ? (i || (2 == e._h && qt(e), e._h = 1), !0 === l ? n = r : (c && c.enter(), n = l(r), c && (c.exit(), o = !0)), n === t.promise ? u(Pt("Promise-chain cycle")) : (a = zt(n)) ? a.call(n, s, u) : s(n)) : u(r);} catch (e) {c && !o && c.exit(), u(e);}}(n[a++]);}e._c = [], e._n = !1, t && !e._h && Nt(e);});}},Nt = function Nt(e) {Ct.call(f, function () {var t,n,r,i = e._v,a = Ft(e);if (a && (t = gt(function () {Dt ? Ot.emit("unhandledRejection", i, e) : (n = f.onunhandledrejection) ? n({ promise: e, reason: i }) : (r = f.console) && r.error && r.error("Unhandled promise rejection", i);}), e._h = Dt || Ft(e) ? 2 : 1), e._a = void 0, a && t.e) throw t.v;});},Ft = function Ft(e) {return 1 !== e._h && 0 === (e._a || e._c).length;},qt = function qt(e) {Ct.call(f, function () {var t;Dt ? Ot.emit("rejectionHandled", e) : (t = f.onrejectionhandled) && t({ promise: e, reason: e._v });});},Ht = function Ht(e) {var t = this;t._d || (t._d = !0, (t = t._w || t)._v = e, t._s = 2, t._a || (t._a = t._c.slice()), Bt(t, !0));},Ut = function Ut(e) {var t,n = this;if (!n._d) {n._d = !0, n = n._w || n;try {if (n === e) throw Pt("Promise can't be resolved itself");(t = zt(e)) ? St(function () {var r = { _w: n, _d: !1 };try {t.call(e, y(Ut, r, 1), y(Ht, r, 1));} catch (e) {Ht.call(r, e);}}) : (n._v = e, n._s = 1, Bt(n, !1));} catch (e) {Ht.call({ _w: n, _d: !1 }, e);}}};It || (_Rt = function Rt(e) {(function (e, t, n, r) {if (!(e instanceof t) || void 0 !== r && r in e) throw TypeError(n + ": incorrect invocation!");})(this, _Rt, "Promise", "_h"), h(e), wt.call(this);try {e(y(Ut, this, 1), y(Ht, this, 1));} catch (e) {Ht.call(this, e);}}, (wt = function wt(e) {this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1;}).prototype = function (e, t, n) {for (var r in t) {O(e, r, t[r]);}return e;}(_Rt.prototype, { then: function then(e, t) {var n = jt($e(this, _Rt));return n.ok = "function" != typeof e || e, n.fail = "function" == typeof t && t, n.domain = Dt ? Ot.domain : void 0, this._c.push(n), this._a && this._a.push(n), this._s && Bt(this, !1), n.promise;}, catch: function _catch(e) {return this.then(void 0, e);} }), Et = function Et() {var e = new wt();this.promise = e, this.resolve = y(Ut, e, 1), this.reject = y(Ht, e, 1);}, ft.f = jt = function jt(e) {return e === _Rt || e === Tt ? new Et(e) : _t(e);}), D(D.G + D.W + D.F * !It, { Promise: _Rt }), me(_Rt, "Promise"), function (e) {var t = "function" == typeof g[e] ? g[e] : f[e];b && t && !t[vt] && S.f(t, vt, { configurable: !0, get: function get() {return this;} });}("Promise"), Tt = g.Promise, D(D.S + D.F * !It, "Promise", { reject: function reject(e) {var t = jt(this);return (0, t.reject)(e), t.promise;} }), D(D.S + !0 * D.F, "Promise", { resolve: function resolve(e) {return xt(this === Tt ? _Rt : this, e);} }), D(D.S + D.F * !(It && function (e, t) {if (!bt) return !1;var n = !1;try {var r = [7],i = r[mt]();i.next = function () {return { done: n = !0 };}, r[mt] = function () {return i;}, function (e) {_Rt.all(e).catch(At);}(r);} catch (e) {}return n;}()), "Promise", { all: function all(e) {var t = this,n = jt(t),r = n.resolve,i = n.reject,a = gt(function () {var n = [],a = 0,o = 1;Ke(e, !1, function (e) {var l = a++,s = !1;n.push(void 0), o++, t.resolve(e).then(function (e) {s || (s = !0, n[l] = e, --o || r(n));}, i);}), --o || r(n);});return a.e && i(a.v), n.promise;}, race: function race(e) {var t = this,n = jt(t),r = n.reject,i = gt(function () {Ke(e, !1, function (e) {t.resolve(e).then(n.resolve, r);});});return i.e && r(i.v), n.promise;} }), D(D.P + D.R, "Promise", { finally: function _finally(e) {var t = $e(this, g.Promise || f.Promise),n = "function" == typeof e;return this.then(n ? function (n) {return xt(t, e()).then(function () {return n;});} : e, n ? function (n) {return xt(t, e()).then(function () {throw n;});} : e);} }), D(D.S, "Promise", { try: function _try(e) {var t = ft.f(this),n = gt(e);return (n.e ? t.reject : t.resolve)(n.v), t.promise;} });var Vt = g.Promise,Wt = e(t(function (e) {e.exports = { default: Vt, __esModule: !0 };}));!function (e, t) {var n = (g.Object || {})[e] || Object[e],r = { keys: function keys(e) {return se(ke(e));} };D(D.S + D.F * m(function () {n(1);}), "Object", r);}("keys");var Yt = g.Object.keys,Xt = e(t(function (e) {e.exports = { default: Yt, __esModule: !0 };})),Kt = function Kt(e) {return null != e;},Gt = { object: !0, function: !0, undefined: !0 },$t = function $t(e) {if (!function (e) {return !!Kt(e) && hasOwnProperty.call(Gt, typeof e);}(e)) return !1;try {return !!e.constructor && e.constructor.prototype === e;} catch (e) {return !1;}},Jt = /^\s*class[\s{/}]/,Zt = Function.prototype.toString,Qt = function Qt(e) {return !!function (e) {if ("function" != typeof e) return !1;if (!hasOwnProperty.call(e, "length")) return !1;try {if ("number" != typeof e.length) return !1;if ("function" != typeof e.call) return !1;if ("function" != typeof e.apply) return !1;} catch (e) {return !1;}return !$t(e);}(e) && !Jt.test(Zt.call(e));},en = function en(e) {return null != e;},tn = Object.keys,nn = function () {try {return Object.keys("primitive"), !0;} catch (e) {return !1;}}() ? Object.keys : function (e) {return tn(en(e) ? Object(e) : e);},rn = function rn(e) {if (!en(e)) throw new TypeError("Cannot use null or undefined");return e;},an = Math.max,on = function () {var e,t = Object.assign;return "function" == typeof t && (t(e = { foo: "raz" }, { bar: "dwa" }, { trzy: "trzy" }), e.foo + e.bar + e.trzy === "razdwatrzy");}() ? Object.assign : function (e, t) {var n,r,i,a = an(arguments.length, 2);for (e = Object(rn(e)), i = function i(r) {try {e[r] = t[r];} catch (e) {n || (n = e);}}, r = 1; r < a; ++r) {nn(t = arguments[r]).forEach(i);}if (void 0 !== n) throw n;return e;},ln = Array.prototype.forEach,sn = Object.create,un = function un(e, t) {var n;for (n in e) {t[n] = e[n];}},cn = function cn(e) {var t = sn(null);return ln.call(arguments, function (e) {en(e) && un(Object(e), t);}), t;},pn = "razdwatrzy",dn = String.prototype.indexOf,fn = "function" == typeof pn.contains && !0 === pn.contains("dwa") && !1 === pn.contains("foo") ? String.prototype.contains : function (e) {return dn.call(this, e, arguments[1]) > -1;},gn = t(function (e) {(e.exports = function (e, t) {var n, r, i, a, o;return arguments.length < 2 || "string" != typeof e ? (a = t, t = e, e = null) : a = arguments[2], Kt(e) ? (n = fn.call(e, "c"), r = fn.call(e, "e"), i = fn.call(e, "w")) : (n = i = !0, r = !1), o = { value: t, configurable: n, enumerable: r, writable: i }, a ? on(cn(a), o) : o;}).gs = function (e, t, n) {var r, i, a, o;return "string" != typeof e ? (a = n, n = t, t = e, e = null) : a = arguments[3], Kt(t) ? Qt(t) ? Kt(n) ? Qt(n) || (a = n, n = void 0) : n = void 0 : (a = t, t = n = void 0) : t = void 0, Kt(e) ? (r = fn.call(e, "c"), i = fn.call(e, "e")) : (r = !0, i = !1), o = { get: t, set: n, configurable: r, enumerable: i }, a ? on(cn(a), o) : o;};}),hn = function hn(e) {if ("function" != typeof e) throw new TypeError(e + " is not a function");return e;},yn = t(function (e, t) {var n,_r3,i,a,o,l,s,u = Function.prototype.apply,c = Function.prototype.call,p = Object.create,d = Object.defineProperty,f = Object.defineProperties,g = Object.prototype.hasOwnProperty,h = { configurable: !0, enumerable: !1, writable: !0 };o = { on: n = function n(e, t) {var n;return hn(t), g.call(this, "__ee__") ? n = this.__ee__ : (n = h.value = p(null), d(this, "__ee__", h), h.value = null), n[e] ? "object" == typeof n[e] ? n[e].push(t) : n[e] = [n[e], t] : n[e] = t, this;}, once: _r3 = function r(e, t) {var _r2, a;return hn(t), a = this, n.call(this, e, _r2 = function r() {i.call(a, e, _r2), u.call(t, this, arguments);}), _r2.__eeOnceListener__ = t, this;}, off: i = function i(e, t) {var n, r, i, a;if (hn(t), !g.call(this, "__ee__")) return this;if (!(n = this.__ee__)[e]) return this;if ("object" == typeof (r = n[e])) for (a = 0; i = r[a]; ++a) {i !== t && i.__eeOnceListener__ !== t || (2 === r.length ? n[e] = r[a ? 0 : 1] : r.splice(a, 1));} else r !== t && r.__eeOnceListener__ !== t || delete n[e];return this;}, emit: a = function a(e) {var t, n, r, i, a;if (g.call(this, "__ee__") && (i = this.__ee__[e])) if ("object" == typeof i) {for (n = arguments.length, a = new Array(n - 1), t = 1; t < n; ++t) {a[t - 1] = arguments[t];}for (i = i.slice(), t = 0; r = i[t]; ++t) {u.call(r, this, a);}} else switch (arguments.length) {case 1:c.call(i, this);break;case 2:c.call(i, this, arguments[1]);break;case 3:c.call(i, this, arguments[1], arguments[2]);break;default:for (n = arguments.length, a = new Array(n - 1), t = 1; t < n; ++t) {a[t - 1] = arguments[t];}u.call(i, this, a);}} }, l = { on: gn(n), once: gn(_r3), off: gn(i), emit: gn(a) }, s = f({}, l), e.exports = t = function t(e) {return null == e ? p(s) : f(Object(e), l);}, t.methods = o;}),xn = (yn.methods, function e() {var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},n = t.url,r = t.method,i = void 0 === r ? "GET" : r,a = t.type,o = void 0 === a ? "arraybuffer" : a,l = t.timeout,s = void 0 === l ? 1e4 : l,u = t.data,c = void 0 === u ? {} : u,p = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};return d(this, e), new Wt(function (e, t) {var r = new window.XMLHttpRequest(),a = i.toUpperCase(),l = [];for (var u in o && (r.responseType = o), s && (r.timeout = s), c) {l.push("k=" + c[u]);}if (r.onload = function () {200 === r.status || 206 === r.status ? e({ context: p, res: r }) : t({ context: p, res: r, type: "error" });}, r.onerror = function (e) {t({ context: p, res: r, type: "error" });}, r.ontimeout = function (e) {t({ context: p, res: r, type: "error" });}, r.onabort = function () {t({ context: p, res: r, type: "error" });}, "GET" === a) r.open(a, "" + n), r.send();else {if ("post" !== a) throw new Error("xhr " + a + " is not supported");r.open(a, n), r.setRequestHeader("Content-type", "application/x-www-form-urlencoded"), r.send(l.join("&"));}});}),vn = /^WEBVTT/,mn = /^STYLE+$/,bn = /^\:\:cue/,kn = /^}+$/,wn = /^\[Script Info\].*/,_n = [/[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}/, /[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}\.[0-9]{3}/, /[0-9]{2}\.[0-9]{3}-->[0-9]{2}\.[0-9]{3}/],En = /^(<?.+?>(([\s\S])*?)<\/?.+?>)$/,Tn = /^Format:\s/,Cn = /^Style:\s/,Sn = /^Dialogue:\s/,Pn = function () {function e() {d(this, e);}return z(e, null, [{ key: "parse", value: function value(t, n) {var r = e.checkFormat(t);r || n({ format: r });try {var i = [];"ass" === r ? i = e.parseASS(t) : "vtt" === r && (i = e.parseVTT(t)), n({ format: r, list: i.list, styles: i.styles });} catch (e) {__f__("error", e, " at node_modules/xgplayer/dist/index.js:22"), n({ format: r }, e);}} }, { key: "parseASSItem", value: function value() {var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],n = e.split(","),i = {},a = "";try {var o = n.length - t.length;return a = a = (a = o > 0 ? n.splice(t.length - 1, o + 1).join(",") + "" : n[n.length - 1] + "").replace(/\\n+/g, ""), n[t.length - 1] = a, t.map(function (e, t) {"end" === e || "start" === e ? i[e] = r(n[t].split(":")) : "text" === e ? i[e] = [n[t]] : "layer" === e ? (i[e] = [n[t]], i.textTag = [n[t]]) : i[e] = "style" === e ? [n[t]] : Number(n[t]) ? Number(n[t]) : n[t];}), i;} catch (e) {return __f__("error", e, " at node_modules/xgplayer/dist/index.js:22"), {};}} }, { key: "parseASS", value: function value(t) {for (var n = t.split("\n"), r = [], i = 0, a = 0, o = [], l = [], s = null; i < n.length;) {if (Tn.test(n[i])) l = (l = n[i].replace(Tn, "").replace(/\s+/g, "").split(",")).map(function (e) {return e.toLocaleLowerCase();});else if (Cn.test(n[i])) o.push(n[i].replace(Cn, "").replace(/\s+/g, ""));else if (Sn.test(n[i])) {var u = e.parseASSItem(n[i].replace(Sn, ""), l);if (s && u.start === s.start && u.end === s.end) try {var c = s,p = c.text,d = c.textTag,f = c.style;p.push(u.text[0]), d.push(u.textTag[0]), f.push(u.style[0]);} catch (e) {__f__("error", e, " at node_modules/xgplayer/dist/index.js:22");} else {s = u;var g = null;a % 50 == 0 ? ((g = { start: s.start, end: s.end, list: [] }).list.push(s), r.push(g)) : ((g = r[r.length - 1]).end = s.end, g.list.push(s)), a++;}}i++;}return { list: r, style: {} };} }, { key: "parseVTTStyle", value: function value(e, t) {__f__("log", "parseVTTStyle", e, " at node_modules/xgplayer/dist/index.js:22");var n = e.split(":");if (n.length > 1) {var r = n[0].trim().split("-"),i = "";r.length > 1 ? r.map(function (e, t) {i += 0 === t ? e : e.charAt(0).toUpperCase() + e.slice(1);}) : i = r[0], t[i] = n[1].trim().replace(/;$/, "");}return t;} }, { key: "parseVTT", value: function value(e) {for (var t = (e = e.replace(vn, "")).split("\n"), n = [], r = 0, o = 0, l = null, s = null, u = !1, c = !1, p = null, d = null, f = []; r < t.length;) {var g = a(r, t).trim();if (!g || u && i(g)) u = !g;else if (bn.test(g) && mn.test(a(r - 1, t).trim())) {c = !0;var h = /\((.+?)\)/g.exec(g);d = h ? h[1] : "", p = "";} else if (c) kn.test(g) ? (f.push({ key: d, style: p }), p = null, d = null, c = !1) : p += g;else if (g) {u = !1;var y = this.checkIsTime(t[r]);if (y) {var x = this.parseVttTime(y);if (!l || x.start !== l.start || x.end !== l.end) {(l = x).text = [], l.textTag = [];var v = null;o % 50 == 0 ? ((v = { start: l.start, end: l.end, list: [] }).list.push(l), n.push(v)) : ((v = n[n.length - 1]).end = l.end, v.list.push(l)), o++;}} else if (l) {var m = l,b = m.text,k = m.textTag,w = this.parseVttText(t[r]);0 === k.length || s || w.tag && w.tag !== k[k.length - 1] ? (b.push(w.text), k.push(w.tag)) : b[k.length - 1] += w.text;}s = y, u = !1;}r++;}return { list: n, styles: f };} }, { key: "checkIsTime", value: function value(e) {e = e.replace(/\s+/g, "");for (var t = 0, n = null; t < _n.length && !(n = _n[t].exec(e));) {t++;}return n ? n[0] : null;} }, { key: "parseVttText", value: function value(e) {var t = En.exec(e),n = "",r = "default";t ? (n = t[t.length - 2], r = /^(<?.+?>)/gi.exec(e)[0].replace(/\<|\>|\&/g, "")) : n = e;for (var i = /<(\w+).(\w+)>/g, a = i.exec(n); a && a.length > 2;) {n = n.replace(a[0], "<" + a[1] + ' class="' + a[2] + '">'), a = i.exec(n);}return { tag: r, text: n.replace(/\\n+/g, "") };} }, { key: "parseVttTime", value: function value(e) {var t = e.split("--\x3e"),n = void 0,i = 0;if (t.length = 2) {var a = t[0].split(":"),o = t[1].split(":");n = r(a), i = r(o);}return { start: n, end: i, time: e };} }, { key: "isVTT", value: function value(e) {return vn.test(e);} }, { key: "isASS", value: function value(e) {return wn.test(e);} }, { key: "checkFormat", value: function value(e) {return e ? vn.test(e) ? "vtt" : wn.test(e) ? "ass" : null : null;} }]), e;}(),On = { f: ye },Ln = On.f("iterator"),Mn = t(function (e) {e.exports = { default: Ln, __esModule: !0 };});e(Mn);var Rn = t(function (e) {var t = te("meta"),n = S.f,r = 0,i = Object.isExtensible || function () {return !0;},a = !m(function () {return i(Object.preventExtensions({}));}),o = function o(e) {n(e, t, { value: { i: "O" + ++r, w: {} } });},l = e.exports = { KEY: t, NEED: !1, fastKey: function fastKey(e, n) {if (!x(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;if (!M(e, t)) {if (!i(e)) return "F";if (!n) return "E";o(e);}return e[t].i;}, getWeak: function getWeak(e, n) {if (!M(e, t)) {if (!i(e)) return !0;if (!n) return !1;o(e);}return e[t].w;}, onFreeze: function onFreeze(e) {return a && l.NEED && i(e) && !M(e, t) && o(e), e;} };}),Dn = (Rn.KEY, Rn.NEED, Rn.fastKey, Rn.getWeak, Rn.onFreeze, S.f),An = function An(e) {var t = g.Symbol || (g.Symbol = {});"_" == e.charAt(0) || e in t || Dn(t, e, { value: On.f(e) });},jn = { f: Object.getOwnPropertySymbols },In = { f: {}.propertyIsEnumerable },zn = Array.isArray || function (e) {return "Array" == W(e);},Bn = le.concat("length", "prototype"),Nn = { f: Object.getOwnPropertyNames || function (e) {return oe(e, Bn);} },Fn = Nn.f,qn = {}.toString,Hn = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],Un = { f: function f(e) {return Hn && "[object Window]" == qn.call(e) ? function (e) {try {return Fn(e);} catch (e) {return Hn.slice();}}(e) : Fn(X(e));} },Vn = Object.getOwnPropertyDescriptor,Wn = { f: b ? Vn : function (e, t) {if (e = X(e), t = T(t, !0), E) try {return Vn(e, t);} catch (e) {}if (M(e, t)) return P(!In.f.call(e, t), e[t]);} },Yn = Rn.KEY,Xn = Wn.f,Kn = S.f,Gn = Un.f,_$n = f.Symbol,Jn = f.JSON,Zn = Jn && Jn.stringify,Qn = ye("_hidden"),er = ye("toPrimitive"),tr = {}.propertyIsEnumerable,nr = Z("symbol-registry"),rr = Z("symbols"),ir = Z("op-symbols"),ar = Object.prototype,or = "function" == typeof _$n && !!jn.f,lr = f.QObject,sr = !lr || !lr.prototype || !lr.prototype.findChild,ur = b && m(function () {return 7 != he(Kn({}, "a", { get: function get() {return Kn(this, "a", { value: 7 }).a;} })).a;}) ? function (e, t, n) {var r = Xn(ar, t);r && delete ar[t], Kn(e, t, n), r && e !== ar && Kn(ar, t, r);} : Kn,cr = function cr(e) {var t = rr[e] = he(_$n.prototype);return t._k = e, t;},pr = or && "symbol" == typeof _$n.iterator ? function (e) {return "symbol" == typeof e;} : function (e) {return e instanceof _$n;},dr = function dr(e, t, n) {return e === ar && dr(ir, t, n), v(e), t = T(t, !0), v(n), M(rr, t) ? (n.enumerable ? (M(e, Qn) && e[Qn][t] && (e[Qn][t] = !1), n = he(n, { enumerable: P(0, !1) })) : (M(e, Qn) || Kn(e, Qn, P(1, {})), e[Qn][t] = !0), ur(e, t, n)) : Kn(e, t, n);},fr = function fr(e, t) {v(e);for (var n, r = function (e) {var t = se(e),n = jn.f;if (n) for (var r, i = n(e), a = In.f, o = 0; i.length > o;) {a.call(e, r = i[o++]) && t.push(r);}return t;}(t = X(t)), i = 0, a = r.length; a > i;) {dr(e, n = r[i++], t[n]);}return e;},gr = function gr(e, t) {if (e = X(e), t = T(t, !0), e !== ar || !M(rr, t) || M(ir, t)) {var n = Xn(e, t);return !n || !M(rr, t) || M(e, Qn) && e[Qn][t] || (n.enumerable = !0), n;}},hr = function hr(e) {for (var t, n = Gn(X(e)), r = [], i = 0; n.length > i;) {M(rr, t = n[i++]) || t == Qn || t == Yn || r.push(t);}return r;},yr = function yr(e) {for (var t, n = e === ar, r = Gn(n ? ir : X(e)), i = [], a = 0; r.length > a;) {!M(rr, t = r[a++]) || n && !M(ar, t) || i.push(rr[t]);}return i;};or || (H((_$n = function $n() {if (this instanceof _$n) throw TypeError("Symbol is not a constructor!");var e = te(arguments.length > 0 ? arguments[0] : void 0),t = function t(n) {this === ar && t.call(ir, n), M(this, Qn) && M(this[Qn], e) && (this[Qn][e] = !1), ur(this, e, P(1, n));};return b && sr && ur(ar, e, { configurable: !0, set: t }), cr(e);}).prototype, "toString", function () {return this._k;}), Wn.f = gr, S.f = dr, Nn.f = Un.f = hr, In.f = function (e) {var t = tr.call(this, e = T(e, !0));return !(this === ar && M(rr, e) && !M(ir, e)) && (!(t || !M(this, e) || !M(rr, e) || M(this, Qn) && this[Qn][e]) || t);}, jn.f = yr, On.f = function (e) {return cr(ye(e));}), D(D.G + D.W + D.F * !or, { Symbol: _$n });for (var xr = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), vr = 0; xr.length > vr;) {ye(xr[vr++]);}for (var mr = se(ye.store), br = 0; mr.length > br;) {An(mr[br++]);}D(D.S + D.F * !or, "Symbol", { for: function _for(e) {return M(nr, e += "") ? nr[e] : nr[e] = _$n(e);}, keyFor: function keyFor(e) {if (!pr(e)) throw TypeError(e + " is not a symbol!");for (var t in nr) {if (nr[t] === e) return t;}}, useSetter: function useSetter() {sr = !0;}, useSimple: function useSimple() {sr = !1;} }), D(D.S + D.F * !or, "Object", { create: function create(e, t) {return void 0 === t ? he(e) : fr(he(e), t);}, defineProperty: dr, defineProperties: fr, getOwnPropertyDescriptor: gr, getOwnPropertyNames: hr, getOwnPropertySymbols: yr });var kr = m(function () {jn.f(1);});D(D.S + D.F * kr, "Object", { getOwnPropertySymbols: function getOwnPropertySymbols(e) {return jn.f(ke(e));} }), Jn && D(D.S + D.F * (!or || m(function () {var e = _$n();return "[null]" != Zn([e]) || "{}" != Zn({ a: e }) || "{}" != Zn(Object(e));})), "JSON", { stringify: function stringify(e) {for (var t, n, r = [e], i = 1; arguments.length > i;) {r.push(arguments[i++]);}if (n = t = r[1], (x(t) || void 0 !== e) && !pr(e)) return zn(t) || (t = function t(e, _t3) {if ("function" == typeof n && (_t3 = n.call(this, e, _t3)), !pr(_t3)) return _t3;}), r[1] = t, Zn.apply(Jn, r);} }), _$n.prototype[er] || O(_$n.prototype, er, _$n.prototype.valueOf), me(_$n, "Symbol"), me(Math, "Math", !0), me(f.JSON, "JSON", !0), An("asyncIterator"), An("observable");var wr = g.Symbol,_r = t(function (e) {e.exports = { default: wr, __esModule: !0 };});e(_r);var Er = e(t(function (e, t) {function n(e) {return e && e.__esModule ? e : { default: e };}t.__esModule = !0;var r = n(Mn),i = n(_r),a = "function" == typeof i.default && "symbol" == typeof r.default ? function (e) {return typeof e;} : function (e) {return e && "function" == typeof i.default && e.constructor === i.default && e !== i.default.prototype ? "symbol" : typeof e;};t.default = "function" == typeof i.default && "symbol" === a(r.default) ? function (e) {return void 0 === e ? "undefined" : a(e);} : function (e) {return e && "function" == typeof i.default && e.constructor === i.default && e !== i.default.prototype ? "symbol" : void 0 === e ? "undefined" : a(e);};})),Tr = function () {function e() {var t = this;d(this, e), this.__handlers = [], window.ResizeObserver && (this.observer = new window.ResizeObserver(function (e) {new Date().getTime(), t.__trigger(e);}));}return z(e, [{ key: "addObserver", value: function value(e, t) {if (this.observer) {this.observer && this.observer.observe(e);for (var n = this.__handlers, r = -1, i = 0; i < n.length; i++) {n[i] && e === n[i].target && (r = i);}r > -1 ? this.__handlers[r].handler.push(t) : this.__handlers.push({ target: e, handler: [t] });}} }, { key: "unObserver", value: function value(e) {var t = -1;this.__handlers.map(function (n, r) {e === n.target && (t = r);}), this.observer && this.observer.unobserve(e), t > -1 && this.__handlers.splice(t, 1);} }, { key: "destroyObserver", value: function value() {this.observer && this.observer.disconnect(), this.observer = null, this.__handlers = null;} }, { key: "__runHandler", value: function value(e, t) {for (var n = this.__handlers, r = 0; r < n.length; r++) {if (n[r] && e === n[r].target) {n[r].handler && n[r].handler.map(function (n) {try {n(e, t);} catch (e) {__f__("error", e, " at node_modules/xgplayer/dist/index.js:22");}});break;}}} }, { key: "__trigger", value: function value(e) {var t = this;e.map(function (e) {var n = e.contentRect;t.__runHandler(e.target, n);});} }]), e;}(),Cr = null;!function (e, t) {void 0 === t && (t = {});var n = t.insertAt;if ("undefined" != typeof document) {var r = document.head || document.getElementsByTagName("head")[0],i = document.createElement("style");i.type = "text/css", "top" === n && r.firstChild ? r.insertBefore(i, r.firstChild) : r.appendChild(i), i.styleSheet ? i.styleSheet.cssText = e : i.appendChild(document.createTextNode(e));}}('xg-text-track.xg-text-track {\n  font-family: "PingFang SC","SF Pro SC","SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif;\n  -webkit-font-smoothing: antialiased;\n  position: absolute;\n  bottom: 0;\n  color: #fff;\n  left: 0;\n  right: 0;\n  pointer-events: none; }\n  xg-text-track.xg-text-track.text-track-no-fitvideo {\n    margin-bottom: 2%; }\n  xg-text-track.xg-text-track.text-track-hide {\n    opacity: 0;\n    visibility: hidden; }\n  xg-text-track.xg-text-track.text-track-show {\n    opacity: 1;\n    visibility: visible; }\n  xg-text-track.xg-text-track xg-text-track-inner {\n    display: block;\n    position: relative;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    max-width: 92%; }\n  xg-text-track.xg-text-track xg-text-track-span {\n    display: -webkit-box;\n    text-align: center;\n    text-overflow: ellipsis;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    padding: 1px 4px;\n    -webkit-line-clamp: 1;\n    line-height: 120%;\n    word-break: break-all; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-deputy {\n      font-size: 76%; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-single {\n      -webkit-line-clamp: 1; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-double {\n      -webkit-line-clamp: 2; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-three {\n      -webkit-line-clamp: 3; }\n  xg-text-track.xg-text-track.text-track-bg xg-text-track-span {\n    background-color: rgba(0, 0, 0, .54);\n    border-radius: 2px; }\n  xg-text-track.xg-text-track.text-track-stroke xg-text-track-inner {\n    background-color: none;\n    border-radius: 0;\n    text-shadow: -1px 1px 0 rgba(0, 0, 0, .7), 1px 1px 0 rgba(0, 0, 0, .7), 1px -1px 0 rgba(0, 0, 0, .7), -1px -1px 0 rgba(0, 0, 0, .7); }\n');var Sr = [{ code: 0, msg: "SUCCESS" }, { code: 1, msg: "LOAD_ERROR" }, { code: 2, msg: "PARSER_ERROR" }, { code: 3, msg: "FORMAT_NOT_SUPPORTED" }, { code: 4, msg: "ID_OR_LANGUAGE_NOT_EXIST" }, { code: 5, msg: "PARAMETERS_ERROR" }, { code: 6, msg: "ABORT" }, { code: 7, msg: "UNKNOWN" }],Pr = "resize",Or = !1;return function () {function e(t) {var n = this;d(this, e), yn(this), Or = function () {var e = navigator.userAgent,t = /(?:Windows Phone)/.test(e),n = /(?:SymbianOS)/.test(e) || t,r = /(?:Android)/.test(e),i = /(?:Firefox)/.test(e),a = /(?:iPad|PlayBook)/.test(e) || r && !/(?:Mobile)/.test(e) || i && /(?:Tablet)/.test(e);return /(?:iPhone)/.test(e) && !a || r || n || a;}(), this.currentText = null, this.textTrack = [], this._cid = -1, this._gid = -1, this._iId = null, this._iC = 0, this.player = null, this.root = null, this.config = { line: "double", bottom: 0, mode: "stroke", defaultOpen: !1, baseSizeX: 49, baseSizeY: 28, minSize: 16, minMobileSize: 13, fitVideo: !0, offsetBottom: 2, fontColor: "#fff" }, this._loadingTrack = {}, Xt(this.config).map(function (e) {void 0 !== t[e] && null !== t[e] && (n.config[e] = t[e]);}), this._isOpen = this.config.defaultOpen || !1, this._videoMeta = { scale: 0, videoHeight: 0, videoWidth: 0, lwidth: 0, lheight: 0, vWidth: 0, vHeight: 0, vBottom: 0, vLeft: 0, marginBottom: 0 }, t.subTitles && "Array" === function (e) {return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0];}(t.subTitles) && (this.setSubTitles(t.subTitles), t.player && this.attachPlayer(t.player), this.currentText && c(this.currentText).then(function (e) {n.addStyles(e);}));}return z(e, [{ key: "setSubTitles", value: function value() {var e = this;(arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []).map(function (t) {var n = {};Xt(t).map(function (e) {n[e] = t[e];}), n.isDefault && (e.currentText = n), e.textTrack.push(n);});} }, { key: "addStyles", value: function value(e) {var t = e.styles,n = e.format;t && "vtt" === n && (t.map(function (e) {e.key || (e.key = "xg-text-track-span");}), function (e) {var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",n = "";e.map(function (e) {n += " " + t + " " + e.key + " {" + e.style + "}";});var r = document.createElement("style"),i = document.head || document.getElementsByTagName("head")[0];if (r.type = "text/css", r.id = "ssss", r.styleSheet) {var a = function a() {try {style.styleSheet.cssText = n;} catch (e) {}};r.styleSheet.disabled ? setTimeout(a, 10) : a();} else {var o = document.createTextNode(n);r.appendChild(o);}i.appendChild(r);}(t, "xg-text-track"));} }, { key: "attachPlayer", value: function value(e) {var t = this;if (e) {this.player && this.detachPlayer();var n = this.config,r = n.fontColor,i = n.mode,a = n.fitVideo;this.player = e, this.root = document.createElement("xg-text-track"), this.root.className = "xg-text-track", !this._isOpen && l(this.root, "text-track-hide"), !a && l(this.root, "text-track-no-fitvideo"), i && l(this.root, "text-track-" + i), this.innerRoot = document.createElement("xg-text-track-inner"), this.root.appendChild(this.innerRoot), r && (this.root.style.color = r), this.currentText && ["language", "id", "label"].map(function (e) {t.root.setAttribute("data-" + e, t.currentText[e] || "");}), this.player.root.appendChild(this.root), ["destroy", "__onTimeupdate", "_onResize"].map(function (e) {t[e] = t[e].bind(t);}), this.player.on("destroy", this.destroy), this.player.on("timeupdate", this.__onTimeupdate), function (e, t) {Cr || (Cr = new Tr()), Cr.addObserver(e, t);}(e.root, this._onResize);}} }, { key: "detachPlayer", value: function value() {var e = this.player;e && (e.off("destroy", this.destroy), e.off("timeupdate", this.__onTimeupdate), e.root && (function (e, t) {Cr && Cr.unObserver(e, t);}(e.root, this._onResize), e.root.removeChild(this.root)), this.innerRoot = null, this.root = null, this.player = null);} }, { key: "switch", value: function value() {var e = this,t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { id: "", language: "" };return this._loadingTrack = t, new Wt(function (n, r) {if (!t.id && !t.language) if (e.currentText) {e._loadingTrack = {}, e._updateCurrent(e.currentText), e._isOpen = !0, e.show();var i = u(0, { message: "switch default subtitle success" });console.trace(i), n(i);} else {var a = u(5, { message: "no default subtitle" });console.trace(a), r(a);}if (e.currentText && p(t, e.currentText)) e._loadingTrack = {}, e._updateCurrent(e.currentText), e._isOpen = !0, e.show(), n(u(0));else {for (var o = null, l = 0; l < e.textTrack.length; l++) {if (p(t, e.textTrack[l])) {o = e.textTrack[l];break;}}if (o) o.list ? (e._loadingTrack = {}, e._updateCurrent(o), e._isOpen = !0, e.show(), n(u(0))) : c(o).then(function (t) {if (e.addStyles(t), e._loadingTrack.id === o.id || e._loadingTrack.language === t.language) e._loadingTrack = {}, e._updateCurrent(t), e._isOpen = !0, e.show(), n(u(0));else {var i = u(6, { message: "check _loadingTrack fail id: " + e._loadingTrack.id + "  nextSubtitle:" + t.id });console.trace(i), r(i);}}).catch(function (e) {r(e);});else {var s = u(4, new Error("The is no subtitle with id:[{" + t.id + "}] or language:[" + t.language + "]"));console.trace(s), r(s);}}});} }, { key: "switchOff", value: function value() {this._isOpen = !1, this.hide();} }, { key: "_updateCurrent", value: function value(e) {var t = this;this.currentText = e, ["language", "id", "label"].map(function (e) {t.root.setAttribute("data-" + e, t.currentText[e] || "");});var n = this.player.currentTime,r = s(n, this.currentText.list, this._gid),i = -1;r > -1 && (i = s(n, this.currentText.list[r].list, this._cid)), this._gid = r, this._cid = i, i < 0 ? this.__render() : this.__render(this.currentText.list[r].list[i]);} }, { key: "__loadAll", value: function value() {this.textTrack.map(function (e) {c(e);});} }, { key: "__onTimeupdate", value: function value() {if (this._isOpen) {var e = this.player.video,t = e.videoWidth,n = e.videoHeight;!this._videoMeta.scale && t && n && this._onResize(this.player.root);var r = this.player.currentTime;if (this.currentText && this.currentText.list) {var i = s(r, this.currentText.list, this._gid),a = -1;if (i > -1 && (a = s(r, this.currentText.list[i].list, this._cid)), a < 0) return void this.__render();a === this._cid && i === this._gid || (this._cid = a, this._gid = i, this.__render(this.currentText.list[i].list[a]));}}} }, { key: "_onResize", value: function value(e) {var t = this._videoMeta;if (e && e instanceof window.Element || (e = this.player.root), this._iId && (clearTimeout(this._iId), this._iId = null), !t.scale) {if (!this.player.video) return;var n = this.player.video,r = n.videoWidth,i = n.videoHeight;if (!r || !i) return;t.videoWidth = r, t.videoHeight = i, t.scale = parseInt(i / r * 100, 10);}this.__startResize(e);} }, { key: "resize", value: function value(e, t) {var n = this,r = this.config,i = r.baseSizeX,a = r.baseSizeY,o = r.minMobileSize,l = r.minSize,s = r.fitVideo,u = (r.offsetLeft, r.offsetBottom),c = this._videoMeta.scale;this._videoMeta.lwidth = e, this._videoMeta.lheight = t;var p = void 0,d = 0;t / e * 100 >= c ? (d = parseInt(c * e, 10) / 100, p = e) : (d = t, p = parseInt(t / c * 100, 10)), this._videoMeta.vWidth = p, this._videoMeta.vHeight = d;var f = 0,g = 0;c > 120 ? (f = a, g = parseInt(f * d / 1080, 10)) : (f = i, g = parseInt(f * p / 1920, 10));var h = Or ? o : l,y = { fontSize: g = g < h ? h : g > f ? f : g },x = parseInt((t - d) / 2, 10),v = parseInt((e - p) / 2, 10),m = parseInt(d * u, 10) / 100;this._videoMeta.vBottom = x, this._videoMeta.vLeft = v, this._videoMeta.marginBottom = m, s && (y.bottom = x + m, y.left = y.right = v), Xt(y).map(function (e) {n.root.style[e] = y[e] + "px";}), this.emit(Pr, { vLeft: v, vBottom: x, marginBottom: m, vWidth: p, vHeight: d, fontSize: g, scale: c });} }, { key: "__startResize", value: function value(e) {var t = this,n = e.getBoundingClientRect(),r = this._videoMeta,i = n.width,a = n.height;if (this._iId && (clearTimeout(this._iId), this._iId = null), i > 0 && a > 0 && (i !== r.lwidth || a !== r.lheight)) this._iC = 0, this.resize(i, a);else {if (this._iC >= 5) return void (this._iC = 0);this._iC++, this._iId = setTimeout(function () {t.__startResize(e);}, 50);}} }, { key: "__render", value: function value(e) {if (e) {var t = "text-track-" + this.config.line;this.root.setAttribute("data-start", e.start), this.root.setAttribute("data-end", e.end);var n = "";e.text.map(function (r, i) {i > 0 && (t += " text-track-deputy"), n += '<xg-text-track-span class="' + t + '" data-tag="' + e.textTag[i] + '">' + r + "</xg-text-track-span>";}), this.innerRoot.innerHTML = n;} else this.innerRoot.innerHTML = "";} }, { key: "show", value: function value() {!function (e, t) {e && (e.classList ? t.split(/\s+/g).forEach(function (t) {e.classList.remove(t);}) : o(e, t) && t.split(/\s+/g).forEach(function (t) {var n = new RegExp("(\\s|^)" + t + "(\\s|$)");e.className && "object" === Er(e.className) ? e.setAttribute("class", e.getAttribute("class").replace(n, " ")) : e.className = e.className.replace(n, " ");}));}(this.root, "text-track-hide");} }, { key: "hide", value: function value() {l(this.root, "text-track-hide"), this.innerRoot.innerHTML = "";} }, { key: "destroy", value: function value() {this.detachPlayer(), this.player = null, this.textTrack = null;} }, { key: "marginBottom", get: function get() {var e = this._videoMeta,t = e.bottom,n = e.marginBottom;return this.config.fitVideo ? t + n : n;} }]), e;}();}();}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(162);t.default = { name: "s_error", method: function method() {var e = this,t = e.root,n = (0, r.createDom)("xg-error", '<span class="xgplayer-error-text">请<span class="xgplayer-error-refresh">刷新</span>试试</span>', {}, "xgplayer-error");e.once("ready", function () {t.appendChild(n);});var i = n.querySelector(".xgplayer-error-text"),a = null;function o() {e.config.lang && "zh-cn" === e.config.lang ? i.innerHTML = e.config.errorTips || '请<span class="xgplayer-error-refresh">刷新</span>试试' : i.innerHTML = e.config.errorTips || 'please try to <span class="xgplayer-error-refresh">refresh</span>', (0, r.addClass)(e.root, "xgplayer-is-error"), (a = n.querySelector(".xgplayer-error-refresh")) && ["touchend", "click"].forEach(function (t) {a.addEventListener(t, function (t) {t.preventDefault(), t.stopPropagation(), e.autoplay = !0, e.once("playing", function () {(0, r.removeClass)(e.root, "xgplayer-is-error");}), e.src = e.config.url;});});}e.on("error", o), e.once("destroy", function t() {e.off("error", o), e.off("destroy", t);});} }, e.exports = t.default;}, function (e, t, n) {var r = n(163);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-error{background:#000;display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:125;font-family:PingFangSC-Regular;font-size:14px;color:#fff;text-align:center;line-height:100%;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center}.xgplayer-skin-default .xgplayer-error .xgplayer-error-refresh{color:#fa1f41;padding:0 3px;cursor:pointer}.xgplayer-skin-default .xgplayer-error .xgplayer-error-text{line-height:18px;margin:auto 6px}.xgplayer-skin-default.xgplayer-is-error .xgplayer-error{display:-webkit-flex;display:-moz-box;display:flex}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r = n(0);n(165);t.default = { name: "s_memoryPlay", method: function method() {var e = this,t = e.config.lastPlayTime || 0,n = e.config.lastPlayTimeHideDelay || 0,i = null;if (!(t <= 0)) {(i = (0, r.createDom)("xg-memoryplay", '<div class="xgplayer-memoryplay-spot"><div class="xgplayer-progress-tip">您上次观看到 <span class="xgplayer-lasttime">' + (0, r.format)(t) + '</span> ，为您自动续播 <span class="btn-close"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg></span></div></div>', {}, "xgplayer-memoryplay")).addEventListener("mouseover", function (e) {e.stopPropagation();});var a = function a() {i && i.parentNode && i.parentNode.removeChild(i), i = null;};i.querySelector(".xgplayer-progress-tip .btn-close").addEventListener("click", a);e.once("play", function () {n > 0 && e.root.appendChild(i), e.emit("memoryPlayStart", t), n > 0 && setTimeout(function () {a();}, 1e3 * n);}), e.once("ended", a);}} }, e.exports = t.default;}, function (e, t, n) {var r = n(166);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-memoryplay-spot{position:absolute;height:32px;left:10px;bottom:46px;background:rgba(0,0,0,.5);border-radius:32px;line-height:32px;color:#ddd;z-index:15;padding:0 32px 0 16px}.xgplayer-skin-default .xgplayer-memoryplay-spot .xgplayer-lasttime{color:red;font-weight:700}.xgplayer-skin-default .xgplayer-memoryplay-spot .btn-close{position:absolute;width:16px;height:16px;right:10px;top:2px;cursor:pointer;color:#fff;font-size:16px}", ""]);}, function (e, t, n) {"use strict";Object.defineProperty(t, "__esModule", { value: !0 });var r,i = n(0),a = n(168),o = (r = a) && r.__esModule ? r : { default: r };n(169);t.default = { name: "s_airplay", method: function method() {var e = this;if (e.config.airplay && window.WebKitPlaybackTargetAvailabilityEvent) {var t = (0, i.createDom)("xg-airplay", '<xg-icon class="xgplayer-icon">\n    <div class="xgplayer-icon-airplay">' + o.default + "</div>\n  </xg-icon>", {}, "xgplayer-airplay"),n = (0, i.createDom)("xg-tips", '<span class="xgplayer-tip-airplay">' + e.lang.AIRPLAY_TIPS + "</span>", {}, "xgplayer-tips");t.appendChild(n), e.once("ready", function () {e.controls.appendChild(t), e.video.addEventListener("webkitplaybacktargetavailabilitychanged", function (e) {switch (e.availability) {case "available":t.hidden = !1, t.disabled = !1;break;case "not-available":t.hidden = !0, t.disabled = !0;}});}), ["click", "touchend"].forEach(function (n) {t.addEventListener(n, function (t) {t.preventDefault(), t.stopPropagation(), e.userGestureTrigEvent("airplayBtnClick");});});}} }, e.exports = t.default;}, function (e, t, n) {"use strict";n.r(t), t.default = '<svg t="1600422191774" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3100" width="28" height="28"><path d="M256 938.666667h512L512 597.333333 256 938.666667z m170.666667-85.333334l85.333333-113.781333L597.333333 853.333333H426.666667zM853.333333 85.333333H170.666667C99.946667 85.333333 42.666667 142.613333 42.666667 213.333333v426.666667c0 70.72 57.28 128 128 128h106.666666l64-85.333333H170.666667c-23.573333 0-42.666667-19.093333-42.666667-42.666667V213.333333c0-23.573333 19.093333-42.666667 42.666667-42.666666h682.666666c23.573333 0 42.666667 19.093333 42.666667 42.666666v426.666667c0 23.573333-19.093333 42.666667-42.666667 42.666667H682.666667l64 85.333333h106.666666c70.72 0 128-57.28 128-128V213.333333c0-70.72-57.28-128-128-128z" p-id="3101" fill="#ffffff"></path></svg>';}, function (e, t, n) {var r = n(170);"string" == typeof r && (r = [[e.i, r, ""]]);var i = { hmr: !0, transform: void 0, insertInto: void 0 };n(2)(r, i);r.locals && (e.exports = r.locals);}, function (e, t, n) {(e.exports = n(1)(!1)).push([e.i, ".xgplayer-skin-default .xgplayer-airplay{position:relative;-webkit-order:11;-moz-box-ordinal-group:12;order:11;display:block;cursor:pointer;margin-left:5px;margin-right:3px}.xgplayer-skin-default .xgplayer-airplay .xgplayer-icon{margin-top:6px;margin-left:6px}.xgplayer-skin-default .xgplayer-airplay .xgplayer-icon div{position:absolute}.xgplayer-skin-default .xgplayer-airplay .xgplayer-icon .xgplayer-icon-airplay{display:block}.xgplayer-skin-default .xgplayer-airplay .xgplayer-tips{position:absolute;right:0;left:auto}.xgplayer-skin-default .xgplayer-airplay .xgplayer-tips .xgplayer-tip-airplay{display:block}.xgplayer-skin-default .xgplayer-airplay:hover{opacity:.85}.xgplayer-skin-default .xgplayer-airplay:hover .xgplayer-tips{display:block}", ""]);}]);});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/lib/format-log.js */ 8)["default"]))

/***/ }),
/* 8 */
/*!*********************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/lib/format-log.js ***!
  \*********************************************************************/
/*! exports provided: log, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "log", function() { return log; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return formatLog; });
function typof (v) {
  var s = Object.prototype.toString.call(v)
  return s.substring(8, s.length - 1)
}

function isDebugMode () {
  /* eslint-disable no-undef */
  return typeof __channelId__ === 'string' && __channelId__
}

function jsonStringifyReplacer (k, p) {
  switch (typof(p)) {
    case 'Function':
      return 'function() { [native code] }'
    default :
      return p
  }
}

function log (type) {
  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key]
  }
  console[type].apply(console, args)
}

function formatLog () {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key]
  }
  var type = args.shift()
  if (isDebugMode()) {
    args.push(args.pop().replace('at ', 'uni-app:///'))
    return console[type].apply(console, args)
  }

  var msgs = args.map(function (v) {
    var type = Object.prototype.toString.call(v).toLowerCase()

    if (type === '[object object]' || type === '[object array]') {
      try {
        v = '---BEGIN:JSON---' + JSON.stringify(v, jsonStringifyReplacer) + '---END:JSON---'
      } catch (e) {
        v = type
      }
    } else {
      if (v === null) {
        v = '---NULL---'
      } else if (v === undefined) {
        v = '---UNDEFINED---'
      } else {
        var vType = typof(v).toUpperCase()

        if (vType === 'NUMBER' || vType === 'BOOLEAN') {
          v = '---BEGIN:' + vType + '---' + v + '---END:' + vType + '---'
        } else {
          v = String(v)
        }
      }
    }

    return v
  })
  var msg = ''

  if (msgs.length > 1) {
    var lastMsg = msgs.pop()
    msg = msgs.join('---COMMA---')

    if (lastMsg.indexOf(' at ') === 0) {
      msg += lastMsg
    } else {
      msg += '---COMMA---' + lastMsg
    }
  } else {
    msg = msgs[0]
  }

  console[type](msg)
}


/***/ }),
/* 9 */
/*!************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/xgplayer-hls.js/dist/index.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__f__) {(function webpackUniversalModuleDefinition(root,factory){
if(true)
module.exports=factory(__webpack_require__(/*! xgplayer */ 7));else
{}
})(window,function(__WEBPACK_EXTERNAL_MODULE__33__){
return(/******/function(modules){// webpackBootstrap
/******/ // The module cache
/******/var installedModules={};
/******/
/******/ // The require function
/******/function __webpack_require__(moduleId){
/******/
/******/ // Check if module is in cache
/******/if(installedModules[moduleId]){
/******/return installedModules[moduleId].exports;
/******/}
/******/ // Create a new module (and put it into the cache)
/******/var module=installedModules[moduleId]={
/******/i:moduleId,
/******/l:false,
/******/exports:{}
/******/};
/******/
/******/ // Execute the module function
/******/modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);
/******/
/******/ // Flag the module as loaded
/******/module.l=true;
/******/
/******/ // Return the exports of the module
/******/return module.exports;
/******/}
/******/
/******/
/******/ // expose the modules object (__webpack_modules__)
/******/__webpack_require__.m=modules;
/******/
/******/ // expose the module cache
/******/__webpack_require__.c=installedModules;
/******/
/******/ // define getter function for harmony exports
/******/__webpack_require__.d=function(exports,name,getter){
/******/if(!__webpack_require__.o(exports,name)){
/******/Object.defineProperty(exports,name,{enumerable:true,get:getter});
/******/}
/******/};
/******/
/******/ // define __esModule on exports
/******/__webpack_require__.r=function(exports){
/******/if(typeof Symbol!=='undefined'&&Symbol.toStringTag){
/******/Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});
/******/}
/******/Object.defineProperty(exports,'__esModule',{value:true});
/******/};
/******/
/******/ // create a fake namespace object
/******/ // mode & 1: value is a module id, require it
/******/ // mode & 2: merge all properties of value into the ns
/******/ // mode & 4: return value when already ns object
/******/ // mode & 8|1: behave like require
/******/__webpack_require__.t=function(value,mode){
/******/if(mode&1)value=__webpack_require__(value);
/******/if(mode&8)return value;
/******/if(mode&4&&typeof value==='object'&&value&&value.__esModule)return value;
/******/var ns=Object.create(null);
/******/__webpack_require__.r(ns);
/******/Object.defineProperty(ns,'default',{enumerable:true,value:value});
/******/if(mode&2&&typeof value!='string')for(var key in value){__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));}
/******/return ns;
/******/};
/******/
/******/ // getDefaultExport function for compatibility with non-harmony modules
/******/__webpack_require__.n=function(module){
/******/var getter=module&&module.__esModule?
/******/function getDefault(){return module['default'];}:
/******/function getModuleExports(){return module;};
/******/__webpack_require__.d(getter,'a',getter);
/******/return getter;
/******/};
/******/
/******/ // Object.prototype.hasOwnProperty.call
/******/__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};
/******/
/******/ // __webpack_public_path__
/******/__webpack_require__.p="";
/******/
/******/
/******/ // Load entry module and return exports
/******/return __webpack_require__(__webpack_require__.s=31);
/******/}(
/************************************************************************/
/******/[
/* 0 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.logger=exports.enableLogs=undefined;

var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};

var _getSelfScope=__webpack_require__(5);

function noop(){}

var fakeLogger={
trace:noop,
debug:noop,
log:noop,
warn:noop,
info:noop,
error:noop};


var exportedLogger=fakeLogger;

// let lastCallTime;
// function formatMsgWithTimeInfo(type, msg) {
//   const now = Date.now();
//   const diff = lastCallTime ? '+' + (now - lastCallTime) : '0';
//   lastCallTime = now;
//   msg = (new Date(now)).toISOString() + ' | [' +  type + '] > ' + msg + ' ( ' + diff + ' ms )';
//   return msg;
// }

function formatMsg(type,msg){
msg='['+type+'] > '+msg;
return msg;
}

var global=(0,_getSelfScope.getSelfScope)();

function consolePrintFn(type){
var func=global.console[type];
if(func){
return function(){
for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){
args[_key]=arguments[_key];
}

if(args[0]){
args[0]=formatMsg(type,args[0]);
}

func.apply(global.console,args);
};
}
return noop;
}

function exportLoggerFunctions(debugConfig){
for(var _len2=arguments.length,functions=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){
functions[_key2-1]=arguments[_key2];
}

functions.forEach(function(type){
exportedLogger[type]=debugConfig[type]?debugConfig[type].bind(debugConfig):consolePrintFn(type);
});
}

var enableLogs=exports.enableLogs=function enableLogs(debugConfig){
if(debugConfig===true||(typeof debugConfig==='undefined'?'undefined':_typeof(debugConfig))==='object'){
exportLoggerFunctions(debugConfig,
// Remove out from list here to hard-disable a log-level
// 'trace',
'debug','log','info','warn','error');
// Some browsers don't allow to use bind on console object anyway
// fallback to default if needed
try{
exportedLogger.log();
}catch(e){
exportedLogger=fakeLogger;
}
}else{
exportedLogger=fakeLogger;
}
};

var logger=exports.logger=exportedLogger;

/***/},
/* 1 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

/**
 * @readonly
 * @enum {string}
 */
var HlsEvents={
// fired before MediaSource is attaching to media element - data: { media }
MEDIA_ATTACHING:'hlsMediaAttaching',
// fired when MediaSource has been succesfully attached to media element - data: { }
MEDIA_ATTACHED:'hlsMediaAttached',
// fired before detaching MediaSource from media element - data: { }
MEDIA_DETACHING:'hlsMediaDetaching',
// fired when MediaSource has been detached from media element - data: { }
MEDIA_DETACHED:'hlsMediaDetached',
// fired when we buffer is going to be reset - data: { }
BUFFER_RESET:'hlsBufferReset',
// fired when we know about the codecs that we need buffers for to push into - data: {tracks : { container, codec, levelCodec, initSegment, metadata }}
BUFFER_CODECS:'hlsBufferCodecs',
// fired when sourcebuffers have been created - data: { tracks : tracks }
BUFFER_CREATED:'hlsBufferCreated',
// fired when we append a segment to the buffer - data: { segment: segment object }
BUFFER_APPENDING:'hlsBufferAppending',
// fired when we are done with appending a media segment to the buffer - data : { parent : segment parent that triggered BUFFER_APPENDING, pending : nb of segments waiting for appending for this segment parent}
BUFFER_APPENDED:'hlsBufferAppended',
// fired when the stream is finished and we want to notify the media buffer that there will be no more data - data: { }
BUFFER_EOS:'hlsBufferEos',
// fired when the media buffer should be flushed - data { startOffset, endOffset }
BUFFER_FLUSHING:'hlsBufferFlushing',
// fired when the media buffer has been flushed - data: { }
BUFFER_FLUSHED:'hlsBufferFlushed',
// fired to signal that a manifest loading starts - data: { url : manifestURL}
MANIFEST_LOADING:'hlsManifestLoading',
// fired after manifest has been loaded - data: { levels : [available quality levels], audioTracks : [ available audio tracks], url : manifestURL, stats : { trequest, tfirst, tload, mtime}}
MANIFEST_LOADED:'hlsManifestLoaded',
// fired after manifest has been parsed - data: { levels : [available quality levels], firstLevel : index of first quality level appearing in Manifest}
MANIFEST_PARSED:'hlsManifestParsed',
// fired when a level switch is requested - data: { level : id of new level }
LEVEL_SWITCHING:'hlsLevelSwitching',
// fired when a level switch is effective - data: { level : id of new level }
LEVEL_SWITCHED:'hlsLevelSwitched',
// fired when a level playlist loading starts - data: { url : level URL, level : id of level being loaded}
LEVEL_LOADING:'hlsLevelLoading',
// fired when a level playlist loading finishes - data: { details : levelDetails object, level : id of loaded level, stats : { trequest, tfirst, tload, mtime} }
LEVEL_LOADED:'hlsLevelLoaded',
// fired when a level's details have been updated based on previous details, after it has been loaded - data: { details : levelDetails object, level : id of updated level }
LEVEL_UPDATED:'hlsLevelUpdated',
// fired when a level's PTS information has been updated after parsing a fragment - data: { details : levelDetails object, level : id of updated level, drift: PTS drift observed when parsing last fragment }
LEVEL_PTS_UPDATED:'hlsLevelPtsUpdated',
// fired to notify that audio track lists has been updated - data: { audioTracks : audioTracks }
AUDIO_TRACKS_UPDATED:'hlsAudioTracksUpdated',
// fired when an audio track switching is requested - data: { id : audio track id }
AUDIO_TRACK_SWITCHING:'hlsAudioTrackSwitching',
// fired when an audio track switch actually occurs - data: { id : audio track id }
AUDIO_TRACK_SWITCHED:'hlsAudioTrackSwitched',
// fired when an audio track loading starts - data: { url : audio track URL, id : audio track id }
AUDIO_TRACK_LOADING:'hlsAudioTrackLoading',
// fired when an audio track loading finishes - data: { details : levelDetails object, id : audio track id, stats : { trequest, tfirst, tload, mtime } }
AUDIO_TRACK_LOADED:'hlsAudioTrackLoaded',
// fired to notify that subtitle track lists has been updated - data: { subtitleTracks : subtitleTracks }
SUBTITLE_TRACKS_UPDATED:'hlsSubtitleTracksUpdated',
// fired when an subtitle track switch occurs - data: { id : subtitle track id }
SUBTITLE_TRACK_SWITCH:'hlsSubtitleTrackSwitch',
// fired when a subtitle track loading starts - data: { url : subtitle track URL, id : subtitle track id }
SUBTITLE_TRACK_LOADING:'hlsSubtitleTrackLoading',
// fired when a subtitle track loading finishes - data: { details : levelDetails object, id : subtitle track id, stats : { trequest, tfirst, tload, mtime } }
SUBTITLE_TRACK_LOADED:'hlsSubtitleTrackLoaded',
// fired when a subtitle fragment has been processed - data: { success : boolean, frag : the processed frag }
SUBTITLE_FRAG_PROCESSED:'hlsSubtitleFragProcessed',
// fired when the first timestamp is found - data: { id : demuxer id, initPTS: initPTS, frag : fragment object }
INIT_PTS_FOUND:'hlsInitPtsFound',
// fired when a fragment loading starts - data: { frag : fragment object }
FRAG_LOADING:'hlsFragLoading',
// fired when a fragment loading is progressing - data: { frag : fragment object, { trequest, tfirst, loaded } }
FRAG_LOAD_PROGRESS:'hlsFragLoadProgress',
// Identifier for fragment load aborting for emergency switch down - data: { frag : fragment object }
FRAG_LOAD_EMERGENCY_ABORTED:'hlsFragLoadEmergencyAborted',
// fired when a fragment loading is completed - data: { frag : fragment object, payload : fragment payload, stats : { trequest, tfirst, tload, length } }
FRAG_LOADED:'hlsFragLoaded',
// fired when a fragment has finished decrypting - data: { id : demuxer id, frag: fragment object, payload : fragment payload, stats : { tstart, tdecrypt } }
FRAG_DECRYPTED:'hlsFragDecrypted',
// fired when Init Segment has been extracted from fragment - data: { id : demuxer id, frag: fragment object, moov : moov MP4 box, codecs : codecs found while parsing fragment }
FRAG_PARSING_INIT_SEGMENT:'hlsFragParsingInitSegment',
// fired when parsing sei text is completed - data: { id : demuxer id, frag: fragment object, samples : [ sei samples pes ] }
FRAG_PARSING_USERDATA:'hlsFragParsingUserdata',
// fired when parsing id3 is completed - data: { id : demuxer id, frag: fragment object, samples : [ id3 samples pes ] }
FRAG_PARSING_METADATA:'hlsFragParsingMetadata',
// fired when data have been extracted from fragment - data: { id : demuxer id, frag: fragment object, data1 : moof MP4 box or TS fragments, data2 : mdat MP4 box or null}
FRAG_PARSING_DATA:'hlsFragParsingData',
// fired when fragment parsing is completed - data: { id : demuxer id, frag: fragment object }
FRAG_PARSED:'hlsFragParsed',
// fired when fragment remuxed MP4 boxes have all been appended into SourceBuffer - data: { id : demuxer id, frag : fragment object, stats : { trequest, tfirst, tload, tparsed, tbuffered, length, bwEstimate } }
FRAG_BUFFERED:'hlsFragBuffered',
// fired when fragment matching with current media position is changing - data : { id : demuxer id, frag : fragment object }
FRAG_CHANGED:'hlsFragChanged',
// Identifier for a FPS drop event - data: { curentDropped, currentDecoded, totalDroppedFrames }
FPS_DROP:'hlsFpsDrop',
// triggered when FPS drop triggers auto level capping - data: { level, droppedlevel }
FPS_DROP_LEVEL_CAPPING:'hlsFpsDropLevelCapping',
// Identifier for an error event - data: { type : error type, details : error details, fatal : if true, hls.js cannot/will not try to recover, if false, hls.js will try to recover,other error specific data }
ERROR:'hlsError',
// fired when hls.js instance starts destroying. Different from MEDIA_DETACHED as one could want to detach and reattach a media to the instance of hls.js to handle mid-rolls for example - data: { }
DESTROYING:'hlsDestroying',
// fired when a decrypt key loading starts - data: { frag : fragment object }
KEY_LOADING:'hlsKeyLoading',
// fired when a decrypt key loading is completed - data: { frag : fragment object, payload : key payload, stats : { trequest, tfirst, tload, length } }
KEY_LOADED:'hlsKeyLoaded',
// fired upon stream controller state transitions - data: { previousState, nextState }
STREAM_STATE_TRANSITION:'hlsStreamStateTransition'};


exports.default=HlsEvents;
module.exports=exports['default'];

/***/},
/* 2 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

var ErrorTypes=exports.ErrorTypes={
// Identifier for a network error (loading error / timeout ...)
NETWORK_ERROR:'networkError',
// Identifier for a media Error (video/parsing/mediasource error)
MEDIA_ERROR:'mediaError',
// EME (encrypted media extensions) errors
KEY_SYSTEM_ERROR:'keySystemError',
// Identifier for a mux Error (demuxing/remuxing)
MUX_ERROR:'muxError',
// Identifier for all other errors
OTHER_ERROR:'otherError'};


/**
 * @enum {ErrorDetails}
 * @typedef {string} ErrorDetail
 */
var ErrorDetails=exports.ErrorDetails={
KEY_SYSTEM_NO_KEYS:'keySystemNoKeys',
KEY_SYSTEM_NO_ACCESS:'keySystemNoAccess',
KEY_SYSTEM_NO_SESSION:'keySystemNoSession',
KEY_SYSTEM_LICENSE_REQUEST_FAILED:'keySystemLicenseRequestFailed',
// Identifier for a manifest load error - data: { url : faulty URL, response : { code: error code, text: error text }}
MANIFEST_LOAD_ERROR:'manifestLoadError',
// Identifier for a manifest load timeout - data: { url : faulty URL, response : { code: error code, text: error text }}
MANIFEST_LOAD_TIMEOUT:'manifestLoadTimeOut',
// Identifier for a manifest parsing error - data: { url : faulty URL, reason : error reason}
MANIFEST_PARSING_ERROR:'manifestParsingError',
// Identifier for a manifest with only incompatible codecs error - data: { url : faulty URL, reason : error reason}
MANIFEST_INCOMPATIBLE_CODECS_ERROR:'manifestIncompatibleCodecsError',
// Identifier for a level load error - data: { url : faulty URL, response : { code: error code, text: error text }}
LEVEL_LOAD_ERROR:'levelLoadError',
// Identifier for a level load timeout - data: { url : faulty URL, response : { code: error code, text: error text }}
LEVEL_LOAD_TIMEOUT:'levelLoadTimeOut',
// Identifier for a level switch error - data: { level : faulty level Id, event : error description}
LEVEL_SWITCH_ERROR:'levelSwitchError',
// Identifier for an audio track load error - data: { url : faulty URL, response : { code: error code, text: error text }}
AUDIO_TRACK_LOAD_ERROR:'audioTrackLoadError',
// Identifier for an audio track load timeout - data: { url : faulty URL, response : { code: error code, text: error text }}
AUDIO_TRACK_LOAD_TIMEOUT:'audioTrackLoadTimeOut',
// Identifier for fragment load error - data: { frag : fragment object, response : { code: error code, text: error text }}
FRAG_LOAD_ERROR:'fragLoadError',
// Identifier for fragment load timeout error - data: { frag : fragment object}
FRAG_LOAD_TIMEOUT:'fragLoadTimeOut',
// Identifier for a fragment decryption error event - data: {id : demuxer Id,frag: fragment object, reason : parsing error description }
FRAG_DECRYPT_ERROR:'fragDecryptError',
// Identifier for a fragment parsing error event - data: { id : demuxer Id, reason : parsing error description }
// will be renamed DEMUX_PARSING_ERROR and switched to MUX_ERROR in the next major release
FRAG_PARSING_ERROR:'fragParsingError',
// Identifier for a remux alloc error event - data: { id : demuxer Id, frag : fragment object, bytes : nb of bytes on which allocation failed , reason : error text }
REMUX_ALLOC_ERROR:'remuxAllocError',
// Identifier for decrypt key load error - data: { frag : fragment object, response : { code: error code, text: error text }}
KEY_LOAD_ERROR:'keyLoadError',
// Identifier for decrypt key load timeout error - data: { frag : fragment object}
KEY_LOAD_TIMEOUT:'keyLoadTimeOut',
// Triggered when an exception occurs while adding a sourceBuffer to MediaSource - data : {  err : exception , mimeType : mimeType }
BUFFER_ADD_CODEC_ERROR:'bufferAddCodecError',
// Identifier for a buffer append error - data: append error description
BUFFER_APPEND_ERROR:'bufferAppendError',
// Identifier for a buffer appending error event - data: appending error description
BUFFER_APPENDING_ERROR:'bufferAppendingError',
// Identifier for a buffer stalled error event
BUFFER_STALLED_ERROR:'bufferStalledError',
// Identifier for a buffer full event
BUFFER_FULL_ERROR:'bufferFullError',
// Identifier for a buffer seek over hole event
BUFFER_SEEK_OVER_HOLE:'bufferSeekOverHole',
// Identifier for a buffer nudge on stall (playback is stuck although currentTime is in a buffered area)
BUFFER_NUDGE_ON_STALL:'bufferNudgeOnStall',
// Identifier for an internal exception happening inside hls.js while handling an event
INTERNAL_EXCEPTION:'internalException'};


/***/},
/* 3 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};

var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     * All objects in the event handling chain should inherit from this class
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */

var _logger=__webpack_require__(0);

var _errors=__webpack_require__(2);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var FORBIDDEN_EVENT_NAMES={
'hlsEventGeneric':true,
'hlsHandlerDestroying':true,
'hlsHandlerDestroyed':true};


var EventHandler=function(){
function EventHandler(hls){
_classCallCheck(this,EventHandler);

this.hls=hls;
this.onEvent=this.onEvent.bind(this);

for(var _len=arguments.length,events=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){
events[_key-1]=arguments[_key];
}

this.handledEvents=events;
this.useGenericHandler=true;

this.registerListeners();
}

_createClass(EventHandler,[{
key:'destroy',
value:function destroy(){
this.onHandlerDestroying();
this.unregisterListeners();
this.onHandlerDestroyed();
}},
{
key:'onHandlerDestroying',
value:function onHandlerDestroying(){}},
{
key:'onHandlerDestroyed',
value:function onHandlerDestroyed(){}},
{
key:'isEventHandler',
value:function isEventHandler(){
return _typeof(this.handledEvents)==='object'&&this.handledEvents.length&&typeof this.onEvent==='function';
}},
{
key:'registerListeners',
value:function registerListeners(){
if(this.isEventHandler()){
this.handledEvents.forEach(function(event){
if(FORBIDDEN_EVENT_NAMES[event]){
throw new Error('Forbidden event-name: '+event);
}

this.hls.on(event,this.onEvent);
},this);
}
}},
{
key:'unregisterListeners',
value:function unregisterListeners(){
if(this.isEventHandler()){
this.handledEvents.forEach(function(event){
this.hls.off(event,this.onEvent);
},this);
}
}

/**
     * arguments: event (string), data (any)
     */},

{
key:'onEvent',
value:function onEvent(event,data){
this.onEventGeneric(event,data);
}},
{
key:'onEventGeneric',
value:function onEventGeneric(event,data){
var eventToFunction=function eventToFunction(event,data){
var funcName='on'+event.replace('hls','');
if(typeof this[funcName]!=='function'){
throw new Error('Event '+event+' has no generic handler in this '+this.constructor.name+' class (tried '+funcName+')');
}

return this[funcName].bind(this,data);
};
try{
eventToFunction.call(this,event,data).call();
}catch(err){
_logger.logger.error('An internal error happened while handling event '+event+'. Error message: "'+err.message+'". Here is a stacktrace:',err);
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.OTHER_ERROR,details:_errors.ErrorDetails.INTERNAL_EXCEPTION,fatal:false,event:event,err:err});
}
}}]);


return EventHandler;
}();

exports.default=EventHandler;
module.exports=exports['default'];

/***/},
/* 4 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

/**
 * @module BufferHelper
 *
 * Providing methods dealing with buffer length retrieval for example.
 *
 * In general, a helper around HTML5 MediaElement TimeRanges gathered from `buffered` property.
 *
 * Also @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/buffered
*/

var BufferHelper=exports.BufferHelper=function(){
function BufferHelper(){
_classCallCheck(this,BufferHelper);
}

_createClass(BufferHelper,null,[{
key:"isBuffered",

/**
     * Return true if `media`'s buffered include `position`
     * @param {HTMLMediaElement|SourceBuffer} media
     * @param {number} position
     * @returns {boolean}
     */
value:function isBuffered(media,position){
try{
if(media){
var buffered=media.buffered;
for(var i=0;i<buffered.length;i++){
if(position>=buffered.start(i)&&position<=buffered.end(i)){
return true;
}
}
}
}catch(error){
// this is to catch
// InvalidStateError: Failed to read the 'buffered' property from 'SourceBuffer':
// This SourceBuffer has been removed from the parent media source
}
return false;
}},
{
key:"bufferInfo",
value:function bufferInfo(media,pos,maxHoleDuration){
try{
if(media){
var vbuffered=media.buffered,
buffered=[],
i=void 0;
for(i=0;i<vbuffered.length;i++){
buffered.push({start:vbuffered.start(i),end:vbuffered.end(i)});
}

return this.bufferedInfo(buffered,pos,maxHoleDuration);
}
}catch(error){
// this is to catch
// InvalidStateError: Failed to read the 'buffered' property from 'SourceBuffer':
// This SourceBuffer has been removed from the parent media source
}
return{len:0,start:pos,end:pos,nextStart:undefined};
}},
{
key:"bufferedInfo",
value:function bufferedInfo(buffered,pos,maxHoleDuration){
var buffered2=[],

// bufferStart and bufferEnd are buffer boundaries around current video position
bufferLen=void 0,
bufferStart=void 0,
bufferEnd=void 0,
bufferStartNext=void 0,
i=void 0;
// sort on buffer.start/smaller end (IE does not always return sorted buffered range)
buffered.sort(function(a,b){
var diff=a.start-b.start;
if(diff){
return diff;
}else{
return b.end-a.end;
}
});
// there might be some small holes between buffer time range
// consider that holes smaller than maxHoleDuration are irrelevant and build another
// buffer time range representations that discards those holes
for(i=0;i<buffered.length;i++){
var buf2len=buffered2.length;
if(buf2len){
var buf2end=buffered2[buf2len-1].end;
// if small hole (value between 0 or maxHoleDuration ) or overlapping (negative)
if(buffered[i].start-buf2end<maxHoleDuration){
// merge overlapping time ranges
// update lastRange.end only if smaller than item.end
// e.g.  [ 1, 15] with  [ 2,8] => [ 1,15] (no need to modify lastRange.end)
// whereas [ 1, 8] with  [ 2,15] => [ 1,15] ( lastRange should switch from [1,8] to [1,15])
if(buffered[i].end>buf2end){
buffered2[buf2len-1].end=buffered[i].end;
}
}else{
// big hole
buffered2.push(buffered[i]);
}
}else{
// first value
buffered2.push(buffered[i]);
}
}
for(i=0,bufferLen=0,bufferStart=bufferEnd=pos;i<buffered2.length;i++){
var start=buffered2[i].start,
end=buffered2[i].end;
// logger.log('buf start/end:' + buffered.start(i) + '/' + buffered.end(i));
if(pos+maxHoleDuration>=start&&pos<end){
// play position is inside this buffer TimeRange, retrieve end of buffer position and buffer length
bufferStart=start;
bufferEnd=end;
bufferLen=bufferEnd-pos;
}else if(pos+maxHoleDuration<start){
bufferStartNext=start;
break;
}
}
return{len:bufferLen,start:bufferStart,end:bufferEnd,nextStart:bufferStartNext};
}}]);


return BufferHelper;
}();

/***/},
/* 5 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.getSelfScope=getSelfScope;
function getSelfScope(){
// see https://stackoverflow.com/a/11237259/589493
if(typeof window==='undefined'){
/* eslint-disable-next-line no-undef */
return self;
}else{
return window;
}
}

/***/},
/* 6 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.FragmentTracker=exports.FragmentState=undefined;

var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var FragmentState=exports.FragmentState={
NOT_LOADED:'NOT_LOADED',
APPENDING:'APPENDING',
PARTIAL:'PARTIAL',
OK:'OK'};


var FragmentTracker=exports.FragmentTracker=function(_EventHandler){
_inherits(FragmentTracker,_EventHandler);

function FragmentTracker(hls){
_classCallCheck(this,FragmentTracker);

var _this=_possibleConstructorReturn(this,(FragmentTracker.__proto__||Object.getPrototypeOf(FragmentTracker)).call(this,hls,_events2.default.BUFFER_APPENDED,_events2.default.FRAG_BUFFERED,_events2.default.FRAG_LOADED));

_this.bufferPadding=0.2;

_this.fragments=Object.create(null);
_this.timeRanges=Object.create(null);

_this.config=hls.config;
return _this;
}

_createClass(FragmentTracker,[{
key:'destroy',
value:function destroy(){
this.fragments=Object.create(null);
this.timeRanges=Object.create(null);
this.config=null;
_eventHandler2.default.prototype.destroy.call(this);
_get(FragmentTracker.prototype.__proto__||Object.getPrototypeOf(FragmentTracker.prototype),'destroy',this).call(this);
}

/**
     * Return a Fragment that match the position and levelType.
     * If not found any Fragment, return null
     * @param {number} position
     * @param {LevelType} levelType
     * @returns {Fragment|null}
     */},

{
key:'getBufferedFrag',
value:function getBufferedFrag(position,levelType){
var fragments=this.fragments;
var bufferedFrags=Object.keys(fragments).filter(function(key){
var fragmentEntity=fragments[key];
if(fragmentEntity.body.type!==levelType){
return false;
}

if(!fragmentEntity.buffered){
return false;
}

var frag=fragmentEntity.body;
return frag.startPTS<=position&&position<=frag.endPTS;
});
if(bufferedFrags.length===0){
return null;
}else{
// https://github.com/video-dev/hls.js/pull/1545#discussion_r166229566
var bufferedFragKey=bufferedFrags.pop();
return fragments[bufferedFragKey].body;
}
}

/**
     * Partial fragments effected by coded frame eviction will be removed
     * The browser will unload parts of the buffer to free up memory for new buffer data
     * Fragments will need to be reloaded when the buffer is freed up, removing partial fragments will allow them to reload(since there might be parts that are still playable)
     * @param {String} elementaryStream The elementaryStream of media this is (eg. video/audio)
     * @param {TimeRanges} timeRange TimeRange object from a sourceBuffer
     */},

{
key:'detectEvictedFragments',
value:function detectEvictedFragments(elementaryStream,timeRange){
var _this2=this;

var fragmentTimes=void 0,
time=void 0;
// Check if any flagged fragments have been unloaded
Object.keys(this.fragments).forEach(function(key){
var fragmentEntity=_this2.fragments[key];
if(fragmentEntity.buffered===true){
var esData=fragmentEntity.range[elementaryStream];
if(esData){
fragmentTimes=esData.time;
for(var i=0;i<fragmentTimes.length;i++){
time=fragmentTimes[i];

if(_this2.isTimeBuffered(time.startPTS,time.endPTS,timeRange)===false){
// Unregister partial fragment as it needs to load again to be reused
_this2.removeFragment(fragmentEntity.body);
break;
}
}
}
}
});
}

/**
     * Checks if the fragment passed in is loaded in the buffer properly
     * Partially loaded fragments will be registered as a partial fragment
     * @param {Object} fragment Check the fragment against all sourceBuffers loaded
     */},

{
key:'detectPartialFragments',
value:function detectPartialFragments(fragment){
var _this3=this;

var fragKey=this.getFragmentKey(fragment);
var fragmentEntity=this.fragments[fragKey];
if(fragmentEntity){
fragmentEntity.buffered=true;

Object.keys(this.timeRanges).forEach(function(elementaryStream){
if(fragment.hasElementaryStream(elementaryStream)){
var timeRange=_this3.timeRanges[elementaryStream];
// Check for malformed fragments
// Gaps need to be calculated for each elementaryStream
fragmentEntity.range[elementaryStream]=_this3.getBufferedTimes(fragment.startPTS,fragment.endPTS,timeRange);
}
});
}
}},
{
key:'getBufferedTimes',
value:function getBufferedTimes(startPTS,endPTS,timeRange){
var fragmentTimes=[];
var startTime=void 0,
endTime=void 0;
var fragmentPartial=false;
for(var i=0;i<timeRange.length;i++){
startTime=timeRange.start(i)-this.bufferPadding;
endTime=timeRange.end(i)+this.bufferPadding;
if(startPTS>=startTime&&endPTS<=endTime){
// Fragment is entirely contained in buffer
// No need to check the other timeRange times since it's completely playable
fragmentTimes.push({
startPTS:Math.max(startPTS,timeRange.start(i)),
endPTS:Math.min(endPTS,timeRange.end(i))});

break;
}else if(startPTS<endTime&&endPTS>startTime){
// Check for intersection with buffer
// Get playable sections of the fragment
fragmentTimes.push({
startPTS:Math.max(startPTS,timeRange.start(i)),
endPTS:Math.min(endPTS,timeRange.end(i))});

fragmentPartial=true;
}else if(endPTS<=startTime){
// No need to check the rest of the timeRange as it is in order
break;
}
}

return{
time:fragmentTimes,
partial:fragmentPartial};

}},
{
key:'getFragmentKey',
value:function getFragmentKey(fragment){
return fragment.type+'_'+fragment.level+'_'+fragment.urlId+'_'+fragment.sn;
}

/**
     * Gets the partial fragment for a certain time
     * @param {Number} time
     * @returns {Object} fragment Returns a partial fragment at a time or null if there is no partial fragment
     */},

{
key:'getPartialFragment',
value:function getPartialFragment(time){
var _this4=this;

var timePadding=void 0,
startTime=void 0,
endTime=void 0;
var bestFragment=null;
var bestOverlap=0;
Object.keys(this.fragments).forEach(function(key){
var fragmentEntity=_this4.fragments[key];
if(_this4.isPartial(fragmentEntity)){
startTime=fragmentEntity.body.startPTS-_this4.bufferPadding;
endTime=fragmentEntity.body.endPTS+_this4.bufferPadding;
if(time>=startTime&&time<=endTime){
// Use the fragment that has the most padding from start and end time
timePadding=Math.min(time-startTime,endTime-time);
if(bestOverlap<=timePadding){
bestFragment=fragmentEntity.body;
bestOverlap=timePadding;
}
}
}
});
return bestFragment;
}

/**
     * @param {Object} fragment The fragment to check
     * @returns {String} Returns the fragment state when a fragment never loaded or if it partially loaded
     */},

{
key:'getState',
value:function getState(fragment){
var fragKey=this.getFragmentKey(fragment);
var fragmentEntity=this.fragments[fragKey];
var state=FragmentState.NOT_LOADED;

if(fragmentEntity!==undefined){
if(!fragmentEntity.buffered){
state=FragmentState.APPENDING;
}else if(this.isPartial(fragmentEntity)===true){
state=FragmentState.PARTIAL;
}else{
state=FragmentState.OK;
}
}

return state;
}},
{
key:'isPartial',
value:function isPartial(fragmentEntity){
return fragmentEntity.buffered===true&&(fragmentEntity.range.video!==undefined&&fragmentEntity.range.video.partial===true||fragmentEntity.range.audio!==undefined&&fragmentEntity.range.audio.partial===true);
}},
{
key:'isTimeBuffered',
value:function isTimeBuffered(startPTS,endPTS,timeRange){
var startTime=void 0,
endTime=void 0;
for(var i=0;i<timeRange.length;i++){
startTime=timeRange.start(i)-this.bufferPadding;
endTime=timeRange.end(i)+this.bufferPadding;
if(startPTS>=startTime&&endPTS<=endTime){
return true;
}

if(endPTS<=startTime){
// No need to check the rest of the timeRange as it is in order
return false;
}
}

return false;
}

/**
     * Fires when a fragment loading is completed
     */},

{
key:'onFragLoaded',
value:function onFragLoaded(e){
var fragment=e.frag;
// don't track initsegment (for which sn is not a number)
// don't track frags used for bitrateTest, they're irrelevant.
if(!Number.isFinite(fragment.sn)||fragment.bitrateTest){
return;
}

this.fragments[this.getFragmentKey(fragment)]={
body:fragment,
range:Object.create(null),
buffered:false};

}

/**
     * Fires when the buffer is updated
     */},

{
key:'onBufferAppended',
value:function onBufferAppended(e){
var _this5=this;

// Store the latest timeRanges loaded in the buffer
this.timeRanges=e.timeRanges;
Object.keys(this.timeRanges).forEach(function(elementaryStream){
var timeRange=_this5.timeRanges[elementaryStream];
_this5.detectEvictedFragments(elementaryStream,timeRange);
});
}

/**
     * Fires after a fragment has been loaded into the source buffer
     */},

{
key:'onFragBuffered',
value:function onFragBuffered(e){
this.detectPartialFragments(e.frag);
}

/**
     * Return true if fragment tracker has the fragment.
     * @param {Object} fragment
     * @returns {boolean}
     */},

{
key:'hasFragment',
value:function hasFragment(fragment){
var fragKey=this.getFragmentKey(fragment);
return this.fragments[fragKey]!==undefined;
}

/**
     * Remove a fragment from fragment tracker until it is loaded again
     * @param {Object} fragment The fragment to remove
     */},

{
key:'removeFragment',
value:function removeFragment(fragment){
var fragKey=this.getFragmentKey(fragment);
delete this.fragments[fragKey];
}

/**
     * Remove all fragments from fragment tracker.
     */},

{
key:'removeAllFragments',
value:function removeAllFragments(){
this.fragments=Object.create(null);
}}]);


return FragmentTracker;
}(_eventHandler2.default);

/***/},
/* 7 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.addGroupId=addGroupId;
exports.updatePTS=updatePTS;
exports.updateFragPTSDTS=updateFragPTSDTS;
exports.mergeDetails=mergeDetails;
exports.mergeSubtitlePlaylists=mergeSubtitlePlaylists;
exports.mapFragmentIntersection=mapFragmentIntersection;
exports.adjustSliding=adjustSliding;
exports.computeReloadInterval=computeReloadInterval;

var _logger=__webpack_require__(0);

function addGroupId(level,type,id){
switch(type){
case'audio':
if(!level.audioGroupIds){
level.audioGroupIds=[];
}
level.audioGroupIds.push(id);
break;
case'text':
if(!level.textGroupIds){
level.textGroupIds=[];
}
level.textGroupIds.push(id);
break;}

}/**
   * @module LevelHelper
   *
   * Providing methods dealing with playlist sliding and drift
   *
   * TODO: Create an actual `Level` class/model that deals with all this logic in an object-oriented-manner.
   *
   * */

function updatePTS(fragments,fromIdx,toIdx){
var fragFrom=fragments[fromIdx],
fragTo=fragments[toIdx],
fragToPTS=fragTo.startPTS;
// if we know startPTS[toIdx]
if(Number.isFinite(fragToPTS)){
// update fragment duration.
// it helps to fix drifts between playlist reported duration and fragment real duration
if(toIdx>fromIdx){
fragFrom.duration=fragToPTS-fragFrom.start;
if(fragFrom.duration<0){
_logger.logger.warn('negative duration computed for frag '+fragFrom.sn+',level '+fragFrom.level+', there should be some duration drift between playlist and fragment!');
}
}else{
fragTo.duration=fragFrom.start-fragToPTS;
if(fragTo.duration<0){
_logger.logger.warn('negative duration computed for frag '+fragTo.sn+',level '+fragTo.level+', there should be some duration drift between playlist and fragment!');
}
}
}else{
// we dont know startPTS[toIdx]
if(toIdx>fromIdx){
fragTo.start=fragFrom.start+fragFrom.duration;
}else{
fragTo.start=Math.max(fragFrom.start-fragTo.duration,0);
}
}
}

function updateFragPTSDTS(details,frag,startPTS,endPTS,startDTS,endDTS){
// update frag PTS/DTS
var maxStartPTS=startPTS;
if(Number.isFinite(frag.startPTS)){
// delta PTS between audio and video
var deltaPTS=Math.abs(frag.startPTS-startPTS);
if(!Number.isFinite(frag.deltaPTS)){
frag.deltaPTS=deltaPTS;
}else{
frag.deltaPTS=Math.max(deltaPTS,frag.deltaPTS);
}

maxStartPTS=Math.max(startPTS,frag.startPTS);
startPTS=Math.min(startPTS,frag.startPTS);
endPTS=Math.max(endPTS,frag.endPTS);
startDTS=Math.min(startDTS,frag.startDTS);
endDTS=Math.max(endDTS,frag.endDTS);
}

var drift=startPTS-frag.start;
frag.start=frag.startPTS=startPTS;
frag.maxStartPTS=maxStartPTS;
frag.endPTS=endPTS;
frag.startDTS=startDTS;
frag.endDTS=endDTS;
frag.duration=endPTS-startPTS;

var sn=frag.sn;
// exit if sn out of range
if(!details||sn<details.startSN||sn>details.endSN){
return 0;
}

var fragIdx=void 0,
fragments=void 0,
i=void 0;
fragIdx=sn-details.startSN;
fragments=details.fragments;
// update frag reference in fragments array
// rationale is that fragments array might not contain this frag object.
// this will happen if playlist has been refreshed between frag loading and call to updateFragPTSDTS()
// if we don't update frag, we won't be able to propagate PTS info on the playlist
// resulting in invalid sliding computation
fragments[fragIdx]=frag;
// adjust fragment PTS/duration from seqnum-1 to frag 0
for(i=fragIdx;i>0;i--){
updatePTS(fragments,i,i-1);
}

// adjust fragment PTS/duration from seqnum to last frag
for(i=fragIdx;i<fragments.length-1;i++){
updatePTS(fragments,i,i+1);
}

details.PTSKnown=true;
return drift;
}

function mergeDetails(oldDetails,newDetails){
// potentially retrieve cached initsegment
if(newDetails.initSegment&&oldDetails.initSegment){
newDetails.initSegment=oldDetails.initSegment;
}

// check if old/new playlists have fragments in common
// loop through overlapping SN and update startPTS , cc, and duration if any found
var ccOffset=0;
var PTSFrag=void 0;
mapFragmentIntersection(oldDetails,newDetails,function(oldFrag,newFrag){
ccOffset=oldFrag.cc-newFrag.cc;
if(Number.isFinite(oldFrag.startPTS)){
newFrag.start=newFrag.startPTS=oldFrag.startPTS;
newFrag.endPTS=oldFrag.endPTS;
newFrag.duration=oldFrag.duration;
newFrag.backtracked=oldFrag.backtracked;
newFrag.dropped=oldFrag.dropped;
PTSFrag=newFrag;
}
// PTS is known when there are overlapping segments
newDetails.PTSKnown=true;
});

if(!newDetails.PTSKnown){
return;
}

if(ccOffset){
_logger.logger.log('discontinuity sliding from playlist, take drift into account');
var newFragments=newDetails.fragments;
for(var i=0;i<newFragments.length;i++){
newFragments[i].cc+=ccOffset;
}
}

// if at least one fragment contains PTS info, recompute PTS information for all fragments
if(PTSFrag){
updateFragPTSDTS(newDetails,PTSFrag,PTSFrag.startPTS,PTSFrag.endPTS,PTSFrag.startDTS,PTSFrag.endDTS);
}else{
// ensure that delta is within oldFragments range
// also adjust sliding in case delta is 0 (we could have old=[50-60] and new=old=[50-61])
// in that case we also need to adjust start offset of all fragments
adjustSliding(oldDetails,newDetails);
}
// if we are here, it means we have fragments overlapping between
// old and new level. reliable PTS info is thus relying on old level
newDetails.PTSKnown=oldDetails.PTSKnown;
}

function mergeSubtitlePlaylists(oldPlaylist,newPlaylist){
var referenceStart=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;

var lastIndex=-1;
mapFragmentIntersection(oldPlaylist,newPlaylist,function(oldFrag,newFrag,index){
newFrag.start=oldFrag.start;
lastIndex=index;
});

var frags=newPlaylist.fragments;
if(lastIndex<0){
frags.forEach(function(frag){
frag.start+=referenceStart;
});
return;
}

for(var i=lastIndex+1;i<frags.length;i++){
frags[i].start=frags[i-1].start+frags[i-1].duration;
}
}

function mapFragmentIntersection(oldPlaylist,newPlaylist,intersectionFn){
if(!oldPlaylist||!newPlaylist){
return;
}

var start=Math.max(oldPlaylist.startSN,newPlaylist.startSN)-newPlaylist.startSN;
var end=Math.min(oldPlaylist.endSN,newPlaylist.endSN)-newPlaylist.startSN;
var delta=newPlaylist.startSN-oldPlaylist.startSN;

for(var i=start;i<=end;i++){
var oldFrag=oldPlaylist.fragments[delta+i];
var newFrag=newPlaylist.fragments[i];
if(!oldFrag||!newFrag){
break;
}
intersectionFn(oldFrag,newFrag,i);
}
}

function adjustSliding(oldPlaylist,newPlaylist){
var delta=newPlaylist.startSN-oldPlaylist.startSN;
var oldFragments=oldPlaylist.fragments;
var newFragments=newPlaylist.fragments;

if(delta<0||delta>oldFragments.length){
return;
}
for(var i=0;i<newFragments.length;i++){
newFragments[i].start+=oldFragments[delta].start;
}
}

function computeReloadInterval(currentPlaylist,newPlaylist,lastRequestTime){
var reloadInterval=1000*(newPlaylist.averagetargetduration?newPlaylist.averagetargetduration:newPlaylist.targetduration);
var minReloadInterval=reloadInterval/2;
if(currentPlaylist&&newPlaylist.endSN===currentPlaylist.endSN){
// follow HLS Spec, If the client reloads a Playlist file and finds that it has not
// changed then it MUST wait for a period of one-half the target
// duration before retrying.
reloadInterval=minReloadInterval;
}

if(lastRequestTime){
reloadInterval=Math.max(minReloadInterval,reloadInterval-(window.performance.now()-lastRequestTime));
}
// in any case, don't reload more than half of target duration
return Math.round(reloadInterval);
}

/***/},
/* 8 */
/***/function(module,exports,__webpack_require__){

// see https://tools.ietf.org/html/rfc1808

(function(root){
var URL_REGEX=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/;
var FIRST_SEGMENT_REGEX=/^([^\/?#]*)(.*)$/;
var SLASH_DOT_REGEX=/(?:\/|^)\.(?=\/)/g;
var SLASH_DOT_DOT_REGEX=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;

var URLToolkit={
// If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //
// E.g
// With opts.alwaysNormalize = false (default, spec compliant)
// http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g
// With opts.alwaysNormalize = true (not spec compliant)
// http://a.com/b/cd + /e/f/../g => http://a.com/e/g
buildAbsoluteURL:function buildAbsoluteURL(baseURL,relativeURL,opts){
opts=opts||{};
// remove any remaining space and CRLF
baseURL=baseURL.trim();
relativeURL=relativeURL.trim();
if(!relativeURL){
// 2a) If the embedded URL is entirely empty, it inherits the
// entire base URL (i.e., is set equal to the base URL)
// and we are done.
if(!opts.alwaysNormalize){
return baseURL;
}
var basePartsForNormalise=URLToolkit.parseURL(baseURL);
if(!basePartsForNormalise){
throw new Error('Error trying to parse base URL.');
}
basePartsForNormalise.path=URLToolkit.normalizePath(
basePartsForNormalise.path);

return URLToolkit.buildURLFromParts(basePartsForNormalise);
}
var relativeParts=URLToolkit.parseURL(relativeURL);
if(!relativeParts){
throw new Error('Error trying to parse relative URL.');
}
if(relativeParts.scheme){
// 2b) If the embedded URL starts with a scheme name, it is
// interpreted as an absolute URL and we are done.
if(!opts.alwaysNormalize){
return relativeURL;
}
relativeParts.path=URLToolkit.normalizePath(relativeParts.path);
return URLToolkit.buildURLFromParts(relativeParts);
}
var baseParts=URLToolkit.parseURL(baseURL);
if(!baseParts){
throw new Error('Error trying to parse base URL.');
}
if(!baseParts.netLoc&&baseParts.path&&baseParts.path[0]!=='/'){
// If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc
// This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'
var pathParts=FIRST_SEGMENT_REGEX.exec(baseParts.path);
baseParts.netLoc=pathParts[1];
baseParts.path=pathParts[2];
}
if(baseParts.netLoc&&!baseParts.path){
baseParts.path='/';
}
var builtParts={
// 2c) Otherwise, the embedded URL inherits the scheme of
// the base URL.
scheme:baseParts.scheme,
netLoc:relativeParts.netLoc,
path:null,
params:relativeParts.params,
query:relativeParts.query,
fragment:relativeParts.fragment};

if(!relativeParts.netLoc){
// 3) If the embedded URL's <net_loc> is non-empty, we skip to
// Step 7.  Otherwise, the embedded URL inherits the <net_loc>
// (if any) of the base URL.
builtParts.netLoc=baseParts.netLoc;
// 4) If the embedded URL path is preceded by a slash "/", the
// path is not relative and we skip to Step 7.
if(relativeParts.path[0]!=='/'){
if(!relativeParts.path){
// 5) If the embedded URL path is empty (and not preceded by a
// slash), then the embedded URL inherits the base URL path
builtParts.path=baseParts.path;
// 5a) if the embedded URL's <params> is non-empty, we skip to
// step 7; otherwise, it inherits the <params> of the base
// URL (if any) and
if(!relativeParts.params){
builtParts.params=baseParts.params;
// 5b) if the embedded URL's <query> is non-empty, we skip to
// step 7; otherwise, it inherits the <query> of the base
// URL (if any) and we skip to step 7.
if(!relativeParts.query){
builtParts.query=baseParts.query;
}
}
}else{
// 6) The last segment of the base URL's path (anything
// following the rightmost slash "/", or the entire path if no
// slash is present) is removed and the embedded URL's path is
// appended in its place.
var baseURLPath=baseParts.path;
var newPath=
baseURLPath.substring(0,baseURLPath.lastIndexOf('/')+1)+
relativeParts.path;
builtParts.path=URLToolkit.normalizePath(newPath);
}
}
}
if(builtParts.path===null){
builtParts.path=opts.alwaysNormalize?
URLToolkit.normalizePath(relativeParts.path):
relativeParts.path;
}
return URLToolkit.buildURLFromParts(builtParts);
},
parseURL:function parseURL(url){
var parts=URL_REGEX.exec(url);
if(!parts){
return null;
}
return{
scheme:parts[1]||'',
netLoc:parts[2]||'',
path:parts[3]||'',
params:parts[4]||'',
query:parts[5]||'',
fragment:parts[6]||''};

},
normalizePath:function normalizePath(path){
// The following operations are
// then applied, in order, to the new path:
// 6a) All occurrences of "./", where "." is a complete path
// segment, are removed.
// 6b) If the path ends with "." as a complete path segment,
// that "." is removed.
path=path.split('').reverse().join('').replace(SLASH_DOT_REGEX,'');
// 6c) All occurrences of "<segment>/../", where <segment> is a
// complete path segment not equal to "..", are removed.
// Removal of these path segments is performed iteratively,
// removing the leftmost matching pattern on each iteration,
// until no matching pattern remains.
// 6d) If the path ends with "<segment>/..", where <segment> is a
// complete path segment not equal to "..", that
// "<segment>/.." is removed.
while(
path.length!==(path=path.replace(SLASH_DOT_DOT_REGEX,'')).length)
{}
return path.split('').reverse().join('');
},
buildURLFromParts:function buildURLFromParts(parts){
return(
parts.scheme+
parts.netLoc+
parts.path+
parts.params+
parts.query+
parts.fragment);

}};


if(true)
module.exports=URLToolkit;else
{}
})(this);


/***/},
/* 9 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

var BinarySearch={
/**
     * Searches for an item in an array which matches a certain condition.
     * This requires the condition to only match one item in the array,
     * and for the array to be ordered.
     *
     * @param {Array} list The array to search.
     * @param {Function} comparisonFunction
     *      Called and provided a candidate item as the first argument.
     *      Should return:
     *          > -1 if the item should be located at a lower index than the provided item.
     *          > 1 if the item should be located at a higher index than the provided item.
     *          > 0 if the item is the item you're looking for.
     *
     * @return {*} The object if it is found or null otherwise.
     */
search:function search(list,comparisonFunction){
var minIndex=0;
var maxIndex=list.length-1;
var currentIndex=null;
var currentElement=null;

while(minIndex<=maxIndex){
currentIndex=(minIndex+maxIndex)/2|0;
currentElement=list[currentIndex];

var comparisonResult=comparisonFunction(currentElement);
if(comparisonResult>0){
minIndex=currentIndex+1;
}else if(comparisonResult<0){
maxIndex=currentIndex-1;
}else{
return currentElement;
}
}

return null;
}};


exports.default=BinarySearch;
module.exports=exports["default"];

/***/},
/* 10 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

/**
 * ID3 parser
 */
var ID3=function(){
function ID3(){
_classCallCheck(this,ID3);
}

_createClass(ID3,null,[{
key:'isHeader',

/**
     * Returns true if an ID3 header can be found at offset in data
     * @param {Uint8Array} data - The data to search in
     * @param {number} offset - The offset at which to start searching
     * @return {boolean} - True if an ID3 header is found
     */
value:function isHeader(data,offset){
/*
      * http://id3.org/id3v2.3.0
      * [0]     = 'I'
      * [1]     = 'D'
      * [2]     = '3'
      * [3,4]   = {Version}
      * [5]     = {Flags}
      * [6-9]   = {ID3 Size}
      *
      * An ID3v2 tag can be detected with the following pattern:
      *  $49 44 33 yy yy xx zz zz zz zz
      * Where yy is less than $FF, xx is the 'flags' byte and zz is less than $80
      */
if(offset+10<=data.length){
// look for 'ID3' identifier
if(data[offset]===0x49&&data[offset+1]===0x44&&data[offset+2]===0x33){
// check version is within range
if(data[offset+3]<0xFF&&data[offset+4]<0xFF){
// check size is within range
if(data[offset+6]<0x80&&data[offset+7]<0x80&&data[offset+8]<0x80&&data[offset+9]<0x80){
return true;
}
}
}
}

return false;
}

/**
     * Returns true if an ID3 footer can be found at offset in data
     * @param {Uint8Array} data - The data to search in
     * @param {number} offset - The offset at which to start searching
     * @return {boolean} - True if an ID3 footer is found
     */},

{
key:'isFooter',
value:function isFooter(data,offset){
/*
      * The footer is a copy of the header, but with a different identifier
      */
if(offset+10<=data.length){
// look for '3DI' identifier
if(data[offset]===0x33&&data[offset+1]===0x44&&data[offset+2]===0x49){
// check version is within range
if(data[offset+3]<0xFF&&data[offset+4]<0xFF){
// check size is within range
if(data[offset+6]<0x80&&data[offset+7]<0x80&&data[offset+8]<0x80&&data[offset+9]<0x80){
return true;
}
}
}
}

return false;
}

/**
     * Returns any adjacent ID3 tags found in data starting at offset, as one block of data
     * @param {Uint8Array} data - The data to search in
     * @param {number} offset - The offset at which to start searching
     * @return {Uint8Array} - The block of data containing any ID3 tags found
     */},

{
key:'getID3Data',
value:function getID3Data(data,offset){
var front=offset;
var length=0;

while(ID3.isHeader(data,offset)){
// ID3 header is 10 bytes
length+=10;

var size=ID3._readSize(data,offset+6);
length+=size;

if(ID3.isFooter(data,offset+10)){
// ID3 footer is 10 bytes
length+=10;
}

offset+=length;
}

if(length>0){
return data.subarray(front,front+length);
}

return undefined;
}},
{
key:'_readSize',
value:function _readSize(data,offset){
var size=0;
size=(data[offset]&0x7f)<<21;
size|=(data[offset+1]&0x7f)<<14;
size|=(data[offset+2]&0x7f)<<7;
size|=data[offset+3]&0x7f;
return size;
}

/**
     * Searches for the Elementary Stream timestamp found in the ID3 data chunk
     * @param {Uint8Array} data - Block of data containing one or more ID3 tags
     * @return {number} - The timestamp
     */},

{
key:'getTimeStamp',
value:function getTimeStamp(data){
var frames=ID3.getID3Frames(data);
for(var i=0;i<frames.length;i++){
var frame=frames[i];
if(ID3.isTimeStampFrame(frame)){
return ID3._readTimeStamp(frame);
}
}

return undefined;
}

/**
     * Returns true if the ID3 frame is an Elementary Stream timestamp frame
     * @param {ID3 frame} frame
     */},

{
key:'isTimeStampFrame',
value:function isTimeStampFrame(frame){
return frame&&frame.key==='PRIV'&&frame.info==='com.apple.streaming.transportStreamTimestamp';
}},
{
key:'_getFrameData',
value:function _getFrameData(data){
/*
      Frame ID       $xx xx xx xx (four characters)
      Size           $xx xx xx xx
      Flags          $xx xx
      */
var type=String.fromCharCode(data[0],data[1],data[2],data[3]);
var size=ID3._readSize(data,4);

// skip frame id, size, and flags
var offset=10;

return{type:type,size:size,data:data.subarray(offset,offset+size)};
}

/**
     * Returns an array of ID3 frames found in all the ID3 tags in the id3Data
     * @param {Uint8Array} id3Data - The ID3 data containing one or more ID3 tags
     * @return {ID3 frame[]} - Array of ID3 frame objects
     */},

{
key:'getID3Frames',
value:function getID3Frames(id3Data){
var offset=0;
var frames=[];

while(ID3.isHeader(id3Data,offset)){
var size=ID3._readSize(id3Data,offset+6);
// skip past ID3 header
offset+=10;
var end=offset+size;
// loop through frames in the ID3 tag
while(offset+8<end){
var frameData=ID3._getFrameData(id3Data.subarray(offset));
var frame=ID3._decodeFrame(frameData);
if(frame){
frames.push(frame);
}

// skip frame header and frame data
offset+=frameData.size+10;
}

if(ID3.isFooter(id3Data,offset)){
offset+=10;
}
}

return frames;
}},
{
key:'_decodeFrame',
value:function _decodeFrame(frame){
if(frame.type==='PRIV'){
return ID3._decodePrivFrame(frame);
}else if(frame.type[0]==='T'){
return ID3._decodeTextFrame(frame);
}else if(frame.type[0]==='W'){
return ID3._decodeURLFrame(frame);
}

return undefined;
}},
{
key:'_readTimeStamp',
value:function _readTimeStamp(timeStampFrame){
if(timeStampFrame.data.byteLength===8){
var data=new Uint8Array(timeStampFrame.data);
// timestamp is 33 bit expressed as a big-endian eight-octet number,
// with the upper 31 bits set to zero.
var pts33Bit=data[3]&0x1;
var timestamp=(data[4]<<23)+(data[5]<<15)+(data[6]<<7)+data[7];
timestamp/=45;

if(pts33Bit){
timestamp+=47721858.84;
}// 2^32 / 90

return Math.round(timestamp);
}

return undefined;
}},
{
key:'_decodePrivFrame',
value:function _decodePrivFrame(frame){
/*
      Format: <text string>\0<binary data>
      */
if(frame.size<2){
return undefined;
}

var owner=ID3._utf8ArrayToStr(frame.data,true);
var privateData=new Uint8Array(frame.data.subarray(owner.length+1));

return{key:frame.type,info:owner,data:privateData.buffer};
}},
{
key:'_decodeTextFrame',
value:function _decodeTextFrame(frame){
if(frame.size<2){
return undefined;
}

if(frame.type==='TXXX'){
/*
        Format:
        [0]   = {Text Encoding}
        [1-?] = {Description}\0{Value}
        */
var index=1;
var description=ID3._utf8ArrayToStr(frame.data.subarray(index));

index+=description.length+1;
var value=ID3._utf8ArrayToStr(frame.data.subarray(index));

return{key:frame.type,info:description,data:value};
}else{
/*
        Format:
        [0]   = {Text Encoding}
        [1-?] = {Value}
        */
var text=ID3._utf8ArrayToStr(frame.data.subarray(1));
return{key:frame.type,data:text};
}
}},
{
key:'_decodeURLFrame',
value:function _decodeURLFrame(frame){
if(frame.type==='WXXX'){
/*
        Format:
        [0]   = {Text Encoding}
        [1-?] = {Description}\0{URL}
        */
if(frame.size<2){
return undefined;
}

var index=1;
var description=ID3._utf8ArrayToStr(frame.data.subarray(index));

index+=description.length+1;
var value=ID3._utf8ArrayToStr(frame.data.subarray(index));

return{key:frame.type,info:description,data:value};
}else{
/*
        Format:
        [0-?] = {URL}
        */
var url=ID3._utf8ArrayToStr(frame.data);
return{key:frame.type,data:url};
}
}

// http://stackoverflow.com/questions/8936984/uint8array-to-string-in-javascript/22373197
// http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt
/* utf.js - UTF-8 <=> UTF-16 convertion
     *
     * Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>
     * Version: 1.0
     * LastModified: Dec 25 1999
     * This library is free.  You can redistribute it and/or modify it.
     */},

{
key:'_utf8ArrayToStr',
value:function _utf8ArrayToStr(array){
var exitOnNull=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;

var len=array.length;
var c=void 0;
var char2=void 0;
var char3=void 0;
var out='';
var i=0;
while(i<len){
c=array[i++];
if(c===0x00&&exitOnNull){
return out;
}else if(c===0x00||c===0x03){
// If the character is 3 (END_OF_TEXT) or 0 (NULL) then skip it
continue;
}
switch(c>>4){
case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:
// 0xxxxxxx
out+=String.fromCharCode(c);
break;
case 12:case 13:
// 110x xxxx   10xx xxxx
char2=array[i++];
out+=String.fromCharCode((c&0x1F)<<6|char2&0x3F);
break;
case 14:
// 1110 xxxx  10xx xxxx  10xx xxxx
char2=array[i++];
char3=array[i++];
out+=String.fromCharCode((c&0x0F)<<12|(char2&0x3F)<<6|(char3&0x3F)<<0);
break;
default:}

}
return out;
}}]);


return ID3;
}();

var utf8ArrayToStr=ID3._utf8ArrayToStr;

exports.default=ID3;
exports.utf8ArrayToStr=utf8ArrayToStr;

/***/},
/* 11 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _urlToolkit=__webpack_require__(8);

var URLToolkit=_interopRequireWildcard(_urlToolkit);

var _levelKey=__webpack_require__(17);

var _levelKey2=_interopRequireDefault(_levelKey);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var Fragment=function(){
function Fragment(){
var _elementaryStreams;

_classCallCheck(this,Fragment);

this._url=null;
this._byteRange=null;
this._decryptdata=null;
this.tagList=[];
this.programDateTime=null;
this.rawProgramDateTime=null;

// Holds the types of data this fragment supports
this._elementaryStreams=(_elementaryStreams={},_defineProperty(_elementaryStreams,Fragment.ElementaryStreamTypes.AUDIO,false),_defineProperty(_elementaryStreams,Fragment.ElementaryStreamTypes.VIDEO,false),_elementaryStreams);
}

/**
   * `type` property for this._elementaryStreams
   *
   * @enum
   */


_createClass(Fragment,[{
key:'addElementaryStream',


/**
     * @param {ElementaryStreamType} type
     */
value:function addElementaryStream(type){
this._elementaryStreams[type]=true;
}

/**
     * @param {ElementaryStreamType} type
     */},

{
key:'hasElementaryStream',
value:function hasElementaryStream(type){
return this._elementaryStreams[type]===true;
}

/**
     * Utility method for parseLevelPlaylist to create an initialization vector for a given segment
     * @returns {Uint8Array}
     */},

{
key:'createInitializationVector',
value:function createInitializationVector(segmentNumber){
var uint8View=new Uint8Array(16);

for(var i=12;i<16;i++){
uint8View[i]=segmentNumber>>8*(15-i)&0xff;
}

return uint8View;
}

/**
     * Utility method for parseLevelPlaylist to get a fragment's decryption data from the currently parsed encryption key data
     * @param levelkey - a playlist's encryption info
     * @param segmentNumber - the fragment's segment number
     * @returns {*} - an object to be applied as a fragment's decryptdata
     */},

{
key:'fragmentDecryptdataFromLevelkey',
value:function fragmentDecryptdataFromLevelkey(levelkey,segmentNumber){
var decryptdata=levelkey;

if(levelkey&&levelkey.method&&levelkey.uri&&!levelkey.iv){
decryptdata=new _levelKey2.default();
decryptdata.method=levelkey.method;
decryptdata.baseuri=levelkey.baseuri;
decryptdata.reluri=levelkey.reluri;
decryptdata.iv=this.createInitializationVector(segmentNumber);
}

return decryptdata;
}},
{
key:'url',
get:function get(){
if(!this._url&&this.relurl){
this._url=URLToolkit.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:true});
}

return this._url;
},
set:function set(value){
this._url=value;
}},
{
key:'byteRange',
get:function get(){
if(!this._byteRange&&!this.rawByteRange){
return[];
}

if(this._byteRange){
return this._byteRange;
}

var byteRange=[];
if(this.rawByteRange){
var params=this.rawByteRange.split('@',2);
if(params.length===1){
var lastByteRangeEndOffset=this.lastByteRangeEndOffset;
byteRange[0]=lastByteRangeEndOffset||0;
}else{
byteRange[0]=parseInt(params[1]);
}
byteRange[1]=parseInt(params[0])+byteRange[0];
this._byteRange=byteRange;
}
return byteRange;
}

/**
     * @type {number}
     */},

{
key:'byteRangeStartOffset',
get:function get(){
return this.byteRange[0];
}},
{
key:'byteRangeEndOffset',
get:function get(){
return this.byteRange[1];
}},
{
key:'decryptdata',
get:function get(){
if(!this._decryptdata){
this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn);
}

return this._decryptdata;
}},
{
key:'endProgramDateTime',
get:function get(){
if(!Number.isFinite(this.programDateTime)){
return null;
}

var duration=!Number.isFinite(this.duration)?0:this.duration;

return this.programDateTime+duration*1000;
}},
{
key:'encrypted',
get:function get(){
return!!(this.decryptdata&&this.decryptdata.uri!==null&&this.decryptdata.key===null);
}}],
[{
key:'ElementaryStreamTypes',
get:function get(){
return{
AUDIO:'audio',
VIDEO:'video'};

}}]);


return Fragment;
}();

exports.default=Fragment;
module.exports=exports['default'];

/***/},
/* 12 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _aesCrypto=__webpack_require__(42);

var _aesCrypto2=_interopRequireDefault(_aesCrypto);

var _fastAesKey=__webpack_require__(43);

var _fastAesKey2=_interopRequireDefault(_fastAesKey);

var _aesDecryptor=__webpack_require__(44);

var _aesDecryptor2=_interopRequireDefault(_aesDecryptor);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _getSelfScope=__webpack_require__(5);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

// see https://stackoverflow.com/a/11237259/589493
var global=(0,_getSelfScope.getSelfScope)();// safeguard for code that might run both on worker and main thread

var Decrypter=function(){
function Decrypter(observer,config){
var _ref=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},
_ref$removePKCS7Paddi=_ref.removePKCS7Padding,
removePKCS7Padding=_ref$removePKCS7Paddi===undefined?true:_ref$removePKCS7Paddi;

_classCallCheck(this,Decrypter);

this.logEnabled=true;
this.observer=observer;
this.config=config;
this.removePKCS7Padding=removePKCS7Padding;
// built in decryptor expects PKCS7 padding
if(removePKCS7Padding){
try{
var browserCrypto=global.crypto;
if(browserCrypto){
this.subtle=browserCrypto.subtle||browserCrypto.webkitSubtle;
}
}catch(e){}
}
this.disableWebCrypto=!this.subtle;
}

_createClass(Decrypter,[{
key:'isSync',
value:function isSync(){
return this.disableWebCrypto&&this.config.enableSoftwareAES;
}},
{
key:'decrypt',
value:function decrypt(data,key,iv,callback){
var _this=this;

if(this.disableWebCrypto&&this.config.enableSoftwareAES){
if(this.logEnabled){
_logger.logger.log('JS AES decrypt');
this.logEnabled=false;
}
var decryptor=this.decryptor;
if(!decryptor){
this.decryptor=decryptor=new _aesDecryptor2.default();
}

decryptor.expandKey(key);
callback(decryptor.decrypt(data,0,iv,this.removePKCS7Padding));
}else{
if(this.logEnabled){
_logger.logger.log('WebCrypto AES decrypt');
this.logEnabled=false;
}
var subtle=this.subtle;
if(this.key!==key){
this.key=key;
this.fastAesKey=new _fastAesKey2.default(subtle,key);
}

this.fastAesKey.expandKey().then(function(aesKey){
// decrypt using web crypto
var crypto=new _aesCrypto2.default(subtle,iv);
crypto.decrypt(data,aesKey).catch(function(err){
_this.onWebCryptoError(err,data,key,iv,callback);
}).then(function(result){
callback(result);
});
}).catch(function(err){
_this.onWebCryptoError(err,data,key,iv,callback);
});
}
}},
{
key:'onWebCryptoError',
value:function onWebCryptoError(err,data,key,iv,callback){
if(this.config.enableSoftwareAES){
_logger.logger.log('WebCrypto Error, disable WebCrypto API');
this.disableWebCrypto=true;
this.logEnabled=true;
this.decrypt(data,key,iv,callback);
}else{
_logger.logger.error('decrypting error : '+err.message);
this.observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:true,reason:err.message});
}
}},
{
key:'destroy',
value:function destroy(){
var decryptor=this.decryptor;
if(decryptor){
decryptor.destroy();
this.decryptor=undefined;
}
}}]);


return Decrypter;
}();

exports.default=Decrypter;
module.exports=exports['default'];

/***/},
/* 13 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.getMediaSource=getMediaSource;
/**
 * MediaSource helper
 */

function getMediaSource(){
if(typeof window!=='undefined'){
return window.MediaSource||window.WebKitMediaSource;
}
}

/***/},
/* 14 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.State=undefined;

var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _taskLoop=__webpack_require__(28);

var _taskLoop2=_interopRequireDefault(_taskLoop);

var _fragmentTracker=__webpack_require__(6);

var _bufferHelper=__webpack_require__(4);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var State=exports.State={
STOPPED:'STOPPED',
STARTING:'STARTING',
IDLE:'IDLE',
PAUSED:'PAUSED',
KEY_LOADING:'KEY_LOADING',
FRAG_LOADING:'FRAG_LOADING',
FRAG_LOADING_WAITING_RETRY:'FRAG_LOADING_WAITING_RETRY',
WAITING_TRACK:'WAITING_TRACK',
PARSING:'PARSING',
PARSED:'PARSED',
BUFFER_FLUSHING:'BUFFER_FLUSHING',
ENDED:'ENDED',
ERROR:'ERROR',
WAITING_INIT_PTS:'WAITING_INIT_PTS',
WAITING_LEVEL:'WAITING_LEVEL'};


var BaseStreamController=function(_TaskLoop){
_inherits(BaseStreamController,_TaskLoop);

function BaseStreamController(){
_classCallCheck(this,BaseStreamController);

return _possibleConstructorReturn(this,(BaseStreamController.__proto__||Object.getPrototypeOf(BaseStreamController)).apply(this,arguments));
}

_createClass(BaseStreamController,[{
key:'doTick',
value:function doTick(){}},
{
key:'startLoad',
value:function startLoad(){}},
{
key:'stopLoad',
value:function stopLoad(){
var frag=this.fragCurrent;
if(frag){
if(frag.loader){
frag.loader.abort();
}
this.fragmentTracker.removeFragment(frag);
}
if(this.demuxer){
this.demuxer.destroy();
this.demuxer=null;
}
this.fragCurrent=null;
this.fragPrevious=null;
this.clearInterval();
this.clearNextTick();
this.state=State.STOPPED;
}},
{
key:'_streamEnded',
value:function _streamEnded(bufferInfo,levelDetails){
var fragCurrent=this.fragCurrent,
fragmentTracker=this.fragmentTracker;
// we just got done loading the final fragment and there is no other buffered range after ...
// rationale is that in case there are any buffered ranges after, it means that there are unbuffered portion in between
// so we should not switch to ENDED in that case, to be able to buffer them
// dont switch to ENDED if we need to backtrack last fragment

if(!levelDetails.live&&fragCurrent&&!fragCurrent.backtracked&&fragCurrent.sn===levelDetails.endSN&&!bufferInfo.nextStart){
var fragState=fragmentTracker.getState(fragCurrent);
return fragState===_fragmentTracker.FragmentState.PARTIAL||fragState===_fragmentTracker.FragmentState.OK;
}
return false;
}},
{
key:'onMediaSeeking',
value:function onMediaSeeking(){
var config=this.config,
media=this.media,
mediaBuffer=this.mediaBuffer,
state=this.state;

var currentTime=media?media.currentTime:null;
var bufferInfo=_bufferHelper.BufferHelper.bufferInfo(mediaBuffer||media,currentTime,this.config.maxBufferHole);

if(Number.isFinite(currentTime)){
_logger.logger.log('media seeking to '+currentTime.toFixed(3));
}

if(state===State.FRAG_LOADING){
var fragCurrent=this.fragCurrent;
// check if we are seeking to a unbuffered area AND if frag loading is in progress
if(bufferInfo.len===0&&fragCurrent){
var tolerance=config.maxFragLookUpTolerance;
var fragStartOffset=fragCurrent.start-tolerance;
var fragEndOffset=fragCurrent.start+fragCurrent.duration+tolerance;
// check if we seek position will be out of currently loaded frag range : if out cancel frag load, if in, don't do anything
if(currentTime<fragStartOffset||currentTime>fragEndOffset){
if(fragCurrent.loader){
_logger.logger.log('seeking outside of buffer while fragment load in progress, cancel fragment load');
fragCurrent.loader.abort();
}
this.fragCurrent=null;
this.fragPrevious=null;
// switch to IDLE state to load new fragment
this.state=State.IDLE;
}else{
_logger.logger.log('seeking outside of buffer but within currently loaded fragment range');
}
}
}else if(state===State.ENDED){
// if seeking to unbuffered area, clean up fragPrevious
if(bufferInfo.len===0){
this.fragPrevious=null;
this.fragCurrent=null;
}

// switch to IDLE state to check for potential new fragment
this.state=State.IDLE;
}
if(media){
this.lastCurrentTime=currentTime;
}

// in case seeking occurs although no media buffered, adjust startPosition and nextLoadPosition to seek target
if(!this.loadedmetadata){
this.nextLoadPosition=this.startPosition=currentTime;
}

// tick to speed up processing
this.tick();
}},
{
key:'onMediaEnded',
value:function onMediaEnded(){
// reset startPosition and lastCurrentTime to restart playback @ stream beginning
this.startPosition=this.lastCurrentTime=0;
}},
{
key:'onHandlerDestroying',
value:function onHandlerDestroying(){
this.stopLoad();
_get(BaseStreamController.prototype.__proto__||Object.getPrototypeOf(BaseStreamController.prototype),'onHandlerDestroying',this).call(this);
}},
{
key:'onHandlerDestroyed',
value:function onHandlerDestroyed(){
this.state=State.STOPPED;
this.fragmentTracker=null;
}}]);


return BaseStreamController;
}(_taskLoop2.default);

exports.default=BaseStreamController;

/***/},
/* 15 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

var _mp4demuxer=__webpack_require__(16);

var _mp4demuxer2=_interopRequireDefault(_mp4demuxer);

var _m3u8Parser=__webpack_require__(35);

var _m3u8Parser2=_interopRequireDefault(_m3u8Parser);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * PlaylistLoader - delegate for media manifest/playlist loading tasks. Takes care of parsing media to internal data-models.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Once loaded, dispatches events with parsed data-models of manifest/levels/audio/subtitle tracks.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Uses loader(s) set in config to do actual internal loading of resource tasks.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @module
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */

var _window=window,
performance=_window.performance;

/**
 * `type` property values for this loaders' context object
 * @enum
 *
 */

var ContextType={
MANIFEST:'manifest',
LEVEL:'level',
AUDIO_TRACK:'audioTrack',
SUBTITLE_TRACK:'subtitleTrack'};


/**
 * @enum {string}
 */
var LevelType={
MAIN:'main',
AUDIO:'audio',
SUBTITLE:'subtitle'};


/**
 * @constructor
 */

var PlaylistLoader=function(_EventHandler){
_inherits(PlaylistLoader,_EventHandler);

/**
   * @constructs
   * @param {Hls} hls
   */
function PlaylistLoader(hls){
_classCallCheck(this,PlaylistLoader);

var _this=_possibleConstructorReturn(this,(PlaylistLoader.__proto__||Object.getPrototypeOf(PlaylistLoader)).call(this,hls,_events2.default.MANIFEST_LOADING,_events2.default.LEVEL_LOADING,_events2.default.AUDIO_TRACK_LOADING,_events2.default.SUBTITLE_TRACK_LOADING));

_this.loaders={};
return _this;
}

_createClass(PlaylistLoader,[{
key:'createInternalLoader',


/**
     * Returns defaults or configured loader-type overloads (pLoader and loader config params)
     * Default loader is XHRLoader (see utils)
     * @param {object} context
     * @returns {XHRLoader} or other compatible configured overload
     */
value:function createInternalLoader(context){
var config=this.hls.config;
var PLoader=config.pLoader;
var Loader=config.loader;
var InternalLoader=PLoader||Loader;

var loader=new InternalLoader(config);

context.loader=loader;
this.loaders[context.type]=loader;

return loader;
}},
{
key:'getInternalLoader',
value:function getInternalLoader(context){
return this.loaders[context.type];
}},
{
key:'resetInternalLoader',
value:function resetInternalLoader(contextType){
if(this.loaders[contextType]){
delete this.loaders[contextType];
}
}

/**
     * Call `destroy` on all internal loader instances mapped (one per context type)
     */},

{
key:'destroyInternalLoaders',
value:function destroyInternalLoaders(){
for(var contextType in this.loaders){
var loader=this.loaders[contextType];
if(loader){
loader.destroy();
}

this.resetInternalLoader(contextType);
}
}},
{
key:'destroy',
value:function destroy(){
this.destroyInternalLoaders();

_get(PlaylistLoader.prototype.__proto__||Object.getPrototypeOf(PlaylistLoader.prototype),'destroy',this).call(this);
}},
{
key:'onManifestLoading',
value:function onManifestLoading(data){
this.load(data.url,{type:ContextType.MANIFEST,level:0,id:null});
}},
{
key:'onLevelLoading',
value:function onLevelLoading(data){
this.load(data.url,{type:ContextType.LEVEL,level:data.level,id:data.id});
}},
{
key:'onAudioTrackLoading',
value:function onAudioTrackLoading(data){
this.load(data.url,{type:ContextType.AUDIO_TRACK,level:null,id:data.id});
}},
{
key:'onSubtitleTrackLoading',
value:function onSubtitleTrackLoading(data){
this.load(data.url,{type:ContextType.SUBTITLE_TRACK,level:null,id:data.id});
}},
{
key:'load',
value:function load(url,context){
var config=this.hls.config;

_logger.logger.debug('Loading playlist of type '+context.type+', level: '+context.level+', id: '+context.id);

// Check if a loader for this context already exists
var loader=this.getInternalLoader(context);
if(loader){
var loaderContext=loader.context;
if(loaderContext&&loaderContext.url===url){
// same URL can't overlap
_logger.logger.trace('playlist request ongoing');
return false;
}else{
_logger.logger.warn('aborting previous loader for type: '+context.type);
loader.abort();
}
}

var maxRetry=void 0,
timeout=void 0,
retryDelay=void 0,
maxRetryDelay=void 0;

// apply different configs for retries depending on
// context (manifest, level, audio/subs playlist)
switch(context.type){
case ContextType.MANIFEST:
maxRetry=config.manifestLoadingMaxRetry;
timeout=config.manifestLoadingTimeOut;
retryDelay=config.manifestLoadingRetryDelay;
maxRetryDelay=config.manifestLoadingMaxRetryTimeout;
break;
case ContextType.LEVEL:
// Disable internal loader retry logic, since we are managing retries in Level Controller
maxRetry=0;
timeout=config.levelLoadingTimeOut;
// TODO Introduce retry settings for audio-track and subtitle-track, it should not use level retry config
break;
default:
maxRetry=config.levelLoadingMaxRetry;
timeout=config.levelLoadingTimeOut;
retryDelay=config.levelLoadingRetryDelay;
maxRetryDelay=config.levelLoadingMaxRetryTimeout;
break;}


loader=this.createInternalLoader(context);

context.url=url;
context.responseType=context.responseType||'';// FIXME: (should not be necessary to do this)

var loaderConfig={
timeout:timeout,
maxRetry:maxRetry,
retryDelay:retryDelay,
maxRetryDelay:maxRetryDelay};


var loaderCallbacks={
onSuccess:this.loadsuccess.bind(this),
onError:this.loaderror.bind(this),
onTimeout:this.loadtimeout.bind(this)};


_logger.logger.debug('Calling internal loader delegate for URL: '+url);

loader.load(context,loaderConfig,loaderCallbacks);

return true;
}},
{
key:'loadsuccess',
value:function loadsuccess(response,stats,context){
var networkDetails=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;

if(context.isSidxRequest){
this._handleSidxRequest(response,context);
this._handlePlaylistLoaded(response,stats,context,networkDetails);
return;
}

this.resetInternalLoader(context.type);

var string=response.data;

stats.tload=performance.now();
// stats.mtime = new Date(target.getResponseHeader('Last-Modified'));

// Validate if it is an M3U8 at all
if(string.indexOf('#EXTM3U')!==0){
this._handleManifestParsingError(response,context,'no EXTM3U delimiter',networkDetails);
return;
}

// Check if chunk-list or master. handle empty chunk list case (first EXTINF not signaled, but TARGETDURATION present)
if(string.indexOf('#EXTINF:')>0||string.indexOf('#EXT-X-TARGETDURATION:')>0){
this._handleTrackOrLevelPlaylist(response,stats,context,networkDetails);
}else{
this._handleMasterPlaylist(response,stats,context,networkDetails);
}
}},
{
key:'loaderror',
value:function loaderror(response,context){
var networkDetails=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;

this._handleNetworkError(context,networkDetails,false,response);
}},
{
key:'loadtimeout',
value:function loadtimeout(stats,context){
var networkDetails=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;

this._handleNetworkError(context,networkDetails,true);
}},
{
key:'_handleMasterPlaylist',
value:function _handleMasterPlaylist(response,stats,context,networkDetails){
var hls=this.hls;
var string=response.data;

var url=PlaylistLoader.getResponseUrl(response,context);

var levels=_m3u8Parser2.default.parseMasterPlaylist(string,url);
if(!levels.length){
this._handleManifestParsingError(response,context,'no level found in manifest',networkDetails);
return;
}

// multi level playlist, parse level info

var audioGroups=levels.map(function(level){
return{
id:level.attrs.AUDIO,
codec:level.audioCodec};

});

var audioTracks=_m3u8Parser2.default.parseMasterPlaylistMedia(string,url,'AUDIO',audioGroups);
var subtitles=_m3u8Parser2.default.parseMasterPlaylistMedia(string,url,'SUBTITLES');

if(audioTracks.length){
// check if we have found an audio track embedded in main playlist (audio track without URI attribute)
var embeddedAudioFound=false;
audioTracks.forEach(function(audioTrack){
if(!audioTrack.url){
embeddedAudioFound=true;
}
});

// if no embedded audio track defined, but audio codec signaled in quality level,
// we need to signal this main audio track this could happen with playlists with
// alt audio rendition in which quality levels (main)
// contains both audio+video. but with mixed audio track not signaled
if(embeddedAudioFound===false&&levels[0].audioCodec&&!levels[0].attrs.AUDIO){
_logger.logger.log('audio codec signaled in quality level, but no embedded audio track signaled, create one');
audioTracks.unshift({
type:'main',
name:'main'});

}
}

hls.trigger(_events2.default.MANIFEST_LOADED,{
levels:levels,
audioTracks:audioTracks,
subtitles:subtitles,
url:url,
stats:stats,
networkDetails:networkDetails});

}},
{
key:'_handleTrackOrLevelPlaylist',
value:function _handleTrackOrLevelPlaylist(response,stats,context,networkDetails){
var hls=this.hls;

var id=context.id,
level=context.level,
type=context.type;


var url=PlaylistLoader.getResponseUrl(response,context);

var levelUrlId=Number.isFinite(id)?id:0;
var levelId=Number.isFinite(level)?level:levelUrlId;
var levelType=PlaylistLoader.mapContextToLevelType(context);

var levelDetails=_m3u8Parser2.default.parseLevelPlaylist(response.data,url,levelId,levelType,levelUrlId);

// set stats on level structure
levelDetails.tload=stats.tload;

// We have done our first request (Manifest-type) and receive
// not a master playlist but a chunk-list (track/level)
// We fire the manifest-loaded event anyway with the parsed level-details
// by creating a single-level structure for it.
if(type===ContextType.MANIFEST){
var singleLevel={
url:url,
details:levelDetails};


hls.trigger(_events2.default.MANIFEST_LOADED,{
levels:[singleLevel],
audioTracks:[],
url:url,
stats:stats,
networkDetails:networkDetails});

}

// save parsing time
stats.tparsed=performance.now();

// in case we need SIDX ranges
// return early after calling load for
// the SIDX box.
if(levelDetails.needSidxRanges){
var sidxUrl=levelDetails.initSegment.url;
this.load(sidxUrl,{
isSidxRequest:true,
type:type,
level:level,
levelDetails:levelDetails,
id:id,
rangeStart:0,
rangeEnd:2048,
responseType:'arraybuffer'});

return;
}

// extend the context with the new levelDetails property
context.levelDetails=levelDetails;

this._handlePlaylistLoaded(response,stats,context,networkDetails);
}},
{
key:'_handleSidxRequest',
value:function _handleSidxRequest(response,context){
var sidxInfo=_mp4demuxer2.default.parseSegmentIndex(new Uint8Array(response.data));
// if provided fragment does not contain sidx, early return
if(!sidxInfo){
return;
}
var sidxReferences=sidxInfo.references;
var levelDetails=context.levelDetails;
sidxReferences.forEach(function(segmentRef,index){
var segRefInfo=segmentRef.info;
var frag=levelDetails.fragments[index];

if(frag.byteRange.length===0){
frag.rawByteRange=String(1+segRefInfo.end-segRefInfo.start)+'@'+String(segRefInfo.start);
}
});
levelDetails.initSegment.rawByteRange=String(sidxInfo.moovEndOffset)+'@0';
}},
{
key:'_handleManifestParsingError',
value:function _handleManifestParsingError(response,context,reason,networkDetails){
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.NETWORK_ERROR,
details:_errors.ErrorDetails.MANIFEST_PARSING_ERROR,
fatal:true,
url:response.url,
reason:reason,
networkDetails:networkDetails});

}},
{
key:'_handleNetworkError',
value:function _handleNetworkError(context,networkDetails){
var timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;
var response=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;

_logger.logger.info('A network error occured while loading a '+context.type+'-type playlist');

var details=void 0;
var fatal=void 0;

var loader=this.getInternalLoader(context);

switch(context.type){
case ContextType.MANIFEST:
details=timeout?_errors.ErrorDetails.MANIFEST_LOAD_TIMEOUT:_errors.ErrorDetails.MANIFEST_LOAD_ERROR;
fatal=true;
break;
case ContextType.LEVEL:
details=timeout?_errors.ErrorDetails.LEVEL_LOAD_TIMEOUT:_errors.ErrorDetails.LEVEL_LOAD_ERROR;
fatal=false;
break;
case ContextType.AUDIO_TRACK:
details=timeout?_errors.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:_errors.ErrorDetails.AUDIO_TRACK_LOAD_ERROR;
fatal=false;
break;
default:
// details = ...?
fatal=false;}


if(loader){
loader.abort();
this.resetInternalLoader(context.type);
}

var errorData={
type:_errors.ErrorTypes.NETWORK_ERROR,
details:details,
fatal:fatal,
url:loader.url,
loader:loader,
context:context,
networkDetails:networkDetails};


if(response){
errorData.response=response;
}

this.hls.trigger(_events2.default.ERROR,errorData);
}},
{
key:'_handlePlaylistLoaded',
value:function _handlePlaylistLoaded(response,stats,context,networkDetails){
var type=context.type,
level=context.level,
id=context.id,
levelDetails=context.levelDetails;


if(!levelDetails.targetduration){
this._handleManifestParsingError(response,context,'invalid target duration',networkDetails);
return;
}

var canHaveLevels=PlaylistLoader.canHaveQualityLevels(context.type);
if(canHaveLevels){
this.hls.trigger(_events2.default.LEVEL_LOADED,{
details:levelDetails,
level:level||0,
id:id||0,
stats:stats,
networkDetails:networkDetails});

}else{
switch(type){
case ContextType.AUDIO_TRACK:
this.hls.trigger(_events2.default.AUDIO_TRACK_LOADED,{
details:levelDetails,
id:id,
stats:stats,
networkDetails:networkDetails});

break;
case ContextType.SUBTITLE_TRACK:
this.hls.trigger(_events2.default.SUBTITLE_TRACK_LOADED,{
details:levelDetails,
id:id,
stats:stats,
networkDetails:networkDetails});

break;}

}
}}],
[{
key:'canHaveQualityLevels',


/**
     * @param {ContextType} type
     * @returns {boolean}
     */
value:function canHaveQualityLevels(type){
return type!==ContextType.AUDIO_TRACK&&type!==ContextType.SUBTITLE_TRACK;
}

/**
     * Map context.type to LevelType
     * @param {{type: ContextType}} context
     * @returns {LevelType}
     */},

{
key:'mapContextToLevelType',
value:function mapContextToLevelType(context){
var type=context.type;


switch(type){
case ContextType.AUDIO_TRACK:
return LevelType.AUDIO;
case ContextType.SUBTITLE_TRACK:
return LevelType.SUBTITLE;
default:
return LevelType.MAIN;}

}},
{
key:'getResponseUrl',
value:function getResponseUrl(response,context){
var url=response.url;
// responseURL not supported on some browsers (it is used to detect URL redirection)
// data-uri mode also not supported (but no need to detect redirection)
if(url===undefined||url.indexOf('data:')===0){
// fallback to initial URL
url=context.url;
}
return url;
}},
{
key:'ContextType',
get:function get(){
return ContextType;
}},
{
key:'LevelType',
get:function get(){
return LevelType;
}}]);


return PlaylistLoader;
}(_eventHandler2.default);

exports.default=PlaylistLoader;
module.exports=exports['default'];

/***/},
/* 16 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MP4 demuxer
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */


var _logger=__webpack_require__(0);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var UINT32_MAX=Math.pow(2,32)-1;

var MP4Demuxer=function(){
function MP4Demuxer(observer,remuxer){
_classCallCheck(this,MP4Demuxer);

this.observer=observer;
this.remuxer=remuxer;
}

_createClass(MP4Demuxer,[{
key:'resetTimeStamp',
value:function resetTimeStamp(initPTS){
this.initPTS=initPTS;
}},
{
key:'resetInitSegment',
value:function resetInitSegment(initSegment,audioCodec,videoCodec,duration){
// jshint unused:false
if(initSegment&&initSegment.byteLength){
var initData=this.initData=MP4Demuxer.parseInitSegment(initSegment);

// default audio codec if nothing specified
// TODO : extract that from initsegment
if(audioCodec==null){
audioCodec='mp4a.40.5';
}

if(videoCodec==null){
videoCodec='avc1.42e01e';
}

var tracks={};
if(initData.audio&&initData.video){
tracks.audiovideo={container:'video/mp4',codec:audioCodec+','+videoCodec,initSegment:duration?initSegment:null};
}else{
if(initData.audio){
tracks.audio={container:'audio/mp4',codec:audioCodec,initSegment:duration?initSegment:null};
}

if(initData.video){
tracks.video={container:'video/mp4',codec:videoCodec,initSegment:duration?initSegment:null};
}
}
this.observer.trigger(_events2.default.FRAG_PARSING_INIT_SEGMENT,{tracks:tracks});
}else{
if(audioCodec){
this.audioCodec=audioCodec;
}

if(videoCodec){
this.videoCodec=videoCodec;
}
}
}},
{
key:'append',


// feed incoming data to the front of the parsing pipeline
value:function append(data,timeOffset,contiguous,accurateTimeOffset){
var initData=this.initData;
if(!initData){
this.resetInitSegment(data,this.audioCodec,this.videoCodec,false);
initData=this.initData;
}
var startDTS=void 0,
initPTS=this.initPTS;
if(initPTS===undefined){
var _startDTS=MP4Demuxer.getStartDTS(initData,data);
this.initPTS=initPTS=_startDTS-timeOffset;
this.observer.trigger(_events2.default.INIT_PTS_FOUND,{initPTS:initPTS});
}
MP4Demuxer.offsetStartDTS(initData,data,initPTS);
startDTS=MP4Demuxer.getStartDTS(initData,data);
this.remuxer.remux(initData.audio,initData.video,null,null,startDTS,contiguous,accurateTimeOffset,data);
}},
{
key:'destroy',
value:function destroy(){}}],
[{
key:'probe',
value:function probe(data){
// ensure we find a moof box in the first 16 kB
return MP4Demuxer.findBox({data:data,start:0,end:Math.min(data.length,16384)},['moof']).length>0;
}},
{
key:'bin2str',
value:function bin2str(buffer){
return String.fromCharCode.apply(null,buffer);
}},
{
key:'readUint16',
value:function readUint16(buffer,offset){
if(buffer.data){
offset+=buffer.start;
buffer=buffer.data;
}

var val=buffer[offset]<<8|buffer[offset+1];

return val<0?65536+val:val;
}},
{
key:'readUint32',
value:function readUint32(buffer,offset){
if(buffer.data){
offset+=buffer.start;
buffer=buffer.data;
}

var val=buffer[offset]<<24|buffer[offset+1]<<16|buffer[offset+2]<<8|buffer[offset+3];
return val<0?4294967296+val:val;
}},
{
key:'writeUint32',
value:function writeUint32(buffer,offset,value){
if(buffer.data){
offset+=buffer.start;
buffer=buffer.data;
}
buffer[offset]=value>>24;
buffer[offset+1]=value>>16&0xff;
buffer[offset+2]=value>>8&0xff;
buffer[offset+3]=value&0xff;
}

// Find the data for a box specified by its path
},
{
key:'findBox',
value:function findBox(data,path){
var results=[],
i=void 0,
size=void 0,
type=void 0,
end=void 0,
subresults=void 0,
start=void 0,
endbox=void 0;

if(data.data){
start=data.start;
end=data.end;
data=data.data;
}else{
start=0;
end=data.byteLength;
}

if(!path.length){
// short-circuit the search for empty paths
return null;
}

for(i=start;i<end;){
size=MP4Demuxer.readUint32(data,i);
type=MP4Demuxer.bin2str(data.subarray(i+4,i+8));
endbox=size>1?i+size:end;

if(type===path[0]){
if(path.length===1){
// this is the end of the path and we've found the box we were
// looking for
results.push({data:data,start:i+8,end:endbox});
}else{
// recursively search for the next box along the path
subresults=MP4Demuxer.findBox({data:data,start:i+8,end:endbox},path.slice(1));
if(subresults.length){
results=results.concat(subresults);
}
}
}
i=endbox;
}

// we've finished searching all of data
return results;
}},
{
key:'parseSegmentIndex',
value:function parseSegmentIndex(initSegment){
var moov=MP4Demuxer.findBox(initSegment,['moov'])[0];
var moovEndOffset=moov?moov.end:null;// we need this in case we need to chop of garbage of the end of current data

var index=0;
var sidx=MP4Demuxer.findBox(initSegment,['sidx']);
var references=void 0;

if(!sidx||!sidx[0]){
return null;
}

references=[];
sidx=sidx[0];

var version=sidx.data[0];

// set initial offset, we skip the reference ID (not needed)
index=version===0?8:16;

var timescale=MP4Demuxer.readUint32(sidx,index);
index+=4;

// TODO: parse earliestPresentationTime and firstOffset
// usually zero in our case
var earliestPresentationTime=0;
var firstOffset=0;

if(version===0){
index+=8;
}else{
index+=16;
}

// skip reserved
index+=2;

var startByte=sidx.end+firstOffset;

var referencesCount=MP4Demuxer.readUint16(sidx,index);
index+=2;

for(var i=0;i<referencesCount;i++){
var referenceIndex=index;

var referenceInfo=MP4Demuxer.readUint32(sidx,referenceIndex);
referenceIndex+=4;

var referenceSize=referenceInfo&0x7FFFFFFF;
var referenceType=(referenceInfo&0x80000000)>>>31;

if(referenceType===1){
__f__("warn",'SIDX has hierarchical references (not supported)'," at node_modules/xgplayer-hls.js/dist/index.js:3354");
return;
}

var subsegmentDuration=MP4Demuxer.readUint32(sidx,referenceIndex);
referenceIndex+=4;

references.push({
referenceSize:referenceSize,
subsegmentDuration:subsegmentDuration,// unscaled
info:{
duration:subsegmentDuration/timescale,
start:startByte,
end:startByte+referenceSize-1}});



startByte+=referenceSize;

// Skipping 1 bit for |startsWithSap|, 3 bits for |sapType|, and 28 bits
// for |sapDelta|.
referenceIndex+=4;

// skip to next ref
index=referenceIndex;
}

return{
earliestPresentationTime:earliestPresentationTime,
timescale:timescale,
version:version,
referencesCount:referencesCount,
references:references,
moovEndOffset:moovEndOffset};

}

/**
     * Parses an MP4 initialization segment and extracts stream type and
     * timescale values for any declared tracks. Timescale values indicate the
     * number of clock ticks per second to assume for time-based values
     * elsewhere in the MP4.
     *
     * To determine the start time of an MP4, you need two pieces of
     * information: the timescale unit and the earliest base media decode
     * time. Multiple timescales can be specified within an MP4 but the
     * base media decode time is always expressed in the timescale from
     * the media header box for the track:
     * ```
     * moov > trak > mdia > mdhd.timescale
     * moov > trak > mdia > hdlr
     * ```
     * @param init {Uint8Array} the bytes of the init segment
     * @return {object} a hash of track type to timescale values or null if
     * the init segment is malformed.
     */},

{
key:'parseInitSegment',
value:function parseInitSegment(initSegment){
var result=[];
var traks=MP4Demuxer.findBox(initSegment,['moov','trak']);

traks.forEach(function(trak){
var tkhd=MP4Demuxer.findBox(trak,['tkhd'])[0];
if(tkhd){
var version=tkhd.data[tkhd.start];
var index=version===0?12:20;
var trackId=MP4Demuxer.readUint32(tkhd,index);

var mdhd=MP4Demuxer.findBox(trak,['mdia','mdhd'])[0];
if(mdhd){
version=mdhd.data[mdhd.start];
index=version===0?12:20;
var timescale=MP4Demuxer.readUint32(mdhd,index);

var hdlr=MP4Demuxer.findBox(trak,['mdia','hdlr'])[0];
if(hdlr){
var hdlrType=MP4Demuxer.bin2str(hdlr.data.subarray(hdlr.start+8,hdlr.start+12));
var type={'soun':'audio','vide':'video'}[hdlrType];
if(type){
// extract codec info. TODO : parse codec details to be able to build MIME type
var codecBox=MP4Demuxer.findBox(trak,['mdia','minf','stbl','stsd']);
if(codecBox.length){
codecBox=codecBox[0];
var codecType=MP4Demuxer.bin2str(codecBox.data.subarray(codecBox.start+12,codecBox.start+16));
_logger.logger.log('MP4Demuxer:'+type+':'+codecType+' found');
}
result[trackId]={timescale:timescale,type:type};
result[type]={timescale:timescale,id:trackId};
}
}
}
}
});
return result;
}

/**
    * Determine the base media decode start time, in seconds, for an MP4
    * fragment. If multiple fragments are specified, the earliest time is
    * returned.
    *
    * The base media decode time can be parsed from track fragment
    * metadata:
    * ```
    * moof > traf > tfdt.baseMediaDecodeTime
    * ```
    * It requires the timescale value from the mdhd to interpret.
    *
    * @param timescale {object} a hash of track ids to timescale values.
    * @return {number} the earliest base media decode start time for the
    * fragment, in seconds
    */},

{
key:'getStartDTS',
value:function getStartDTS(initData,fragment){
var trafs=void 0,
baseTimes=void 0,
result=void 0;

// we need info from two childrend of each track fragment box
trafs=MP4Demuxer.findBox(fragment,['moof','traf']);

// determine the start times for each track
baseTimes=[].concat.apply([],trafs.map(function(traf){
return MP4Demuxer.findBox(traf,['tfhd']).map(function(tfhd){
var id=void 0,
scale=void 0,
baseTime=void 0;

// get the track id from the tfhd
id=MP4Demuxer.readUint32(tfhd,4);
// assume a 90kHz clock if no timescale was specified
scale=initData[id].timescale||90e3;

// get the base media decode time from the tfdt
baseTime=MP4Demuxer.findBox(traf,['tfdt']).map(function(tfdt){
var version=void 0,
result=void 0;

version=tfdt.data[tfdt.start];
result=MP4Demuxer.readUint32(tfdt,4);
if(version===1){
result*=Math.pow(2,32);

result+=MP4Demuxer.readUint32(tfdt,8);
}
return result;
})[0];
// convert base time to seconds
return baseTime/scale;
});
}));

// return the minimum
result=Math.min.apply(null,baseTimes);
return isFinite(result)?result:0;
}},
{
key:'offsetStartDTS',
value:function offsetStartDTS(initData,fragment,timeOffset){
MP4Demuxer.findBox(fragment,['moof','traf']).map(function(traf){
return MP4Demuxer.findBox(traf,['tfhd']).map(function(tfhd){
// get the track id from the tfhd
var id=MP4Demuxer.readUint32(tfhd,4);
// assume a 90kHz clock if no timescale was specified
var timescale=initData[id].timescale||90e3;

// get the base media decode time from the tfdt
MP4Demuxer.findBox(traf,['tfdt']).map(function(tfdt){
var version=tfdt.data[tfdt.start];
var baseMediaDecodeTime=MP4Demuxer.readUint32(tfdt,4);
if(version===0){
MP4Demuxer.writeUint32(tfdt,4,baseMediaDecodeTime-timeOffset*timescale);
}else{
baseMediaDecodeTime*=Math.pow(2,32);
baseMediaDecodeTime+=MP4Demuxer.readUint32(tfdt,8);
baseMediaDecodeTime-=timeOffset*timescale;
baseMediaDecodeTime=Math.max(baseMediaDecodeTime,0);
var upper=Math.floor(baseMediaDecodeTime/(UINT32_MAX+1));
var lower=Math.floor(baseMediaDecodeTime%(UINT32_MAX+1));
MP4Demuxer.writeUint32(tfdt,4,upper);
MP4Demuxer.writeUint32(tfdt,8,lower);
}
});
});
});
}}]);


return MP4Demuxer;
}();

exports.default=MP4Demuxer;
module.exports=exports['default'];

/***/},
/* 17 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _urlToolkit=__webpack_require__(8);

var URLToolkit=_interopRequireWildcard(_urlToolkit);

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var LevelKey=function(){
function LevelKey(){
_classCallCheck(this,LevelKey);

this.method=null;
this.key=null;
this.iv=null;
this._uri=null;
}

_createClass(LevelKey,[{
key:'uri',
get:function get(){
if(!this._uri&&this.reluri){
this._uri=URLToolkit.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:true});
}

return this._uri;
}}]);


return LevelKey;
}();

exports.default=LevelKey;
module.exports=exports['default'];

/***/},
/* 18 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

// from http://mp4ra.org/codecs.html
var sampleEntryCodesISO={
audio:{
'a3ds':true,
'ac-3':true,
'ac-4':true,
'alac':true,
'alaw':true,
'dra1':true,
'dts+':true,
'dts-':true,
'dtsc':true,
'dtse':true,
'dtsh':true,
'ec-3':true,
'enca':true,
'g719':true,
'g726':true,
'm4ae':true,
'mha1':true,
'mha2':true,
'mhm1':true,
'mhm2':true,
'mlpa':true,
'mp4a':true,
'raw ':true,
'Opus':true,
'samr':true,
'sawb':true,
'sawp':true,
'sevc':true,
'sqcp':true,
'ssmv':true,
'twos':true,
'ulaw':true},

video:{
'avc1':true,
'avc2':true,
'avc3':true,
'avc4':true,
'avcp':true,
'drac':true,
'dvav':true,
'dvhe':true,
'encv':true,
'hev1':true,
'hvc1':true,
'mjp2':true,
'mp4v':true,
'mvc1':true,
'mvc2':true,
'mvc3':true,
'mvc4':true,
'resv':true,
'rv60':true,
's263':true,
'svc1':true,
'svc2':true,
'vc-1':true,
'vp08':true,
'vp09':true}};



function isCodecType(codec,type){
var typeCodes=sampleEntryCodesISO[type];
return!!typeCodes&&typeCodes[codec.slice(0,4)]===true;
}

function isCodecSupportedInMp4(codec,type){
return window.MediaSource.isTypeSupported((type||'video')+'/mp4;codecs="'+codec+'"');
}

exports.isCodecType=isCodecType;
exports.isCodecSupportedInMp4=isCodecSupportedInMp4;

/***/},
/* 19 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(20);

var _webworkifyWebpack=__webpack_require__(41);

var work=_interopRequireWildcard(_webworkifyWebpack);

var _events2=__webpack_require__(1);

var _events3=_interopRequireDefault(_events2);

var _demuxerInline=__webpack_require__(21);

var _demuxerInline2=_interopRequireDefault(_demuxerInline);

var _logger=__webpack_require__(0);

var _errors=__webpack_require__(2);

var _mediasourceHelper=__webpack_require__(13);

var _getSelfScope=__webpack_require__(5);

var _observer=__webpack_require__(24);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

// see https://stackoverflow.com/a/11237259/589493
var global=(0,_getSelfScope.getSelfScope)();// safeguard for code that might run both on worker and main thread
var MediaSource=(0,_mediasourceHelper.getMediaSource)();

var Demuxer=function(){
function Demuxer(hls,id){
var _this=this;

_classCallCheck(this,Demuxer);

this.hls=hls;
this.id=id;

var observer=this.observer=new _observer.Observer();
var config=hls.config;

var forwardMessage=function forwardMessage(ev,data){
data=data||{};
data.frag=_this.frag;
data.id=_this.id;
hls.trigger(ev,data);
};

// forward events to main thread
observer.on(_events3.default.FRAG_DECRYPTED,forwardMessage);
observer.on(_events3.default.FRAG_PARSING_INIT_SEGMENT,forwardMessage);
observer.on(_events3.default.FRAG_PARSING_DATA,forwardMessage);
observer.on(_events3.default.FRAG_PARSED,forwardMessage);
observer.on(_events3.default.ERROR,forwardMessage);
observer.on(_events3.default.FRAG_PARSING_METADATA,forwardMessage);
observer.on(_events3.default.FRAG_PARSING_USERDATA,forwardMessage);
observer.on(_events3.default.INIT_PTS_FOUND,forwardMessage);

var typeSupported={
mp4:MediaSource.isTypeSupported('video/mp4'),
mpeg:MediaSource.isTypeSupported('audio/mpeg'),
mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')};

// navigator.vendor is not always available in Web Worker
// refer to https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/navigator
var vendor=navigator.vendor;
if(config.enableWorker&&typeof Worker!=='undefined'){
_logger.logger.log('demuxing in webworker');
var w=void 0;
try{
w=this.w=work(/*require.resolve*/55);
this.onwmsg=this.onWorkerMessage.bind(this);
w.addEventListener('message',this.onwmsg);
w.onerror=function(event){
hls.trigger(_events3.default.ERROR,{type:_errors.ErrorTypes.OTHER_ERROR,details:_errors.ErrorDetails.INTERNAL_EXCEPTION,fatal:true,event:'demuxerWorker',err:{message:event.message+' ('+event.filename+':'+event.lineno+')'}});
};
w.postMessage({cmd:'init',typeSupported:typeSupported,vendor:vendor,id:id,config:JSON.stringify(config)});
}catch(err){
_logger.logger.warn('Error in worker:',err);
_logger.logger.error('Error while initializing DemuxerWorker, fallback on DemuxerInline');
if(w){
// revoke the Object URL that was used to create demuxer worker, so as not to leak it
global.URL.revokeObjectURL(w.objectURL);
}
this.demuxer=new _demuxerInline2.default(observer,typeSupported,config,vendor);
this.w=undefined;
}
}else{
this.demuxer=new _demuxerInline2.default(observer,typeSupported,config,vendor);
}
}

_createClass(Demuxer,[{
key:'destroy',
value:function destroy(){
var w=this.w;
if(w){
w.removeEventListener('message',this.onwmsg);
w.terminate();
this.w=null;
}else{
var demuxer=this.demuxer;
if(demuxer){
demuxer.destroy();
this.demuxer=null;
}
}
var observer=this.observer;
if(observer){
observer.removeAllListeners();
this.observer=null;
}
}},
{
key:'push',
value:function push(data,initSegment,audioCodec,videoCodec,frag,duration,accurateTimeOffset,defaultInitPTS){
var w=this.w;
var timeOffset=Number.isFinite(frag.startPTS)?frag.startPTS:frag.start;
var decryptdata=frag.decryptdata;
var lastFrag=this.frag;
var discontinuity=!(lastFrag&&frag.cc===lastFrag.cc);
var trackSwitch=!(lastFrag&&frag.level===lastFrag.level);
var nextSN=lastFrag&&frag.sn===lastFrag.sn+1;
var contiguous=!trackSwitch&&nextSN;
if(discontinuity){
_logger.logger.log(this.id+':discontinuity detected');
}

if(trackSwitch){
_logger.logger.log(this.id+':switch detected');
}

this.frag=frag;
if(w){
// post fragment payload as transferable objects for ArrayBuffer (no copy)
w.postMessage({cmd:'demux',data:data,decryptdata:decryptdata,initSegment:initSegment,audioCodec:audioCodec,videoCodec:videoCodec,timeOffset:timeOffset,discontinuity:discontinuity,trackSwitch:trackSwitch,contiguous:contiguous,duration:duration,accurateTimeOffset:accurateTimeOffset,defaultInitPTS:defaultInitPTS},data instanceof ArrayBuffer?[data]:[]);
}else{
var demuxer=this.demuxer;
if(demuxer){
demuxer.push(data,decryptdata,initSegment,audioCodec,videoCodec,timeOffset,discontinuity,trackSwitch,contiguous,duration,accurateTimeOffset,defaultInitPTS);
}
}
}},
{
key:'onWorkerMessage',
value:function onWorkerMessage(ev){
var data=ev.data,
hls=this.hls;
switch(data.event){
case'init':
// revoke the Object URL that was used to create demuxer worker, so as not to leak it
global.URL.revokeObjectURL(this.w.objectURL);
break;
// special case for FRAG_PARSING_DATA: data1 and data2 are transferable objects
case _events3.default.FRAG_PARSING_DATA:
data.data.data1=new Uint8Array(data.data1);
if(data.data2){
data.data.data2=new Uint8Array(data.data2);
}

/* falls through */
default:
data.data=data.data||{};
data.data.frag=this.frag;
data.data.id=this.id;
hls.trigger(data.event,data.data);
break;}

}}]);


return Demuxer;
}();

exports.default=Demuxer;
module.exports=exports['default'];

/***/},
/* 20 */
/***/function(module,exports,__webpack_require__){

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var R=typeof Reflect==='object'?Reflect:null;
var ReflectApply=R&&typeof R.apply==='function'?
R.apply:
function ReflectApply(target,receiver,args){
return Function.prototype.apply.call(target,receiver,args);
};

var ReflectOwnKeys;
if(R&&typeof R.ownKeys==='function'){
ReflectOwnKeys=R.ownKeys;
}else if(Object.getOwnPropertySymbols){
ReflectOwnKeys=function ReflectOwnKeys(target){
return Object.getOwnPropertyNames(target).
concat(Object.getOwnPropertySymbols(target));
};
}else{
ReflectOwnKeys=function ReflectOwnKeys(target){
return Object.getOwnPropertyNames(target);
};
}

function ProcessEmitWarning(warning){
if(console&&console.warn)__f__("warn",warning," at node_modules/xgplayer-hls.js/dist/index.js:3932");
}

var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){
return value!==value;
};

function EventEmitter(){
EventEmitter.init.call(this);
}
module.exports=EventEmitter;
module.exports.once=once;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter=EventEmitter;

EventEmitter.prototype._events=undefined;
EventEmitter.prototype._eventsCount=0;
EventEmitter.prototype._maxListeners=undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners=10;

function checkListener(listener){
if(typeof listener!=='function'){
throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener);
}
}

Object.defineProperty(EventEmitter,'defaultMaxListeners',{
enumerable:true,
get:function get(){
return defaultMaxListeners;
},
set:function set(arg){
if(typeof arg!=='number'||arg<0||NumberIsNaN(arg)){
throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+'.');
}
defaultMaxListeners=arg;
}});


EventEmitter.init=function(){

if(this._events===undefined||
this._events===Object.getPrototypeOf(this)._events){
this._events=Object.create(null);
this._eventsCount=0;
}

this._maxListeners=this._maxListeners||undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){
if(typeof n!=='number'||n<0||NumberIsNaN(n)){
throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+'.');
}
this._maxListeners=n;
return this;
};

function _getMaxListeners(that){
if(that._maxListeners===undefined)
return EventEmitter.defaultMaxListeners;
return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners=function getMaxListeners(){
return _getMaxListeners(this);
};

EventEmitter.prototype.emit=function emit(type){
var args=[];
for(var i=1;i<arguments.length;i++){args.push(arguments[i]);}
var doError=type==='error';

var events=this._events;
if(events!==undefined)
doError=doError&&events.error===undefined;else
if(!doError)
return false;

// If there is no 'error' event listener then throw.
if(doError){
var er;
if(args.length>0)
er=args[0];
if(er instanceof Error){
// Note: The comments on the `throw` lines are intentional, they show
// up in Node's output if this results in an unhandled exception.
throw er;// Unhandled 'error' event
}
// At least give some kind of context to the user
var err=new Error('Unhandled error.'+(er?' ('+er.message+')':''));
err.context=er;
throw err;// Unhandled 'error' event
}

var handler=events[type];

if(handler===undefined)
return false;

if(typeof handler==='function'){
ReflectApply(handler,this,args);
}else{
var len=handler.length;
var listeners=arrayClone(handler,len);
for(var i=0;i<len;++i){
ReflectApply(listeners[i],this,args);}
}

return true;
};

function _addListener(target,type,listener,prepend){
var m;
var events;
var existing;

checkListener(listener);

events=target._events;
if(events===undefined){
events=target._events=Object.create(null);
target._eventsCount=0;
}else{
// To avoid recursion in the case that type === "newListener"! Before
// adding it to the listeners, first emit "newListener".
if(events.newListener!==undefined){
target.emit('newListener',type,
listener.listener?listener.listener:listener);

// Re-assign `events` because a newListener handler could have caused the
// this._events to be assigned to a new object
events=target._events;
}
existing=events[type];
}

if(existing===undefined){
// Optimize the case of one listener. Don't need the extra array object.
existing=events[type]=listener;
++target._eventsCount;
}else{
if(typeof existing==='function'){
// Adding the second element, need to change to array.
existing=events[type]=
prepend?[listener,existing]:[existing,listener];
// If we've already got an array, just append.
}else if(prepend){
existing.unshift(listener);
}else{
existing.push(listener);
}

// Check for listener leak
m=_getMaxListeners(target);
if(m>0&&existing.length>m&&!existing.warned){
existing.warned=true;
// No error code for this since it is a Warning
// eslint-disable-next-line no-restricted-syntax
var w=new Error('Possible EventEmitter memory leak detected. '+
existing.length+' '+String(type)+' listeners '+
'added. Use emitter.setMaxListeners() to '+
'increase limit');
w.name='MaxListenersExceededWarning';
w.emitter=target;
w.type=type;
w.count=existing.length;
ProcessEmitWarning(w);
}
}

return target;
}

EventEmitter.prototype.addListener=function addListener(type,listener){
return _addListener(this,type,listener,false);
};

EventEmitter.prototype.on=EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener=
function prependListener(type,listener){
return _addListener(this,type,listener,true);
};

function onceWrapper(){
if(!this.fired){
this.target.removeListener(this.type,this.wrapFn);
this.fired=true;
if(arguments.length===0)
return this.listener.call(this.target);
return this.listener.apply(this.target,arguments);
}
}

function _onceWrap(target,type,listener){
var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};
var wrapped=onceWrapper.bind(state);
wrapped.listener=listener;
state.wrapFn=wrapped;
return wrapped;
}

EventEmitter.prototype.once=function once(type,listener){
checkListener(listener);
this.on(type,_onceWrap(this,type,listener));
return this;
};

EventEmitter.prototype.prependOnceListener=
function prependOnceListener(type,listener){
checkListener(listener);
this.prependListener(type,_onceWrap(this,type,listener));
return this;
};

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener=
function removeListener(type,listener){
var list,events,position,i,originalListener;

checkListener(listener);

events=this._events;
if(events===undefined)
return this;

list=events[type];
if(list===undefined)
return this;

if(list===listener||list.listener===listener){
if(--this._eventsCount===0)
this._events=Object.create(null);else
{
delete events[type];
if(events.removeListener)
this.emit('removeListener',type,list.listener||listener);
}
}else if(typeof list!=='function'){
position=-1;

for(i=list.length-1;i>=0;i--){
if(list[i]===listener||list[i].listener===listener){
originalListener=list[i].listener;
position=i;
break;
}
}

if(position<0)
return this;

if(position===0)
list.shift();else
{
spliceOne(list,position);
}

if(list.length===1)
events[type]=list[0];

if(events.removeListener!==undefined)
this.emit('removeListener',type,originalListener||listener);
}

return this;
};

EventEmitter.prototype.off=EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners=
function removeAllListeners(type){
var listeners,events,i;

events=this._events;
if(events===undefined)
return this;

// not listening for removeListener, no need to emit
if(events.removeListener===undefined){
if(arguments.length===0){
this._events=Object.create(null);
this._eventsCount=0;
}else if(events[type]!==undefined){
if(--this._eventsCount===0)
this._events=Object.create(null);else

delete events[type];
}
return this;
}

// emit removeListener for all listeners on all events
if(arguments.length===0){
var keys=Object.keys(events);
var key;
for(i=0;i<keys.length;++i){
key=keys[i];
if(key==='removeListener')continue;
this.removeAllListeners(key);
}
this.removeAllListeners('removeListener');
this._events=Object.create(null);
this._eventsCount=0;
return this;
}

listeners=events[type];

if(typeof listeners==='function'){
this.removeListener(type,listeners);
}else if(listeners!==undefined){
// LIFO order
for(i=listeners.length-1;i>=0;i--){
this.removeListener(type,listeners[i]);
}
}

return this;
};

function _listeners(target,type,unwrap){
var events=target._events;

if(events===undefined)
return[];

var evlistener=events[type];
if(evlistener===undefined)
return[];

if(typeof evlistener==='function')
return unwrap?[evlistener.listener||evlistener]:[evlistener];

return unwrap?
unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length);
}

EventEmitter.prototype.listeners=function listeners(type){
return _listeners(this,type,true);
};

EventEmitter.prototype.rawListeners=function rawListeners(type){
return _listeners(this,type,false);
};

EventEmitter.listenerCount=function(emitter,type){
if(typeof emitter.listenerCount==='function'){
return emitter.listenerCount(type);
}else{
return listenerCount.call(emitter,type);
}
};

EventEmitter.prototype.listenerCount=listenerCount;
function listenerCount(type){
var events=this._events;

if(events!==undefined){
var evlistener=events[type];

if(typeof evlistener==='function'){
return 1;
}else if(evlistener!==undefined){
return evlistener.length;
}
}

return 0;
}

EventEmitter.prototype.eventNames=function eventNames(){
return this._eventsCount>0?ReflectOwnKeys(this._events):[];
};

function arrayClone(arr,n){
var copy=new Array(n);
for(var i=0;i<n;++i){
copy[i]=arr[i];}
return copy;
}

function spliceOne(list,index){
for(;index+1<list.length;index++){
list[index]=list[index+1];}
list.pop();
}

function unwrapListeners(arr){
var ret=new Array(arr.length);
for(var i=0;i<ret.length;++i){
ret[i]=arr[i].listener||arr[i];
}
return ret;
}

function once(emitter,name){
return new Promise(function(resolve,reject){
function eventListener(){
if(errorListener!==undefined){
emitter.removeListener('error',errorListener);
}
resolve([].slice.call(arguments));
};
var errorListener;

// Adding an error listener is not optional because
// if an error is thrown on an event emitter we cannot
// guarantee that the actual event we are waiting will
// be fired. The result could be a silent way to create
// memory or file descriptor leaks, which is something
// we should avoid.
if(name!=='error'){
errorListener=function errorListener(err){
emitter.removeListener(name,eventListener);
reject(err);
};

emitter.once('error',errorListener);
}

emitter.once(name,eventListener);
});
}


/***/},
/* 21 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * inline demuxer: probe fragments and instantiate
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * appropriate demuxer depending on content type (TSDemuxer, AACDemuxer, ...)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _errors=__webpack_require__(2);

var _decrypter=__webpack_require__(12);

var _decrypter2=_interopRequireDefault(_decrypter);

var _aacdemuxer=__webpack_require__(45);

var _aacdemuxer2=_interopRequireDefault(_aacdemuxer);

var _mp4demuxer=__webpack_require__(16);

var _mp4demuxer2=_interopRequireDefault(_mp4demuxer);

var _tsdemuxer=__webpack_require__(46);

var _tsdemuxer2=_interopRequireDefault(_tsdemuxer);

var _mp3demuxer=__webpack_require__(49);

var _mp3demuxer2=_interopRequireDefault(_mp3demuxer);

var _mp4Remuxer=__webpack_require__(50);

var _mp4Remuxer2=_interopRequireDefault(_mp4Remuxer);

var _passthroughRemuxer=__webpack_require__(53);

var _passthroughRemuxer2=_interopRequireDefault(_passthroughRemuxer);

var _getSelfScope=__webpack_require__(5);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

// see https://stackoverflow.com/a/11237259/589493
var global=(0,_getSelfScope.getSelfScope)();// safeguard for code that might run both on worker and main thread

var now=void 0;
// performance.now() not available on WebWorker, at least on Safari Desktop
try{
now=global.performance.now.bind(global.performance);
}catch(err){
_logger.logger.debug('Unable to use Performance API on this environment');
now=global.Date.now;
}

var DemuxerInline=function(){
function DemuxerInline(observer,typeSupported,config,vendor){
_classCallCheck(this,DemuxerInline);

this.observer=observer;
this.typeSupported=typeSupported;
this.config=config;
this.vendor=vendor;
}

_createClass(DemuxerInline,[{
key:'destroy',
value:function destroy(){
var demuxer=this.demuxer;
if(demuxer){
demuxer.destroy();
}
}},
{
key:'push',
value:function push(data,decryptdata,initSegment,audioCodec,videoCodec,timeOffset,discontinuity,trackSwitch,contiguous,duration,accurateTimeOffset,defaultInitPTS){
var _this=this;

if(data.byteLength>0&&decryptdata!=null&&decryptdata.key!=null&&decryptdata.method==='AES-128'){
var decrypter=this.decrypter;
if(decrypter==null){
decrypter=this.decrypter=new _decrypter2.default(this.observer,this.config);
}

var startTime=now();
decrypter.decrypt(data,decryptdata.key.buffer,decryptdata.iv.buffer,function(decryptedData){
var endTime=now();
_this.observer.trigger(_events2.default.FRAG_DECRYPTED,{stats:{tstart:startTime,tdecrypt:endTime}});
_this.pushDecrypted(new Uint8Array(decryptedData),decryptdata,new Uint8Array(initSegment),audioCodec,videoCodec,timeOffset,discontinuity,trackSwitch,contiguous,duration,accurateTimeOffset,defaultInitPTS);
});
}else{
this.pushDecrypted(new Uint8Array(data),decryptdata,new Uint8Array(initSegment),audioCodec,videoCodec,timeOffset,discontinuity,trackSwitch,contiguous,duration,accurateTimeOffset,defaultInitPTS);
}
}},
{
key:'pushDecrypted',
value:function pushDecrypted(data,decryptdata,initSegment,audioCodec,videoCodec,timeOffset,discontinuity,trackSwitch,contiguous,duration,accurateTimeOffset,defaultInitPTS){
var demuxer=this.demuxer;
if(!demuxer||
// in case of continuity change, or track switch
// we might switch from content type (AAC container to TS container, or TS to fmp4 for example)
// so let's check that current demuxer is still valid
(discontinuity||trackSwitch)&&!this.probe(data)){
var observer=this.observer;
var typeSupported=this.typeSupported;
var config=this.config;
// probing order is TS/AAC/MP3/MP4
var muxConfig=[{demux:_tsdemuxer2.default,remux:_mp4Remuxer2.default},{demux:_mp4demuxer2.default,remux:_passthroughRemuxer2.default},{demux:_aacdemuxer2.default,remux:_mp4Remuxer2.default},{demux:_mp3demuxer2.default,remux:_mp4Remuxer2.default}];

// probe for content type
for(var i=0,len=muxConfig.length;i<len;i++){
var mux=muxConfig[i];
var probe=mux.demux.probe;
if(probe(data)){
var _remuxer=this.remuxer=new mux.remux(observer,config,typeSupported,this.vendor);
demuxer=new mux.demux(observer,_remuxer,config,typeSupported);
this.probe=probe;
break;
}
}
if(!demuxer){
observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.FRAG_PARSING_ERROR,fatal:true,reason:'no demux matching with content found'});
return;
}
this.demuxer=demuxer;
}
var remuxer=this.remuxer;

if(discontinuity||trackSwitch){
demuxer.resetInitSegment(initSegment,audioCodec,videoCodec,duration);
remuxer.resetInitSegment();
}
if(discontinuity){
demuxer.resetTimeStamp(defaultInitPTS);
remuxer.resetTimeStamp(defaultInitPTS);
}
if(typeof demuxer.setDecryptData==='function'){
demuxer.setDecryptData(decryptdata);
}

demuxer.append(data,timeOffset,contiguous,accurateTimeOffset);
}}]);


return DemuxerInline;
}();

exports.default=DemuxerInline;
module.exports=exports['default'];

/***/},
/* 22 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.getAudioConfig=getAudioConfig;
exports.isHeaderPattern=isHeaderPattern;
exports.getHeaderLength=getHeaderLength;
exports.getFullFrameLength=getFullFrameLength;
exports.isHeader=isHeader;
exports.probe=probe;
exports.initTrackConfig=initTrackConfig;
exports.getFrameDuration=getFrameDuration;
exports.parseFrameHeader=parseFrameHeader;
exports.appendFrame=appendFrame;

var _logger=__webpack_require__(0);

var _errors=__webpack_require__(2);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _getSelfScope=__webpack_require__(5);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

/**
 *  ADTS parser helper
 */
function getAudioConfig(observer,data,offset,audioCodec){
var adtsObjectType=void 0,
// :int
adtsSampleingIndex=void 0,
// :int
adtsExtensionSampleingIndex=void 0,
// :int
adtsChanelConfig=void 0,
// :int
config=void 0,
userAgent=navigator.userAgent.toLowerCase(),
manifestCodec=audioCodec,
adtsSampleingRates=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];
// byte 2
adtsObjectType=((data[offset+2]&0xC0)>>>6)+1;
adtsSampleingIndex=(data[offset+2]&0x3C)>>>2;
if(adtsSampleingIndex>adtsSampleingRates.length-1){
observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.FRAG_PARSING_ERROR,fatal:true,reason:'invalid ADTS sampling index:'+adtsSampleingIndex});
return;
}
adtsChanelConfig=(data[offset+2]&0x01)<<2;
// byte 3
adtsChanelConfig|=(data[offset+3]&0xC0)>>>6;
_logger.logger.log('manifest codec:'+audioCodec+',ADTS data:type:'+adtsObjectType+',sampleingIndex:'+adtsSampleingIndex+'['+adtsSampleingRates[adtsSampleingIndex]+'Hz],channelConfig:'+adtsChanelConfig);
// firefox: freq less than 24kHz = AAC SBR (HE-AAC)
if(/firefox/i.test(userAgent)){
if(adtsSampleingIndex>=6){
adtsObjectType=5;
config=new Array(4);
// HE-AAC uses SBR (Spectral Band Replication) , high frequencies are constructed from low frequencies
// there is a factor 2 between frame sample rate and output sample rate
// multiply frequency by 2 (see table below, equivalent to substract 3)
adtsExtensionSampleingIndex=adtsSampleingIndex-3;
}else{
adtsObjectType=2;
config=new Array(2);
adtsExtensionSampleingIndex=adtsSampleingIndex;
}
// Android : always use AAC
}else if(userAgent.indexOf('android')!==-1){
adtsObjectType=2;
config=new Array(2);
adtsExtensionSampleingIndex=adtsSampleingIndex;
}else{
/*  for other browsers (Chrome/Vivaldi/Opera ...)
        always force audio type to be HE-AAC SBR, as some browsers do not support audio codec switch properly (like Chrome ...)
    */
adtsObjectType=5;
config=new Array(4);
// if (manifest codec is HE-AAC or HE-AACv2) OR (manifest codec not specified AND frequency less than 24kHz)
if(audioCodec&&(audioCodec.indexOf('mp4a.40.29')!==-1||audioCodec.indexOf('mp4a.40.5')!==-1)||!audioCodec&&adtsSampleingIndex>=6){
// HE-AAC uses SBR (Spectral Band Replication) , high frequencies are constructed from low frequencies
// there is a factor 2 between frame sample rate and output sample rate
// multiply frequency by 2 (see table below, equivalent to substract 3)
adtsExtensionSampleingIndex=adtsSampleingIndex-3;
}else{
// if (manifest codec is AAC) AND (frequency less than 24kHz AND nb channel is 1) OR (manifest codec not specified and mono audio)
// Chrome fails to play back with low frequency AAC LC mono when initialized with HE-AAC.  This is not a problem with stereo.
if(audioCodec&&audioCodec.indexOf('mp4a.40.2')!==-1&&(adtsSampleingIndex>=6&&adtsChanelConfig===1||/vivaldi/i.test(userAgent))||!audioCodec&&adtsChanelConfig===1){
adtsObjectType=2;
config=new Array(2);
}
adtsExtensionSampleingIndex=adtsSampleingIndex;
}
}
/* refer to http://wiki.multimedia.cx/index.php?title=MPEG-4_Audio#Audio_Specific_Config
      ISO 14496-3 (AAC).pdf - Table 1.13 — Syntax of AudioSpecificConfig()
    Audio Profile / Audio Object Type
    0: Null
    1: AAC Main
    2: AAC LC (Low Complexity)
    3: AAC SSR (Scalable Sample Rate)
    4: AAC LTP (Long Term Prediction)
    5: SBR (Spectral Band Replication)
    6: AAC Scalable
   sampling freq
    0: 96000 Hz
    1: 88200 Hz
    2: 64000 Hz
    3: 48000 Hz
    4: 44100 Hz
    5: 32000 Hz
    6: 24000 Hz
    7: 22050 Hz
    8: 16000 Hz
    9: 12000 Hz
    10: 11025 Hz
    11: 8000 Hz
    12: 7350 Hz
    13: Reserved
    14: Reserved
    15: frequency is written explictly
    Channel Configurations
    These are the channel configurations:
    0: Defined in AOT Specifc Config
    1: 1 channel: front-center
    2: 2 channels: front-left, front-right
  */
// audioObjectType = profile => profile, the MPEG-4 Audio Object Type minus 1
config[0]=adtsObjectType<<3;
// samplingFrequencyIndex
config[0]|=(adtsSampleingIndex&0x0E)>>1;
config[1]|=(adtsSampleingIndex&0x01)<<7;
// channelConfiguration
config[1]|=adtsChanelConfig<<3;
if(adtsObjectType===5){
// adtsExtensionSampleingIndex
config[1]|=(adtsExtensionSampleingIndex&0x0E)>>1;
config[2]=(adtsExtensionSampleingIndex&0x01)<<7;
// adtsObjectType (force to 2, chrome is checking that object type is less than 5 ???
//    https://chromium.googlesource.com/chromium/src.git/+/master/media/formats/mp4/aac.cc
config[2]|=2<<2;
config[3]=0;
}
return{config:config,samplerate:adtsSampleingRates[adtsSampleingIndex],channelCount:adtsChanelConfig,codec:'mp4a.40.'+adtsObjectType,manifestCodec:manifestCodec};
}

function isHeaderPattern(data,offset){
return data[offset]===0xff&&(data[offset+1]&0xf6)===0xf0;
}

function getHeaderLength(data,offset){
return data[offset+1]&0x01?7:9;
}

function getFullFrameLength(data,offset){
return(data[offset+3]&0x03)<<11|data[offset+4]<<3|(data[offset+5]&0xE0)>>>5;
}

function isHeader(data,offset){
// Look for ADTS header | 1111 1111 | 1111 X00X | where X can be either 0 or 1
// Layer bits (position 14 and 15) in header should be always 0 for ADTS
// More info https://wiki.multimedia.cx/index.php?title=ADTS
if(offset+1<data.length&&isHeaderPattern(data,offset)){
return true;
}

return false;
}

function probe(data,offset){
// same as isHeader but we also check that ADTS frame follows last ADTS frame
// or end of data is reached
if(offset+1<data.length&&isHeaderPattern(data,offset)){
// ADTS header Length
var headerLength=getHeaderLength(data,offset);
// ADTS frame Length
var frameLength=headerLength;
if(offset+5<data.length){
frameLength=getFullFrameLength(data,offset);
}

var newOffset=offset+frameLength;
if(newOffset===data.length||newOffset+1<data.length&&isHeaderPattern(data,newOffset)){
return true;
}
}
return false;
}

function initTrackConfig(track,observer,data,offset,audioCodec){
if(!track.samplerate){
var config=getAudioConfig(observer,data,offset,audioCodec);
track.config=config.config;
track.samplerate=config.samplerate;
track.channelCount=config.channelCount;
track.codec=config.codec;
track.manifestCodec=config.manifestCodec;
_logger.logger.log('parsed codec:'+track.codec+',rate:'+config.samplerate+',nb channel:'+config.channelCount);
}
}

function getFrameDuration(samplerate){
return 1024*90000/samplerate;
}

function parseFrameHeader(data,offset,pts,frameIndex,frameDuration){
var headerLength=void 0,
frameLength=void 0,
stamp=void 0;
var length=data.length;

// The protection skip bit tells us if we have 2 bytes of CRC data at the end of the ADTS header
headerLength=getHeaderLength(data,offset);
// retrieve frame size
frameLength=getFullFrameLength(data,offset);
frameLength-=headerLength;

if(frameLength>0&&offset+headerLength+frameLength<=length){
stamp=pts+frameIndex*frameDuration;
// logger.log(`AAC frame, offset/length/total/pts:${offset+headerLength}/${frameLength}/${data.byteLength}/${(stamp/90).toFixed(0)}`);
return{headerLength:headerLength,frameLength:frameLength,stamp:stamp};
}

return undefined;
}

function appendFrame(track,data,offset,pts,frameIndex){
var frameDuration=getFrameDuration(track.samplerate);
var header=parseFrameHeader(data,offset,pts,frameIndex,frameDuration);
if(header){
var stamp=header.stamp;
var headerLength=header.headerLength;
var frameLength=header.frameLength;

// logger.log(`AAC frame, offset/length/total/pts:${offset+headerLength}/${frameLength}/${data.byteLength}/${(stamp/90).toFixed(0)}`);
var aacSample={
unit:data.subarray(offset+headerLength,offset+headerLength+frameLength),
pts:stamp,
dts:stamp};


track.samples.push(aacSample);
track.len+=frameLength;

return{sample:aacSample,length:frameLength+headerLength};
}

return undefined;
}

/***/},
/* 23 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

/**
 *  MPEG parser helper
 */

var MpegAudio={

BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],

SamplingRateMap:[44100,48000,32000,22050,24000,16000,11025,12000,8000],

SamplesCoefficients:[
// MPEG 2.5
[0,// Reserved
72,// Layer3
144,// Layer2
12// Layer1
],
// Reserved
[0,// Reserved
0,// Layer3
0,// Layer2
0// Layer1
],
// MPEG 2
[0,// Reserved
72,// Layer3
144,// Layer2
12// Layer1
],
// MPEG 1
[0,// Reserved
144,// Layer3
144,// Layer2
12// Layer1
]],

BytesInSlot:[0,// Reserved
1,// Layer3
1,// Layer2
4// Layer1
],

appendFrame:function appendFrame(track,data,offset,pts,frameIndex){
// Using http://www.datavoyage.com/mpgscript/mpeghdr.htm as a reference
if(offset+24>data.length){
return undefined;
}

var header=this.parseHeader(data,offset);
if(header&&offset+header.frameLength<=data.length){
var frameDuration=header.samplesPerFrame*90000/header.sampleRate;
var stamp=pts+frameIndex*frameDuration;
var sample={unit:data.subarray(offset,offset+header.frameLength),pts:stamp,dts:stamp};

track.config=[];
track.channelCount=header.channelCount;
track.samplerate=header.sampleRate;
track.samples.push(sample);
track.len+=header.frameLength;

return{sample:sample,length:header.frameLength};
}

return undefined;
},

parseHeader:function parseHeader(data,offset){
var headerB=data[offset+1]>>3&3;
var headerC=data[offset+1]>>1&3;
var headerE=data[offset+2]>>4&15;
var headerF=data[offset+2]>>2&3;
var headerG=data[offset+2]>>1&1;
if(headerB!==1&&headerE!==0&&headerE!==15&&headerF!==3){
var columnInBitrates=headerB===3?3-headerC:headerC===3?3:4;
var bitRate=MpegAudio.BitratesMap[columnInBitrates*14+headerE-1]*1000;
var columnInSampleRates=headerB===3?0:headerB===2?1:2;
var sampleRate=MpegAudio.SamplingRateMap[columnInSampleRates*3+headerF];
var channelCount=data[offset+3]>>6===3?1:2;// If bits of channel mode are `11` then it is a single channel (Mono)
var sampleCoefficient=MpegAudio.SamplesCoefficients[headerB][headerC];
var bytesInSlot=MpegAudio.BytesInSlot[headerC];
var samplesPerFrame=sampleCoefficient*8*bytesInSlot;
var frameLength=parseInt(sampleCoefficient*bitRate/sampleRate+headerG,10)*bytesInSlot;

return{sampleRate:sampleRate,channelCount:channelCount,frameLength:frameLength,samplesPerFrame:samplesPerFrame};
}

return undefined;
},

isHeaderPattern:function isHeaderPattern(data,offset){
return data[offset]===0xff&&(data[offset+1]&0xe0)===0xe0&&(data[offset+1]&0x06)!==0x00;
},

isHeader:function isHeader(data,offset){
// Look for MPEG header | 1111 1111 | 111X XYZX | where X can be either 0 or 1 and Y or Z should be 1
// Layer bits (position 14 and 15) in header should be always different from 0 (Layer I or Layer II or Layer III)
// More info http://www.mp3-tech.org/programmer/frame_header.html
if(offset+1<data.length&&this.isHeaderPattern(data,offset)){
return true;
}

return false;
},

probe:function probe(data,offset){
// same as isHeader but we also check that MPEG frame follows last MPEG frame
// or end of data is reached
if(offset+1<data.length&&this.isHeaderPattern(data,offset)){
// MPEG header Length
var headerLength=4;
// MPEG frame Length
var header=this.parseHeader(data,offset);
var frameLength=headerLength;
if(header&&header.frameLength){
frameLength=header.frameLength;
}

var newOffset=offset+frameLength;
if(newOffset===data.length||newOffset+1<data.length&&this.isHeaderPattern(data,newOffset)){
return true;
}
}
return false;
}};


exports.default=MpegAudio;
module.exports=exports["default"];

/***/},
/* 24 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.Observer=undefined;

var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _eventemitter=__webpack_require__(54);

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

/**
 * @class
 *
 * Simple adapter sub-class of Nodejs-like EventEmitter.
 *
 * We simply want to pass along the event-name itself
 * in every call to a handler, which is the purpose of our `trigger` method
 * extending the standard API.
 *
 */
var Observer=exports.Observer=function(_EventEmitter){
_inherits(Observer,_EventEmitter);

function Observer(){
_classCallCheck(this,Observer);

return _possibleConstructorReturn(this,(Observer.__proto__||Object.getPrototypeOf(Observer)).apply(this,arguments));
}

_createClass(Observer,[{
key:'trigger',

/**
     *
     * @param {string} event
     * @param {any} data
     */
value:function trigger(event){
for(var _len=arguments.length,data=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){
data[_key-1]=arguments[_key];
}

this.emit.apply(this,[event,event].concat(data));
}}]);


return Observer;
}(_eventemitter.EventEmitter);

/***/},
/* 25 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

/**
 *  TimeRanges to string helper
 */

var TimeRanges={
toString:function toString(r){
var log='',
len=r.length;
for(var i=0;i<len;i++){
log+='['+r.start(i).toFixed(3)+','+r.end(i).toFixed(3)+']';
}

return log;
}};


exports.default=TimeRanges;
module.exports=exports['default'];

/***/},
/* 26 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.findFirstFragWithCC=findFirstFragWithCC;
exports.findFragWithCC=findFragWithCC;
exports.shouldAlignOnDiscontinuities=shouldAlignOnDiscontinuities;
exports.findDiscontinuousReferenceFrag=findDiscontinuousReferenceFrag;
exports.adjustPts=adjustPts;
exports.alignStream=alignStream;
exports.alignDiscontinuities=alignDiscontinuities;
exports.alignPDT=alignPDT;

var _binarySearch=__webpack_require__(9);

var _binarySearch2=_interopRequireDefault(_binarySearch);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function findFirstFragWithCC(fragments,cc){
var firstFrag=null;

for(var i=0;i<fragments.length;i+=1){
var currentFrag=fragments[i];
if(currentFrag&&currentFrag.cc===cc){
firstFrag=currentFrag;
break;
}
}

return firstFrag;
}

function findFragWithCC(fragments,CC){
return _binarySearch2.default.search(fragments,function(candidate){
if(candidate.cc<CC){
return 1;
}else if(candidate.cc>CC){
return-1;
}else{
return 0;
}
});
}

function shouldAlignOnDiscontinuities(lastFrag,lastLevel,details){
var shouldAlign=false;
if(lastLevel&&lastLevel.details&&details){
if(details.endCC>details.startCC||lastFrag&&lastFrag.cc<details.startCC){
shouldAlign=true;
}
}
return shouldAlign;
}

// Find the first frag in the previous level which matches the CC of the first frag of the new level
function findDiscontinuousReferenceFrag(prevDetails,curDetails){
var prevFrags=prevDetails.fragments;
var curFrags=curDetails.fragments;

if(!curFrags.length||!prevFrags.length){
_logger.logger.log('No fragments to align');
return;
}

var prevStartFrag=findFirstFragWithCC(prevFrags,curFrags[0].cc);

if(!prevStartFrag||prevStartFrag&&!prevStartFrag.startPTS){
_logger.logger.log('No frag in previous level to align on');
return;
}

return prevStartFrag;
}

function adjustPts(sliding,details){
details.fragments.forEach(function(frag){
if(frag){
var start=frag.start+sliding;
frag.start=frag.startPTS=start;
frag.endPTS=start+frag.duration;
}
});
details.PTSKnown=true;
}

/**
 * Using the parameters of the last level, this function computes PTS' of the new fragments so that they form a
 * contiguous stream with the last fragments.
 * The PTS of a fragment lets Hls.js know where it fits into a stream - by knowing every PTS, we know which fragment to
 * download at any given time. PTS is normally computed when the fragment is demuxed, so taking this step saves us time
 * and an extra download.
 * @param lastFrag
 * @param lastLevel
 * @param details
 */
function alignStream(lastFrag,lastLevel,details){
alignDiscontinuities(lastFrag,details,lastLevel);
if(!details.PTSKnown&&lastLevel){
// If the PTS wasn't figured out via discontinuity sequence that means there was no CC increase within the level.
// Aligning via Program Date Time should therefore be reliable, since PDT should be the same within the same
// discontinuity sequence.
alignPDT(details,lastLevel.details);
}
}

/**
 * Computes the PTS if a new level's fragments using the PTS of a fragment in the last level which shares the same
 * discontinuity sequence.
 * @param lastLevel - The details of the last loaded level
 * @param details - The details of the new level
 */
function alignDiscontinuities(lastFrag,details,lastLevel){
if(shouldAlignOnDiscontinuities(lastFrag,lastLevel,details)){
var referenceFrag=findDiscontinuousReferenceFrag(lastLevel.details,details);
if(referenceFrag){
_logger.logger.log('Adjusting PTS using last level due to CC increase within current level');
adjustPts(referenceFrag.start,details);
}
}
}

/**
 * Computes the PTS of a new level's fragments using the difference in Program Date Time from the last level.
 * @param details - The details of the new level
 * @param lastDetails - The details of the last loaded level
 */
function alignPDT(details,lastDetails){
if(lastDetails&&lastDetails.fragments.length){
if(!details.hasProgramDateTime||!lastDetails.hasProgramDateTime){
return;
}
// if last level sliding is 1000 and its first frag PROGRAM-DATE-TIME is 2017-08-20 1:10:00 AM
// and if new details first frag PROGRAM DATE-TIME is 2017-08-20 1:10:08 AM
// then we can deduce that playlist B sliding is 1000+8 = 1008s
var lastPDT=lastDetails.fragments[0].programDateTime;
var newPDT=details.fragments[0].programDateTime;
// date diff is in ms. frag.start is in seconds
var sliding=(newPDT-lastPDT)/1000+lastDetails.fragments[0].start;
if(Number.isFinite(sliding)){
_logger.logger.log('adjusting PTS using programDateTime delta, sliding:'+sliding.toFixed(3));
adjustPts(sliding,details);
}
}
}

/***/},
/* 27 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.findFragmentByPDT=findFragmentByPDT;
exports.findFragmentByPTS=findFragmentByPTS;
exports.fragmentWithinToleranceTest=fragmentWithinToleranceTest;
exports.pdtWithinToleranceTest=pdtWithinToleranceTest;

var _binarySearch=__webpack_require__(9);

var _binarySearch2=_interopRequireDefault(_binarySearch);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

/**
 * Returns first fragment whose endPdt value exceeds the given PDT.
 * @param {Array<Fragment>} fragments - The array of candidate fragments
 * @param {number|null} [PDTValue = null] - The PDT value which must be exceeded
 * @param {number} [maxFragLookUpTolerance = 0] - The amount of time that a fragment's start/end can be within in order to be considered contiguous
 * @returns {*|null} fragment - The best matching fragment
 */
function findFragmentByPDT(fragments,PDTValue,maxFragLookUpTolerance){
if(!Array.isArray(fragments)||!fragments.length||!Number.isFinite(PDTValue)){
return null;
}

// if less than start
if(PDTValue<fragments[0].programDateTime){
return null;
}

if(PDTValue>=fragments[fragments.length-1].endProgramDateTime){
return null;
}

maxFragLookUpTolerance=maxFragLookUpTolerance||0;
for(var seg=0;seg<fragments.length;++seg){
var frag=fragments[seg];
if(pdtWithinToleranceTest(PDTValue,maxFragLookUpTolerance,frag)){
return frag;
}
}

return null;
}

/**
 * Finds a fragment based on the SN of the previous fragment; or based on the needs of the current buffer.
 * This method compensates for small buffer gaps by applying a tolerance to the start of any candidate fragment, thus
 * breaking any traps which would cause the same fragment to be continuously selected within a small range.
 * @param {*} fragPrevious - The last frag successfully appended
 * @param {Array<Fragment>} fragments - The array of candidate fragments
 * @param {number} [bufferEnd = 0] - The end of the contiguous buffered range the playhead is currently within
 * @param {number} maxFragLookUpTolerance - The amount of time that a fragment's start/end can be within in order to be considered contiguous
 * @returns {*} foundFrag - The best matching fragment
 */
function findFragmentByPTS(fragPrevious,fragments){
var bufferEnd=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;
var maxFragLookUpTolerance=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;

var fragNext=fragPrevious?fragments[fragPrevious.sn-fragments[0].sn+1]:null;
// Prefer the next fragment if it's within tolerance
if(fragNext&&!fragmentWithinToleranceTest(bufferEnd,maxFragLookUpTolerance,fragNext)){
return fragNext;
}
return _binarySearch2.default.search(fragments,fragmentWithinToleranceTest.bind(null,bufferEnd,maxFragLookUpTolerance));
}

/**
 * The test function used by the findFragmentBySn's BinarySearch to look for the best match to the current buffer conditions.
 * @param {*} candidate - The fragment to test
 * @param {number} [bufferEnd = 0] - The end of the current buffered range the playhead is currently within
 * @param {number} [maxFragLookUpTolerance = 0] - The amount of time that a fragment's start can be within in order to be considered contiguous
 * @returns {number} - 0 if it matches, 1 if too low, -1 if too high
 */
function fragmentWithinToleranceTest(){
var bufferEnd=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;
var maxFragLookUpTolerance=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;
var candidate=arguments[2];

// offset should be within fragment boundary - config.maxFragLookUpTolerance
// this is to cope with situations like
// bufferEnd = 9.991
// frag[Ø] : [0,10]
// frag[1] : [10,20]
// bufferEnd is within frag[0] range ... although what we are expecting is to return frag[1] here
//              frag start               frag start+duration
//                  |-----------------------------|
//              <--->                         <--->
//  ...--------><-----------------------------><---------....
// previous frag         matching fragment         next frag
//  return -1             return 0                 return 1
// logger.log(`level/sn/start/end/bufEnd:${level}/${candidate.sn}/${candidate.start}/${(candidate.start+candidate.duration)}/${bufferEnd}`);
// Set the lookup tolerance to be small enough to detect the current segment - ensures we don't skip over very small segments
var candidateLookupTolerance=Math.min(maxFragLookUpTolerance,candidate.duration+(candidate.deltaPTS?candidate.deltaPTS:0));
if(candidate.start+candidate.duration-candidateLookupTolerance<=bufferEnd){
return 1;
}else if(candidate.start-candidateLookupTolerance>bufferEnd&&candidate.start){
// if maxFragLookUpTolerance will have negative value then don't return -1 for first element
return-1;
}

return 0;
}

/**
 * The test function used by the findFragmentByPdt's BinarySearch to look for the best match to the current buffer conditions.
 * This function tests the candidate's program date time values, as represented in Unix time
 * @param {*} candidate - The fragment to test
 * @param {number} [pdtBufferEnd = 0] - The Unix time representing the end of the current buffered range
 * @param {number} [maxFragLookUpTolerance = 0] - The amount of time that a fragment's start can be within in order to be considered contiguous
 * @returns {boolean} True if contiguous, false otherwise
 */
function pdtWithinToleranceTest(pdtBufferEnd,maxFragLookUpTolerance,candidate){
var candidateLookupTolerance=Math.min(maxFragLookUpTolerance,candidate.duration+(candidate.deltaPTS?candidate.deltaPTS:0))*1000;
return candidate.endProgramDateTime-candidateLookupTolerance>pdtBufferEnd;
}

/***/},
/* 28 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

/**
 * Sub-class specialization of EventHandler base class.
 *
 * TaskLoop allows to schedule a task function being called (optionnaly repeatedly) on the main loop,
 * scheduled asynchroneously, avoiding recursive calls in the same tick.
 *
 * The task itself is implemented in `doTick`. It can be requested and called for single execution
 * using the `tick` method.
 *
 * It will be assured that the task execution method (`tick`) only gets called once per main loop "tick",
 * no matter how often it gets requested for execution. Execution in further ticks will be scheduled accordingly.
 *
 * If further execution requests have already been scheduled on the next tick, it can be checked with `hasNextTick`,
 * and cancelled with `clearNextTick`.
 *
 * The task can be scheduled as an interval repeatedly with a period as parameter (see `setInterval`, `clearInterval`).
 *
 * Sub-classes need to implement the `doTick` method which will effectively have the task execution routine.
 *
 * Further explanations:
 *
 * The baseclass has a `tick` method that will schedule the doTick call. It may be called synchroneously
 * only for a stack-depth of one. On re-entrant calls, sub-sequent calls are scheduled for next main loop ticks.
 *
 * When the task execution (`tick` method) is called in re-entrant way this is detected and
 * we are limiting the task execution per call stack to exactly one, but scheduling/post-poning further
 * task processing on the next main loop iteration (also known as "next tick" in the Node/JS runtime lingo).
 */

var TaskLoop=function(_EventHandler){
_inherits(TaskLoop,_EventHandler);

function TaskLoop(hls){
var _ref;

_classCallCheck(this,TaskLoop);

for(var _len=arguments.length,events=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){
events[_key-1]=arguments[_key];
}

var _this=_possibleConstructorReturn(this,(_ref=TaskLoop.__proto__||Object.getPrototypeOf(TaskLoop)).call.apply(_ref,[this,hls].concat(events)));

_this._tickInterval=null;
_this._tickTimer=null;
_this._tickCallCount=0;
_this._boundTick=_this.tick.bind(_this);
return _this;
}

/**
   * @override
   */


_createClass(TaskLoop,[{
key:'onHandlerDestroying',
value:function onHandlerDestroying(){
// clear all timers before unregistering from event bus
this.clearNextTick();
this.clearInterval();
}

/**
     * @returns {boolean}
     */},

{
key:'hasInterval',
value:function hasInterval(){
return!!this._tickInterval;
}

/**
     * @returns {boolean}
     */},

{
key:'hasNextTick',
value:function hasNextTick(){
return!!this._tickTimer;
}

/**
     * @param {number} millis Interval time (ms)
     * @returns {boolean} True when interval has been scheduled, false when already scheduled (no effect)
     */},

{
key:'setInterval',
value:function(_setInterval){
function setInterval(_x){
return _setInterval.apply(this,arguments);
}

setInterval.toString=function(){
return _setInterval.toString();
};

return setInterval;
}(function(millis){
if(!this._tickInterval){
this._tickInterval=setInterval(this._boundTick,millis);
return true;
}
return false;
})

/**
     * @returns {boolean} True when interval was cleared, false when none was set (no effect)
     */},

{
key:'clearInterval',
value:function(_clearInterval){
function clearInterval(){
return _clearInterval.apply(this,arguments);
}

clearInterval.toString=function(){
return _clearInterval.toString();
};

return clearInterval;
}(function(){
if(this._tickInterval){
clearInterval(this._tickInterval);
this._tickInterval=null;
return true;
}
return false;
})

/**
     * @returns {boolean} True when timeout was cleared, false when none was set (no effect)
     */},

{
key:'clearNextTick',
value:function clearNextTick(){
if(this._tickTimer){
clearTimeout(this._tickTimer);
this._tickTimer=null;
return true;
}
return false;
}

/**
     * Will call the subclass doTick implementation in this main loop tick
     * or in the next one (via setTimeout(,0)) in case it has already been called
     * in this tick (in case this is a re-entrant call).
     */},

{
key:'tick',
value:function tick(){
this._tickCallCount++;
if(this._tickCallCount===1){
this.doTick();
// re-entrant call to tick from previous doTick call stack
// -> schedule a call on the next main loop iteration to process this task processing request
if(this._tickCallCount>1){
// make sure only one timer exists at any time at max
this.clearNextTick();
this._tickTimer=setTimeout(this._boundTick,0);
}
this._tickCallCount=0;
}
}

/**
     * For subclass to implement task logic
     * @abstract
     */},

{
key:'doTick',
value:function doTick(){}}]);


return TaskLoop;
}(_eventHandler2.default);

exports.default=TaskLoop;
module.exports=exports['default'];

/***/},
/* 29 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.sendAddTrackEvent=sendAddTrackEvent;
exports.clearCurrentCues=clearCurrentCues;
function sendAddTrackEvent(track,videoEl){
var event=null;
try{
event=new window.Event('addtrack');
}catch(err){
// for IE11
event=document.createEvent('Event');
event.initEvent('addtrack',false,false);
}
event.track=track;
videoEl.dispatchEvent(event);
}

function clearCurrentCues(track){
if(track&&track.cues){
while(track.cues.length>0){
track.removeCue(track.cues[0]);
}
}
}

/***/},
/* 30 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.fixLineBreaks=undefined;

var _vttcue=__webpack_require__(71);

var _vttcue2=_interopRequireDefault(_vttcue);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

var StringDecoder=function StringDecoder(){
return{
decode:function decode(data){
if(!data){
return'';
}

if(typeof data!=='string'){
throw new Error('Error - expected string data.');
}

return decodeURIComponent(encodeURIComponent(data));
}};

};/*
    * Source: https://github.com/mozilla/vtt.js/blob/master/dist/vtt.js#L1716
    */

function VTTParser(){
this.window=window;
this.state='INITIAL';
this.buffer='';
this.decoder=new StringDecoder();
this.regionList=[];
}

// Try to parse input as a time stamp.
function parseTimeStamp(input){
function computeSeconds(h,m,s,f){
return(h|0)*3600+(m|0)*60+(s|0)+(f|0)/1000;
}

var m=input.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
if(!m){
return null;
}

if(m[3]){
// Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]
return computeSeconds(m[1],m[2],m[3].replace(':',''),m[4]);
}else if(m[1]>59){
// Timestamp takes the form of [hours]:[minutes].[milliseconds]
// First position is hours as it's over 59.
return computeSeconds(m[1],m[2],0,m[4]);
}else{
// Timestamp takes the form of [minutes]:[seconds].[milliseconds]
return computeSeconds(0,m[1],m[2],m[4]);
}
}

// A settings object holds key/value pairs and will ignore anything but the first
// assignment to a specific key.
function Settings(){
this.values=Object.create(null);
}

Settings.prototype={
// Only accept the first assignment to any key.
set:function set(k,v){
if(!this.get(k)&&v!==''){
this.values[k]=v;
}
},
// Return the value for a key, or a default value.
// If 'defaultKey' is passed then 'dflt' is assumed to be an object with
// a number of possible default values as properties where 'defaultKey' is
// the key of the property that will be chosen; otherwise it's assumed to be
// a single value.
get:function get(k,dflt,defaultKey){
if(defaultKey){
return this.has(k)?this.values[k]:dflt[defaultKey];
}

return this.has(k)?this.values[k]:dflt;
},
// Check whether we have a value for a key.
has:function has(k){
return k in this.values;
},
// Accept a setting if its one of the given alternatives.
alt:function alt(k,v,a){
for(var n=0;n<a.length;++n){
if(v===a[n]){
this.set(k,v);
break;
}
}
},
// Accept a setting if its a valid (signed) integer.
integer:function integer(k,v){
if(/^-?\d+$/.test(v)){
// integer
this.set(k,parseInt(v,10));
}
},
// Accept a setting if its a valid percentage.
percent:function percent(k,v){
var m=void 0;
if(m=v.match(/^([\d]{1,3})(\.[\d]*)?%$/)){
v=parseFloat(v);
if(v>=0&&v<=100){
this.set(k,v);
return true;
}
}
return false;
}};


// Helper function to parse input into groups separated by 'groupDelim', and
// interprete each group as a key/value pair separated by 'keyValueDelim'.
function parseOptions(input,callback,keyValueDelim,groupDelim){
var groups=groupDelim?input.split(groupDelim):[input];
for(var i in groups){
if(typeof groups[i]!=='string'){
continue;
}

var kv=groups[i].split(keyValueDelim);
if(kv.length!==2){
continue;
}

var k=kv[0];
var v=kv[1];
callback(k,v);
}
}

var defaults=new _vttcue2.default(0,0,0);
// 'middle' was changed to 'center' in the spec: https://github.com/w3c/webvtt/pull/244
//  Safari doesn't yet support this change, but FF and Chrome do.
var center=defaults.align==='middle'?'middle':'center';

function parseCue(input,cue,regionList){
// Remember the original input if we need to throw an error.
var oInput=input;
// 4.1 WebVTT timestamp
function consumeTimeStamp(){
var ts=parseTimeStamp(input);
if(ts===null){
throw new Error('Malformed timestamp: '+oInput);
}

// Remove time stamp from input.
input=input.replace(/^[^\sa-zA-Z-]+/,'');
return ts;
}

// 4.4.2 WebVTT cue settings
function consumeCueSettings(input,cue){
var settings=new Settings();

parseOptions(input,function(k,v){
switch(k){
case'region':
// Find the last region we parsed with the same region id.
for(var i=regionList.length-1;i>=0;i--){
if(regionList[i].id===v){
settings.set(k,regionList[i].region);
break;
}
}
break;
case'vertical':
settings.alt(k,v,['rl','lr']);
break;
case'line':
var vals=v.split(','),
vals0=vals[0];
settings.integer(k,vals0);
if(settings.percent(k,vals0)){
settings.set('snapToLines',false);
}

settings.alt(k,vals0,['auto']);
if(vals.length===2){
settings.alt('lineAlign',vals[1],['start',center,'end']);
}

break;
case'position':
vals=v.split(',');
settings.percent(k,vals[0]);
if(vals.length===2){
settings.alt('positionAlign',vals[1],['start',center,'end','line-left','line-right','auto']);
}

break;
case'size':
settings.percent(k,v);
break;
case'align':
settings.alt(k,v,['start',center,'end','left','right']);
break;}

},/:/,/\s/);

// Apply default values for any missing fields.
cue.region=settings.get('region',null);
cue.vertical=settings.get('vertical','');
var line=settings.get('line','auto');
if(line==='auto'&&defaults.line===-1){
// set numeric line number for Safari
line=-1;
}
cue.line=line;
cue.lineAlign=settings.get('lineAlign','start');
cue.snapToLines=settings.get('snapToLines',true);
cue.size=settings.get('size',100);
cue.align=settings.get('align',center);
var position=settings.get('position','auto');
if(position==='auto'&&defaults.position===50){
// set numeric position for Safari
position=cue.align==='start'||cue.align==='left'?0:cue.align==='end'||cue.align==='right'?100:50;
}
cue.position=position;
}

function skipWhitespace(){
input=input.replace(/^\s+/,'');
}

// 4.1 WebVTT cue timings.
skipWhitespace();
cue.startTime=consumeTimeStamp();// (1) collect cue start time
skipWhitespace();
if(input.substr(0,3)!=='-->'){
// (3) next characters must match '-->'
throw new Error('Malformed time stamp (time stamps must be separated by \'-->\'): '+oInput);
}
input=input.substr(3);
skipWhitespace();
cue.endTime=consumeTimeStamp();// (5) collect cue end time

// 4.1 WebVTT cue settings list.
skipWhitespace();
consumeCueSettings(input,cue);
}

function fixLineBreaks(input){
return input.replace(/<br(?: \/)?>/gi,'\n');
}

VTTParser.prototype={
parse:function parse(data){
var self=this;

// If there is no data then we won't decode it, but will just try to parse
// whatever is in buffer already. This may occur in circumstances, for
// example when flush() is called.
if(data){
// Try to decode the data that we received.
self.buffer+=self.decoder.decode(data,{stream:true});
}

function collectNextLine(){
var buffer=self.buffer;
var pos=0;

buffer=fixLineBreaks(buffer);

while(pos<buffer.length&&buffer[pos]!=='\r'&&buffer[pos]!=='\n'){
++pos;
}

var line=buffer.substr(0,pos);
// Advance the buffer early in case we fail below.
if(buffer[pos]==='\r'){
++pos;
}

if(buffer[pos]==='\n'){
++pos;
}

self.buffer=buffer.substr(pos);
return line;
}

// 3.2 WebVTT metadata header syntax
function parseHeader(input){
parseOptions(input,function(k,v){
switch(k){
case'Region':
// 3.3 WebVTT region metadata header syntax
// console.log('parse region', v);
// parseRegion(v);
break;}

},/:/);
}

// 5.1 WebVTT file parsing.
try{
var line=void 0;
if(self.state==='INITIAL'){
// We can't start parsing until we have the first line.
if(!/\r\n|\n/.test(self.buffer)){
return this;
}

line=collectNextLine();
// strip of UTF-8 BOM if any
// https://en.wikipedia.org/wiki/Byte_order_mark#UTF-8
var m=line.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);
if(!m||!m[0]){
throw new Error('Malformed WebVTT signature.');
}

self.state='HEADER';
}

var alreadyCollectedLine=false;
while(self.buffer){
// We can't parse a line until we have the full line.
if(!/\r\n|\n/.test(self.buffer)){
return this;
}

if(!alreadyCollectedLine){
line=collectNextLine();
}else{
alreadyCollectedLine=false;
}

switch(self.state){
case'HEADER':
// 13-18 - Allow a header (metadata) under the WEBVTT line.
if(/:/.test(line)){
parseHeader(line);
}else if(!line){
// An empty line terminates the header and starts the body (cues).
self.state='ID';
}
continue;
case'NOTE':
// Ignore NOTE blocks.
if(!line){
self.state='ID';
}

continue;
case'ID':
// Check for the start of NOTE blocks.
if(/^NOTE($|[ \t])/.test(line)){
self.state='NOTE';
break;
}
// 19-29 - Allow any number of line terminators, then initialize new cue values.
if(!line){
continue;
}

self.cue=new _vttcue2.default(0,0,'');
self.state='CUE';
// 30-39 - Check if self line contains an optional identifier or timing data.
if(line.indexOf('-->')===-1){
self.cue.id=line;
continue;
}
// Process line as start of a cue.
/* falls through */
case'CUE':
// 40 - Collect cue timings and settings.
try{
parseCue(line,self.cue,self.regionList);
}catch(e){
// In case of an error ignore rest of the cue.
self.cue=null;
self.state='BADCUE';
continue;
}
self.state='CUETEXT';
continue;
case'CUETEXT':
var hasSubstring=line.indexOf('-->')!==-1;
// 34 - If we have an empty line then report the cue.
// 35 - If we have the special substring '-->' then report the cue,
// but do not collect the line as we need to process the current
// one as a new cue.
if(!line||hasSubstring&&(alreadyCollectedLine=true)){
// We are done parsing self cue.
if(self.oncue){
self.oncue(self.cue);
}

self.cue=null;
self.state='ID';
continue;
}
if(self.cue.text){
self.cue.text+='\n';
}

self.cue.text+=line;
continue;
case'BADCUE':
// BADCUE
// 54-62 - Collect and discard the remaining cue.
if(!line){
self.state='ID';
}

continue;}

}
}catch(e){
// If we are currently parsing a cue, report what we have.
if(self.state==='CUETEXT'&&self.cue&&self.oncue){
self.oncue(self.cue);
}

self.cue=null;
// Enter BADWEBVTT state if header was not parsed correctly otherwise
// another exception occurred so enter BADCUE state.
self.state=self.state==='INITIAL'?'BADWEBVTT':'BADCUE';
}
return this;
},
flush:function flush(){
var self=this;
try{
// Finish decoding the stream.
self.buffer+=self.decoder.decode();
// Synthesize the end of the current cue or region.
if(self.cue||self.state==='HEADER'){
self.buffer+='\n\n';
self.parse();
}
// If we've flushed, parsed, and we're still on the INITIAL state then
// that means we don't have enough of the stream to parse the first
// line.
if(self.state==='INITIAL'){
throw new Error('Malformed WebVTT signature.');
}
}catch(e){
throw e;
}
if(self.onflush){
self.onflush();
}

return this;
}};


exports.fixLineBreaks=fixLineBreaks;
exports.default=VTTParser;

/***/},
/* 31 */
/***/function(module,exports,__webpack_require__){

module.exports=__webpack_require__(32);


/***/},
/* 32 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};

var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _xgplayer=__webpack_require__(33);

var _xgplayer2=_interopRequireDefault(_xgplayer);

var _hls=__webpack_require__(34);

var _hls2=_interopRequireDefault(_hls);

var _utils=__webpack_require__(80);

var _utils2=_interopRequireDefault(_utils);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var HlsJsPlayer=function(_Player){
_inherits(HlsJsPlayer,_Player);

function HlsJsPlayer(options){
_classCallCheck(this,HlsJsPlayer);

var _this=_possibleConstructorReturn(this,(HlsJsPlayer.__proto__||Object.getPrototypeOf(HlsJsPlayer)).call(this,options));

_this.hlsOpts=options.hlsOpts||{};
var util=_xgplayer2.default.util;
var player=_this;

player.once('complete',function(){
if(player.config.isLive){
util.addClass(player.root,'xgplayer-is-live');
if(!util.findDom(player.controls,'.xgplayer-live')){
var live=util.createDom('xg-live',player.lang.LIVE||'正在直播',{},'xgplayer-live');
player.controls.appendChild(live);
}
}
});

_this.browser=_utils2.default.getBrowserVersion();
if(player.config.useHls===undefined){
if(_xgplayer2.default.sniffer.device==='mobile'&&navigator.platform!=='MacIntel'&&navigator.platform!=='Win32'||_this.browser.indexOf('Safari')>-1){
return _possibleConstructorReturn(_this);
}
}else if(!player.config.useHls){
return _possibleConstructorReturn(_this);
}
_this._start=_this.start;
_this.start=function(){
if(!window.XgVideoProxy){
_this.root.insertBefore(_this.video,_this.root.firstChild);
}
setTimeout(function(){
_this.emit('complete');
if(_this.danmu&&typeof _this.danmu.resize==='function'){
_this.danmu.resize();
}
},1);
};
Number.isFinite=Number.isFinite||function(value){
return typeof value==="number"&&isFinite(value);
};

var hls=void 0;
hls=new _hls2.default(_this.hlsOpts);
_this.hls=hls;

Object.defineProperty(player,'src',{
get:function get(){
return player.currentSrc;
},
set:function set(url){
util.removeClass(player.root,'xgplayer-is-live');
var liveDom=document.querySelector('.xgplayer-live');
if(liveDom){
liveDom.parentNode.removeChild(liveDom);
}
// player.config.url = url
player.autoplay=true;
var paused=player.paused;
if(!paused){
player.pause();
}
player.hls.stopLoad();
player.hls.detachMedia();
player.hls.destroy();
player.hls=new _hls2.default(player.hlsOpts);
player.register(url);
player.once('canplay',function(){
player.play().catch(function(err){});
});
player.hls.loadSource(url);
player.hls.attachMedia(player.video);
},

configurable:true});

_this.register(_this.config.url);
_this.once('complete',function(){
hls.attachMedia(player.video);
player.once('canplay',function(){
player.play().catch(function(err){});
});
});
_this.once('destroy',function(){
hls.stopLoad();
});
return _this;
}

_createClass(HlsJsPlayer,[{
key:'switchURL',
value:function switchURL(url){
var player=this;
player.url=url;
player.config.url=url;
var curTime=player.currentTime;
// player.video.muted = true
_xgplayer2.default.util.addClass(player.root,'xgplayer-is-enter');
player.once('playing',function(){
_xgplayer2.default.util.removeClass(player.root,'xgplayer-is-enter');
// player.video.muted = false
});
player.once('canplay',function(){
player.currentTime=curTime;
player.play();
});
if(_typeof(player.hls)==='object'){
player.hls.originUrl=url;
}
player.src=url;
}},
{
key:'register',
value:function register(url){
var hls=this.hls;
var util=_xgplayer2.default.util;
var player=this;
hls.on(_hls2.default.Events.MEDIA_ATTACHED,function(){
hls.loadSource(url);
});

hls.on(_hls2.default.Events.LEVEL_LOADED,function(name,e){
if(!hls.inited){
hls.inited=true;
if(e&&e.details&&e.details.live){
util.addClass(player.root,'xgplayer-is-live');
if(!util.findDom(player.root,'.xgplayer-live')){
var live=util.createDom('xg-live','正在直播',{},'xgplayer-live');
player.controls.appendChild(live);
}
}
}
});
hls.on(_hls2.default.Events.ERROR,function(event,data){
player.emit('HLS_ERROR',{
errorType:data.type,
errorDetails:data.details,
errorFatal:data.fatal});

if(data.fatal){
switch(data.type){
case _hls2.default.ErrorTypes.NETWORK_ERROR:
hls.startLoad();
break;
case _hls2.default.ErrorTypes.MEDIA_ERROR:
hls.recoverMediaError();
break;
default:
player.emit('error',data);}

}
});
this._statistics();
}},
{
key:'_statistics',
value:function _statistics(){
var statsInfo={
speed:0,
playerType:"HlsPlayer"};


var mediainfo={
videoDataRate:0,
audioDataRate:0};

var hls=this.hls;
var player=this;

hls.on(_hls2.default.Events.FRAG_LOAD_PROGRESS,function(flag,payload){
statsInfo.speed=payload.stats.loaded/1000;
});
hls.on(_hls2.default.Events.FRAG_PARSING_DATA,function(flag,payload){
if(payload.type==='video'){
mediainfo.fps=parseInt(payload.nb/(payload.endPTS-payload.startPTS));
}
});

hls.on(_hls2.default.Events.FRAG_PARSING_INIT_SEGMENT,function(flag,payload){
mediainfo.hasAudio=payload&&payload.tracks&&payload.tracks.audio?true:false;
mediainfo.hasVideo=payload&&payload.tracks&&payload.tracks.video?true:false;

if(mediainfo.hasAudio&&payload.tracks.audio){
var track=payload.tracks.audio;
mediainfo.audioChannelCount=track.metadata&&track.metadata.channelCount?track.metadata.channelCount:0;
mediainfo.audioCodec=track.codec;
}

if(mediainfo.hasVideo&&payload.tracks.video){
var _track=payload.tracks.video;
mediainfo.videoCodec=_track.codec;
mediainfo.width=_track.metadata&&_track.metadata.width?_track.metadata.width:0;
mediainfo.height=_track.metadata&&_track.metadata.height?_track.metadata.height:0;
}
mediainfo.duration=payload.frag&&payload.frag.duration?payload.frag.duration:0;
mediainfo.level=payload.frag&&payload.frag.level?payload.frag.level:0;
if(mediainfo.videoCodec||mediainfo.audioCodec){
mediainfo.mimeType='video/hls; codecs="'+mediainfo.videoCodec+';'+mediainfo.audioCodec+'"';
}

player.mediainfo=mediainfo;
player.emit("media_info",mediainfo);
});

this._statisticsTimmer=setInterval(function(){
player.emit("statistics_info",statsInfo);
statsInfo.speed=0;
},1000);
}},
{
key:'destroy',
value:function destroy(){
_get(HlsJsPlayer.prototype.__proto__||Object.getPrototypeOf(HlsJsPlayer.prototype),'destroy',this).call(this);
clearInterval(this._statisticsTimmer);
}}]);


return HlsJsPlayer;
}(_xgplayer2.default);

HlsJsPlayer.isSupported=_hls2.default.isSupported;
HlsJsPlayer.HlsJs=_hls2.default;

exports.default=HlsJsPlayer;
module.exports=exports['default'];

/***/},
/* 33 */
/***/function(module,exports){

module.exports=__WEBPACK_EXTERNAL_MODULE__33__;

/***/},
/* 34 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _urlToolkit=__webpack_require__(8);

var URLToolkit=_interopRequireWildcard(_urlToolkit);

var _errors=__webpack_require__(2);

var _playlistLoader=__webpack_require__(15);

var _playlistLoader2=_interopRequireDefault(_playlistLoader);

var _fragmentLoader=__webpack_require__(38);

var _fragmentLoader2=_interopRequireDefault(_fragmentLoader);

var _keyLoader=__webpack_require__(39);

var _keyLoader2=_interopRequireDefault(_keyLoader);

var _fragmentTracker=__webpack_require__(6);

var _streamController=__webpack_require__(40);

var _streamController2=_interopRequireDefault(_streamController);

var _levelController=__webpack_require__(57);

var _levelController2=_interopRequireDefault(_levelController);

var _id3TrackController=__webpack_require__(58);

var _id3TrackController2=_interopRequireDefault(_id3TrackController);

var _isSupported2=__webpack_require__(59);

var _logger=__webpack_require__(0);

var _config=__webpack_require__(60);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _observer=__webpack_require__(24);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

/**
 * @module Hls
 * @class
 * @constructor
 */
var Hls=function(_Observer){
_inherits(Hls,_Observer);

_createClass(Hls,null,[{
key:'isSupported',


/**
     * @type {boolean}
     */
value:function isSupported(){
return(0,_isSupported2.isSupported)();
}

/**
     * @type {HlsEvents}
     */},

{
key:'version',

/**
     * @type {string}
     */
get:function get(){
return __VERSION__;
}},
{
key:'Events',
get:function get(){
return _events2.default;
}

/**
     * @type {HlsErrorTypes}
     */},

{
key:'ErrorTypes',
get:function get(){
return _errors.ErrorTypes;
}

/**
     * @type {HlsErrorDetails}
     */},

{
key:'ErrorDetails',
get:function get(){
return _errors.ErrorDetails;
}

/**
     * @type {HlsConfig}
     */},

{
key:'DefaultConfig',
get:function get(){
if(!Hls.defaultConfig){
return _config.hlsDefaultConfig;
}

return Hls.defaultConfig;
}

/**
     * @type {HlsConfig}
     */,

set:function set(defaultConfig){
Hls.defaultConfig=defaultConfig;
}

/**
     * Creates an instance of an HLS client that can attach to exactly one `HTMLMediaElement`.
     *
     * @constructs Hls
     * @param {HlsConfig} config
     */}]);



function Hls(){
var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};

_classCallCheck(this,Hls);

var _this=_possibleConstructorReturn(this,(Hls.__proto__||Object.getPrototypeOf(Hls)).call(this));

var defaultConfig=Hls.DefaultConfig;

if((config.liveSyncDurationCount||config.liveMaxLatencyDurationCount)&&(config.liveSyncDuration||config.liveMaxLatencyDuration)){
throw new Error('Illegal hls.js config: don\'t mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration');
}

for(var prop in defaultConfig){
if(prop in config)continue;
config[prop]=defaultConfig[prop];
}

if(config.liveMaxLatencyDurationCount!==undefined&&config.liveMaxLatencyDurationCount<=config.liveSyncDurationCount){
throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');
}

if(config.liveMaxLatencyDuration!==undefined&&(config.liveMaxLatencyDuration<=config.liveSyncDuration||config.liveSyncDuration===undefined)){
throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');
}

(0,_logger.enableLogs)(config.debug);
_this.config=config;
_this._autoLevelCapping=-1;

// core controllers and network loaders

/**
     * @member {AbrController} abrController
     */
var abrController=_this.abrController=new config.abrController(_this);

var bufferController=new config.bufferController(_this);
var capLevelController=new config.capLevelController(_this);
var fpsController=new config.fpsController(_this);
var playListLoader=new _playlistLoader2.default(_this);
var fragmentLoader=new _fragmentLoader2.default(_this);
var keyLoader=new _keyLoader2.default(_this);
var id3TrackController=new _id3TrackController2.default(_this);

// network controllers

/**
     * @member {LevelController} levelController
     */
var levelController=_this.levelController=new _levelController2.default(_this);

// FIXME: FragmentTracker must be defined before StreamController because the order of event handling is important
var fragmentTracker=new _fragmentTracker.FragmentTracker(_this);

/**
     * @member {StreamController} streamController
     */
var streamController=_this.streamController=new _streamController2.default(_this,fragmentTracker);

var networkControllers=[levelController,streamController];

// optional audio stream controller
/**
     * @var {ICoreComponent | Controller}
     */
var Controller=config.audioStreamController;
if(Controller){
networkControllers.push(new Controller(_this,fragmentTracker));
}

/**
     * @member {INetworkController[]} networkControllers
     */
_this.networkControllers=networkControllers;

/**
     * @var {ICoreComponent[]}
     */
var coreComponents=[playListLoader,fragmentLoader,keyLoader,abrController,bufferController,capLevelController,fpsController,id3TrackController,fragmentTracker];

// optional audio track and subtitle controller
Controller=config.audioTrackController;
if(Controller){
var audioTrackController=new Controller(_this);

/**
       * @member {AudioTrackController} audioTrackController
       */
_this.audioTrackController=audioTrackController;
coreComponents.push(audioTrackController);
}

Controller=config.subtitleTrackController;
if(Controller){
var subtitleTrackController=new Controller(_this);

/**
       * @member {SubtitleTrackController} subtitleTrackController
       */
_this.subtitleTrackController=subtitleTrackController;
networkControllers.push(subtitleTrackController);
}

Controller=config.emeController;
if(Controller){
var emeController=new Controller(_this);

/**
       * @member {EMEController} emeController
       */
_this.emeController=emeController;
coreComponents.push(emeController);
}

// optional subtitle controllers
Controller=config.subtitleStreamController;
if(Controller){
networkControllers.push(new Controller(_this,fragmentTracker));
}
Controller=config.timelineController;
if(Controller){
coreComponents.push(new Controller(_this));
}

/**
     * @member {ICoreComponent[]}
     */
_this.coreComponents=coreComponents;
return _this;
}

/**
   * Dispose of the instance
   */


_createClass(Hls,[{
key:'destroy',
value:function destroy(){
_logger.logger.log('destroy');
this.trigger(_events2.default.DESTROYING);
this.detachMedia();
this.coreComponents.concat(this.networkControllers).forEach(function(component){
component.destroy();
});
this.url=null;
this.removeAllListeners();
this._autoLevelCapping=-1;
}

/**
     * Attach a media element
     * @param {HTMLMediaElement} media
     */},

{
key:'attachMedia',
value:function attachMedia(media){
_logger.logger.log('attachMedia');
this.media=media;
this.trigger(_events2.default.MEDIA_ATTACHING,{media:media});
}

/**
     * Detach from the media
     */},

{
key:'detachMedia',
value:function detachMedia(){
_logger.logger.log('detachMedia');
this.trigger(_events2.default.MEDIA_DETACHING);
this.media=null;
}

/**
     * Set the source URL. Can be relative or absolute.
     * @param {string} url
     */},

{
key:'loadSource',
value:function loadSource(url){
url=URLToolkit.buildAbsoluteURL(window.location.href,url,{alwaysNormalize:true});
_logger.logger.log('loadSource:'+url);
this.url=url;
// when attaching to a source URL, trigger a playlist load
this.trigger(_events2.default.MANIFEST_LOADING,{url:url});
}

/**
     * Start loading data from the stream source.
     * Depending on default config, client starts loading automatically when a source is set.
     *
     * @param {number} startPosition Set the start position to stream from
     * @default -1 None (from earliest point)
     */},

{
key:'startLoad',
value:function startLoad(){
var startPosition=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;

_logger.logger.log('startLoad('+startPosition+')');
this.networkControllers.forEach(function(controller){
controller.startLoad(startPosition);
});
}

/**
     * Stop loading of any stream data.
     */},

{
key:'stopLoad',
value:function stopLoad(){
_logger.logger.log('stopLoad');
this.networkControllers.forEach(function(controller){
controller.stopLoad();
});
}

/**
     * Swap through possible audio codecs in the stream (for example to switch from stereo to 5.1)
     */},

{
key:'swapAudioCodec',
value:function swapAudioCodec(){
_logger.logger.log('swapAudioCodec');
this.streamController.swapAudioCodec();
}

/**
     * When the media-element fails, this allows to detach and then re-attach it
     * as one call (convenience method).
     *
     * Automatic recovery of media-errors by this process is configurable.
     */},

{
key:'recoverMediaError',
value:function recoverMediaError(){
_logger.logger.log('recoverMediaError');
var media=this.media;
this.detachMedia();
this.attachMedia(media);
}

/**
     * @type {QualityLevel[]}
     */},

{
key:'levels',
get:function get(){
return this.levelController.levels;
}

/**
     * Index of quality level currently played
     * @type {number}
     */},

{
key:'currentLevel',
get:function get(){
return this.streamController.currentLevel;
}

/**
     * Set quality level index immediately .
     * This will flush the current buffer to replace the quality asap.
     * That means playback will interrupt at least shortly to re-buffer and re-sync eventually.
     * @type {number} -1 for automatic level selection
     */,

set:function set(newLevel){
_logger.logger.log('set currentLevel:'+newLevel);
this.loadLevel=newLevel;
this.streamController.immediateLevelSwitch();
}

/**
     * Index of next quality level loaded as scheduled by stream controller.
     * @type {number}
     */},

{
key:'nextLevel',
get:function get(){
return this.streamController.nextLevel;
}

/**
     * Set quality level index for next loaded data.
     * This will switch the video quality asap, without interrupting playback.
     * May abort current loading of data, and flush parts of buffer (outside currently played fragment region).
     * @type {number} -1 for automatic level selection
     */,

set:function set(newLevel){
_logger.logger.log('set nextLevel:'+newLevel);
this.levelController.manualLevel=newLevel;
this.streamController.nextLevelSwitch();
}

/**
     * Return the quality level of the currently or last (of none is loaded currently) segment
     * @type {number}
     */},

{
key:'loadLevel',
get:function get(){
return this.levelController.level;
}

/**
     * Set quality level index for next loaded data in a conservative way.
     * This will switch the quality without flushing, but interrupt current loading.
     * Thus the moment when the quality switch will appear in effect will only be after the already existing buffer.
     * @type {number} newLevel -1 for automatic level selection
     */,

set:function set(newLevel){
_logger.logger.log('set loadLevel:'+newLevel);
this.levelController.manualLevel=newLevel;
}

/**
     * get next quality level loaded
     * @type {number}
     */},

{
key:'nextLoadLevel',
get:function get(){
return this.levelController.nextLoadLevel;
}

/**
     * Set quality level of next loaded segment in a fully "non-destructive" way.
     * Same as `loadLevel` but will wait for next switch (until current loading is done).
     * @type {number} level
     */,

set:function set(level){
this.levelController.nextLoadLevel=level;
}

/**
     * Return "first level": like a default level, if not set,
     * falls back to index of first level referenced in manifest
     * @type {number}
     */},

{
key:'firstLevel',
get:function get(){
return Math.max(this.levelController.firstLevel,this.minAutoLevel);
}

/**
     * Sets "first-level", see getter.
     * @type {number}
     */,

set:function set(newLevel){
_logger.logger.log('set firstLevel:'+newLevel);
this.levelController.firstLevel=newLevel;
}

/**
     * Return start level (level of first fragment that will be played back)
     * if not overrided by user, first level appearing in manifest will be used as start level
     * if -1 : automatic start level selection, playback will start from level matching download bandwidth
     * (determined from download of first segment)
     * @type {number}
     */},

{
key:'startLevel',
get:function get(){
return this.levelController.startLevel;
}

/**
     * set  start level (level of first fragment that will be played back)
     * if not overrided by user, first level appearing in manifest will be used as start level
     * if -1 : automatic start level selection, playback will start from level matching download bandwidth
     * (determined from download of first segment)
     * @type {number} newLevel
     */,

set:function set(newLevel){
_logger.logger.log('set startLevel:'+newLevel);
var hls=this;
// if not in automatic start level detection, ensure startLevel is greater than minAutoLevel
if(newLevel!==-1){
newLevel=Math.max(newLevel,hls.minAutoLevel);
}

hls.levelController.startLevel=newLevel;
}

/**
     * Capping/max level value that should be used by automatic level selection algorithm (`ABRController`)
     * @type {number}
     */},

{
key:'autoLevelCapping',
get:function get(){
return this._autoLevelCapping;
}

/**
     * Capping/max level value that should be used by automatic level selection algorithm (`ABRController`)
     * @type {number}
     */,

set:function set(newLevel){
_logger.logger.log('set autoLevelCapping:'+newLevel);
this._autoLevelCapping=newLevel;
}

/**
     * True when automatic level selection enabled
     * @type {boolean}
     */},

{
key:'autoLevelEnabled',
get:function get(){
return this.levelController.manualLevel===-1;
}

/**
     * Level set manually (if any)
     * @type {number}
     */},

{
key:'manualLevel',
get:function get(){
return this.levelController.manualLevel;
}

/**
     * min level selectable in auto mode according to config.minAutoBitrate
     * @type {number}
     */},

{
key:'minAutoLevel',
get:function get(){
var hls=this,
levels=hls.levels,
minAutoBitrate=hls.config.minAutoBitrate,
len=levels?levels.length:0;
for(var i=0;i<len;i++){
var levelNextBitrate=levels[i].realBitrate?Math.max(levels[i].realBitrate,levels[i].bitrate):levels[i].bitrate;
if(levelNextBitrate>minAutoBitrate){
return i;
}
}
return 0;
}

/**
     * max level selectable in auto mode according to autoLevelCapping
     * @type {number}
     */},

{
key:'maxAutoLevel',
get:function get(){
var hls=this;
var levels=hls.levels;
var autoLevelCapping=hls.autoLevelCapping;
var maxAutoLevel=void 0;
if(autoLevelCapping===-1&&levels&&levels.length){
maxAutoLevel=levels.length-1;
}else{
maxAutoLevel=autoLevelCapping;
}

return maxAutoLevel;
}

/**
     * next automatically selected quality level
     * @type {number}
     */},

{
key:'nextAutoLevel',
get:function get(){
var hls=this;
// ensure next auto level is between  min and max auto level
return Math.min(Math.max(hls.abrController.nextAutoLevel,hls.minAutoLevel),hls.maxAutoLevel);
}

/**
     * this setter is used to force next auto level.
     * this is useful to force a switch down in auto mode:
     * in case of load error on level N, hls.js can set nextAutoLevel to N-1 for example)
     * forced value is valid for one fragment. upon succesful frag loading at forced level,
     * this value will be resetted to -1 by ABR controller.
     * @type {number}
     */,

set:function set(nextLevel){
var hls=this;
hls.abrController.nextAutoLevel=Math.max(hls.minAutoLevel,nextLevel);
}

/**
     * @type {AudioTrack[]}
     */},

{
key:'audioTracks',
get:function get(){
var audioTrackController=this.audioTrackController;
return audioTrackController?audioTrackController.audioTracks:[];
}

/**
     * index of the selected audio track (index in audio track lists)
     * @type {number}
     */},

{
key:'audioTrack',
get:function get(){
var audioTrackController=this.audioTrackController;
return audioTrackController?audioTrackController.audioTrack:-1;
}

/**
     * selects an audio track, based on its index in audio track lists
     * @type {number}
     */,

set:function set(audioTrackId){
var audioTrackController=this.audioTrackController;
if(audioTrackController){
audioTrackController.audioTrack=audioTrackId;
}
}

/**
     * @type {Seconds}
     */},

{
key:'liveSyncPosition',
get:function get(){
return this.streamController.liveSyncPosition;
}

/**
     * get alternate subtitle tracks list from playlist
     * @type {SubtitleTrack[]}
     */},

{
key:'subtitleTracks',
get:function get(){
var subtitleTrackController=this.subtitleTrackController;
return subtitleTrackController?subtitleTrackController.subtitleTracks:[];
}

/**
     * index of the selected subtitle track (index in subtitle track lists)
     * @type {number}
     */},

{
key:'subtitleTrack',
get:function get(){
var subtitleTrackController=this.subtitleTrackController;
return subtitleTrackController?subtitleTrackController.subtitleTrack:-1;
}

/**
     * select an subtitle track, based on its index in subtitle track lists
     * @type{number}
     */,

set:function set(subtitleTrackId){
var subtitleTrackController=this.subtitleTrackController;
if(subtitleTrackController){
subtitleTrackController.subtitleTrack=subtitleTrackId;
}
}

/**
     * @type {boolean}
     */},

{
key:'subtitleDisplay',
get:function get(){
var subtitleTrackController=this.subtitleTrackController;
return subtitleTrackController?subtitleTrackController.subtitleDisplay:false;
}

/**
     * Enable/disable subtitle display rendering
     * @type {boolean}
     */,

set:function set(value){
var subtitleTrackController=this.subtitleTrackController;
if(subtitleTrackController){
subtitleTrackController.subtitleDisplay=value;
}
}}]);


return Hls;
}(_observer.Observer);

exports.default=Hls;
module.exports=exports['default'];

/***/},
/* 35 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _urlToolkit=__webpack_require__(8);

var URLToolkit=_interopRequireWildcard(_urlToolkit);

var _fragment=__webpack_require__(11);

var _fragment2=_interopRequireDefault(_fragment);

var _level=__webpack_require__(36);

var _level2=_interopRequireDefault(_level);

var _levelKey=__webpack_require__(17);

var _levelKey2=_interopRequireDefault(_levelKey);

var _attrList=__webpack_require__(37);

var _attrList2=_interopRequireDefault(_attrList);

var _logger=__webpack_require__(0);

var _codecs=__webpack_require__(18);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

/**
 * M3U8 parser
 * @module
 */

// https://regex101.com is your friend
var MASTER_PLAYLIST_REGEX=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g;
var MASTER_PLAYLIST_MEDIA_REGEX=/#EXT-X-MEDIA:(.*)/g;

var LEVEL_PLAYLIST_REGEX_FAST=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,// duration (#EXTINF:<duration>,<title>), group 1 => duration, group 2 => title
/|(?!#)([\S+ ?]+)/.source,// segment URI, group 3 => the URI (note newline is not eaten)
/|#EXT-X-BYTERANGE:*(.+)/.source,// next segment's byterange, group 4 => range spec (x@y)
/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,// next segment's program date/time group 5 => the datetime spec
/|#.*/.source// All other non-segment oriented tags will match with all groups empty
].join(''),'g');

var LEVEL_PLAYLIST_REGEX_SLOW=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/;

var MP4_REGEX_SUFFIX=/\.(mp4|m4s|m4v|m4a)$/i;

var M3U8Parser=function(){
function M3U8Parser(){
_classCallCheck(this,M3U8Parser);
}

_createClass(M3U8Parser,null,[{
key:'findGroup',
value:function findGroup(groups,mediaGroupId){
if(!groups){
return null;
}

var matchingGroup=null;

for(var i=0;i<groups.length;i++){
var group=groups[i];
if(group.id===mediaGroupId){
matchingGroup=group;
}
}

return matchingGroup;
}},
{
key:'convertAVC1ToAVCOTI',
value:function convertAVC1ToAVCOTI(codec){
var result=void 0,
avcdata=codec.split('.');
if(avcdata.length>2){
result=avcdata.shift()+'.';
result+=parseInt(avcdata.shift()).toString(16);
result+=('000'+parseInt(avcdata.shift()).toString(16)).substr(-4);
}else{
result=codec;
}
return result;
}},
{
key:'resolve',
value:function resolve(url,baseUrl){
return URLToolkit.buildAbsoluteURL(baseUrl,url,{alwaysNormalize:true});
}},
{
key:'parseMasterPlaylist',
value:function parseMasterPlaylist(string,baseurl){
var levels=[],
result=void 0;
MASTER_PLAYLIST_REGEX.lastIndex=0;

function setCodecs(codecs,level){
['video','audio'].forEach(function(type){
var filtered=codecs.filter(function(codec){
return(0,_codecs.isCodecType)(codec,type);
});
if(filtered.length){
var preferred=filtered.filter(function(codec){
return codec.lastIndexOf('avc1',0)===0||codec.lastIndexOf('mp4a',0)===0;
});
level[type+'Codec']=preferred.length>0?preferred[0]:filtered[0];

// remove from list
codecs=codecs.filter(function(codec){
return filtered.indexOf(codec)===-1;
});
}
});

level.unknownCodecs=codecs;
}

while((result=MASTER_PLAYLIST_REGEX.exec(string))!=null){
var level={};

var attrs=level.attrs=new _attrList2.default(result[1]);
level.url=M3U8Parser.resolve(result[2],baseurl);

var resolution=attrs.decimalResolution('RESOLUTION');
if(resolution){
level.width=resolution.width;
level.height=resolution.height;
}
level.bitrate=attrs.decimalInteger('AVERAGE-BANDWIDTH')||attrs.decimalInteger('BANDWIDTH');
level.name=attrs.NAME;

setCodecs([].concat((attrs.CODECS||'').split(/[ ,]+/)),level);

if(level.videoCodec&&level.videoCodec.indexOf('avc1')!==-1){
level.videoCodec=M3U8Parser.convertAVC1ToAVCOTI(level.videoCodec);
}

levels.push(level);
}
return levels;
}},
{
key:'parseMasterPlaylistMedia',
value:function parseMasterPlaylistMedia(string,baseurl,type){
var audioGroups=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];

var result=void 0;
var medias=[];
var id=0;
MASTER_PLAYLIST_MEDIA_REGEX.lastIndex=0;
while((result=MASTER_PLAYLIST_MEDIA_REGEX.exec(string))!==null){
var media={};
var attrs=new _attrList2.default(result[1]);
if(attrs.TYPE===type){
media.groupId=attrs['GROUP-ID'];
media.name=attrs.NAME;
media.type=type;
media.default=attrs.DEFAULT==='YES';
media.autoselect=attrs.AUTOSELECT==='YES';
media.forced=attrs.FORCED==='YES';
if(attrs.URI){
media.url=M3U8Parser.resolve(attrs.URI,baseurl);
}

media.lang=attrs.LANGUAGE;
if(!media.name){
media.name=media.lang;
}

if(audioGroups.length){
var groupCodec=M3U8Parser.findGroup(audioGroups,media.groupId);
media.audioCodec=groupCodec?groupCodec.codec:audioGroups[0].codec;
}
media.id=id++;
medias.push(media);
}
}
return medias;
}},
{
key:'parseLevelPlaylist',
value:function parseLevelPlaylist(string,baseurl,id,type,levelUrlId){
var currentSN=0;
var totalduration=0;
var level=new _level2.default(baseurl);
var levelkey=new _levelKey2.default();
var cc=0;
var prevFrag=null;
var frag=new _fragment2.default();
var result=void 0;
var i=void 0;

var firstPdtIndex=null;

LEVEL_PLAYLIST_REGEX_FAST.lastIndex=0;

while((result=LEVEL_PLAYLIST_REGEX_FAST.exec(string))!==null){
var duration=result[1];
if(duration){
// INF
frag.duration=parseFloat(duration);
// avoid sliced strings    https://github.com/video-dev/hls.js/issues/939
var title=(' '+result[2]).slice(1);
frag.title=title||null;
frag.tagList.push(title?['INF',duration,title]:['INF',duration]);
}else if(result[3]){
// url
if(Number.isFinite(frag.duration)){
var sn=currentSN++;
frag.type=type;
frag.start=totalduration;
frag.levelkey=levelkey;
frag.sn=sn;
frag.level=id;
frag.cc=cc;
frag.urlId=levelUrlId;
frag.baseurl=baseurl;
// avoid sliced strings    https://github.com/video-dev/hls.js/issues/939
frag.relurl=(' '+result[3]).slice(1);
assignProgramDateTime(frag,prevFrag);

level.fragments.push(frag);
prevFrag=frag;
totalduration+=frag.duration;

frag=new _fragment2.default();
}
}else if(result[4]){
// X-BYTERANGE
frag.rawByteRange=(' '+result[4]).slice(1);
if(prevFrag){
var lastByteRangeEndOffset=prevFrag.byteRangeEndOffset;
if(lastByteRangeEndOffset){
frag.lastByteRangeEndOffset=lastByteRangeEndOffset;
}
}
}else if(result[5]){
// PROGRAM-DATE-TIME
// avoid sliced strings    https://github.com/video-dev/hls.js/issues/939
frag.rawProgramDateTime=(' '+result[5]).slice(1);
frag.tagList.push(['PROGRAM-DATE-TIME',frag.rawProgramDateTime]);
if(firstPdtIndex===null){
firstPdtIndex=level.fragments.length;
}
}else{
result=result[0].match(LEVEL_PLAYLIST_REGEX_SLOW);
for(i=1;i<result.length;i++){
if(result[i]!==undefined){
break;
}
}

// avoid sliced strings    https://github.com/video-dev/hls.js/issues/939
var value1=(' '+result[i+1]).slice(1);
var value2=(' '+result[i+2]).slice(1);

switch(result[i]){
case'#':
frag.tagList.push(value2?[value1,value2]:[value1]);
break;
case'PLAYLIST-TYPE':
level.type=value1.toUpperCase();
break;
case'MEDIA-SEQUENCE':
currentSN=level.startSN=parseInt(value1);
break;
case'TARGETDURATION':
level.targetduration=parseFloat(value1);
break;
case'VERSION':
level.version=parseInt(value1);
break;
case'EXTM3U':
break;
case'ENDLIST':
level.live=false;
break;
case'DIS':
cc++;
frag.tagList.push(['DIS']);
break;
case'DISCONTINUITY-SEQ':
cc=parseInt(value1);
break;
case'KEY':
// https://tools.ietf.org/html/draft-pantos-http-live-streaming-08#section-3.4.4
var decryptparams=value1;
var keyAttrs=new _attrList2.default(decryptparams);
var decryptmethod=keyAttrs.enumeratedString('METHOD'),
decrypturi=keyAttrs.URI,
decryptiv=keyAttrs.hexadecimalInteger('IV');
if(decryptmethod){
levelkey=new _levelKey2.default();
if(decrypturi&&['AES-128','SAMPLE-AES','SAMPLE-AES-CENC'].indexOf(decryptmethod)>=0){
levelkey.method=decryptmethod;
// URI to get the key
levelkey.baseuri=baseurl;
levelkey.reluri=decrypturi;
levelkey.key=null;
// Initialization Vector (IV)
levelkey.iv=decryptiv;
}
}
break;
case'START':
var startParams=value1;
var startAttrs=new _attrList2.default(startParams);
var startTimeOffset=startAttrs.decimalFloatingPoint('TIME-OFFSET');
// TIME-OFFSET can be 0
if(Number.isFinite(startTimeOffset)){
level.startTimeOffset=startTimeOffset;
}

break;
case'MAP':
var mapAttrs=new _attrList2.default(value1);
frag.relurl=mapAttrs.URI;
frag.rawByteRange=mapAttrs.BYTERANGE;
frag.baseurl=baseurl;
frag.level=id;
frag.type=type;
frag.sn='initSegment';
level.initSegment=frag;
frag=new _fragment2.default();
frag.rawProgramDateTime=level.initSegment.rawProgramDateTime;
break;
default:
_logger.logger.warn('line parsed but not handled: '+result);
break;}

}
}
frag=prevFrag;
// logger.log('found ' + level.fragments.length + ' fragments');
if(frag&&!frag.relurl){
level.fragments.pop();
totalduration-=frag.duration;
}
level.totalduration=totalduration;
level.averagetargetduration=totalduration/level.fragments.length;
level.endSN=currentSN-1;
level.startCC=level.fragments[0]?level.fragments[0].cc:0;
level.endCC=cc;

if(!level.initSegment&&level.fragments.length){
// this is a bit lurky but HLS really has no other way to tell us
// if the fragments are TS or MP4, except if we download them :/
// but this is to be able to handle SIDX.
if(level.fragments.every(function(frag){
return MP4_REGEX_SUFFIX.test(frag.relurl);
})){
_logger.logger.warn('MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX');

frag=new _fragment2.default();
frag.relurl=level.fragments[0].relurl;
frag.baseurl=baseurl;
frag.level=id;
frag.type=type;
frag.sn='initSegment';

level.initSegment=frag;
level.needSidxRanges=true;
}
}

/**
       * Backfill any missing PDT values
         "If the first EXT-X-PROGRAM-DATE-TIME tag in a Playlist appears after
         one or more Media Segment URIs, the client SHOULD extrapolate
         backward from that tag (using EXTINF durations and/or media
         timestamps) to associate dates with those segments."
       * We have already extrapolated forward, but all fragments up to the first instance of PDT do not have their PDTs
       * computed.
       */
if(firstPdtIndex){
backfillProgramDateTimes(level.fragments,firstPdtIndex);
}

return level;
}}]);


return M3U8Parser;
}();

exports.default=M3U8Parser;


function backfillProgramDateTimes(fragments,startIndex){
var fragPrev=fragments[startIndex];
for(var i=startIndex-1;i>=0;i--){
var frag=fragments[i];
frag.programDateTime=fragPrev.programDateTime-frag.duration*1000;
fragPrev=frag;
}
}

function assignProgramDateTime(frag,prevFrag){
if(frag.rawProgramDateTime){
frag.programDateTime=Date.parse(frag.rawProgramDateTime);
}else if(prevFrag&&prevFrag.programDateTime){
frag.programDateTime=prevFrag.endProgramDateTime;
}

if(!Number.isFinite(frag.programDateTime)){
frag.programDateTime=null;
frag.rawProgramDateTime=null;
}
}
module.exports=exports['default'];

/***/},
/* 36 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var Level=function(){
function Level(baseUrl){
_classCallCheck(this,Level);

// Please keep properties in alphabetical order
this.endCC=0;
this.endSN=0;
this.fragments=[];
this.initSegment=null;
this.live=true;
this.needSidxRanges=false;
this.startCC=0;
this.startSN=0;
this.startTimeOffset=null;
this.targetduration=0;
this.totalduration=0;
this.type=null;
this.url=baseUrl;
this.version=null;
}

_createClass(Level,[{
key:"hasProgramDateTime",
get:function get(){
return!!(this.fragments[0]&&Number.isFinite(this.fragments[0].programDateTime));
}}]);


return Level;
}();

exports.default=Level;
module.exports=exports["default"];

/***/},
/* 37 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var DECIMAL_RESOLUTION_REGEX=/^(\d+)x(\d+)$/;// eslint-disable-line no-useless-escape
var ATTR_LIST_REGEX=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;// eslint-disable-line no-useless-escape

// adapted from https://github.com/kanongil/node-m3u8parse/blob/master/attrlist.js

var AttrList=function(){
function AttrList(attrs){
_classCallCheck(this,AttrList);

if(typeof attrs==='string'){
attrs=AttrList.parseAttrList(attrs);
}

for(var attr in attrs){
if(attrs.hasOwnProperty(attr)){
this[attr]=attrs[attr];
}
}
}

_createClass(AttrList,[{
key:'decimalInteger',
value:function decimalInteger(attrName){
var intValue=parseInt(this[attrName],10);
if(intValue>Number.MAX_SAFE_INTEGER){
return Infinity;
}

return intValue;
}},
{
key:'hexadecimalInteger',
value:function hexadecimalInteger(attrName){
if(this[attrName]){
var stringValue=(this[attrName]||'0x').slice(2);
stringValue=(stringValue.length&1?'0':'')+stringValue;

var value=new Uint8Array(stringValue.length/2);
for(var i=0;i<stringValue.length/2;i++){
value[i]=parseInt(stringValue.slice(i*2,i*2+2),16);
}

return value;
}else{
return null;
}
}},
{
key:'hexadecimalIntegerAsNumber',
value:function hexadecimalIntegerAsNumber(attrName){
var intValue=parseInt(this[attrName],16);
if(intValue>Number.MAX_SAFE_INTEGER){
return Infinity;
}

return intValue;
}},
{
key:'decimalFloatingPoint',
value:function decimalFloatingPoint(attrName){
return parseFloat(this[attrName]);
}},
{
key:'enumeratedString',
value:function enumeratedString(attrName){
return this[attrName];
}},
{
key:'decimalResolution',
value:function decimalResolution(attrName){
var res=DECIMAL_RESOLUTION_REGEX.exec(this[attrName]);
if(res===null){
return undefined;
}

return{
width:parseInt(res[1],10),
height:parseInt(res[2],10)};

}}],
[{
key:'parseAttrList',
value:function parseAttrList(input){
var match=void 0,
attrs={};
ATTR_LIST_REGEX.lastIndex=0;
while((match=ATTR_LIST_REGEX.exec(input))!==null){
var value=match[2],
quote='"';

if(value.indexOf(quote)===0&&value.lastIndexOf(quote)===value.length-1){
value=value.slice(1,-1);
}

attrs[match[1]]=value;
}
return attrs;
}}]);


return AttrList;
}();

exports.default=AttrList;
module.exports=exports['default'];

/***/},
/* 38 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Fragment Loader
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var FragmentLoader=function(_EventHandler){
_inherits(FragmentLoader,_EventHandler);

function FragmentLoader(hls){
_classCallCheck(this,FragmentLoader);

var _this=_possibleConstructorReturn(this,(FragmentLoader.__proto__||Object.getPrototypeOf(FragmentLoader)).call(this,hls,_events2.default.FRAG_LOADING));

_this.loaders={};
return _this;
}

_createClass(FragmentLoader,[{
key:'destroy',
value:function destroy(){
var loaders=this.loaders;
for(var loaderName in loaders){
var loader=loaders[loaderName];
if(loader){
loader.destroy();
}
}
this.loaders={};

_get(FragmentLoader.prototype.__proto__||Object.getPrototypeOf(FragmentLoader.prototype),'destroy',this).call(this);
}},
{
key:'onFragLoading',
value:function onFragLoading(data){
var frag=data.frag,
type=frag.type,
loaders=this.loaders,
config=this.hls.config,
FragmentILoader=config.fLoader,
DefaultILoader=config.loader;

// reset fragment state
frag.loaded=0;

var loader=loaders[type];
if(loader){
_logger.logger.warn('abort previous fragment loader for type: '+type);
loader.abort();
}

loader=loaders[type]=frag.loader=config.fLoader?new FragmentILoader(config):new DefaultILoader(config);

var loaderContext=void 0,
loaderConfig=void 0,
loaderCallbacks=void 0;

loaderContext={url:frag.url,frag:frag,responseType:'arraybuffer',progressData:false};

var start=frag.byteRangeStartOffset,
end=frag.byteRangeEndOffset;

if(Number.isFinite(start)&&Number.isFinite(end)){
loaderContext.rangeStart=start;
loaderContext.rangeEnd=end;
}

loaderConfig={
timeout:config.fragLoadingTimeOut,
maxRetry:0,
retryDelay:0,
maxRetryDelay:config.fragLoadingMaxRetryTimeout};


loaderCallbacks={
onSuccess:this.loadsuccess.bind(this),
onError:this.loaderror.bind(this),
onTimeout:this.loadtimeout.bind(this),
onProgress:this.loadprogress.bind(this)};


loader.load(loaderContext,loaderConfig,loaderCallbacks);
}},
{
key:'loadsuccess',
value:function loadsuccess(response,stats,context){
var networkDetails=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;

var payload=response.data,
frag=context.frag;
// detach fragment loader on load success
frag.loader=undefined;
this.loaders[frag.type]=undefined;
this.hls.trigger(_events2.default.FRAG_LOADED,{payload:payload,frag:frag,stats:stats,networkDetails:networkDetails});
}},
{
key:'loaderror',
value:function loaderror(response,context){
var networkDetails=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;

var frag=context.frag;
var loader=frag.loader;
if(loader){
loader.abort();
}

this.loaders[frag.type]=undefined;
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.NETWORK_ERROR,details:_errors.ErrorDetails.FRAG_LOAD_ERROR,fatal:false,frag:context.frag,response:response,networkDetails:networkDetails});
}},
{
key:'loadtimeout',
value:function loadtimeout(stats,context){
var networkDetails=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;

var frag=context.frag;
var loader=frag.loader;
if(loader){
loader.abort();
}

this.loaders[frag.type]=undefined;
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.NETWORK_ERROR,details:_errors.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:false,frag:context.frag,networkDetails:networkDetails});
}

// data will be used for progressive parsing
},
{
key:'loadprogress',
value:function loadprogress(stats,context,data){
var networkDetails=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;
// jshint ignore:line
var frag=context.frag;
frag.loaded=stats.loaded;
this.hls.trigger(_events2.default.FRAG_LOAD_PROGRESS,{frag:frag,stats:stats,networkDetails:networkDetails});
}}]);


return FragmentLoader;
}(_eventHandler2.default);

exports.default=FragmentLoader;
module.exports=exports['default'];

/***/},
/* 39 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Decrypt key Loader
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var KeyLoader=function(_EventHandler){
_inherits(KeyLoader,_EventHandler);

function KeyLoader(hls){
_classCallCheck(this,KeyLoader);

var _this=_possibleConstructorReturn(this,(KeyLoader.__proto__||Object.getPrototypeOf(KeyLoader)).call(this,hls,_events2.default.KEY_LOADING));

_this.loaders={};
_this.decryptkey=null;
_this.decrypturl=null;
return _this;
}

_createClass(KeyLoader,[{
key:'destroy',
value:function destroy(){
for(var loaderName in this.loaders){
var loader=this.loaders[loaderName];
if(loader){
loader.destroy();
}
}
this.loaders={};
_eventHandler2.default.prototype.destroy.call(this);
}},
{
key:'onKeyLoading',
value:function onKeyLoading(data){
var frag=data.frag,
type=frag.type,
loader=this.loaders[type],
decryptdata=frag.decryptdata,
uri=decryptdata.uri;
// if uri is different from previous one or if decrypt key not retrieved yet
if(uri!==this.decrypturl||this.decryptkey===null){
var config=this.hls.config;

if(loader){
_logger.logger.warn('abort previous key loader for type:'+type);
loader.abort();
}
frag.loader=this.loaders[type]=new config.loader(config);
this.decrypturl=uri;
this.decryptkey=null;

var loaderContext=void 0,
loaderConfig=void 0,
loaderCallbacks=void 0;
loaderContext={url:uri,frag:frag,responseType:'arraybuffer'};
// maxRetry is 0 so that instead of retrying the same key on the same variant multiple times,
// key-loader will trigger an error and rely on stream-controller to handle retry logic.
// this will also align retry logic with fragment-loader
loaderConfig={timeout:config.fragLoadingTimeOut,maxRetry:0,retryDelay:config.fragLoadingRetryDelay,maxRetryDelay:config.fragLoadingMaxRetryTimeout};
loaderCallbacks={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};
frag.loader.load(loaderContext,loaderConfig,loaderCallbacks);
}else if(this.decryptkey){
// we already loaded this key, return it
decryptdata.key=this.decryptkey;
this.hls.trigger(_events2.default.KEY_LOADED,{frag:frag});
}
}},
{
key:'loadsuccess',
value:function loadsuccess(response,stats,context){
var frag=context.frag;
this.decryptkey=frag.decryptdata.key=new Uint8Array(response.data);
// detach fragment loader on load success
frag.loader=undefined;
this.loaders[frag.type]=undefined;
this.hls.trigger(_events2.default.KEY_LOADED,{frag:frag});
}},
{
key:'loaderror',
value:function loaderror(response,context){
var frag=context.frag,
loader=frag.loader;
if(loader){
loader.abort();
}

this.loaders[context.type]=undefined;
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.NETWORK_ERROR,details:_errors.ErrorDetails.KEY_LOAD_ERROR,fatal:false,frag:frag,response:response});
}},
{
key:'loadtimeout',
value:function loadtimeout(stats,context){
var frag=context.frag,
loader=frag.loader;
if(loader){
loader.abort();
}

this.loaders[context.type]=undefined;
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.NETWORK_ERROR,details:_errors.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:false,frag:frag});
}}]);


return KeyLoader;
}(_eventHandler2.default);

exports.default=KeyLoader;
module.exports=exports['default'];

/***/},
/* 40 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _binarySearch=__webpack_require__(9);

var _binarySearch2=_interopRequireDefault(_binarySearch);

var _bufferHelper=__webpack_require__(4);

var _demuxer=__webpack_require__(19);

var _demuxer2=_interopRequireDefault(_demuxer);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _fragmentTracker=__webpack_require__(6);

var _fragment=__webpack_require__(11);

var _fragment2=_interopRequireDefault(_fragment);

var _playlistLoader=__webpack_require__(15);

var _playlistLoader2=_interopRequireDefault(_playlistLoader);

var _levelHelper=__webpack_require__(7);

var LevelHelper=_interopRequireWildcard(_levelHelper);

var _timeRanges=__webpack_require__(25);

var _timeRanges2=_interopRequireDefault(_timeRanges);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

var _discontinuities=__webpack_require__(26);

var _fragmentFinders=__webpack_require__(27);

var _gapController=__webpack_require__(56);

var _gapController2=_interopRequireDefault(_gapController);

var _baseStreamController=__webpack_require__(14);

var _baseStreamController2=_interopRequireDefault(_baseStreamController);

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Stream Controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var TICK_INTERVAL=100;// how often to tick in ms

var StreamController=function(_BaseStreamController){
_inherits(StreamController,_BaseStreamController);

function StreamController(hls,fragmentTracker){
_classCallCheck(this,StreamController);

var _this=_possibleConstructorReturn(this,(StreamController.__proto__||Object.getPrototypeOf(StreamController)).call(this,hls,_events2.default.MEDIA_ATTACHED,_events2.default.MEDIA_DETACHING,_events2.default.MANIFEST_LOADING,_events2.default.MANIFEST_PARSED,_events2.default.LEVEL_LOADED,_events2.default.KEY_LOADED,_events2.default.FRAG_LOADED,_events2.default.FRAG_LOAD_EMERGENCY_ABORTED,_events2.default.FRAG_PARSING_INIT_SEGMENT,_events2.default.FRAG_PARSING_DATA,_events2.default.FRAG_PARSED,_events2.default.ERROR,_events2.default.AUDIO_TRACK_SWITCHING,_events2.default.AUDIO_TRACK_SWITCHED,_events2.default.BUFFER_CREATED,_events2.default.BUFFER_APPENDED,_events2.default.BUFFER_FLUSHED));

_this.fragmentTracker=fragmentTracker;
_this.config=hls.config;
_this.audioCodecSwap=false;
_this._state=_baseStreamController.State.STOPPED;
_this.stallReported=false;
_this.gapController=null;
return _this;
}

_createClass(StreamController,[{
key:'startLoad',
value:function startLoad(startPosition){
if(this.levels){
var lastCurrentTime=this.lastCurrentTime,
hls=this.hls;
this.stopLoad();
this.setInterval(TICK_INTERVAL);
this.level=-1;
this.fragLoadError=0;
if(!this.startFragRequested){
// determine load level
var startLevel=hls.startLevel;
if(startLevel===-1){
// -1 : guess start Level by doing a bitrate test by loading first fragment of lowest quality level
startLevel=0;
this.bitrateTest=true;
}
// set new level to playlist loader : this will trigger start level load
// hls.nextLoadLevel remains until it is set to a new value or until a new frag is successfully loaded
this.level=hls.nextLoadLevel=startLevel;
this.loadedmetadata=false;
}
// if startPosition undefined but lastCurrentTime set, set startPosition to last currentTime
if(lastCurrentTime>0&&startPosition===-1){
_logger.logger.log('override startPosition with lastCurrentTime @'+lastCurrentTime.toFixed(3));
startPosition=lastCurrentTime;
}
this.state=_baseStreamController.State.IDLE;
this.nextLoadPosition=this.startPosition=this.lastCurrentTime=startPosition;
this.tick();
}else{
this.forceStartLoad=true;
this.state=_baseStreamController.State.STOPPED;
}
}},
{
key:'stopLoad',
value:function stopLoad(){
this.forceStartLoad=false;
_get(StreamController.prototype.__proto__||Object.getPrototypeOf(StreamController.prototype),'stopLoad',this).call(this);
}},
{
key:'doTick',
value:function doTick(){
switch(this.state){
case _baseStreamController.State.BUFFER_FLUSHING:
// in buffer flushing state, reset fragLoadError counter
this.fragLoadError=0;
break;
case _baseStreamController.State.IDLE:
this._doTickIdle();
break;
case _baseStreamController.State.WAITING_LEVEL:
var level=this.levels[this.level];
// check if playlist is already loaded
if(level&&level.details){
this.state=_baseStreamController.State.IDLE;
}

break;
case _baseStreamController.State.FRAG_LOADING_WAITING_RETRY:
var now=window.performance.now();
var retryDate=this.retryDate;
// if current time is gt than retryDate, or if media seeking let's switch to IDLE state to retry loading
if(!retryDate||now>=retryDate||this.media&&this.media.seeking){
_logger.logger.log('mediaController: retryDate reached, switch back to IDLE state');
this.state=_baseStreamController.State.IDLE;
}
break;
case _baseStreamController.State.ERROR:
case _baseStreamController.State.STOPPED:
case _baseStreamController.State.FRAG_LOADING:
case _baseStreamController.State.PARSING:
case _baseStreamController.State.PARSED:
case _baseStreamController.State.ENDED:
break;
default:
break;}

// check buffer
this._checkBuffer();
// check/update current fragment
this._checkFragmentChanged();
}

// Ironically the "idle" state is the on we do the most logic in it seems ....
// NOTE: Maybe we could rather schedule a check for buffer length after half of the currently
//       played segment, or on pause/play/seek instead of naively checking every 100ms?
},
{
key:'_doTickIdle',
value:function _doTickIdle(){
var hls=this.hls,
config=hls.config,
media=this.media;

// if start level not parsed yet OR
// if video not attached AND start fragment already requested OR start frag prefetch disable
// exit loop, as we either need more info (level not parsed) or we need media to be attached to load new fragment
if(this.levelLastLoaded===undefined||!media&&(this.startFragRequested||!config.startFragPrefetch)){
return;
}

// if we have not yet loaded any fragment, start loading from start position
var pos=void 0;
if(this.loadedmetadata){
pos=media.currentTime;
}else{
pos=this.nextLoadPosition;
}

// determine next load level
var level=hls.nextLoadLevel,
levelInfo=this.levels[level];

if(!levelInfo){
return;
}

var levelBitrate=levelInfo.bitrate,
maxBufLen=void 0;

// compute max Buffer Length that we could get from this load level, based on level bitrate. don't buffer more than 60 MB and more than 30s
if(levelBitrate){
maxBufLen=Math.max(8*config.maxBufferSize/levelBitrate,config.maxBufferLength);
}else{
maxBufLen=config.maxBufferLength;
}

maxBufLen=Math.min(maxBufLen,config.maxMaxBufferLength);

// determine next candidate fragment to be loaded, based on current position and end of buffer position
// ensure up to `config.maxMaxBufferLength` of buffer upfront

var bufferInfo=_bufferHelper.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:media,pos,config.maxBufferHole),
bufferLen=bufferInfo.len;
// Stay idle if we are still with buffer margins
if(bufferLen>=maxBufLen){
return;
}

// if buffer length is less than maxBufLen try to load a new fragment ...
_logger.logger.trace('buffer length of '+bufferLen.toFixed(3)+' is below max of '+maxBufLen.toFixed(3)+'. checking for more payload ...');

// set next load level : this will trigger a playlist load if needed
this.level=hls.nextLoadLevel=level;

var levelDetails=levelInfo.details;
// if level info not retrieved yet, switch state and wait for level retrieval
// if live playlist, ensure that new playlist has been refreshed to avoid loading/try to load
// a useless and outdated fragment (that might even introduce load error if it is already out of the live playlist)
if(!levelDetails||levelDetails.live&&this.levelLastLoaded!==level){
this.state=_baseStreamController.State.WAITING_LEVEL;
return;
}

if(this._streamEnded(bufferInfo,levelDetails)){
var data={};
if(this.altAudio){
data.type='video';
}

this.hls.trigger(_events2.default.BUFFER_EOS,data);
this.state=_baseStreamController.State.ENDED;
return;
}
// if we have the levelDetails for the selected variant, lets continue enrichen our stream (load keys/fragments or trigger EOS, etc..)
this._fetchPayloadOrEos(pos,bufferInfo,levelDetails);
}},
{
key:'_fetchPayloadOrEos',
value:function _fetchPayloadOrEos(pos,bufferInfo,levelDetails){
var fragPrevious=this.fragPrevious,
level=this.level,
fragments=levelDetails.fragments,
fragLen=fragments.length;

// empty playlist
if(fragLen===0){
return;
}

// find fragment index, contiguous with end of buffer position
var start=fragments[0].start,
end=fragments[fragLen-1].start+fragments[fragLen-1].duration,
bufferEnd=bufferInfo.end,
frag=void 0;

if(levelDetails.initSegment&&!levelDetails.initSegment.data){
frag=levelDetails.initSegment;
}else{
// in case of live playlist we need to ensure that requested position is not located before playlist start
if(levelDetails.live){
var initialLiveManifestSize=this.config.initialLiveManifestSize;
if(fragLen<initialLiveManifestSize){
_logger.logger.warn('Can not start playback of a level, reason: not enough fragments '+fragLen+' < '+initialLiveManifestSize);
return;
}

frag=this._ensureFragmentAtLivePoint(levelDetails,bufferEnd,start,end,fragPrevious,fragments,fragLen);
// if it explicitely returns null don't load any fragment and exit function now
if(frag===null){
return;
}
}else{
// VoD playlist: if bufferEnd before start of playlist, load first fragment
if(bufferEnd<start){
frag=fragments[0];
}
}
}
if(!frag){
frag=this._findFragment(start,fragPrevious,fragLen,fragments,bufferEnd,end,levelDetails);
}

if(frag){
if(frag.encrypted){
_logger.logger.log('Loading key for '+frag.sn+' of ['+levelDetails.startSN+' ,'+levelDetails.endSN+'],level '+level);
this._loadKey(frag);
}else{
_logger.logger.log('Loading '+frag.sn+' of ['+levelDetails.startSN+' ,'+levelDetails.endSN+'],level '+level+', currentTime:'+pos.toFixed(3)+',bufferEnd:'+bufferEnd.toFixed(3));
this._loadFragment(frag);
}
}
}},
{
key:'_ensureFragmentAtLivePoint',
value:function _ensureFragmentAtLivePoint(levelDetails,bufferEnd,start,end,fragPrevious,fragments,fragLen){
var config=this.hls.config,
media=this.media;

var frag=void 0;

// check if requested position is within seekable boundaries :
// logger.log(`start/pos/bufEnd/seeking:${start.toFixed(3)}/${pos.toFixed(3)}/${bufferEnd.toFixed(3)}/${this.media.seeking}`);
var maxLatency=config.liveMaxLatencyDuration!==undefined?config.liveMaxLatencyDuration:config.liveMaxLatencyDurationCount*levelDetails.targetduration;

if(bufferEnd<Math.max(start-config.maxFragLookUpTolerance,end-maxLatency)){
var liveSyncPosition=this.liveSyncPosition=this.computeLivePosition(start,levelDetails);
_logger.logger.log('buffer end: '+bufferEnd.toFixed(3)+' is located too far from the end of live sliding playlist, reset currentTime to : '+liveSyncPosition.toFixed(3));
bufferEnd=liveSyncPosition;
if(media&&media.readyState&&media.duration>liveSyncPosition){
media.currentTime=liveSyncPosition;
}

this.nextLoadPosition=liveSyncPosition;
}

// if end of buffer greater than live edge, don't load any fragment
// this could happen if live playlist intermittently slides in the past.
// level 1 loaded [182580161,182580167]
// level 1 loaded [182580162,182580169]
// Loading 182580168 of [182580162 ,182580169],level 1 ..
// Loading 182580169 of [182580162 ,182580169],level 1 ..
// level 1 loaded [182580162,182580168] <============= here we should have bufferEnd > end. in that case break to avoid reloading 182580168
// level 1 loaded [182580164,182580171]
//
// don't return null in case media not loaded yet (readystate === 0)
if(levelDetails.PTSKnown&&bufferEnd>end&&media&&media.readyState){
return null;
}

if(this.startFragRequested&&!levelDetails.PTSKnown){
/* we are switching level on live playlist, but we don't have any PTS info for that quality level ...
           try to load frag matching with next SN.
           even if SN are not synchronized between playlists, loading this frag will help us
           compute playlist sliding and find the right one after in case it was not the right consecutive one */
if(fragPrevious){
if(levelDetails.hasProgramDateTime){
// Relies on PDT in order to switch bitrates (Support EXT-X-DISCONTINUITY without EXT-X-DISCONTINUITY-SEQUENCE)
_logger.logger.log('live playlist, switching playlist, load frag with same PDT: '+fragPrevious.programDateTime);
frag=(0,_fragmentFinders.findFragmentByPDT)(fragments,fragPrevious.endProgramDateTime,config.maxFragLookUpTolerance);
}else{
// Uses buffer and sequence number to calculate switch segment (required if using EXT-X-DISCONTINUITY-SEQUENCE)
var targetSN=fragPrevious.sn+1;
if(targetSN>=levelDetails.startSN&&targetSN<=levelDetails.endSN){
var fragNext=fragments[targetSN-levelDetails.startSN];
if(fragPrevious.cc===fragNext.cc){
frag=fragNext;
_logger.logger.log('live playlist, switching playlist, load frag with next SN: '+frag.sn);
}
}
// next frag SN not available (or not with same continuity counter)
// look for a frag sharing the same CC
if(!frag){
frag=_binarySearch2.default.search(fragments,function(frag){
return fragPrevious.cc-frag.cc;
});
if(frag){
_logger.logger.log('live playlist, switching playlist, load frag with same CC: '+frag.sn);
}
}
}
}
if(!frag){
/* we have no idea about which fragment should be loaded.
             so let's load mid fragment. it will help computing playlist sliding and find the right one
          */
frag=fragments[Math.min(fragLen-1,Math.round(fragLen/2))];
_logger.logger.log('live playlist, switching playlist, unknown, load middle frag : '+frag.sn);
}
}

return frag;
}},
{
key:'_findFragment',
value:function _findFragment(start,fragPrevious,fragLen,fragments,bufferEnd,end,levelDetails){
var config=this.hls.config;
var frag=void 0;

if(bufferEnd<end){
var lookupTolerance=bufferEnd>end-config.maxFragLookUpTolerance?0:config.maxFragLookUpTolerance;
// Remove the tolerance if it would put the bufferEnd past the actual end of stream
// Uses buffer and sequence number to calculate switch segment (required if using EXT-X-DISCONTINUITY-SEQUENCE)
frag=(0,_fragmentFinders.findFragmentByPTS)(fragPrevious,fragments,bufferEnd,lookupTolerance);
}else{
// reach end of playlist
frag=fragments[fragLen-1];
}
if(frag){
var curSNIdx=frag.sn-levelDetails.startSN;
var sameLevel=fragPrevious&&frag.level===fragPrevious.level;
var prevFrag=fragments[curSNIdx-1];
var nextFrag=fragments[curSNIdx+1];
// logger.log('find SN matching with pos:' +  bufferEnd + ':' + frag.sn);
if(fragPrevious&&frag.sn===fragPrevious.sn){
if(sameLevel&&!frag.backtracked){
if(frag.sn<levelDetails.endSN){
var deltaPTS=fragPrevious.deltaPTS;
// if there is a significant delta between audio and video, larger than max allowed hole,
// and if previous remuxed fragment did not start with a keyframe. (fragPrevious.dropped)
// let's try to load previous fragment again to get last keyframe
// then we will reload again current fragment (that way we should be able to fill the buffer hole ...)
if(deltaPTS&&deltaPTS>config.maxBufferHole&&fragPrevious.dropped&&curSNIdx){
frag=prevFrag;
_logger.logger.warn('SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this');
}else{
frag=nextFrag;
_logger.logger.log('SN just loaded, load next one: '+frag.sn,frag);
}
}else{
frag=null;
}
}else if(frag.backtracked){
// Only backtrack a max of 1 consecutive fragment to prevent sliding back too far when little or no frags start with keyframes
if(nextFrag&&nextFrag.backtracked){
_logger.logger.warn('Already backtracked from fragment '+nextFrag.sn+', will not backtrack to fragment '+frag.sn+'. Loading fragment '+nextFrag.sn);
frag=nextFrag;
}else{
// If a fragment has dropped frames and it's in a same level/sequence, load the previous fragment to try and find the keyframe
// Reset the dropped count now since it won't be reset until we parse the fragment again, which prevents infinite backtracking on the same segment
_logger.logger.warn('Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe');
frag.dropped=0;
if(prevFrag){
frag=prevFrag;
frag.backtracked=true;
}else if(curSNIdx){
// can't backtrack on very first fragment
frag=null;
}
}
}
}
}
return frag;
}},
{
key:'_loadKey',
value:function _loadKey(frag){
this.state=_baseStreamController.State.KEY_LOADING;
this.hls.trigger(_events2.default.KEY_LOADING,{frag:frag});
}},
{
key:'_loadFragment',
value:function _loadFragment(frag){
// Check if fragment is not loaded
var fragState=this.fragmentTracker.getState(frag);

this.fragCurrent=frag;
this.startFragRequested=true;
// Don't update nextLoadPosition for fragments which are not buffered
if(Number.isFinite(frag.sn)&&!frag.bitrateTest){
this.nextLoadPosition=frag.start+frag.duration;
}

// Allow backtracked fragments to load
if(frag.backtracked||fragState===_fragmentTracker.FragmentState.NOT_LOADED||fragState===_fragmentTracker.FragmentState.PARTIAL){
frag.autoLevel=this.hls.autoLevelEnabled;
frag.bitrateTest=this.bitrateTest;

this.hls.trigger(_events2.default.FRAG_LOADING,{frag:frag});
// lazy demuxer init, as this could take some time ... do it during frag loading
if(!this.demuxer){
this.demuxer=new _demuxer2.default(this.hls,'main');
}

this.state=_baseStreamController.State.FRAG_LOADING;
}else if(fragState===_fragmentTracker.FragmentState.APPENDING){
// Lower the buffer size and try again
if(this._reduceMaxBufferLength(frag.duration)){
this.fragmentTracker.removeFragment(frag);
}
}
}},
{
key:'getBufferedFrag',
value:function getBufferedFrag(position){
return this.fragmentTracker.getBufferedFrag(position,_playlistLoader2.default.LevelType.MAIN);
}},
{
key:'followingBufferedFrag',
value:function followingBufferedFrag(frag){
if(frag){
// try to get range of next fragment (500ms after this range)
return this.getBufferedFrag(frag.endPTS+0.5);
}
return null;
}},
{
key:'_checkFragmentChanged',
value:function _checkFragmentChanged(){
var fragPlayingCurrent=void 0,
currentTime=void 0,
video=this.media;
if(video&&video.readyState&&video.seeking===false){
currentTime=video.currentTime;
/* if video element is in seeked state, currentTime can only increase.
          (assuming that playback rate is positive ...)
          As sometimes currentTime jumps back to zero after a
          media decode error, check this, to avoid seeking back to
          wrong position after a media decode error
        */
if(currentTime>this.lastCurrentTime){
this.lastCurrentTime=currentTime;
}

if(_bufferHelper.BufferHelper.isBuffered(video,currentTime)){
fragPlayingCurrent=this.getBufferedFrag(currentTime);
}else if(_bufferHelper.BufferHelper.isBuffered(video,currentTime+0.1)){
/* ensure that FRAG_CHANGED event is triggered at startup,
            when first video frame is displayed and playback is paused.
            add a tolerance of 100ms, in case current position is not buffered,
            check if current pos+100ms is buffered and use that buffer range
            for FRAG_CHANGED event reporting */
fragPlayingCurrent=this.getBufferedFrag(currentTime+0.1);
}
if(fragPlayingCurrent){
var fragPlaying=fragPlayingCurrent;
if(fragPlaying!==this.fragPlaying){
this.hls.trigger(_events2.default.FRAG_CHANGED,{frag:fragPlaying});
var fragPlayingLevel=fragPlaying.level;
if(!this.fragPlaying||this.fragPlaying.level!==fragPlayingLevel){
this.hls.trigger(_events2.default.LEVEL_SWITCHED,{level:fragPlayingLevel});
}

this.fragPlaying=fragPlaying;
}
}
}
}

/*
      on immediate level switch :
       - pause playback if playing
       - cancel any pending load request
       - and trigger a buffer flush
    */},

{
key:'immediateLevelSwitch',
value:function immediateLevelSwitch(){
_logger.logger.log('immediateLevelSwitch');
if(!this.immediateSwitch){
this.immediateSwitch=true;
var media=this.media,
previouslyPaused=void 0;
if(media){
previouslyPaused=media.paused;
media.pause();
}else{
// don't restart playback after instant level switch in case media not attached
previouslyPaused=true;
}
this.previouslyPaused=previouslyPaused;
}
var fragCurrent=this.fragCurrent;
if(fragCurrent&&fragCurrent.loader){
fragCurrent.loader.abort();
}

this.fragCurrent=null;
// flush everything
this.flushMainBuffer(0,Number.POSITIVE_INFINITY);
}

/**
     * on immediate level switch end, after new fragment has been buffered:
     * - nudge video decoder by slightly adjusting video currentTime (if currentTime buffered)
     * - resume the playback if needed
     */},

{
key:'immediateLevelSwitchEnd',
value:function immediateLevelSwitchEnd(){
var media=this.media;
if(media&&media.buffered.length){
this.immediateSwitch=false;
if(_bufferHelper.BufferHelper.isBuffered(media,media.currentTime)){
// only nudge if currentTime is buffered
media.currentTime-=0.0001;
}
if(!this.previouslyPaused){
media.play();
}
}
}

/**
     * try to switch ASAP without breaking video playback:
     * in order to ensure smooth but quick level switching,
     * we need to find the next flushable buffer range
     * we should take into account new segment fetch time
     */},

{
key:'nextLevelSwitch',
value:function nextLevelSwitch(){
var media=this.media;
// ensure that media is defined and that metadata are available (to retrieve currentTime)
if(media&&media.readyState){
var fetchdelay=void 0,
fragPlayingCurrent=void 0,
nextBufferedFrag=void 0;
fragPlayingCurrent=this.getBufferedFrag(media.currentTime);
if(fragPlayingCurrent&&fragPlayingCurrent.startPTS>1){
// flush buffer preceding current fragment (flush until current fragment start offset)
// minus 1s to avoid video freezing, that could happen if we flush keyframe of current video ...
this.flushMainBuffer(0,fragPlayingCurrent.startPTS-1);
}
if(!media.paused){
// add a safety delay of 1s
var nextLevelId=this.hls.nextLoadLevel,
nextLevel=this.levels[nextLevelId],
fragLastKbps=this.fragLastKbps;
if(fragLastKbps&&this.fragCurrent){
fetchdelay=this.fragCurrent.duration*nextLevel.bitrate/(1000*fragLastKbps)+1;
}else{
fetchdelay=0;
}
}else{
fetchdelay=0;
}
// logger.log('fetchdelay:'+fetchdelay);
// find buffer range that will be reached once new fragment will be fetched
nextBufferedFrag=this.getBufferedFrag(media.currentTime+fetchdelay);
if(nextBufferedFrag){
// we can flush buffer range following this one without stalling playback
nextBufferedFrag=this.followingBufferedFrag(nextBufferedFrag);
if(nextBufferedFrag){
// if we are here, we can also cancel any loading/demuxing in progress, as they are useless
var fragCurrent=this.fragCurrent;
if(fragCurrent&&fragCurrent.loader){
fragCurrent.loader.abort();
}

this.fragCurrent=null;
// start flush position is the start PTS of next buffered frag.
// we use frag.naxStartPTS which is max(audio startPTS, video startPTS).
// in case there is a small PTS Delta between audio and video, using maxStartPTS avoids flushing last samples from current fragment
this.flushMainBuffer(nextBufferedFrag.maxStartPTS,Number.POSITIVE_INFINITY);
}
}
}
}},
{
key:'flushMainBuffer',
value:function flushMainBuffer(startOffset,endOffset){
this.state=_baseStreamController.State.BUFFER_FLUSHING;
var flushScope={startOffset:startOffset,endOffset:endOffset};
// if alternate audio tracks are used, only flush video, otherwise flush everything
if(this.altAudio){
flushScope.type='video';
}

this.hls.trigger(_events2.default.BUFFER_FLUSHING,flushScope);
}},
{
key:'onMediaAttached',
value:function onMediaAttached(data){
var media=this.media=this.mediaBuffer=data.media;
this.onvseeking=this.onMediaSeeking.bind(this);
this.onvseeked=this.onMediaSeeked.bind(this);
this.onvended=this.onMediaEnded.bind(this);
media.addEventListener('seeking',this.onvseeking);
media.addEventListener('seeked',this.onvseeked);
media.addEventListener('ended',this.onvended);
var config=this.config;
if(this.levels&&config.autoStartLoad){
this.hls.startLoad(config.startPosition);
}

this.gapController=new _gapController2.default(config,media,this.fragmentTracker,this.hls);
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
var media=this.media;
if(media&&media.ended){
_logger.logger.log('MSE detaching and video ended, reset startPosition');
this.startPosition=this.lastCurrentTime=0;
}

// reset fragment backtracked flag
var levels=this.levels;
if(levels){
levels.forEach(function(level){
if(level.details){
level.details.fragments.forEach(function(fragment){
fragment.backtracked=undefined;
});
}
});
}
// remove video listeners
if(media){
media.removeEventListener('seeking',this.onvseeking);
media.removeEventListener('seeked',this.onvseeked);
media.removeEventListener('ended',this.onvended);
this.onvseeking=this.onvseeked=this.onvended=null;
}
this.media=this.mediaBuffer=null;
this.loadedmetadata=false;
this.stopLoad();
}},
{
key:'onMediaSeeked',
value:function onMediaSeeked(){
var media=this.media,
currentTime=media?media.currentTime:undefined;
if(Number.isFinite(currentTime)){
_logger.logger.log('media seeked to '+currentTime.toFixed(3));
}

// tick to speed up FRAGMENT_PLAYING triggering
this.tick();
}},
{
key:'onManifestLoading',
value:function onManifestLoading(){
// reset buffer on manifest loading
_logger.logger.log('trigger BUFFER_RESET');
this.hls.trigger(_events2.default.BUFFER_RESET);
this.fragmentTracker.removeAllFragments();
this.stalled=false;
this.startPosition=this.lastCurrentTime=0;
}},
{
key:'onManifestParsed',
value:function onManifestParsed(data){
var aac=false,
heaac=false,
codec=void 0;
data.levels.forEach(function(level){
// detect if we have different kind of audio codecs used amongst playlists
codec=level.audioCodec;
if(codec){
if(codec.indexOf('mp4a.40.2')!==-1){
aac=true;
}

if(codec.indexOf('mp4a.40.5')!==-1){
heaac=true;
}
}
});
this.audioCodecSwitch=aac&&heaac;
if(this.audioCodecSwitch){
_logger.logger.log('both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC');
}

this.levels=data.levels;
this.startFragRequested=false;
var config=this.config;
if(config.autoStartLoad||this.forceStartLoad){
this.hls.startLoad(config.startPosition);
}
}},
{
key:'onLevelLoaded',
value:function onLevelLoaded(data){
var newDetails=data.details;
var newLevelId=data.level;
var lastLevel=this.levels[this.levelLastLoaded];
var curLevel=this.levels[newLevelId];
var duration=newDetails.totalduration;
var sliding=0;

_logger.logger.log('level '+newLevelId+' loaded ['+newDetails.startSN+','+newDetails.endSN+'],duration:'+duration);

if(newDetails.live){
var curDetails=curLevel.details;
if(curDetails&&newDetails.fragments.length>0){
// we already have details for that level, merge them
LevelHelper.mergeDetails(curDetails,newDetails);
sliding=newDetails.fragments[0].start;
this.liveSyncPosition=this.computeLivePosition(sliding,curDetails);
if(newDetails.PTSKnown&&Number.isFinite(sliding)){
_logger.logger.log('live playlist sliding:'+sliding.toFixed(3));
}else{
_logger.logger.log('live playlist - outdated PTS, unknown sliding');
(0,_discontinuities.alignStream)(this.fragPrevious,lastLevel,newDetails);
}
}else{
_logger.logger.log('live playlist - first load, unknown sliding');
newDetails.PTSKnown=false;
(0,_discontinuities.alignStream)(this.fragPrevious,lastLevel,newDetails);
}
}else{
newDetails.PTSKnown=false;
}
// override level info
curLevel.details=newDetails;
this.levelLastLoaded=newLevelId;
this.hls.trigger(_events2.default.LEVEL_UPDATED,{details:newDetails,level:newLevelId});

if(this.startFragRequested===false){
// compute start position if set to -1. use it straight away if value is defined
if(this.startPosition===-1||this.lastCurrentTime===-1){
// first, check if start time offset has been set in playlist, if yes, use this value
var startTimeOffset=newDetails.startTimeOffset;
if(Number.isFinite(startTimeOffset)){
if(startTimeOffset<0){
_logger.logger.log('negative start time offset '+startTimeOffset+', count from end of last fragment');
startTimeOffset=sliding+duration+startTimeOffset;
}
_logger.logger.log('start time offset found in playlist, adjust startPosition to '+startTimeOffset);
this.startPosition=startTimeOffset;
}else{
// if live playlist, set start position to be fragment N-this.config.liveSyncDurationCount (usually 3)
if(newDetails.live){
this.startPosition=this.computeLivePosition(sliding,newDetails);
_logger.logger.log('configure startPosition to '+this.startPosition);
}else{
this.startPosition=0;
}
}
this.lastCurrentTime=this.startPosition;
}
this.nextLoadPosition=this.startPosition;
}
// only switch batck to IDLE state if we were waiting for level to start downloading a new fragment
if(this.state===_baseStreamController.State.WAITING_LEVEL){
this.state=_baseStreamController.State.IDLE;
}

// trigger handler right now
this.tick();
}},
{
key:'onKeyLoaded',
value:function onKeyLoaded(){
if(this.state===_baseStreamController.State.KEY_LOADING){
this.state=_baseStreamController.State.IDLE;
this.tick();
}
}},
{
key:'onFragLoaded',
value:function onFragLoaded(data){
var fragCurrent=this.fragCurrent,
hls=this.hls,
levels=this.levels,
media=this.media;

var fragLoaded=data.frag;
if(this.state===_baseStreamController.State.FRAG_LOADING&&fragCurrent&&fragLoaded.type==='main'&&fragLoaded.level===fragCurrent.level&&fragLoaded.sn===fragCurrent.sn){
var stats=data.stats;
var currentLevel=levels[fragCurrent.level];
var details=currentLevel.details;
// reset frag bitrate test in any case after frag loaded event
// if this frag was loaded to perform a bitrate test AND if hls.nextLoadLevel is greater than 0
// then this means that we should be able to load a fragment at a higher quality level
this.bitrateTest=false;
this.stats=stats;

_logger.logger.log('Loaded '+fragCurrent.sn+' of ['+details.startSN+' ,'+details.endSN+'],level '+fragCurrent.level);
if(fragLoaded.bitrateTest&&hls.nextLoadLevel){
// switch back to IDLE state ... we just loaded a fragment to determine adequate start bitrate and initialize autoswitch algo
this.state=_baseStreamController.State.IDLE;
this.startFragRequested=false;
stats.tparsed=stats.tbuffered=window.performance.now();
hls.trigger(_events2.default.FRAG_BUFFERED,{stats:stats,frag:fragCurrent,id:'main'});
this.tick();
}else if(fragLoaded.sn==='initSegment'){
this.state=_baseStreamController.State.IDLE;
stats.tparsed=stats.tbuffered=window.performance.now();
details.initSegment.data=data.payload;
hls.trigger(_events2.default.FRAG_BUFFERED,{stats:stats,frag:fragCurrent,id:'main'});
this.tick();
}else{
_logger.logger.log('Parsing '+fragCurrent.sn+' of ['+details.startSN+' ,'+details.endSN+'],level '+fragCurrent.level+', cc '+fragCurrent.cc);
this.state=_baseStreamController.State.PARSING;
this.pendingBuffering=true;
this.appended=false;

// Bitrate test frags are not usually buffered so the fragment tracker ignores them. If Hls.js decides to buffer
// it (and therefore ends up at this line), then the fragment tracker needs to be manually informed.
if(fragLoaded.bitrateTest){
fragLoaded.bitrateTest=false;
this.fragmentTracker.onFragLoaded({
frag:fragLoaded});

}

// time Offset is accurate if level PTS is known, or if playlist is not sliding (not live) and if media is not seeking (this is to overcome potential timestamp drifts between playlists and fragments)
var accurateTimeOffset=!(media&&media.seeking)&&(details.PTSKnown||!details.live);
var initSegmentData=details.initSegment?details.initSegment.data:[];
var audioCodec=this._getAudioCodec(currentLevel);

// transmux the MPEG-TS data to ISO-BMFF segments
var demuxer=this.demuxer=this.demuxer||new _demuxer2.default(this.hls,'main');
demuxer.push(data.payload,initSegmentData,audioCodec,currentLevel.videoCodec,fragCurrent,details.totalduration,accurateTimeOffset);
}
}
this.fragLoadError=0;
}},
{
key:'onFragParsingInitSegment',
value:function onFragParsingInitSegment(data){
var fragCurrent=this.fragCurrent;
var fragNew=data.frag;

if(fragCurrent&&data.id==='main'&&fragNew.sn===fragCurrent.sn&&fragNew.level===fragCurrent.level&&this.state===_baseStreamController.State.PARSING){
var tracks=data.tracks,
trackName=void 0,
track=void 0;

// if audio track is expected to come from audio stream controller, discard any coming from main
if(tracks.audio&&this.altAudio){
delete tracks.audio;
}

// include levelCodec in audio and video tracks
track=tracks.audio;
if(track){
var audioCodec=this.levels[this.level].audioCodec,
ua=navigator.userAgent.toLowerCase();
if(audioCodec&&this.audioCodecSwap){
_logger.logger.log('swapping playlist audio codec');
if(audioCodec.indexOf('mp4a.40.5')!==-1){
audioCodec='mp4a.40.2';
}else{
audioCodec='mp4a.40.5';
}
}
// in case AAC and HE-AAC audio codecs are signalled in manifest
// force HE-AAC , as it seems that most browsers prefers that way,
// except for mono streams OR on FF
// these conditions might need to be reviewed ...
if(this.audioCodecSwitch){
// don't force HE-AAC if mono stream
if(track.metadata.channelCount!==1&&
// don't force HE-AAC if firefox
ua.indexOf('firefox')===-1){
audioCodec='mp4a.40.5';
}
}
// HE-AAC is broken on Android, always signal audio codec as AAC even if variant manifest states otherwise
if(ua.indexOf('android')!==-1&&track.container!=='audio/mpeg'){
// Exclude mpeg audio
audioCodec='mp4a.40.2';
_logger.logger.log('Android: force audio codec to '+audioCodec);
}
track.levelCodec=audioCodec;
track.id=data.id;
}
track=tracks.video;
if(track){
track.levelCodec=this.levels[this.level].videoCodec;
track.id=data.id;
}
this.hls.trigger(_events2.default.BUFFER_CODECS,tracks);
// loop through tracks that are going to be provided to bufferController
for(trackName in tracks){
track=tracks[trackName];
_logger.logger.log('main track:'+trackName+',container:'+track.container+',codecs[level/parsed]=['+track.levelCodec+'/'+track.codec+']');
var initSegment=track.initSegment;
if(initSegment){
this.appended=true;
// arm pending Buffering flag before appending a segment
this.pendingBuffering=true;
this.hls.trigger(_events2.default.BUFFER_APPENDING,{type:trackName,data:initSegment,parent:'main',content:'initSegment'});
}
}
// trigger handler right now
this.tick();
}
}},
{
key:'onFragParsingData',
value:function onFragParsingData(data){
var _this2=this;

var fragCurrent=this.fragCurrent;
var fragNew=data.frag;
if(fragCurrent&&data.id==='main'&&fragNew.sn===fragCurrent.sn&&fragNew.level===fragCurrent.level&&!(data.type==='audio'&&this.altAudio)&&// filter out main audio if audio track is loaded through audio stream controller
this.state===_baseStreamController.State.PARSING){
var level=this.levels[this.level],
frag=fragCurrent;
if(!Number.isFinite(data.endPTS)){
data.endPTS=data.startPTS+fragCurrent.duration;
data.endDTS=data.startDTS+fragCurrent.duration;
}

if(data.hasAudio===true){
frag.addElementaryStream(_fragment2.default.ElementaryStreamTypes.AUDIO);
}

if(data.hasVideo===true){
frag.addElementaryStream(_fragment2.default.ElementaryStreamTypes.VIDEO);
}

_logger.logger.log('Parsed '+data.type+',PTS:['+data.startPTS.toFixed(3)+','+data.endPTS.toFixed(3)+'],DTS:['+data.startDTS.toFixed(3)+'/'+data.endDTS.toFixed(3)+'],nb:'+data.nb+',dropped:'+(data.dropped||0));

// Detect gaps in a fragment  and try to fix it by finding a keyframe in the previous fragment (see _findFragments)
if(data.type==='video'){
frag.dropped=data.dropped;
if(frag.dropped){
if(!frag.backtracked){
var levelDetails=level.details;
if(levelDetails&&frag.sn===levelDetails.startSN){
_logger.logger.warn('missing video frame(s) on first frag, appending with gap',frag.sn);
}else{
_logger.logger.warn('missing video frame(s), backtracking fragment',frag.sn);
// Return back to the IDLE state without appending to buffer
// Causes findFragments to backtrack a segment and find the keyframe
// Audio fragments arriving before video sets the nextLoadPosition, causing _findFragments to skip the backtracked fragment
this.fragmentTracker.removeFragment(frag);
frag.backtracked=true;
this.nextLoadPosition=data.startPTS;
this.state=_baseStreamController.State.IDLE;
this.fragPrevious=frag;
this.tick();
return;
}
}else{
_logger.logger.warn('Already backtracked on this fragment, appending with the gap',frag.sn);
}
}else{
// Only reset the backtracked flag if we've loaded the frag without any dropped frames
frag.backtracked=false;
}
}

var drift=LevelHelper.updateFragPTSDTS(level.details,frag,data.startPTS,data.endPTS,data.startDTS,data.endDTS),
hls=this.hls;
hls.trigger(_events2.default.LEVEL_PTS_UPDATED,{details:level.details,level:this.level,drift:drift,type:data.type,start:data.startPTS,end:data.endPTS});
// has remuxer dropped video frames located before first keyframe ?
[data.data1,data.data2].forEach(function(buffer){
// only append in PARSING state (rationale is that an appending error could happen synchronously on first segment appending)
// in that case it is useless to append following segments
if(buffer&&buffer.length&&_this2.state===_baseStreamController.State.PARSING){
_this2.appended=true;
// arm pending Buffering flag before appending a segment
_this2.pendingBuffering=true;
hls.trigger(_events2.default.BUFFER_APPENDING,{type:data.type,data:buffer,parent:'main',content:'data'});
}
});
// trigger handler right now
this.tick();
}
}},
{
key:'onFragParsed',
value:function onFragParsed(data){
var fragCurrent=this.fragCurrent;
var fragNew=data.frag;
if(fragCurrent&&data.id==='main'&&fragNew.sn===fragCurrent.sn&&fragNew.level===fragCurrent.level&&this.state===_baseStreamController.State.PARSING){
this.stats.tparsed=window.performance.now();
this.state=_baseStreamController.State.PARSED;
this._checkAppendedParsed();
}
}},
{
key:'onAudioTrackSwitching',
value:function onAudioTrackSwitching(data){
// if any URL found on new audio track, it is an alternate audio track
var altAudio=!!data.url,
trackId=data.id;
// if we switch on main audio, ensure that main fragment scheduling is synced with media.buffered
// don't do anything if we switch to alt audio: audio stream controller is handling it.
// we will just have to change buffer scheduling on audioTrackSwitched
if(!altAudio){
if(this.mediaBuffer!==this.media){
_logger.logger.log('switching on main audio, use media.buffered to schedule main fragment loading');
this.mediaBuffer=this.media;
var fragCurrent=this.fragCurrent;
// we need to refill audio buffer from main: cancel any frag loading to speed up audio switch
if(fragCurrent.loader){
_logger.logger.log('switching to main audio track, cancel main fragment load');
fragCurrent.loader.abort();
}
this.fragCurrent=null;
this.fragPrevious=null;
// destroy demuxer to force init segment generation (following audio switch)
if(this.demuxer){
this.demuxer.destroy();
this.demuxer=null;
}
// switch to IDLE state to load new fragment
this.state=_baseStreamController.State.IDLE;
}
var hls=this.hls;
// switching to main audio, flush all audio and trigger track switched
hls.trigger(_events2.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:'audio'});
hls.trigger(_events2.default.AUDIO_TRACK_SWITCHED,{id:trackId});
this.altAudio=false;
}
}},
{
key:'onAudioTrackSwitched',
value:function onAudioTrackSwitched(data){
var trackId=data.id,
altAudio=!!this.hls.audioTracks[trackId].url;
if(altAudio){
var videoBuffer=this.videoBuffer;
// if we switched on alternate audio, ensure that main fragment scheduling is synced with video sourcebuffer buffered
if(videoBuffer&&this.mediaBuffer!==videoBuffer){
_logger.logger.log('switching on alternate audio, use video.buffered to schedule main fragment loading');
this.mediaBuffer=videoBuffer;
}
}
this.altAudio=altAudio;
this.tick();
}},
{
key:'onBufferCreated',
value:function onBufferCreated(data){
var tracks=data.tracks,
mediaTrack=void 0,
name=void 0,
alternate=false;
for(var type in tracks){
var track=tracks[type];
if(track.id==='main'){
name=type;
mediaTrack=track;
// keep video source buffer reference
if(type==='video'){
this.videoBuffer=tracks[type].buffer;
}
}else{
alternate=true;
}
}
if(alternate&&mediaTrack){
_logger.logger.log('alternate track found, use '+name+'.buffered to schedule main fragment loading');
this.mediaBuffer=mediaTrack.buffer;
}else{
this.mediaBuffer=this.media;
}
}},
{
key:'onBufferAppended',
value:function onBufferAppended(data){
if(data.parent==='main'){
var state=this.state;
if(state===_baseStreamController.State.PARSING||state===_baseStreamController.State.PARSED){
// check if all buffers have been appended
this.pendingBuffering=data.pending>0;
this._checkAppendedParsed();
}
}
}},
{
key:'_checkAppendedParsed',
value:function _checkAppendedParsed(){
// trigger handler right now
if(this.state===_baseStreamController.State.PARSED&&(!this.appended||!this.pendingBuffering)){
var frag=this.fragCurrent;
if(frag){
var media=this.mediaBuffer?this.mediaBuffer:this.media;
_logger.logger.log('main buffered : '+_timeRanges2.default.toString(media.buffered));
this.fragPrevious=frag;
var stats=this.stats;
stats.tbuffered=window.performance.now();
// we should get rid of this.fragLastKbps
this.fragLastKbps=Math.round(8*stats.total/(stats.tbuffered-stats.tfirst));
this.hls.trigger(_events2.default.FRAG_BUFFERED,{stats:stats,frag:frag,id:'main'});
this.state=_baseStreamController.State.IDLE;
}
this.tick();
}
}},
{
key:'onError',
value:function onError(data){
var frag=data.frag||this.fragCurrent;
// don't handle frag error not related to main fragment
if(frag&&frag.type!=='main'){
return;
}

// 0.5 : tolerance needed as some browsers stalls playback before reaching buffered end
var mediaBuffered=!!this.media&&_bufferHelper.BufferHelper.isBuffered(this.media,this.media.currentTime)&&_bufferHelper.BufferHelper.isBuffered(this.media,this.media.currentTime+0.5);

switch(data.details){
case _errors.ErrorDetails.FRAG_LOAD_ERROR:
case _errors.ErrorDetails.FRAG_LOAD_TIMEOUT:
case _errors.ErrorDetails.KEY_LOAD_ERROR:
case _errors.ErrorDetails.KEY_LOAD_TIMEOUT:
if(!data.fatal){
// keep retrying until the limit will be reached
if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){
// exponential backoff capped to config.fragLoadingMaxRetryTimeout
var delay=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);
_logger.logger.warn('mediaController: frag loading failed, retry in '+delay+' ms');
this.retryDate=window.performance.now()+delay;
// retry loading state
// if loadedmetadata is not set, it means that we are emergency switch down on first frag
// in that case, reset startFragRequested flag
if(!this.loadedmetadata){
this.startFragRequested=false;
this.nextLoadPosition=this.startPosition;
}
this.fragLoadError++;
this.state=_baseStreamController.State.FRAG_LOADING_WAITING_RETRY;
}else{
_logger.logger.error('mediaController: '+data.details+' reaches max retry, redispatch as fatal ...');
// switch error to fatal
data.fatal=true;
this.state=_baseStreamController.State.ERROR;
}
}
break;
case _errors.ErrorDetails.LEVEL_LOAD_ERROR:
case _errors.ErrorDetails.LEVEL_LOAD_TIMEOUT:
if(this.state!==_baseStreamController.State.ERROR){
if(data.fatal){
// if fatal error, stop processing
this.state=_baseStreamController.State.ERROR;
_logger.logger.warn('streamController: '+data.details+',switch to '+this.state+' state ...');
}else{
// in case of non fatal error while loading level, if level controller is not retrying to load level , switch back to IDLE
if(!data.levelRetry&&this.state===_baseStreamController.State.WAITING_LEVEL){
this.state=_baseStreamController.State.IDLE;
}
}
}
break;
case _errors.ErrorDetails.BUFFER_FULL_ERROR:
// if in appending state
if(data.parent==='main'&&(this.state===_baseStreamController.State.PARSING||this.state===_baseStreamController.State.PARSED)){
// reduce max buf len if current position is buffered
if(mediaBuffered){
this._reduceMaxBufferLength(this.config.maxBufferLength);
this.state=_baseStreamController.State.IDLE;
}else{
// current position is not buffered, but browser is still complaining about buffer full error
// this happens on IE/Edge, refer to https://github.com/video-dev/hls.js/pull/708
// in that case flush the whole buffer to recover
_logger.logger.warn('buffer full error also media.currentTime is not buffered, flush everything');
this.fragCurrent=null;
// flush everything
this.flushMainBuffer(0,Number.POSITIVE_INFINITY);
}
}
break;
default:
break;}

}},
{
key:'_reduceMaxBufferLength',
value:function _reduceMaxBufferLength(minLength){
var config=this.config;
if(config.maxMaxBufferLength>=minLength){
// reduce max buffer length as it might be too high. we do this to avoid loop flushing ...
config.maxMaxBufferLength/=2;
_logger.logger.warn('main:reduce max buffer length to '+config.maxMaxBufferLength+'s');
return true;
}
return false;
}

/**
     * Checks the health of the buffer and attempts to resolve playback stalls.
     * @private
     */},

{
key:'_checkBuffer',
value:function _checkBuffer(){
var media=this.media;

if(!media||media.readyState===0){
// Exit early if we don't have media or if the media hasn't bufferd anything yet (readyState 0)
return;
}

var mediaBuffer=this.mediaBuffer?this.mediaBuffer:media;
var buffered=mediaBuffer.buffered;

if(!this.loadedmetadata&&buffered.length){
this.loadedmetadata=true;
this._seekToStartPos();
}else if(this.immediateSwitch){
this.immediateLevelSwitchEnd();
}else{
this.gapController.poll(this.lastCurrentTime,buffered);
}
}},
{
key:'onFragLoadEmergencyAborted',
value:function onFragLoadEmergencyAborted(){
this.state=_baseStreamController.State.IDLE;
// if loadedmetadata is not set, it means that we are emergency switch down on first frag
// in that case, reset startFragRequested flag
if(!this.loadedmetadata){
this.startFragRequested=false;
this.nextLoadPosition=this.startPosition;
}
this.tick();
}},
{
key:'onBufferFlushed',
value:function onBufferFlushed(){
/* after successful buffer flushing, filter flushed fragments from bufferedFrags
        use mediaBuffered instead of media (so that we will check against video.buffered ranges in case of alt audio track)
      */
var media=this.mediaBuffer?this.mediaBuffer:this.media;
if(media){
// filter fragments potentially evicted from buffer. this is to avoid memleak on live streams
this.fragmentTracker.detectEvictedFragments(_fragment2.default.ElementaryStreamTypes.VIDEO,media.buffered);
}
// move to IDLE once flush complete. this should trigger new fragment loading
this.state=_baseStreamController.State.IDLE;
// reset reference to frag
this.fragPrevious=null;
}},
{
key:'swapAudioCodec',
value:function swapAudioCodec(){
this.audioCodecSwap=!this.audioCodecSwap;
}},
{
key:'computeLivePosition',
value:function computeLivePosition(sliding,levelDetails){
var targetLatency=this.config.liveSyncDuration!==undefined?this.config.liveSyncDuration:this.config.liveSyncDurationCount*levelDetails.targetduration;
return sliding+Math.max(0,levelDetails.totalduration-targetLatency);
}

/**
     * Seeks to the set startPosition if not equal to the mediaElement's current time.
     * @private
     */},

{
key:'_seekToStartPos',
value:function _seekToStartPos(){
var media=this.media;

var currentTime=media.currentTime;
// only adjust currentTime if different from startPosition or if startPosition not buffered
// at that stage, there should be only one buffered range, as we reach that code after first fragment has been buffered
var startPosition=media.seeking?currentTime:this.startPosition;
// if currentTime not matching with expected startPosition or startPosition not buffered but close to first buffered
if(currentTime!==startPosition){
// if startPosition not buffered, let's seek to buffered.start(0)
_logger.logger.log('target start position not buffered, seek to buffered.start(0) '+startPosition+' from current time '+currentTime+' ');
media.currentTime=startPosition;
}
}},
{
key:'_getAudioCodec',
value:function _getAudioCodec(currentLevel){
var audioCodec=this.config.defaultAudioCodec||currentLevel.audioCodec;
if(this.audioCodecSwap){
_logger.logger.log('swapping playlist audio codec');
if(audioCodec){
if(audioCodec.indexOf('mp4a.40.5')!==-1){
audioCodec='mp4a.40.2';
}else{
audioCodec='mp4a.40.5';
}
}
}

return audioCodec;
}},
{
key:'state',
set:function set(nextState){
if(this.state!==nextState){
var previousState=this.state;
this._state=nextState;
_logger.logger.log('main stream:'+previousState+'->'+nextState);
this.hls.trigger(_events2.default.STREAM_STATE_TRANSITION,{previousState:previousState,nextState:nextState});
}
},
get:function get(){
return this._state;
}},
{
key:'currentLevel',
get:function get(){
var media=this.media;
if(media){
var frag=this.getBufferedFrag(media.currentTime);
if(frag){
return frag.level;
}
}
return-1;
}},
{
key:'nextBufferedFrag',
get:function get(){
var media=this.media;
if(media){
// first get end range of current fragment
return this.followingBufferedFrag(this.getBufferedFrag(media.currentTime));
}else{
return null;
}
}},
{
key:'nextLevel',
get:function get(){
var frag=this.nextBufferedFrag;
if(frag){
return frag.level;
}else{
return-1;
}
}},
{
key:'liveSyncPosition',
get:function get(){
return this._liveSyncPosition;
},
set:function set(value){
this._liveSyncPosition=value;
}}]);


return StreamController;
}(_baseStreamController2.default);

exports.default=StreamController;
module.exports=exports['default'];

/***/},
/* 41 */
/***/function(module,exports,__webpack_require__){

function webpackBootstrapFunc(modules){
/******/ // The module cache
/******/var installedModules={};

/******/ // The require function
/******/function __webpack_require__(moduleId){

/******/ // Check if module is in cache
/******/if(installedModules[moduleId])
/******/return installedModules[moduleId].exports;

/******/ // Create a new module (and put it into the cache)
/******/var module=installedModules[moduleId]={
/******/i:moduleId,
/******/l:false,
/******/exports:{}
/******/};

/******/ // Execute the module function
/******/modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);

/******/ // Flag the module as loaded
/******/module.l=true;

/******/ // Return the exports of the module
/******/return module.exports;
/******/}

/******/ // expose the modules object (__webpack_modules__)
/******/__webpack_require__.m=modules;

/******/ // expose the module cache
/******/__webpack_require__.c=installedModules;

/******/ // identity function for calling harmony imports with the correct context
/******/__webpack_require__.i=function(value){return value;};

/******/ // define getter function for harmony exports
/******/__webpack_require__.d=function(exports,name,getter){
/******/if(!__webpack_require__.o(exports,name)){
/******/Object.defineProperty(exports,name,{
/******/configurable:false,
/******/enumerable:true,
/******/get:getter
/******/});
/******/}
/******/};

/******/ // define __esModule on exports
/******/__webpack_require__.r=function(exports){
/******/Object.defineProperty(exports,'__esModule',{value:true});
/******/};

/******/ // getDefaultExport function for compatibility with non-harmony modules
/******/__webpack_require__.n=function(module){
/******/var getter=module&&module.__esModule?
/******/function getDefault(){return module['default'];}:
/******/function getModuleExports(){return module;};
/******/__webpack_require__.d(getter,'a',getter);
/******/return getter;
/******/};

/******/ // Object.prototype.hasOwnProperty.call
/******/__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};

/******/ // __webpack_public_path__
/******/__webpack_require__.p="/";

/******/ // on error function for async loading
/******/__webpack_require__.oe=function(err){__f__("error",err," at node_modules/xgplayer-hls.js/dist/index.js:9507");throw err;};

var f=__webpack_require__(__webpack_require__.s=ENTRY_MODULE);
return f.default||f;// try to call default if defined to also support babel esmodule exports
}

var moduleNameReqExp='[\\.|\\-|\\+|\\w|\/|@]+';
var dependencyRegExp='\\(\\s*(\/\\*.*?\\*\/)?\\s*.*?('+moduleNameReqExp+').*?\\)';// additional chars when output.pathinfo is true

// http://stackoverflow.com/a/2593661/130442
function quoteRegExp(str){
return(str+'').replace(/[.?*+^$[\]\\(){}|-]/g,'\\$&');
}

function isNumeric(n){
return!isNaN(1*n);// 1 * n converts integers, integers as string ("123"), 1e3 and "1e3" to integers and strings to NaN
}

function getModuleDependencies(sources,module,queueName){
var retval={};
retval[queueName]=[];

var fnString=module.toString();
var wrapperSignature=fnString.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);
if(!wrapperSignature)return retval;
var webpackRequireName=wrapperSignature[1];

// main bundle deps
var re=new RegExp('(\\\\n|\\W)'+quoteRegExp(webpackRequireName)+dependencyRegExp,'g');
var match;
while(match=re.exec(fnString)){
if(match[3]==='dll-reference')continue;
retval[queueName].push(match[3]);
}

// dll deps
re=new RegExp('\\('+quoteRegExp(webpackRequireName)+'\\("(dll-reference\\s('+moduleNameReqExp+'))"\\)\\)'+dependencyRegExp,'g');
while(match=re.exec(fnString)){
if(!sources[match[2]]){
retval[queueName].push(match[1]);
sources[match[2]]=__webpack_require__(match[1]).m;
}
retval[match[2]]=retval[match[2]]||[];
retval[match[2]].push(match[4]);
}

// convert 1e3 back to 1000 - this can be important after uglify-js converted 1000 to 1e3
var keys=Object.keys(retval);
for(var i=0;i<keys.length;i++){
for(var j=0;j<retval[keys[i]].length;j++){
if(isNumeric(retval[keys[i]][j])){
retval[keys[i]][j]=1*retval[keys[i]][j];
}
}
}

return retval;
}

function hasValuesInQueues(queues){
var keys=Object.keys(queues);
return keys.reduce(function(hasValues,key){
return hasValues||queues[key].length>0;
},false);
}

function getRequiredModules(sources,moduleId){
var modulesQueue={
main:[moduleId]};

var requiredModules={
main:[]};

var seenModules={
main:{}};


while(hasValuesInQueues(modulesQueue)){
var queues=Object.keys(modulesQueue);
for(var i=0;i<queues.length;i++){
var queueName=queues[i];
var queue=modulesQueue[queueName];
var moduleToCheck=queue.pop();
seenModules[queueName]=seenModules[queueName]||{};
if(seenModules[queueName][moduleToCheck]||!sources[queueName][moduleToCheck])continue;
seenModules[queueName][moduleToCheck]=true;
requiredModules[queueName]=requiredModules[queueName]||[];
requiredModules[queueName].push(moduleToCheck);
var newModules=getModuleDependencies(sources,sources[queueName][moduleToCheck],queueName);
var newModulesKeys=Object.keys(newModules);
for(var j=0;j<newModulesKeys.length;j++){
modulesQueue[newModulesKeys[j]]=modulesQueue[newModulesKeys[j]]||[];
modulesQueue[newModulesKeys[j]]=modulesQueue[newModulesKeys[j]].concat(newModules[newModulesKeys[j]]);
}
}
}

return requiredModules;
}

module.exports=function(moduleId,options){
options=options||{};
var sources={
main:__webpack_require__.m};


var requiredModules=options.all?{main:Object.keys(sources.main)}:getRequiredModules(sources,moduleId);

var src='';

Object.keys(requiredModules).filter(function(m){return m!=='main';}).forEach(function(module){
var entryModule=0;
while(requiredModules[module][entryModule]){
entryModule++;
}
requiredModules[module].push(entryModule);
sources[module][entryModule]='(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })';
src=src+'var '+module+' = ('+webpackBootstrapFunc.toString().replace('ENTRY_MODULE',JSON.stringify(entryModule))+')({'+requiredModules[module].map(function(id){return''+JSON.stringify(id)+': '+sources[module][id].toString();}).join(',')+'});\n';
});

src=src+'new (('+webpackBootstrapFunc.toString().replace('ENTRY_MODULE',JSON.stringify(moduleId))+')({'+requiredModules.main.map(function(id){return''+JSON.stringify(id)+': '+sources.main[id].toString();}).join(',')+'}))(self);';

var blob=new window.Blob([src],{type:'text/javascript'});
if(options.bare){return blob;}

var URL=window.URL||window.webkitURL||window.mozURL||window.msURL;

var workerUrl=URL.createObjectURL(blob);
var worker=new window.Worker(workerUrl);
worker.objectURL=workerUrl;

return worker;
};


/***/},
/* 42 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var AESCrypto=function(){
function AESCrypto(subtle,iv){
_classCallCheck(this,AESCrypto);

this.subtle=subtle;
this.aesIV=iv;
}

_createClass(AESCrypto,[{
key:'decrypt',
value:function decrypt(data,key){
return this.subtle.decrypt({name:'AES-CBC',iv:this.aesIV},key,data);
}}]);


return AESCrypto;
}();

exports.default=AESCrypto;
module.exports=exports['default'];

/***/},
/* 43 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var FastAESKey=function(){
function FastAESKey(subtle,key){
_classCallCheck(this,FastAESKey);

this.subtle=subtle;
this.key=key;
}

_createClass(FastAESKey,[{
key:'expandKey',
value:function expandKey(){
return this.subtle.importKey('raw',this.key,{name:'AES-CBC'},false,['encrypt','decrypt']);
}}]);


return FastAESKey;
}();

exports.default=FastAESKey;
module.exports=exports['default'];

/***/},
/* 44 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

exports.removePadding=removePadding;

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

// PKCS7
function removePadding(buffer){
var outputBytes=buffer.byteLength;
var paddingBytes=outputBytes&&new DataView(buffer).getUint8(outputBytes-1);
if(paddingBytes){
return buffer.slice(0,outputBytes-paddingBytes);
}else{
return buffer;
}
}

var AESDecryptor=function(){
function AESDecryptor(){
_classCallCheck(this,AESDecryptor);

// Static after running initTable
this.rcon=[0x0,0x1,0x2,0x4,0x8,0x10,0x20,0x40,0x80,0x1b,0x36];
this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)];
this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)];
this.sBox=new Uint32Array(256);
this.invSBox=new Uint32Array(256);

// Changes during runtime
this.key=new Uint32Array(0);

this.initTable();
}

// Using view.getUint32() also swaps the byte order.


_createClass(AESDecryptor,[{
key:'uint8ArrayToUint32Array_',
value:function uint8ArrayToUint32Array_(arrayBuffer){
var view=new DataView(arrayBuffer);
var newArray=new Uint32Array(4);
for(var i=0;i<4;i++){
newArray[i]=view.getUint32(i*4);
}

return newArray;
}},
{
key:'initTable',
value:function initTable(){
var sBox=this.sBox;
var invSBox=this.invSBox;
var subMix=this.subMix;
var subMix0=subMix[0];
var subMix1=subMix[1];
var subMix2=subMix[2];
var subMix3=subMix[3];
var invSubMix=this.invSubMix;
var invSubMix0=invSubMix[0];
var invSubMix1=invSubMix[1];
var invSubMix2=invSubMix[2];
var invSubMix3=invSubMix[3];

var d=new Uint32Array(256);
var x=0;
var xi=0;
var i=0;
for(i=0;i<256;i++){
if(i<128){
d[i]=i<<1;
}else{
d[i]=i<<1^0x11b;
}
}

for(i=0;i<256;i++){
var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;
sx=sx>>>8^sx&0xff^0x63;
sBox[x]=sx;
invSBox[sx]=x;

// Compute multiplication
var x2=d[x];
var x4=d[x2];
var x8=d[x4];

// Compute sub/invSub bytes, mix columns tables
var t=d[sx]*0x101^sx*0x1010100;
subMix0[x]=t<<24|t>>>8;
subMix1[x]=t<<16|t>>>16;
subMix2[x]=t<<8|t>>>24;
subMix3[x]=t;

// Compute inv sub bytes, inv mix columns tables
t=x8*0x1010101^x4*0x10001^x2*0x101^x*0x1010100;
invSubMix0[sx]=t<<24|t>>>8;
invSubMix1[sx]=t<<16|t>>>16;
invSubMix2[sx]=t<<8|t>>>24;
invSubMix3[sx]=t;

// Compute next counter
if(!x){
x=xi=1;
}else{
x=x2^d[d[d[x8^x2]]];
xi^=d[d[xi]];
}
}
}},
{
key:'expandKey',
value:function expandKey(keyBuffer){
// convert keyBuffer to Uint32Array
var key=this.uint8ArrayToUint32Array_(keyBuffer);
var sameKey=true;
var offset=0;

while(offset<key.length&&sameKey){
sameKey=key[offset]===this.key[offset];
offset++;
}

if(sameKey){
return;
}

this.key=key;
var keySize=this.keySize=key.length;

if(keySize!==4&&keySize!==6&&keySize!==8){
throw new Error('Invalid aes key size='+keySize);
}

var ksRows=this.ksRows=(keySize+6+1)*4;
var ksRow=void 0;
var invKsRow=void 0;

var keySchedule=this.keySchedule=new Uint32Array(ksRows);
var invKeySchedule=this.invKeySchedule=new Uint32Array(ksRows);
var sbox=this.sBox;
var rcon=this.rcon;

var invSubMix=this.invSubMix;
var invSubMix0=invSubMix[0];
var invSubMix1=invSubMix[1];
var invSubMix2=invSubMix[2];
var invSubMix3=invSubMix[3];

var prev=void 0;
var t=void 0;

for(ksRow=0;ksRow<ksRows;ksRow++){
if(ksRow<keySize){
prev=keySchedule[ksRow]=key[ksRow];
continue;
}
t=prev;

if(ksRow%keySize===0){
// Rot word
t=t<<8|t>>>24;

// Sub word
t=sbox[t>>>24]<<24|sbox[t>>>16&0xff]<<16|sbox[t>>>8&0xff]<<8|sbox[t&0xff];

// Mix Rcon
t^=rcon[ksRow/keySize|0]<<24;
}else if(keySize>6&&ksRow%keySize===4){
// Sub word
t=sbox[t>>>24]<<24|sbox[t>>>16&0xff]<<16|sbox[t>>>8&0xff]<<8|sbox[t&0xff];
}

keySchedule[ksRow]=prev=(keySchedule[ksRow-keySize]^t)>>>0;
}

for(invKsRow=0;invKsRow<ksRows;invKsRow++){
ksRow=ksRows-invKsRow;
if(invKsRow&3){
t=keySchedule[ksRow];
}else{
t=keySchedule[ksRow-4];
}

if(invKsRow<4||ksRow<=4){
invKeySchedule[invKsRow]=t;
}else{
invKeySchedule[invKsRow]=invSubMix0[sbox[t>>>24]]^invSubMix1[sbox[t>>>16&0xff]]^invSubMix2[sbox[t>>>8&0xff]]^invSubMix3[sbox[t&0xff]];
}

invKeySchedule[invKsRow]=invKeySchedule[invKsRow]>>>0;
}
}

// Adding this as a method greatly improves performance.
},
{
key:'networkToHostOrderSwap',
value:function networkToHostOrderSwap(word){
return word<<24|(word&0xff00)<<8|(word&0xff0000)>>8|word>>>24;
}},
{
key:'decrypt',
value:function decrypt(inputArrayBuffer,offset,aesIV,removePKCS7Padding){
var nRounds=this.keySize+6;
var invKeySchedule=this.invKeySchedule;
var invSBOX=this.invSBox;

var invSubMix=this.invSubMix;
var invSubMix0=invSubMix[0];
var invSubMix1=invSubMix[1];
var invSubMix2=invSubMix[2];
var invSubMix3=invSubMix[3];

var initVector=this.uint8ArrayToUint32Array_(aesIV);
var initVector0=initVector[0];
var initVector1=initVector[1];
var initVector2=initVector[2];
var initVector3=initVector[3];

var inputInt32=new Int32Array(inputArrayBuffer);
var outputInt32=new Int32Array(inputInt32.length);

var t0=void 0,
t1=void 0,
t2=void 0,
t3=void 0;
var s0=void 0,
s1=void 0,
s2=void 0,
s3=void 0;
var inputWords0=void 0,
inputWords1=void 0,
inputWords2=void 0,
inputWords3=void 0;

var ksRow=void 0,
i=void 0;
var swapWord=this.networkToHostOrderSwap;

while(offset<inputInt32.length){
inputWords0=swapWord(inputInt32[offset]);
inputWords1=swapWord(inputInt32[offset+1]);
inputWords2=swapWord(inputInt32[offset+2]);
inputWords3=swapWord(inputInt32[offset+3]);

s0=inputWords0^invKeySchedule[0];
s1=inputWords3^invKeySchedule[1];
s2=inputWords2^invKeySchedule[2];
s3=inputWords1^invKeySchedule[3];

ksRow=4;

// Iterate through the rounds of decryption
for(i=1;i<nRounds;i++){
t0=invSubMix0[s0>>>24]^invSubMix1[s1>>16&0xff]^invSubMix2[s2>>8&0xff]^invSubMix3[s3&0xff]^invKeySchedule[ksRow];
t1=invSubMix0[s1>>>24]^invSubMix1[s2>>16&0xff]^invSubMix2[s3>>8&0xff]^invSubMix3[s0&0xff]^invKeySchedule[ksRow+1];
t2=invSubMix0[s2>>>24]^invSubMix1[s3>>16&0xff]^invSubMix2[s0>>8&0xff]^invSubMix3[s1&0xff]^invKeySchedule[ksRow+2];
t3=invSubMix0[s3>>>24]^invSubMix1[s0>>16&0xff]^invSubMix2[s1>>8&0xff]^invSubMix3[s2&0xff]^invKeySchedule[ksRow+3];
// Update state
s0=t0;
s1=t1;
s2=t2;
s3=t3;

ksRow=ksRow+4;
}

// Shift rows, sub bytes, add round key
t0=invSBOX[s0>>>24]<<24^invSBOX[s1>>16&0xff]<<16^invSBOX[s2>>8&0xff]<<8^invSBOX[s3&0xff]^invKeySchedule[ksRow];
t1=invSBOX[s1>>>24]<<24^invSBOX[s2>>16&0xff]<<16^invSBOX[s3>>8&0xff]<<8^invSBOX[s0&0xff]^invKeySchedule[ksRow+1];
t2=invSBOX[s2>>>24]<<24^invSBOX[s3>>16&0xff]<<16^invSBOX[s0>>8&0xff]<<8^invSBOX[s1&0xff]^invKeySchedule[ksRow+2];
t3=invSBOX[s3>>>24]<<24^invSBOX[s0>>16&0xff]<<16^invSBOX[s1>>8&0xff]<<8^invSBOX[s2&0xff]^invKeySchedule[ksRow+3];
ksRow=ksRow+3;

// Write
outputInt32[offset]=swapWord(t0^initVector0);
outputInt32[offset+1]=swapWord(t3^initVector1);
outputInt32[offset+2]=swapWord(t2^initVector2);
outputInt32[offset+3]=swapWord(t1^initVector3);

// reset initVector to last 4 unsigned int
initVector0=inputWords0;
initVector1=inputWords1;
initVector2=inputWords2;
initVector3=inputWords3;

offset=offset+4;
}

return removePKCS7Padding?removePadding(outputInt32.buffer):outputInt32.buffer;
}},
{
key:'destroy',
value:function destroy(){
this.key=undefined;
this.keySize=undefined;
this.ksRows=undefined;

this.sBox=undefined;
this.invSBox=undefined;
this.subMix=undefined;
this.invSubMix=undefined;
this.keySchedule=undefined;
this.invKeySchedule=undefined;

this.rcon=undefined;
}}]);


return AESDecryptor;
}();

exports.default=AESDecryptor;

/***/},
/* 45 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * AAC demuxer
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */


var _adts=__webpack_require__(22);

var ADTS=_interopRequireWildcard(_adts);

var _logger=__webpack_require__(0);

var _id=__webpack_require__(10);

var _id2=_interopRequireDefault(_id);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var AACDemuxer=function(){
function AACDemuxer(observer,remuxer,config){
_classCallCheck(this,AACDemuxer);

this.observer=observer;
this.config=config;
this.remuxer=remuxer;
}

_createClass(AACDemuxer,[{
key:'resetInitSegment',
value:function resetInitSegment(initSegment,audioCodec,videoCodec,duration){
this._audioTrack={container:'audio/adts',type:'audio',id:0,sequenceNumber:0,isAAC:true,samples:[],len:0,manifestCodec:audioCodec,duration:duration,inputTimeScale:90000};
}},
{
key:'resetTimeStamp',
value:function resetTimeStamp(){}},
{
key:'append',


// feed incoming data to the front of the parsing pipeline
value:function append(data,timeOffset,contiguous,accurateTimeOffset){
var track=this._audioTrack;
var id3Data=_id2.default.getID3Data(data,0)||[];
var timestamp=_id2.default.getTimeStamp(id3Data);
var pts=Number.isFinite(timestamp)?timestamp*90:timeOffset*90000;
var frameIndex=0;
var stamp=pts;
var length=data.length;
var offset=id3Data.length;

var id3Samples=[{pts:stamp,dts:stamp,data:id3Data}];

while(offset<length-1){
if(ADTS.isHeader(data,offset)&&offset+5<length){
ADTS.initTrackConfig(track,this.observer,data,offset,track.manifestCodec);
var frame=ADTS.appendFrame(track,data,offset,pts,frameIndex);
if(frame){
offset+=frame.length;
stamp=frame.sample.pts;
frameIndex++;
}else{
_logger.logger.log('Unable to parse AAC frame');
break;
}
}else if(_id2.default.isHeader(data,offset)){
id3Data=_id2.default.getID3Data(data,offset);
id3Samples.push({pts:stamp,dts:stamp,data:id3Data});
offset+=id3Data.length;
}else{
// nothing found, keep looking
offset++;
}
}

this.remuxer.remux(track,{samples:[]},{samples:id3Samples,inputTimeScale:90000},{samples:[]},timeOffset,contiguous,accurateTimeOffset);
}},
{
key:'destroy',
value:function destroy(){}}],
[{
key:'probe',
value:function probe(data){
if(!data){
return false;
}

// Check for the ADTS sync word
// Look for ADTS header | 1111 1111 | 1111 X00X | where X can be either 0 or 1
// Layer bits (position 14 and 15) in header should be always 0 for ADTS
// More info https://wiki.multimedia.cx/index.php?title=ADTS
var id3Data=_id2.default.getID3Data(data,0)||[];
var offset=id3Data.length;

for(var length=data.length;offset<length;offset++){
if(ADTS.probe(data,offset)){
_logger.logger.log('ADTS sync word found !');
return true;
}
}
return false;
}}]);


return AACDemuxer;
}();

exports.default=AACDemuxer;
module.exports=exports['default'];

/***/},
/* 46 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * highly optimized TS demuxer:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * parse PAT, PMT
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * extract PES packet from audio and video PIDs
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * extract AVC/H264 NAL units and AAC/ADTS samples from PES packet
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * trigger the remuxer upon parsing completion
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * it also tries to workaround as best as it can audio codec switch (HE-AAC to AAC and vice versa), without having to restart the MediaSource.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * it also controls the remuxing process :
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * upon discontinuity or level switch detection, it will also notifies the remuxer so that it can reset its state.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */

// import Hex from '../utils/hex';


var _adts=__webpack_require__(22);

var ADTS=_interopRequireWildcard(_adts);

var _mpegaudio=__webpack_require__(23);

var _mpegaudio2=_interopRequireDefault(_mpegaudio);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _expGolomb=__webpack_require__(47);

var _expGolomb2=_interopRequireDefault(_expGolomb);

var _sampleAes=__webpack_require__(48);

var _sampleAes2=_interopRequireDefault(_sampleAes);

var _logger=__webpack_require__(0);

var _errors=__webpack_require__(2);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

// We are using fixed track IDs for driving the MP4 remuxer
// instead of following the TS PIDs.
// There is no reason not to do this and some browsers/SourceBuffer-demuxers
// may not like if there are TrackID "switches"
// See https://github.com/video-dev/hls.js/issues/1331
// Here we are mapping our internal track types to constant MP4 track IDs
// With MSE currently one can only have one track of each, and we are muxing
// whatever video/audio rendition in them.
var RemuxerTrackIdConfig={
video:1,
audio:2,
id3:3,
text:4};


var TSDemuxer=function(){
function TSDemuxer(observer,remuxer,config,typeSupported){
_classCallCheck(this,TSDemuxer);

this.observer=observer;
this.config=config;
this.typeSupported=typeSupported;
this.remuxer=remuxer;
this.sampleAes=null;
}

_createClass(TSDemuxer,[{
key:'setDecryptData',
value:function setDecryptData(decryptdata){
if(decryptdata!=null&&decryptdata.key!=null&&decryptdata.method==='SAMPLE-AES'){
this.sampleAes=new _sampleAes2.default(this.observer,this.config,decryptdata,this.discardEPB);
}else{
this.sampleAes=null;
}
}},
{
key:'resetInitSegment',


/**
     * Initializes a new init segment on the demuxer/remuxer interface. Needed for discontinuities/track-switches (or at stream start)
     * Resets all internal track instances of the demuxer.
     *
     * @override Implements generic demuxing/remuxing interface (see DemuxerInline)
     * @param {object} initSegment
     * @param {string} audioCodec
     * @param {string} videoCodec
     * @param {number} duration (in TS timescale = 90kHz)
     */
value:function resetInitSegment(initSegment,audioCodec,videoCodec,duration){
this.pmtParsed=false;
this._pmtId=-1;

this._avcTrack=TSDemuxer.createTrack('video',duration);
this._audioTrack=TSDemuxer.createTrack('audio',duration);
this._id3Track=TSDemuxer.createTrack('id3',duration);
this._txtTrack=TSDemuxer.createTrack('text',duration);

// flush any partial content
this.aacOverFlow=null;
this.aacLastPTS=null;
this.avcSample=null;
this.audioCodec=audioCodec;
this.videoCodec=videoCodec;
this._duration=duration;
}

/**
     *
     * @override
     */},

{
key:'resetTimeStamp',
value:function resetTimeStamp(){}

// feed incoming data to the front of the parsing pipeline
},
{
key:'append',
value:function append(data,timeOffset,contiguous,accurateTimeOffset){
var start=void 0,
len=data.length,
stt=void 0,
pid=void 0,
atf=void 0,
offset=void 0,
pes=void 0,
unknownPIDs=false;
this.contiguous=contiguous;
var pmtParsed=this.pmtParsed,
avcTrack=this._avcTrack,
audioTrack=this._audioTrack,
id3Track=this._id3Track,
avcId=avcTrack.pid,
audioId=audioTrack.pid,
id3Id=id3Track.pid,
pmtId=this._pmtId,
avcData=avcTrack.pesData,
audioData=audioTrack.pesData,
id3Data=id3Track.pesData,
parsePAT=this._parsePAT,
parsePMT=this._parsePMT,
parsePES=this._parsePES,
parseAVCPES=this._parseAVCPES.bind(this),
parseAACPES=this._parseAACPES.bind(this),
parseMPEGPES=this._parseMPEGPES.bind(this),
parseID3PES=this._parseID3PES.bind(this);

var syncOffset=TSDemuxer._syncOffset(data);

// don't parse last TS packet if incomplete
len-=(len+syncOffset)%188;

// loop through TS packets
for(start=syncOffset;start<len;start+=188){
if(data[start]===0x47){
stt=!!(data[start+1]&0x40);
// pid is a 13-bit field starting at the last bit of TS[1]
pid=((data[start+1]&0x1f)<<8)+data[start+2];
atf=(data[start+3]&0x30)>>4;
// if an adaption field is present, its length is specified by the fifth byte of the TS packet header.
if(atf>1){
offset=start+5+data[start+4];
// continue if there is only adaptation field
if(offset===start+188){
continue;
}
}else{
offset=start+4;
}
switch(pid){
case avcId:
if(stt){
if(avcData&&(pes=parsePES(avcData))&&pes.pts!==undefined){
parseAVCPES(pes,false);
}

avcData={data:[],size:0};
}
if(avcData){
avcData.data.push(data.subarray(offset,start+188));
avcData.size+=start+188-offset;
}
break;
case audioId:
if(stt){
if(audioData&&(pes=parsePES(audioData))&&pes.pts!==undefined){
if(audioTrack.isAAC){
parseAACPES(pes);
}else{
parseMPEGPES(pes);
}
}
audioData={data:[],size:0};
}
if(audioData){
audioData.data.push(data.subarray(offset,start+188));
audioData.size+=start+188-offset;
}
break;
case id3Id:
if(stt){
if(id3Data&&(pes=parsePES(id3Data))&&pes.pts!==undefined){
parseID3PES(pes);
}

id3Data={data:[],size:0};
}
if(id3Data){
id3Data.data.push(data.subarray(offset,start+188));
id3Data.size+=start+188-offset;
}
break;
case 0:
if(stt){
offset+=data[offset]+1;
}

pmtId=this._pmtId=parsePAT(data,offset);
break;
case pmtId:
if(stt){
offset+=data[offset]+1;
}

var parsedPIDs=parsePMT(data,offset,this.typeSupported.mpeg===true||this.typeSupported.mp3===true,this.sampleAes!=null);

// only update track id if track PID found while parsing PMT
// this is to avoid resetting the PID to -1 in case
// track PID transiently disappears from the stream
// this could happen in case of transient missing audio samples for example
// NOTE this is only the PID of the track as found in TS,
// but we are not using this for MP4 track IDs.
avcId=parsedPIDs.avc;
if(avcId>0){
avcTrack.pid=avcId;
}

audioId=parsedPIDs.audio;
if(audioId>0){
audioTrack.pid=audioId;
audioTrack.isAAC=parsedPIDs.isAAC;
}
id3Id=parsedPIDs.id3;
if(id3Id>0){
id3Track.pid=id3Id;
}

if(unknownPIDs&&!pmtParsed){
_logger.logger.log('reparse from beginning');
unknownPIDs=false;
// we set it to -188, the += 188 in the for loop will reset start to 0
start=syncOffset-188;
}
pmtParsed=this.pmtParsed=true;
break;
case 17:
case 0x1fff:
break;
default:
unknownPIDs=true;
break;}

}else{
this.observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.FRAG_PARSING_ERROR,fatal:false,reason:'TS packet did not start with 0x47'});
}
}
// try to parse last PES packets
if(avcData&&(pes=parsePES(avcData))&&pes.pts!==undefined){
parseAVCPES(pes,true);
avcTrack.pesData=null;
}else{
// either avcData null or PES truncated, keep it for next frag parsing
avcTrack.pesData=avcData;
}

if(audioData&&(pes=parsePES(audioData))&&pes.pts!==undefined){
if(audioTrack.isAAC){
parseAACPES(pes);
}else{
parseMPEGPES(pes);
}

audioTrack.pesData=null;
}else{
if(audioData&&audioData.size){
_logger.logger.log('last AAC PES packet truncated,might overlap between fragments');
}

// either audioData null or PES truncated, keep it for next frag parsing
audioTrack.pesData=audioData;
}

if(id3Data&&(pes=parsePES(id3Data))&&pes.pts!==undefined){
parseID3PES(pes);
id3Track.pesData=null;
}else{
// either id3Data null or PES truncated, keep it for next frag parsing
id3Track.pesData=id3Data;
}

if(this.sampleAes==null){
this.remuxer.remux(audioTrack,avcTrack,id3Track,this._txtTrack,timeOffset,contiguous,accurateTimeOffset);
}else{
this.decryptAndRemux(audioTrack,avcTrack,id3Track,this._txtTrack,timeOffset,contiguous,accurateTimeOffset);
}
}},
{
key:'decryptAndRemux',
value:function decryptAndRemux(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset){
if(audioTrack.samples&&audioTrack.isAAC){
var localthis=this;
this.sampleAes.decryptAacSamples(audioTrack.samples,0,function(){
localthis.decryptAndRemuxAvc(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset);
});
}else{
this.decryptAndRemuxAvc(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset);
}
}},
{
key:'decryptAndRemuxAvc',
value:function decryptAndRemuxAvc(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset){
if(videoTrack.samples){
var localthis=this;
this.sampleAes.decryptAvcSamples(videoTrack.samples,0,0,function(){
localthis.remuxer.remux(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset);
});
}else{
this.remuxer.remux(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset);
}
}},
{
key:'destroy',
value:function destroy(){
this._initPTS=this._initDTS=undefined;
this._duration=0;
}},
{
key:'_parsePAT',
value:function _parsePAT(data,offset){
// skip the PSI header and parse the first PMT entry
return(data[offset+10]&0x1F)<<8|data[offset+11];
// logger.log('PMT PID:'  + this._pmtId);
}},
{
key:'_parsePMT',
value:function _parsePMT(data,offset,mpegSupported,isSampleAes){
var sectionLength=void 0,
tableEnd=void 0,
programInfoLength=void 0,
pid=void 0,
result={audio:-1,avc:-1,id3:-1,isAAC:true};
sectionLength=(data[offset+1]&0x0f)<<8|data[offset+2];
tableEnd=offset+3+sectionLength-4;
// to determine where the table is, we have to figure out how
// long the program info descriptors are
programInfoLength=(data[offset+10]&0x0f)<<8|data[offset+11];
// advance the offset to the first entry in the mapping table
offset+=12+programInfoLength;
while(offset<tableEnd){
pid=(data[offset+1]&0x1F)<<8|data[offset+2];
switch(data[offset]){
case 0xcf:
// SAMPLE-AES AAC
if(!isSampleAes){
_logger.logger.log('unkown stream type:'+data[offset]);
break;
}
/* falls through */

// ISO/IEC 13818-7 ADTS AAC (MPEG-2 lower bit-rate audio)
case 0x0f:
// logger.log('AAC PID:'  + pid);
if(result.audio===-1){
result.audio=pid;
}

break;

// Packetized metadata (ID3)
case 0x15:
// logger.log('ID3 PID:'  + pid);
if(result.id3===-1){
result.id3=pid;
}

break;

case 0xdb:
// SAMPLE-AES AVC
if(!isSampleAes){
_logger.logger.log('unkown stream type:'+data[offset]);
break;
}
/* falls through */

// ITU-T Rec. H.264 and ISO/IEC 14496-10 (lower bit-rate video)
case 0x1b:
// logger.log('AVC PID:'  + pid);
if(result.avc===-1){
result.avc=pid;
}

break;

// ISO/IEC 11172-3 (MPEG-1 audio)
// or ISO/IEC 13818-3 (MPEG-2 halved sample rate audio)
case 0x03:
case 0x04:
// logger.log('MPEG PID:'  + pid);
if(!mpegSupported){
_logger.logger.log('MPEG audio found, not supported in this browser for now');
}else if(result.audio===-1){
result.audio=pid;
result.isAAC=false;
}
break;

case 0x24:
_logger.logger.warn('HEVC stream type found, not supported for now');
break;

default:
_logger.logger.log('unkown stream type:'+data[offset]);
break;}

// move to the next table entry
// skip past the elementary stream descriptors, if present
offset+=((data[offset+3]&0x0F)<<8|data[offset+4])+5;
}
return result;
}},
{
key:'_parsePES',
value:function _parsePES(stream){
var i=0,
frag=void 0,
pesFlags=void 0,
pesPrefix=void 0,
pesLen=void 0,
pesHdrLen=void 0,
pesData=void 0,
pesPts=void 0,
pesDts=void 0,
payloadStartOffset=void 0,
data=stream.data;
// safety check
if(!stream||stream.size===0){
return null;
}

// we might need up to 19 bytes to read PES header
// if first chunk of data is less than 19 bytes, let's merge it with following ones until we get 19 bytes
// usually only one merge is needed (and this is rare ...)
while(data[0].length<19&&data.length>1){
var newData=new Uint8Array(data[0].length+data[1].length);
newData.set(data[0]);
newData.set(data[1],data[0].length);
data[0]=newData;
data.splice(1,1);
}
// retrieve PTS/DTS from first fragment
frag=data[0];
pesPrefix=(frag[0]<<16)+(frag[1]<<8)+frag[2];
if(pesPrefix===1){
pesLen=(frag[4]<<8)+frag[5];
// if PES parsed length is not zero and greater than total received length, stop parsing. PES might be truncated
// minus 6 : PES header size
if(pesLen&&pesLen>stream.size-6){
return null;
}

pesFlags=frag[7];
if(pesFlags&0xC0){
/* PES header described here : http://dvd.sourceforge.net/dvdinfo/pes-hdr.html
              as PTS / DTS is 33 bit we cannot use bitwise operator in JS,
              as Bitwise operators treat their operands as a sequence of 32 bits */
pesPts=(frag[9]&0x0E)*536870912+// 1 << 29
(frag[10]&0xFF)*4194304+// 1 << 22
(frag[11]&0xFE)*16384+// 1 << 14
(frag[12]&0xFF)*128+// 1 << 7
(frag[13]&0xFE)/2;
// check if greater than 2^32 -1
if(pesPts>4294967295){
// decrement 2^33
pesPts-=8589934592;
}
if(pesFlags&0x40){
pesDts=(frag[14]&0x0E)*536870912+// 1 << 29
(frag[15]&0xFF)*4194304+// 1 << 22
(frag[16]&0xFE)*16384+// 1 << 14
(frag[17]&0xFF)*128+// 1 << 7
(frag[18]&0xFE)/2;
// check if greater than 2^32 -1
if(pesDts>4294967295){
// decrement 2^33
pesDts-=8589934592;
}
if(pesPts-pesDts>60*90000){
_logger.logger.warn(Math.round((pesPts-pesDts)/90000)+'s delta between PTS and DTS, align them');
pesPts=pesDts;
}
}else{
pesDts=pesPts;
}
}
pesHdrLen=frag[8];
// 9 bytes : 6 bytes for PES header + 3 bytes for PES extension
payloadStartOffset=pesHdrLen+9;

stream.size-=payloadStartOffset;
// reassemble PES packet
pesData=new Uint8Array(stream.size);
for(var j=0,dataLen=data.length;j<dataLen;j++){
frag=data[j];
var len=frag.byteLength;
if(payloadStartOffset){
if(payloadStartOffset>len){
// trim full frag if PES header bigger than frag
payloadStartOffset-=len;
continue;
}else{
// trim partial frag if PES header smaller than frag
frag=frag.subarray(payloadStartOffset);
len-=payloadStartOffset;
payloadStartOffset=0;
}
}
pesData.set(frag,i);
i+=len;
}
if(pesLen){
// payload size : remove PES header + PES extension
pesLen-=pesHdrLen+3;
}
return{data:pesData,pts:pesPts,dts:pesDts,len:pesLen};
}else{
return null;
}
}},
{
key:'pushAccesUnit',
value:function pushAccesUnit(avcSample,avcTrack){
if(avcSample.units.length&&avcSample.frame){
var samples=avcTrack.samples;
var nbSamples=samples.length;
// only push AVC sample if starting with a keyframe is not mandatory OR
//    if keyframe already found in this fragment OR
//       keyframe found in last fragment (track.sps) AND
//          samples already appended (we already found a keyframe in this fragment) OR fragment is contiguous
if(!this.config.forceKeyFrameOnDiscontinuity||avcSample.key===true||avcTrack.sps&&(nbSamples||this.contiguous)){
avcSample.id=nbSamples;
samples.push(avcSample);
}else{
// dropped samples, track it
avcTrack.dropped++;
}
}
if(avcSample.debug.length){
_logger.logger.log(avcSample.pts+'/'+avcSample.dts+':'+avcSample.debug);
}
}},
{
key:'_parseAVCPES',
value:function _parseAVCPES(pes,last){
var _this=this;

// logger.log('parse new PES');
var track=this._avcTrack,
units=this._parseAVCNALu(pes.data),
debug=false,
expGolombDecoder=void 0,
avcSample=this.avcSample,
push=void 0,
spsfound=false,
i=void 0,
pushAccesUnit=this.pushAccesUnit.bind(this),
createAVCSample=function createAVCSample(key,pts,dts,debug){
return{key:key,pts:pts,dts:dts,units:[],debug:debug};
};
// free pes.data to save up some memory
pes.data=null;

// if new NAL units found and last sample still there, let's push ...
// this helps parsing streams with missing AUD (only do this if AUD never found)
if(avcSample&&units.length&&!track.audFound){
pushAccesUnit(avcSample,track);
avcSample=this.avcSample=createAVCSample(false,pes.pts,pes.dts,'');
}

units.forEach(function(unit){
switch(unit.type){
// NDR
case 1:
push=true;
if(!avcSample){
avcSample=_this.avcSample=createAVCSample(true,pes.pts,pes.dts,'');
}

if(debug){
avcSample.debug+='NDR ';
}

avcSample.frame=true;
var data=unit.data;
// only check slice type to detect KF in case SPS found in same packet (any keyframe is preceded by SPS ...)
if(spsfound&&data.length>4){
// retrieve slice type by parsing beginning of NAL unit (follow H264 spec, slice_header definition) to detect keyframe embedded in NDR
var sliceType=new _expGolomb2.default(data).readSliceType();
// 2 : I slice, 4 : SI slice, 7 : I slice, 9: SI slice
// SI slice : A slice that is coded using intra prediction only and using quantisation of the prediction samples.
// An SI slice can be coded such that its decoded samples can be constructed identically to an SP slice.
// I slice: A slice that is not an SI slice that is decoded using intra prediction only.
// if (sliceType === 2 || sliceType === 7) {
if(sliceType===2||sliceType===4||sliceType===7||sliceType===9){
avcSample.key=true;
}
}
break;
// IDR
case 5:
push=true;
// handle PES not starting with AUD
if(!avcSample){
avcSample=_this.avcSample=createAVCSample(true,pes.pts,pes.dts,'');
}

if(debug){
avcSample.debug+='IDR ';
}

avcSample.key=true;
avcSample.frame=true;
break;
// SEI
case 6:
push=true;
if(debug&&avcSample){
avcSample.debug+='SEI ';
}

expGolombDecoder=new _expGolomb2.default(_this.discardEPB(unit.data));

// skip frameType
expGolombDecoder.readUByte();

var payloadType=0;
var payloadSize=0;
var endOfCaptions=false;
var b=0;

while(!endOfCaptions&&expGolombDecoder.bytesAvailable>1){
payloadType=0;
do{
b=expGolombDecoder.readUByte();
payloadType+=b;
}while(b===0xFF);

// Parse payload size.
payloadSize=0;
do{
b=expGolombDecoder.readUByte();
payloadSize+=b;
}while(b===0xFF);

// TODO: there can be more than one payload in an SEI packet...
// TODO: need to read type and size in a while loop to get them all
if(payloadType===4&&expGolombDecoder.bytesAvailable!==0){
endOfCaptions=true;

var countryCode=expGolombDecoder.readUByte();

if(countryCode===181){
var providerCode=expGolombDecoder.readUShort();

if(providerCode===49){
var userStructure=expGolombDecoder.readUInt();

if(userStructure===0x47413934){
var userDataType=expGolombDecoder.readUByte();

// Raw CEA-608 bytes wrapped in CEA-708 packet
if(userDataType===3){
var firstByte=expGolombDecoder.readUByte();
var secondByte=expGolombDecoder.readUByte();

var totalCCs=31&firstByte;
var byteArray=[firstByte,secondByte];

for(i=0;i<totalCCs;i++){
// 3 bytes per CC
byteArray.push(expGolombDecoder.readUByte());
byteArray.push(expGolombDecoder.readUByte());
byteArray.push(expGolombDecoder.readUByte());
}

_this._insertSampleInOrder(_this._txtTrack.samples,{type:3,pts:pes.pts,bytes:byteArray});
}
}
}
}
}else if(payloadSize<expGolombDecoder.bytesAvailable){
for(i=0;i<payloadSize;i++){
expGolombDecoder.readUByte();
}
}
}
break;
// SPS
case 7:
push=true;
spsfound=true;
if(debug&&avcSample){
avcSample.debug+='SPS ';
}

if(!track.sps){
expGolombDecoder=new _expGolomb2.default(unit.data);
var config=expGolombDecoder.readSPS();
track.width=config.width;
track.height=config.height;
track.pixelRatio=config.pixelRatio;
track.sps=[unit.data];
track.duration=_this._duration;
var codecarray=unit.data.subarray(1,4);
var codecstring='avc1.';
for(i=0;i<3;i++){
var h=codecarray[i].toString(16);
if(h.length<2){
h='0'+h;
}

codecstring+=h;
}
track.codec=codecstring;
}
break;
// PPS
case 8:
push=true;
if(debug&&avcSample){
avcSample.debug+='PPS ';
}

if(!track.pps){
track.pps=[unit.data];
}

break;
// AUD
case 9:
push=false;
track.audFound=true;
if(avcSample){
pushAccesUnit(avcSample,track);
}

avcSample=_this.avcSample=createAVCSample(false,pes.pts,pes.dts,debug?'AUD ':'');
break;
// Filler Data
case 12:
push=false;
break;
default:
push=false;
if(avcSample){
avcSample.debug+='unknown NAL '+unit.type+' ';
}

break;}

if(avcSample&&push){
var _units=avcSample.units;
_units.push(unit);
}
});
// if last PES packet, push samples
if(last&&avcSample){
pushAccesUnit(avcSample,track);
this.avcSample=null;
}
}},
{
key:'_insertSampleInOrder',
value:function _insertSampleInOrder(arr,data){
var len=arr.length;
if(len>0){
if(data.pts>=arr[len-1].pts){
arr.push(data);
}else{
for(var pos=len-1;pos>=0;pos--){
if(data.pts<arr[pos].pts){
arr.splice(pos,0,data);
break;
}
}
}
}else{
arr.push(data);
}
}},
{
key:'_getLastNalUnit',
value:function _getLastNalUnit(){
var avcSample=this.avcSample,
lastUnit=void 0;
// try to fallback to previous sample if current one is empty
if(!avcSample||avcSample.units.length===0){
var track=this._avcTrack,
samples=track.samples;
avcSample=samples[samples.length-1];
}
if(avcSample){
var units=avcSample.units;
lastUnit=units[units.length-1];
}
return lastUnit;
}},
{
key:'_parseAVCNALu',
value:function _parseAVCNALu(array){
var i=0,
len=array.byteLength,
value=void 0,
overflow=void 0,
track=this._avcTrack,
state=track.naluState||0,
lastState=state;
var units=[],
unit=void 0,
unitType=void 0,
lastUnitStart=-1,
lastUnitType=void 0;
// logger.log('PES:' + Hex.hexDump(array));

if(state===-1){
// special use case where we found 3 or 4-byte start codes exactly at the end of previous PES packet
lastUnitStart=0;
// NALu type is value read from offset 0
lastUnitType=array[0]&0x1f;
state=0;
i=1;
}

while(i<len){
value=array[i++];
// optimization. state 0 and 1 are the predominant case. let's handle them outside of the switch/case
if(!state){
state=value?0:1;
continue;
}
if(state===1){
state=value?0:2;
continue;
}
// here we have state either equal to 2 or 3
if(!value){
state=3;
}else if(value===1){
if(lastUnitStart>=0){
unit={data:array.subarray(lastUnitStart,i-state-1),type:lastUnitType};
// logger.log('pushing NALU, type/size:' + unit.type + '/' + unit.data.byteLength);
units.push(unit);
}else{
// lastUnitStart is undefined => this is the first start code found in this PES packet
// first check if start code delimiter is overlapping between 2 PES packets,
// ie it started in last packet (lastState not zero)
// and ended at the beginning of this PES packet (i <= 4 - lastState)
var lastUnit=this._getLastNalUnit();
if(lastUnit){
if(lastState&&i<=4-lastState){
// start delimiter overlapping between PES packets
// strip start delimiter bytes from the end of last NAL unit
// check if lastUnit had a state different from zero
if(lastUnit.state){
// strip last bytes
lastUnit.data=lastUnit.data.subarray(0,lastUnit.data.byteLength-lastState);
}
}
// If NAL units are not starting right at the beginning of the PES packet, push preceding data into previous NAL unit.
overflow=i-state-1;
if(overflow>0){
// logger.log('first NALU found with overflow:' + overflow);
var tmp=new Uint8Array(lastUnit.data.byteLength+overflow);
tmp.set(lastUnit.data,0);
tmp.set(array.subarray(0,overflow),lastUnit.data.byteLength);
lastUnit.data=tmp;
}
}
}
// check if we can read unit type
if(i<len){
unitType=array[i]&0x1f;
// logger.log('find NALU @ offset:' + i + ',type:' + unitType);
lastUnitStart=i;
lastUnitType=unitType;
state=0;
}else{
// not enough byte to read unit type. let's read it on next PES parsing
state=-1;
}
}else{
state=0;
}
}
if(lastUnitStart>=0&&state>=0){
unit={data:array.subarray(lastUnitStart,len),type:lastUnitType,state:state};
units.push(unit);
// logger.log('pushing NALU, type/size/state:' + unit.type + '/' + unit.data.byteLength + '/' + state);
}
// no NALu found
if(units.length===0){
// append pes.data to previous NAL unit
var _lastUnit=this._getLastNalUnit();
if(_lastUnit){
var _tmp=new Uint8Array(_lastUnit.data.byteLength+array.byteLength);
_tmp.set(_lastUnit.data,0);
_tmp.set(array,_lastUnit.data.byteLength);
_lastUnit.data=_tmp;
}
}
track.naluState=state;
return units;
}

/**
     * remove Emulation Prevention bytes from a RBSP
     */},

{
key:'discardEPB',
value:function discardEPB(data){
var length=data.byteLength,
EPBPositions=[],
i=1,
newLength=void 0,
newData=void 0;

// Find all `Emulation Prevention Bytes`
while(i<length-2){
if(data[i]===0&&data[i+1]===0&&data[i+2]===0x03){
EPBPositions.push(i+2);
i+=2;
}else{
i++;
}
}

// If no Emulation Prevention Bytes were found just return the original
// array
if(EPBPositions.length===0){
return data;
}

// Create a new array to hold the NAL unit data
newLength=length-EPBPositions.length;
newData=new Uint8Array(newLength);
var sourceIndex=0;

for(i=0;i<newLength;sourceIndex++,i++){
if(sourceIndex===EPBPositions[0]){
// Skip this byte
sourceIndex++;
// Remove this position index
EPBPositions.shift();
}
newData[i]=data[sourceIndex];
}
return newData;
}},
{
key:'_parseAACPES',
value:function _parseAACPES(pes){
var track=this._audioTrack,
data=pes.data,
pts=pes.pts,
startOffset=0,
aacOverFlow=this.aacOverFlow,
aacLastPTS=this.aacLastPTS,
frameDuration=void 0,
frameIndex=void 0,
offset=void 0,
stamp=void 0,
len=void 0;
if(aacOverFlow){
var tmp=new Uint8Array(aacOverFlow.byteLength+data.byteLength);
tmp.set(aacOverFlow,0);
tmp.set(data,aacOverFlow.byteLength);
// logger.log(`AAC: append overflowing ${aacOverFlow.byteLength} bytes to beginning of new PES`);
data=tmp;
}
// look for ADTS header (0xFFFx)
for(offset=startOffset,len=data.length;offset<len-1;offset++){
if(ADTS.isHeader(data,offset)){
break;
}
}
// if ADTS header does not start straight from the beginning of the PES payload, raise an error
if(offset){
var reason=void 0,
fatal=void 0;
if(offset<len-1){
reason='AAC PES did not start with ADTS header,offset:'+offset;
fatal=false;
}else{
reason='no ADTS header found in AAC PES';
fatal=true;
}
_logger.logger.warn('parsing error:'+reason);
this.observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.FRAG_PARSING_ERROR,fatal:fatal,reason:reason});
if(fatal){
return;
}
}

ADTS.initTrackConfig(track,this.observer,data,offset,this.audioCodec);
frameIndex=0;
frameDuration=ADTS.getFrameDuration(track.samplerate);

// if last AAC frame is overflowing, we should ensure timestamps are contiguous:
// first sample PTS should be equal to last sample PTS + frameDuration
if(aacOverFlow&&aacLastPTS){
var newPTS=aacLastPTS+frameDuration;
if(Math.abs(newPTS-pts)>1){
_logger.logger.log('AAC: align PTS for overlapping frames by '+Math.round((newPTS-pts)/90));
pts=newPTS;
}
}

// scan for aac samples
while(offset<len){
if(ADTS.isHeader(data,offset)&&offset+5<len){
var frame=ADTS.appendFrame(track,data,offset,pts,frameIndex);
if(frame){
// logger.log(`${Math.round(frame.sample.pts)} : AAC`);
offset+=frame.length;
stamp=frame.sample.pts;
frameIndex++;
}else{
// logger.log('Unable to parse AAC frame');
break;
}
}else{
// nothing found, keep looking
offset++;
}
}

if(offset<len){
aacOverFlow=data.subarray(offset,len);
// logger.log(`AAC: overflow detected:${len-offset}`);
}else{
aacOverFlow=null;
}

this.aacOverFlow=aacOverFlow;
this.aacLastPTS=stamp;
}},
{
key:'_parseMPEGPES',
value:function _parseMPEGPES(pes){
var data=pes.data;
var length=data.length;
var frameIndex=0;
var offset=0;
var pts=pes.pts;

while(offset<length){
if(_mpegaudio2.default.isHeader(data,offset)){
var frame=_mpegaudio2.default.appendFrame(this._audioTrack,data,offset,pts,frameIndex);
if(frame){
offset+=frame.length;
frameIndex++;
}else{
// logger.log('Unable to parse Mpeg audio frame');
break;
}
}else{
// nothing found, keep looking
offset++;
}
}
}},
{
key:'_parseID3PES',
value:function _parseID3PES(pes){
this._id3Track.samples.push(pes);
}}],
[{
key:'probe',
value:function probe(data){
var syncOffset=TSDemuxer._syncOffset(data);
if(syncOffset<0){
return false;
}else{
if(syncOffset){
_logger.logger.warn('MPEG2-TS detected but first sync word found @ offset '+syncOffset+', junk ahead ?');
}

return true;
}
}},
{
key:'_syncOffset',
value:function _syncOffset(data){
// scan 1000 first bytes
var scanwindow=Math.min(1000,data.length-3*188);
var i=0;
while(i<scanwindow){
// a TS fragment should contain at least 3 TS packets, a PAT, a PMT, and one PID, each starting with 0x47
if(data[i]===0x47&&data[i+188]===0x47&&data[i+2*188]===0x47){
return i;
}else{
i++;
}
}
return-1;
}

/**
     * Creates a track model internal to demuxer used to drive remuxing input
     *
     * @param {string} type 'audio' | 'video' | 'id3' | 'text'
     * @param {number} duration
     * @return {object} TSDemuxer's internal track model
     */},

{
key:'createTrack',
value:function createTrack(type,duration){
return{
container:type==='video'||type==='audio'?'video/mp2t':undefined,
type:type,
id:RemuxerTrackIdConfig[type],
pid:-1,
inputTimeScale:90000,
sequenceNumber:0,
samples:[],
len:0,
dropped:type==='video'?0:undefined,
isAAC:type==='audio'?true:undefined,
duration:type==='audio'?duration:undefined};

}}]);


return TSDemuxer;
}();

exports.default=TSDemuxer;
module.exports=exports['default'];

/***/},
/* 47 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Parser for exponential Golomb codes, a variable-bitwidth number encoding scheme used by h264.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */

var _logger=__webpack_require__(0);

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var ExpGolomb=function(){
function ExpGolomb(data){
_classCallCheck(this,ExpGolomb);

this.data=data;
// the number of bytes left to examine in this.data
this.bytesAvailable=data.byteLength;
// the current word being examined
this.word=0;// :uint
// the number of bits left to examine in the current word
this.bitsAvailable=0;// :uint
}

// ():void


_createClass(ExpGolomb,[{
key:'loadWord',
value:function loadWord(){
var data=this.data,
bytesAvailable=this.bytesAvailable,
position=data.byteLength-bytesAvailable,
workingBytes=new Uint8Array(4),
availableBytes=Math.min(4,bytesAvailable);
if(availableBytes===0){
throw new Error('no bytes available');
}

workingBytes.set(data.subarray(position,position+availableBytes));
this.word=new DataView(workingBytes.buffer).getUint32(0);
// track the amount of this.data that has been processed
this.bitsAvailable=availableBytes*8;
this.bytesAvailable-=availableBytes;
}

// (count:int):void
},
{
key:'skipBits',
value:function skipBits(count){
var skipBytes=void 0;// :int
if(this.bitsAvailable>count){
this.word<<=count;
this.bitsAvailable-=count;
}else{
count-=this.bitsAvailable;
skipBytes=count>>3;
count-=skipBytes>>3;
this.bytesAvailable-=skipBytes;
this.loadWord();
this.word<<=count;
this.bitsAvailable-=count;
}
}

// (size:int):uint
},
{
key:'readBits',
value:function readBits(size){
var bits=Math.min(this.bitsAvailable,size),
// :uint
valu=this.word>>>32-bits;// :uint
if(size>32){
_logger.logger.error('Cannot read more than 32 bits at a time');
}

this.bitsAvailable-=bits;
if(this.bitsAvailable>0){
this.word<<=bits;
}else if(this.bytesAvailable>0){
this.loadWord();
}

bits=size-bits;
if(bits>0&&this.bitsAvailable){
return valu<<bits|this.readBits(bits);
}else{
return valu;
}
}

// ():uint
},
{
key:'skipLZ',
value:function skipLZ(){
var leadingZeroCount=void 0;// :uint
for(leadingZeroCount=0;leadingZeroCount<this.bitsAvailable;++leadingZeroCount){
if((this.word&0x80000000>>>leadingZeroCount)!==0){
// the first bit of working word is 1
this.word<<=leadingZeroCount;
this.bitsAvailable-=leadingZeroCount;
return leadingZeroCount;
}
}
// we exhausted word and still have not found a 1
this.loadWord();
return leadingZeroCount+this.skipLZ();
}

// ():void
},
{
key:'skipUEG',
value:function skipUEG(){
this.skipBits(1+this.skipLZ());
}

// ():void
},
{
key:'skipEG',
value:function skipEG(){
this.skipBits(1+this.skipLZ());
}

// ():uint
},
{
key:'readUEG',
value:function readUEG(){
var clz=this.skipLZ();// :uint
return this.readBits(clz+1)-1;
}

// ():int
},
{
key:'readEG',
value:function readEG(){
var valu=this.readUEG();// :int
if(0x01&valu){
// the number is odd if the low order bit is set
return 1+valu>>>1;// add 1 to make it even, and divide by 2
}else{
return-1*(valu>>>1);// divide by two then make it negative
}
}

// Some convenience functions
// :Boolean
},
{
key:'readBoolean',
value:function readBoolean(){
return this.readBits(1)===1;
}

// ():int
},
{
key:'readUByte',
value:function readUByte(){
return this.readBits(8);
}

// ():int
},
{
key:'readUShort',
value:function readUShort(){
return this.readBits(16);
}
// ():int
},
{
key:'readUInt',
value:function readUInt(){
return this.readBits(32);
}

/**
     * Advance the ExpGolomb decoder past a scaling list. The scaling
     * list is optionally transmitted as part of a sequence parameter
     * set and is not relevant to transmuxing.
     * @param count {number} the number of entries in this scaling list
     * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1
     */},

{
key:'skipScalingList',
value:function skipScalingList(count){
var lastScale=8,
nextScale=8,
j=void 0,
deltaScale=void 0;
for(j=0;j<count;j++){
if(nextScale!==0){
deltaScale=this.readEG();
nextScale=(lastScale+deltaScale+256)%256;
}
lastScale=nextScale===0?lastScale:nextScale;
}
}

/**
     * Read a sequence parameter set and return some interesting video
     * properties. A sequence parameter set is the H264 metadata that
     * describes the properties of upcoming video frames.
     * @param data {Uint8Array} the bytes of a sequence parameter set
     * @return {object} an object with configuration parsed from the
     * sequence parameter set, including the dimensions of the
     * associated video frames.
     */},

{
key:'readSPS',
value:function readSPS(){
var frameCropLeftOffset=0,
frameCropRightOffset=0,
frameCropTopOffset=0,
frameCropBottomOffset=0,
profileIdc=void 0,
profileCompat=void 0,
levelIdc=void 0,
numRefFramesInPicOrderCntCycle=void 0,
picWidthInMbsMinus1=void 0,
picHeightInMapUnitsMinus1=void 0,
frameMbsOnlyFlag=void 0,
scalingListCount=void 0,
i=void 0,
readUByte=this.readUByte.bind(this),
readBits=this.readBits.bind(this),
readUEG=this.readUEG.bind(this),
readBoolean=this.readBoolean.bind(this),
skipBits=this.skipBits.bind(this),
skipEG=this.skipEG.bind(this),
skipUEG=this.skipUEG.bind(this),
skipScalingList=this.skipScalingList.bind(this);

readUByte();
profileIdc=readUByte();// profile_idc
profileCompat=readBits(5);// constraint_set[0-4]_flag, u(5)
skipBits(3);// reserved_zero_3bits u(3),
levelIdc=readUByte();// level_idc u(8)
skipUEG();// seq_parameter_set_id
// some profiles have more optional data we don't need
if(profileIdc===100||profileIdc===110||profileIdc===122||profileIdc===244||profileIdc===44||profileIdc===83||profileIdc===86||profileIdc===118||profileIdc===128){
var chromaFormatIdc=readUEG();
if(chromaFormatIdc===3){
skipBits(1);
}// separate_colour_plane_flag

skipUEG();// bit_depth_luma_minus8
skipUEG();// bit_depth_chroma_minus8
skipBits(1);// qpprime_y_zero_transform_bypass_flag
if(readBoolean()){
// seq_scaling_matrix_present_flag
scalingListCount=chromaFormatIdc!==3?8:12;
for(i=0;i<scalingListCount;i++){
if(readBoolean()){
// seq_scaling_list_present_flag[ i ]
if(i<6){
skipScalingList(16);
}else{
skipScalingList(64);
}
}
}
}
}
skipUEG();// log2_max_frame_num_minus4
var picOrderCntType=readUEG();
if(picOrderCntType===0){
readUEG();// log2_max_pic_order_cnt_lsb_minus4
}else if(picOrderCntType===1){
skipBits(1);// delta_pic_order_always_zero_flag
skipEG();// offset_for_non_ref_pic
skipEG();// offset_for_top_to_bottom_field
numRefFramesInPicOrderCntCycle=readUEG();
for(i=0;i<numRefFramesInPicOrderCntCycle;i++){
skipEG();
}// offset_for_ref_frame[ i ]
}
skipUEG();// max_num_ref_frames
skipBits(1);// gaps_in_frame_num_value_allowed_flag
picWidthInMbsMinus1=readUEG();
picHeightInMapUnitsMinus1=readUEG();
frameMbsOnlyFlag=readBits(1);
if(frameMbsOnlyFlag===0){
skipBits(1);
}// mb_adaptive_frame_field_flag

skipBits(1);// direct_8x8_inference_flag
if(readBoolean()){
// frame_cropping_flag
frameCropLeftOffset=readUEG();
frameCropRightOffset=readUEG();
frameCropTopOffset=readUEG();
frameCropBottomOffset=readUEG();
}
var pixelRatio=[1,1];
if(readBoolean()){
// vui_parameters_present_flag
if(readBoolean()){
// aspect_ratio_info_present_flag
var aspectRatioIdc=readUByte();
switch(aspectRatioIdc){
case 1:
pixelRatio=[1,1];break;
case 2:
pixelRatio=[12,11];break;
case 3:
pixelRatio=[10,11];break;
case 4:
pixelRatio=[16,11];break;
case 5:
pixelRatio=[40,33];break;
case 6:
pixelRatio=[24,11];break;
case 7:
pixelRatio=[20,11];break;
case 8:
pixelRatio=[32,11];break;
case 9:
pixelRatio=[80,33];break;
case 10:
pixelRatio=[18,11];break;
case 11:
pixelRatio=[15,11];break;
case 12:
pixelRatio=[64,33];break;
case 13:
pixelRatio=[160,99];break;
case 14:
pixelRatio=[4,3];break;
case 15:
pixelRatio=[3,2];break;
case 16:
pixelRatio=[2,1];break;
case 255:
{
pixelRatio=[readUByte()<<8|readUByte(),readUByte()<<8|readUByte()];
break;
}}

}
}
return{
width:Math.ceil((picWidthInMbsMinus1+1)*16-frameCropLeftOffset*2-frameCropRightOffset*2),
height:(2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16-(frameMbsOnlyFlag?2:4)*(frameCropTopOffset+frameCropBottomOffset),
pixelRatio:pixelRatio};

}},
{
key:'readSliceType',
value:function readSliceType(){
// skip NALu type
this.readUByte();
// discard first_mb_in_slice
this.readUEG();
// return slice_type
return this.readUEG();
}}]);


return ExpGolomb;
}();

exports.default=ExpGolomb;
module.exports=exports['default'];

/***/},
/* 48 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * SAMPLE-AES decrypter
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */

var _decrypter=__webpack_require__(12);

var _decrypter2=_interopRequireDefault(_decrypter);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var SampleAesDecrypter=function(){
function SampleAesDecrypter(observer,config,decryptdata,discardEPB){
_classCallCheck(this,SampleAesDecrypter);

this.decryptdata=decryptdata;
this.discardEPB=discardEPB;
this.decrypter=new _decrypter2.default(observer,config,{removePKCS7Padding:false});
}

_createClass(SampleAesDecrypter,[{
key:'decryptBuffer',
value:function decryptBuffer(encryptedData,callback){
this.decrypter.decrypt(encryptedData,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,callback);
}

// AAC - encrypt all full 16 bytes blocks starting from offset 16
},
{
key:'decryptAacSample',
value:function decryptAacSample(samples,sampleIndex,callback,sync){
var curUnit=samples[sampleIndex].unit;
var encryptedData=curUnit.subarray(16,curUnit.length-curUnit.length%16);
var encryptedBuffer=encryptedData.buffer.slice(encryptedData.byteOffset,encryptedData.byteOffset+encryptedData.length);

var localthis=this;
this.decryptBuffer(encryptedBuffer,function(decryptedData){
decryptedData=new Uint8Array(decryptedData);
curUnit.set(decryptedData,16);

if(!sync){
localthis.decryptAacSamples(samples,sampleIndex+1,callback);
}
});
}},
{
key:'decryptAacSamples',
value:function decryptAacSamples(samples,sampleIndex,callback){
for(;;sampleIndex++){
if(sampleIndex>=samples.length){
callback();
return;
}

if(samples[sampleIndex].unit.length<32){
continue;
}

var sync=this.decrypter.isSync();

this.decryptAacSample(samples,sampleIndex,callback,sync);

if(!sync){
return;
}
}
}

// AVC - encrypt one 16 bytes block out of ten, starting from offset 32
},
{
key:'getAvcEncryptedData',
value:function getAvcEncryptedData(decodedData){
var encryptedDataLen=Math.floor((decodedData.length-48)/160)*16+16;
var encryptedData=new Int8Array(encryptedDataLen);
var outputPos=0;
for(var inputPos=32;inputPos<=decodedData.length-16;inputPos+=160,outputPos+=16){
encryptedData.set(decodedData.subarray(inputPos,inputPos+16),outputPos);
}

return encryptedData;
}},
{
key:'getAvcDecryptedUnit',
value:function getAvcDecryptedUnit(decodedData,decryptedData){
decryptedData=new Uint8Array(decryptedData);
var inputPos=0;
for(var outputPos=32;outputPos<=decodedData.length-16;outputPos+=160,inputPos+=16){
decodedData.set(decryptedData.subarray(inputPos,inputPos+16),outputPos);
}

return decodedData;
}},
{
key:'decryptAvcSample',
value:function decryptAvcSample(samples,sampleIndex,unitIndex,callback,curUnit,sync){
var decodedData=this.discardEPB(curUnit.data);
var encryptedData=this.getAvcEncryptedData(decodedData);
var localthis=this;

this.decryptBuffer(encryptedData.buffer,function(decryptedData){
curUnit.data=localthis.getAvcDecryptedUnit(decodedData,decryptedData);

if(!sync){
localthis.decryptAvcSamples(samples,sampleIndex,unitIndex+1,callback);
}
});
}},
{
key:'decryptAvcSamples',
value:function decryptAvcSamples(samples,sampleIndex,unitIndex,callback){
for(;;sampleIndex++,unitIndex=0){
if(sampleIndex>=samples.length){
callback();
return;
}

var curUnits=samples[sampleIndex].units;
for(;;unitIndex++){
if(unitIndex>=curUnits.length){
break;
}

var curUnit=curUnits[unitIndex];
if(curUnit.length<=48||curUnit.type!==1&&curUnit.type!==5){
continue;
}

var sync=this.decrypter.isSync();

this.decryptAvcSample(samples,sampleIndex,unitIndex,callback,curUnit,sync);

if(!sync){
return;
}
}
}
}}]);


return SampleAesDecrypter;
}();

exports.default=SampleAesDecrypter;
module.exports=exports['default'];

/***/},
/* 49 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MP3 demuxer
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */


var _id=__webpack_require__(10);

var _id2=_interopRequireDefault(_id);

var _logger=__webpack_require__(0);

var _mpegaudio=__webpack_require__(23);

var _mpegaudio2=_interopRequireDefault(_mpegaudio);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var MP3Demuxer=function(){
function MP3Demuxer(observer,remuxer,config){
_classCallCheck(this,MP3Demuxer);

this.observer=observer;
this.config=config;
this.remuxer=remuxer;
}

_createClass(MP3Demuxer,[{
key:'resetInitSegment',
value:function resetInitSegment(initSegment,audioCodec,videoCodec,duration){
this._audioTrack={container:'audio/mpeg',type:'audio',id:-1,sequenceNumber:0,isAAC:false,samples:[],len:0,manifestCodec:audioCodec,duration:duration,inputTimeScale:90000};
}},
{
key:'resetTimeStamp',
value:function resetTimeStamp(){}},
{
key:'append',


// feed incoming data to the front of the parsing pipeline
value:function append(data,timeOffset,contiguous,accurateTimeOffset){
var id3Data=_id2.default.getID3Data(data,0);
var timestamp=_id2.default.getTimeStamp(id3Data);
var pts=timestamp?90*timestamp:timeOffset*90000;
var offset=id3Data.length;
var length=data.length;
var frameIndex=0,
stamp=0;
var track=this._audioTrack;

var id3Samples=[{pts:pts,dts:pts,data:id3Data}];

while(offset<length){
if(_mpegaudio2.default.isHeader(data,offset)){
var frame=_mpegaudio2.default.appendFrame(track,data,offset,pts,frameIndex);
if(frame){
offset+=frame.length;
stamp=frame.sample.pts;
frameIndex++;
}else{
// logger.log('Unable to parse Mpeg audio frame');
break;
}
}else if(_id2.default.isHeader(data,offset)){
id3Data=_id2.default.getID3Data(data,offset);
id3Samples.push({pts:stamp,dts:stamp,data:id3Data});
offset+=id3Data.length;
}else{
// nothing found, keep looking
offset++;
}
}

this.remuxer.remux(track,{samples:[]},{samples:id3Samples,inputTimeScale:90000},{samples:[]},timeOffset,contiguous,accurateTimeOffset);
}},
{
key:'destroy',
value:function destroy(){}}],
[{
key:'probe',
value:function probe(data){
// check if data contains ID3 timestamp and MPEG sync word
var offset=void 0,
length=void 0;
var id3Data=_id2.default.getID3Data(data,0);
if(id3Data&&_id2.default.getTimeStamp(id3Data)!==undefined){
// Look for MPEG header | 1111 1111 | 111X XYZX | where X can be either 0 or 1 and Y or Z should be 1
// Layer bits (position 14 and 15) in header should be always different from 0 (Layer I or Layer II or Layer III)
// More info http://www.mp3-tech.org/programmer/frame_header.html
for(offset=id3Data.length,length=Math.min(data.length-1,offset+100);offset<length;offset++){
if(_mpegaudio2.default.probe(data,offset)){
_logger.logger.log('MPEG Audio sync word found !');
return true;
}
}
}
return false;
}}]);


return MP3Demuxer;
}();

exports.default=MP3Demuxer;
module.exports=exports['default'];

/***/},
/* 50 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * fMP4 remuxer
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */

var _aacHelper=__webpack_require__(51);

var _aacHelper2=_interopRequireDefault(_aacHelper);

var _mp4Generator=__webpack_require__(52);

var _mp4Generator2=_interopRequireDefault(_mp4Generator);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

// 10 seconds
var MAX_SILENT_FRAME_DURATION=10*1000;

var MP4Remuxer=function(){
function MP4Remuxer(observer,config,typeSupported,vendor){
_classCallCheck(this,MP4Remuxer);

this.observer=observer;
this.config=config;
this.typeSupported=typeSupported;
var userAgent=navigator.userAgent;
this.isSafari=vendor&&vendor.indexOf('Apple')>-1&&userAgent&&!userAgent.match('CriOS');
this.ISGenerated=false;
}

_createClass(MP4Remuxer,[{
key:'destroy',
value:function destroy(){}},
{
key:'resetTimeStamp',
value:function resetTimeStamp(defaultTimeStamp){
this._initPTS=this._initDTS=defaultTimeStamp;
}},
{
key:'resetInitSegment',
value:function resetInitSegment(){
this.ISGenerated=false;
}},
{
key:'remux',
value:function remux(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset){
// generate Init Segment if needed
if(!this.ISGenerated){
this.generateIS(audioTrack,videoTrack,timeOffset);
}

if(this.ISGenerated){
var nbAudioSamples=audioTrack.samples.length;
var nbVideoSamples=videoTrack.samples.length;
var audioTimeOffset=timeOffset;
var videoTimeOffset=timeOffset;
if(nbAudioSamples&&nbVideoSamples){
// timeOffset is expected to be the offset of the first timestamp of this fragment (first DTS)
// if first audio DTS is not aligned with first video DTS then we need to take that into account
// when providing timeOffset to remuxAudio / remuxVideo. if we don't do that, there might be a permanent / small
// drift between audio and video streams
var audiovideoDeltaDts=(audioTrack.samples[0].pts-videoTrack.samples[0].pts)/videoTrack.inputTimeScale;
audioTimeOffset+=Math.max(0,audiovideoDeltaDts);
videoTimeOffset+=Math.max(0,-audiovideoDeltaDts);
}
// Purposefully remuxing audio before video, so that remuxVideo can use nextAudioPts, which is
// calculated in remuxAudio.
// logger.log('nb AAC samples:' + audioTrack.samples.length);
if(nbAudioSamples){
// if initSegment was generated without video samples, regenerate it again
if(!audioTrack.timescale){
_logger.logger.warn('regenerate InitSegment as audio detected');
this.generateIS(audioTrack,videoTrack,timeOffset);
}
var audioData=this.remuxAudio(audioTrack,audioTimeOffset,contiguous,accurateTimeOffset);
// logger.log('nb AVC samples:' + videoTrack.samples.length);
if(nbVideoSamples){
var audioTrackLength=void 0;
if(audioData){
audioTrackLength=audioData.endPTS-audioData.startPTS;
}

// if initSegment was generated without video samples, regenerate it again
if(!videoTrack.timescale){
_logger.logger.warn('regenerate InitSegment as video detected');
this.generateIS(audioTrack,videoTrack,timeOffset);
}
this.remuxVideo(videoTrack,videoTimeOffset,contiguous,audioTrackLength,accurateTimeOffset);
}
}else{
// logger.log('nb AVC samples:' + videoTrack.samples.length);
if(nbVideoSamples){
var videoData=this.remuxVideo(videoTrack,videoTimeOffset,contiguous,0,accurateTimeOffset);
if(videoData&&audioTrack.codec){
this.remuxEmptyAudio(audioTrack,audioTimeOffset,contiguous,videoData);
}
}
}
}
// logger.log('nb ID3 samples:' + audioTrack.samples.length);
if(id3Track.samples.length){
this.remuxID3(id3Track,timeOffset);
}

// logger.log('nb ID3 samples:' + audioTrack.samples.length);
if(textTrack.samples.length){
this.remuxText(textTrack,timeOffset);
}

// notify end of parsing
this.observer.trigger(_events2.default.FRAG_PARSED);
}},
{
key:'generateIS',
value:function generateIS(audioTrack,videoTrack,timeOffset){
var observer=this.observer,
audioSamples=audioTrack.samples,
videoSamples=videoTrack.samples,
typeSupported=this.typeSupported,
container='audio/mp4',
tracks={},
data={tracks:tracks},
computePTSDTS=this._initPTS===undefined,
initPTS=void 0,
initDTS=void 0;

if(computePTSDTS){
initPTS=initDTS=Infinity;
}

if(audioTrack.config&&audioSamples.length){
// let's use audio sampling rate as MP4 time scale.
// rationale is that there is a integer nb of audio frames per audio sample (1024 for AAC)
// using audio sampling rate here helps having an integer MP4 frame duration
// this avoids potential rounding issue and AV sync issue
audioTrack.timescale=audioTrack.samplerate;
_logger.logger.log('audio sampling rate : '+audioTrack.samplerate);
if(!audioTrack.isAAC){
if(typeSupported.mpeg){
// Chrome and Safari
container='audio/mpeg';
audioTrack.codec='';
}else if(typeSupported.mp3){
// Firefox
audioTrack.codec='mp3';
}
}
tracks.audio={
container:container,
codec:audioTrack.codec,
initSegment:!audioTrack.isAAC&&typeSupported.mpeg?new Uint8Array():_mp4Generator2.default.initSegment([audioTrack]),
metadata:{
channelCount:audioTrack.channelCount}};


if(computePTSDTS){
// remember first PTS of this demuxing context. for audio, PTS = DTS
initPTS=initDTS=audioSamples[0].pts-audioTrack.inputTimeScale*timeOffset;
}
}

if(videoTrack.sps&&videoTrack.pps&&videoSamples.length){
// let's use input time scale as MP4 video timescale
// we use input time scale straight away to avoid rounding issues on frame duration / cts computation
var inputTimeScale=videoTrack.inputTimeScale;
videoTrack.timescale=inputTimeScale;
tracks.video={
container:'video/mp4',
codec:videoTrack.codec,
initSegment:_mp4Generator2.default.initSegment([videoTrack]),
metadata:{
width:videoTrack.width,
height:videoTrack.height}};


if(computePTSDTS){
initPTS=Math.min(initPTS,videoSamples[0].pts-inputTimeScale*timeOffset);
initDTS=Math.min(initDTS,videoSamples[0].dts-inputTimeScale*timeOffset);
this.observer.trigger(_events2.default.INIT_PTS_FOUND,{initPTS:initPTS});
}
}

if(Object.keys(tracks).length){
observer.trigger(_events2.default.FRAG_PARSING_INIT_SEGMENT,data);
this.ISGenerated=true;
if(computePTSDTS){
this._initPTS=initPTS;
this._initDTS=initDTS;
}
}else{
observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.FRAG_PARSING_ERROR,fatal:false,reason:'no audio/video samples found'});
}
}},
{
key:'remuxVideo',
value:function remuxVideo(track,timeOffset,contiguous,audioTrackLength,accurateTimeOffset){
var offset=8;
var mp4SampleDuration=void 0;
var mdat=void 0;
var moof=void 0;
var firstPTS=void 0;
var firstDTS=void 0;
var lastPTS=void 0;
var lastDTS=void 0;
var timeScale=track.timescale;
var inputSamples=track.samples;
var outputSamples=[];
var nbSamples=inputSamples.length;
var ptsNormalize=this._PTSNormalize;
var initPTS=this._initPTS;

// if parsed fragment is contiguous with last one, let's use last DTS value as reference
var nextAvcDts=this.nextAvcDts;

var isSafari=this.isSafari;

if(nbSamples===0){
return;
}

// Safari does not like overlapping DTS on consecutive fragments. let's use nextAvcDts to overcome this if fragments are consecutive
if(isSafari){
// also consider consecutive fragments as being contiguous (even if a level switch occurs),
// for sake of clarity:
// consecutive fragments are frags with
//  - less than 100ms gaps between new time offset (if accurate) and next expected PTS OR
//  - less than 200 ms PTS gaps (timeScale/5)
contiguous|=inputSamples.length&&nextAvcDts&&(accurateTimeOffset&&Math.abs(timeOffset-nextAvcDts/timeScale)<0.1||Math.abs(inputSamples[0].pts-nextAvcDts-initPTS)<timeScale/5);
}

if(!contiguous){
// if not contiguous, let's use target timeOffset
nextAvcDts=timeOffset*timeScale;
}

// PTS is coded on 33bits, and can loop from -2^32 to 2^32
// ptsNormalize will make PTS/DTS value monotonic, we use last known DTS value as reference value
inputSamples.forEach(function(sample){
sample.pts=ptsNormalize(sample.pts-initPTS,nextAvcDts);
sample.dts=ptsNormalize(sample.dts-initPTS,nextAvcDts);
});

// sort video samples by DTS then PTS then demux id order
inputSamples.sort(function(a,b){
var deltadts=a.dts-b.dts;
var deltapts=a.pts-b.pts;
return deltadts||deltapts||a.id-b.id;
});

// handle broken streams with PTS < DTS, tolerance up 200ms (18000 in 90kHz timescale)
var PTSDTSshift=inputSamples.reduce(function(prev,curr){
return Math.max(Math.min(prev,curr.pts-curr.dts),-18000);
},0);
if(PTSDTSshift<0){
_logger.logger.warn('PTS < DTS detected in video samples, shifting DTS by '+Math.round(PTSDTSshift/90)+' ms to overcome this issue');
for(var i=0;i<inputSamples.length;i++){
inputSamples[i].dts+=PTSDTSshift;
}
}

// compute first DTS and last DTS, normalize them against reference value
var sample=inputSamples[0];
firstDTS=Math.max(sample.dts,0);
firstPTS=Math.max(sample.pts,0);

// check timestamp continuity accross consecutive fragments (this is to remove inter-fragment gap/hole)
var delta=Math.round((firstDTS-nextAvcDts)/90);
// if fragment are contiguous, detect hole/overlapping between fragments
if(contiguous){
if(delta){
if(delta>1){
_logger.logger.log('AVC:'+delta+' ms hole between fragments detected,filling it');
}else if(delta<-1){
_logger.logger.log('AVC:'+-delta+' ms overlapping between fragments detected');
}

// remove hole/gap : set DTS to next expected DTS
firstDTS=nextAvcDts;
inputSamples[0].dts=firstDTS;
// offset PTS as well, ensure that PTS is smaller or equal than new DTS
firstPTS=Math.max(firstPTS-delta,nextAvcDts);
inputSamples[0].pts=firstPTS;
_logger.logger.log('Video/PTS/DTS adjusted: '+Math.round(firstPTS/90)+'/'+Math.round(firstDTS/90)+',delta:'+delta+' ms');
}
}

// compute lastPTS/lastDTS
sample=inputSamples[inputSamples.length-1];
lastDTS=Math.max(sample.dts,0);
lastPTS=Math.max(sample.pts,0,lastDTS);

// on Safari let's signal the same sample duration for all samples
// sample duration (as expected by trun MP4 boxes), should be the delta between sample DTS
// set this constant duration as being the avg delta between consecutive DTS.
if(isSafari){
mp4SampleDuration=Math.round((lastDTS-firstDTS)/(inputSamples.length-1));
}

var nbNalu=0,
naluLen=0;
for(var _i=0;_i<nbSamples;_i++){
// compute total/avc sample length and nb of NAL units
var _sample=inputSamples[_i],
units=_sample.units,
nbUnits=units.length,
sampleLen=0;
for(var j=0;j<nbUnits;j++){
sampleLen+=units[j].data.length;
}

naluLen+=sampleLen;
nbNalu+=nbUnits;
_sample.length=sampleLen;

// normalize PTS/DTS
if(isSafari){
// sample DTS is computed using a constant decoding offset (mp4SampleDuration) between samples
_sample.dts=firstDTS+_i*mp4SampleDuration;
}else{
// ensure sample monotonic DTS
_sample.dts=Math.max(_sample.dts,firstDTS);
}
// ensure that computed value is greater or equal than sample DTS
_sample.pts=Math.max(_sample.pts,_sample.dts);
}

/* concatenate the video data and construct the mdat in place
        (need 8 more bytes to fill length and mpdat type) */
var mdatSize=naluLen+4*nbNalu+8;
try{
mdat=new Uint8Array(mdatSize);
}catch(err){
this.observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MUX_ERROR,details:_errors.ErrorDetails.REMUX_ALLOC_ERROR,fatal:false,bytes:mdatSize,reason:'fail allocating video mdat '+mdatSize});
return;
}
var view=new DataView(mdat.buffer);
view.setUint32(0,mdatSize);
mdat.set(_mp4Generator2.default.types.mdat,4);

for(var _i2=0;_i2<nbSamples;_i2++){
var avcSample=inputSamples[_i2],
avcSampleUnits=avcSample.units,
mp4SampleLength=0,
compositionTimeOffset=void 0;
// convert NALU bitstream to MP4 format (prepend NALU with size field)
for(var _j=0,_nbUnits=avcSampleUnits.length;_j<_nbUnits;_j++){
var unit=avcSampleUnits[_j],
unitData=unit.data,
unitDataLen=unit.data.byteLength;
view.setUint32(offset,unitDataLen);
offset+=4;
mdat.set(unitData,offset);
offset+=unitDataLen;
mp4SampleLength+=4+unitDataLen;
}

if(!isSafari){
// expected sample duration is the Decoding Timestamp diff of consecutive samples
if(_i2<nbSamples-1){
mp4SampleDuration=inputSamples[_i2+1].dts-avcSample.dts;
}else{
var config=this.config,
lastFrameDuration=avcSample.dts-inputSamples[_i2>0?_i2-1:_i2].dts;
if(config.stretchShortVideoTrack){
// In some cases, a segment's audio track duration may exceed the video track duration.
// Since we've already remuxed audio, and we know how long the audio track is, we look to
// see if the delta to the next segment is longer than maxBufferHole.
// If so, playback would potentially get stuck, so we artificially inflate
// the duration of the last frame to minimize any potential gap between segments.
var maxBufferHole=config.maxBufferHole,
gapTolerance=Math.floor(maxBufferHole*timeScale),
deltaToFrameEnd=(audioTrackLength?firstPTS+audioTrackLength*timeScale:this.nextAudioPts)-avcSample.pts;
if(deltaToFrameEnd>gapTolerance){
// We subtract lastFrameDuration from deltaToFrameEnd to try to prevent any video
// frame overlap. maxBufferHole should be >> lastFrameDuration anyway.
mp4SampleDuration=deltaToFrameEnd-lastFrameDuration;
if(mp4SampleDuration<0){
mp4SampleDuration=lastFrameDuration;
}

_logger.logger.log('It is approximately '+deltaToFrameEnd/90+' ms to the next segment; using duration '+mp4SampleDuration/90+' ms for the last video frame.');
}else{
mp4SampleDuration=lastFrameDuration;
}
}else{
mp4SampleDuration=lastFrameDuration;
}
}
compositionTimeOffset=Math.round(avcSample.pts-avcSample.dts);
}else{
compositionTimeOffset=Math.max(0,mp4SampleDuration*Math.round((avcSample.pts-avcSample.dts)/mp4SampleDuration));
}

// console.log('PTS/DTS/initDTS/normPTS/normDTS/relative PTS : ${avcSample.pts}/${avcSample.dts}/${initDTS}/${ptsnorm}/${dtsnorm}/${(avcSample.pts/4294967296).toFixed(3)}');
// console.log(`avcSample.dts: ${avcSample.dts / 90}, avcSample.pts: ${avcSample.pts / 90}, mp4SampleDuration: ${mp4SampleDuration / 90}`, avcSample)
outputSamples.push({
size:mp4SampleLength,
// constant duration
duration:mp4SampleDuration,
cts:compositionTimeOffset,
flags:{
isLeading:0,
isDependedOn:0,
hasRedundancy:0,
degradPrio:0,
dependsOn:avcSample.key?2:1,
isNonSync:avcSample.key?0:1}});


}
// next AVC sample DTS should be equal to last sample DTS + last sample duration (in PES timescale)
this.nextAvcDts=lastDTS+mp4SampleDuration;
var dropped=track.dropped;
track.len=0;
track.nbNalu=0;
track.dropped=0;
if(outputSamples.length&&navigator.userAgent.toLowerCase().indexOf('chrome')>-1){
var flags=outputSamples[0].flags;
// chrome workaround, mark first sample as being a Random Access Point to avoid sourcebuffer append issue
// https://code.google.com/p/chromium/issues/detail?id=229412
flags.dependsOn=2;
flags.isNonSync=0;
}
track.samples=outputSamples;
moof=_mp4Generator2.default.moof(track.sequenceNumber++,firstDTS,track);
track.samples=[];

var data={
data1:moof,
data2:mdat,
startPTS:firstPTS/timeScale,
endPTS:(lastPTS+mp4SampleDuration)/timeScale,
startDTS:firstDTS/timeScale,
endDTS:this.nextAvcDts/timeScale,
type:'video',
hasAudio:false,
hasVideo:true,
nb:outputSamples.length,
dropped:dropped};

this.observer.trigger(_events2.default.FRAG_PARSING_DATA,data);
return data;
}},
{
key:'remuxAudio',
value:function remuxAudio(track,timeOffset,contiguous,accurateTimeOffset){
var inputTimeScale=track.inputTimeScale;
var mp4timeScale=track.timescale;
var scaleFactor=inputTimeScale/mp4timeScale;
var mp4SampleDuration=track.isAAC?1024:1152;
var inputSampleDuration=mp4SampleDuration*scaleFactor;
var ptsNormalize=this._PTSNormalize;
var initPTS=this._initPTS;
var rawMPEG=!track.isAAC&&this.typeSupported.mpeg;

var offset=void 0,
mp4Sample=void 0,
fillFrame=void 0,
mdat=void 0,
moof=void 0,
firstPTS=void 0,
lastPTS=void 0,
inputSamples=track.samples,
outputSamples=[],
nextAudioPts=this.nextAudioPts;

// for audio samples, also consider consecutive fragments as being contiguous (even if a level switch occurs),
// for sake of clarity:
// consecutive fragments are frags with
//  - less than 100ms gaps between new time offset (if accurate) and next expected PTS OR
//  - less than 20 audio frames distance
// contiguous fragments are consecutive fragments from same quality level (same level, new SN = old SN + 1)
// this helps ensuring audio continuity
// and this also avoids audio glitches/cut when switching quality, or reporting wrong duration on first audio frame
contiguous|=inputSamples.length&&nextAudioPts&&(accurateTimeOffset&&Math.abs(timeOffset-nextAudioPts/inputTimeScale)<0.1||Math.abs(inputSamples[0].pts-nextAudioPts-initPTS)<20*inputSampleDuration);

// compute normalized PTS
inputSamples.forEach(function(sample){
sample.pts=sample.dts=ptsNormalize(sample.pts-initPTS,timeOffset*inputTimeScale);
});

// filter out sample with negative PTS that are not playable anyway
// if we don't remove these negative samples, they will shift all audio samples forward.
// leading to audio overlap between current / next fragment
inputSamples=inputSamples.filter(function(sample){
return sample.pts>=0;
});

// in case all samples have negative PTS, and have been filtered out, return now
if(inputSamples.length===0){
return;
}

if(!contiguous){
if(!accurateTimeOffset){
// if frag are mot contiguous and if we cant trust time offset, let's use first sample PTS as next audio PTS
nextAudioPts=inputSamples[0].pts;
}else{
// if timeOffset is accurate, let's use it as predicted next audio PTS
nextAudioPts=timeOffset*inputTimeScale;
}
}

// If the audio track is missing samples, the frames seem to get "left-shifted" within the
// resulting mp4 segment, causing sync issues and leaving gaps at the end of the audio segment.
// In an effort to prevent this from happening, we inject frames here where there are gaps.
// When possible, we inject a silent frame; when that's not possible, we duplicate the last
// frame.

if(track.isAAC){
var maxAudioFramesDrift=this.config.maxAudioFramesDrift;
for(var i=0,nextPts=nextAudioPts;i<inputSamples.length;){
// First, let's see how far off this frame is from where we expect it to be
var sample=inputSamples[i],
delta;
var pts=sample.pts;
delta=pts-nextPts;

var duration=Math.abs(1000*delta/inputTimeScale);

// If we're overlapping by more than a duration, drop this sample
if(delta<=-maxAudioFramesDrift*inputSampleDuration){
_logger.logger.warn('Dropping 1 audio frame @ '+(nextPts/inputTimeScale).toFixed(3)+'s due to '+Math.round(duration)+' ms overlap.');
inputSamples.splice(i,1);
track.len-=sample.unit.length;
// Don't touch nextPtsNorm or i
}// eslint-disable-line brace-style

// Insert missing frames if:
// 1: We're more than maxAudioFramesDrift frame away
// 2: Not more than MAX_SILENT_FRAME_DURATION away
// 3: currentTime (aka nextPtsNorm) is not 0
else if(delta>=maxAudioFramesDrift*inputSampleDuration&&duration<MAX_SILENT_FRAME_DURATION&&nextPts){
var missing=Math.round(delta/inputSampleDuration);
_logger.logger.warn('Injecting '+missing+' audio frame @ '+(nextPts/inputTimeScale).toFixed(3)+'s due to '+Math.round(1000*delta/inputTimeScale)+' ms gap.');
for(var j=0;j<missing;j++){
var newStamp=Math.max(nextPts,0);
fillFrame=_aacHelper2.default.getSilentFrame(track.manifestCodec||track.codec,track.channelCount);
if(!fillFrame){
_logger.logger.log('Unable to get silent frame for given audio codec; duplicating last frame instead.');
fillFrame=sample.unit.subarray();
}
inputSamples.splice(i,0,{unit:fillFrame,pts:newStamp,dts:newStamp});
track.len+=fillFrame.length;
nextPts+=inputSampleDuration;
i++;
}

// Adjust sample to next expected pts
sample.pts=sample.dts=nextPts;
nextPts+=inputSampleDuration;
i++;
}else{
// Otherwise, just adjust pts
if(Math.abs(delta)>0.1*inputSampleDuration){
// logger.log(`Invalid frame delta ${Math.round(delta + inputSampleDuration)} at PTS ${Math.round(pts / 90)} (should be ${Math.round(inputSampleDuration)}).`);
}
sample.pts=sample.dts=nextPts;
nextPts+=inputSampleDuration;
i++;
}
}
}

for(var _j2=0,_nbSamples=inputSamples.length;_j2<_nbSamples;_j2++){
var audioSample=inputSamples[_j2];
var unit=audioSample.unit;
var _pts=audioSample.pts;
// logger.log(`Audio/PTS:${Math.round(pts/90)}`);
// if not first sample
if(lastPTS!==undefined){
mp4Sample.duration=Math.round((_pts-lastPTS)/scaleFactor);
}else{
var _delta=Math.round(1000*(_pts-nextAudioPts)/inputTimeScale),
numMissingFrames=0;
// if fragment are contiguous, detect hole/overlapping between fragments
// contiguous fragments are consecutive fragments from same quality level (same level, new SN = old SN + 1)
if(contiguous&&track.isAAC){
// log delta
if(_delta){
if(_delta>0&&_delta<MAX_SILENT_FRAME_DURATION){
numMissingFrames=Math.round((_pts-nextAudioPts)/inputSampleDuration);
_logger.logger.log(_delta+' ms hole between AAC samples detected,filling it');
if(numMissingFrames>0){
fillFrame=_aacHelper2.default.getSilentFrame(track.manifestCodec||track.codec,track.channelCount);
if(!fillFrame){
fillFrame=unit.subarray();
}

track.len+=numMissingFrames*fillFrame.length;
}
// if we have frame overlap, overlapping for more than half a frame duraion
}else if(_delta<-12){
// drop overlapping audio frames... browser will deal with it
_logger.logger.log('drop overlapping AAC sample, expected/parsed/delta:'+(nextAudioPts/inputTimeScale).toFixed(3)+'s/'+(_pts/inputTimeScale).toFixed(3)+'s/'+-_delta+'ms');
track.len-=unit.byteLength;
continue;
}
// set PTS/DTS to expected PTS/DTS
_pts=nextAudioPts;
}
}
// remember first PTS of our audioSamples
firstPTS=_pts;
if(track.len>0){
/* concatenate the audio data and construct the mdat in place
              (need 8 more bytes to fill length and mdat type) */
var mdatSize=rawMPEG?track.len:track.len+8;
offset=rawMPEG?0:8;
try{
mdat=new Uint8Array(mdatSize);
}catch(err){
this.observer.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MUX_ERROR,details:_errors.ErrorDetails.REMUX_ALLOC_ERROR,fatal:false,bytes:mdatSize,reason:'fail allocating audio mdat '+mdatSize});
return;
}
if(!rawMPEG){
var view=new DataView(mdat.buffer);
view.setUint32(0,mdatSize);
mdat.set(_mp4Generator2.default.types.mdat,4);
}
}else{
// no audio samples
return;
}
for(var _i3=0;_i3<numMissingFrames;_i3++){
fillFrame=_aacHelper2.default.getSilentFrame(track.manifestCodec||track.codec,track.channelCount);
if(!fillFrame){
_logger.logger.log('Unable to get silent frame for given audio codec; duplicating this frame instead.');
fillFrame=unit.subarray();
}
mdat.set(fillFrame,offset);
offset+=fillFrame.byteLength;
mp4Sample={
size:fillFrame.byteLength,
cts:0,
duration:1024,
flags:{
isLeading:0,
isDependedOn:0,
hasRedundancy:0,
degradPrio:0,
dependsOn:1}};


outputSamples.push(mp4Sample);
}
}
mdat.set(unit,offset);
var unitLen=unit.byteLength;
offset+=unitLen;
// console.log('PTS/DTS/initDTS/normPTS/normDTS/relative PTS : ${audioSample.pts}/${audioSample.dts}/${initDTS}/${ptsnorm}/${dtsnorm}/${(audioSample.pts/4294967296).toFixed(3)}');
mp4Sample={
size:unitLen,
cts:0,
duration:0,
flags:{
isLeading:0,
isDependedOn:0,
hasRedundancy:0,
degradPrio:0,
dependsOn:1}};


outputSamples.push(mp4Sample);
lastPTS=_pts;
}
var lastSampleDuration=0;
var nbSamples=outputSamples.length;
// set last sample duration as being identical to previous sample
if(nbSamples>=2){
lastSampleDuration=outputSamples[nbSamples-2].duration;
mp4Sample.duration=lastSampleDuration;
}
if(nbSamples){
// next audio sample PTS should be equal to last sample PTS + duration
this.nextAudioPts=nextAudioPts=lastPTS+scaleFactor*lastSampleDuration;
// logger.log('Audio/PTS/PTSend:' + audioSample.pts.toFixed(0) + '/' + this.nextAacDts.toFixed(0));
track.len=0;
track.samples=outputSamples;
if(rawMPEG){
moof=new Uint8Array();
}else{
moof=_mp4Generator2.default.moof(track.sequenceNumber++,firstPTS/scaleFactor,track);
}

track.samples=[];
var start=firstPTS/inputTimeScale;
var end=nextAudioPts/inputTimeScale;
var audioData={
data1:moof,
data2:mdat,
startPTS:start,
endPTS:end,
startDTS:start,
endDTS:end,
type:'audio',
hasAudio:true,
hasVideo:false,
nb:nbSamples};

this.observer.trigger(_events2.default.FRAG_PARSING_DATA,audioData);
return audioData;
}
return null;
}},
{
key:'remuxEmptyAudio',
value:function remuxEmptyAudio(track,timeOffset,contiguous,videoData){
var inputTimeScale=track.inputTimeScale,
mp4timeScale=track.samplerate?track.samplerate:inputTimeScale,
scaleFactor=inputTimeScale/mp4timeScale,
nextAudioPts=this.nextAudioPts,


// sync with video's timestamp
startDTS=(nextAudioPts!==undefined?nextAudioPts:videoData.startDTS*inputTimeScale)+this._initDTS,
endDTS=videoData.endDTS*inputTimeScale+this._initDTS,

// one sample's duration value
sampleDuration=1024,
frameDuration=scaleFactor*sampleDuration,


// samples count of this segment's duration
nbSamples=Math.ceil((endDTS-startDTS)/frameDuration),


// silent frame
silentFrame=_aacHelper2.default.getSilentFrame(track.manifestCodec||track.codec,track.channelCount);

_logger.logger.warn('remux empty Audio');
// Can't remux if we can't generate a silent frame...
if(!silentFrame){
_logger.logger.trace('Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!');
return;
}

var samples=[];
for(var i=0;i<nbSamples;i++){
var stamp=startDTS+i*frameDuration;
samples.push({unit:silentFrame,pts:stamp,dts:stamp});
track.len+=silentFrame.length;
}
track.samples=samples;

this.remuxAudio(track,timeOffset,contiguous);
}},
{
key:'remuxID3',
value:function remuxID3(track){
var length=track.samples.length,
sample=void 0;
var inputTimeScale=track.inputTimeScale;
var initPTS=this._initPTS;
var initDTS=this._initDTS;
// consume samples
if(length){
for(var index=0;index<length;index++){
sample=track.samples[index];
// setting id3 pts, dts to relative time
// using this._initPTS and this._initDTS to calculate relative time
sample.pts=(sample.pts-initPTS)/inputTimeScale;
sample.dts=(sample.dts-initDTS)/inputTimeScale;
}
this.observer.trigger(_events2.default.FRAG_PARSING_METADATA,{
samples:track.samples});

}

track.samples=[];
}},
{
key:'remuxText',
value:function remuxText(track){
track.samples.sort(function(a,b){
return a.pts-b.pts;
});

var length=track.samples.length,
sample=void 0;
var inputTimeScale=track.inputTimeScale;
var initPTS=this._initPTS;
// consume samples
if(length){
for(var index=0;index<length;index++){
sample=track.samples[index];
// setting text pts, dts to relative time
// using this._initPTS and this._initDTS to calculate relative time
sample.pts=(sample.pts-initPTS)/inputTimeScale;
}
this.observer.trigger(_events2.default.FRAG_PARSING_USERDATA,{
samples:track.samples});

}

track.samples=[];
}},
{
key:'_PTSNormalize',
value:function _PTSNormalize(value,reference){
var offset=void 0;
if(reference===undefined){
return value;
}

if(reference<value){
// - 2^33
offset=-8589934592;
}else{
// + 2^33
offset=8589934592;
}
/* PTS is 33bit (from 0 to 2^33 -1)
        if diff between value and reference is bigger than half of the amplitude (2^32) then it means that
        PTS looping occured. fill the gap */
while(Math.abs(value-reference)>4294967296){
value+=offset;
}

return value;
}}]);


return MP4Remuxer;
}();

exports.default=MP4Remuxer;
module.exports=exports['default'];

/***/},
/* 51 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

/**
 *  AAC helper
 */

var AAC=function(){
function AAC(){
_classCallCheck(this,AAC);
}

_createClass(AAC,null,[{
key:'getSilentFrame',
value:function getSilentFrame(codec,channelCount){
switch(codec){
case'mp4a.40.2':
if(channelCount===1){
return new Uint8Array([0x00,0xc8,0x00,0x80,0x23,0x80]);
}else if(channelCount===2){
return new Uint8Array([0x21,0x00,0x49,0x90,0x02,0x19,0x00,0x23,0x80]);
}else if(channelCount===3){
return new Uint8Array([0x00,0xc8,0x00,0x80,0x20,0x84,0x01,0x26,0x40,0x08,0x64,0x00,0x8e]);
}else if(channelCount===4){
return new Uint8Array([0x00,0xc8,0x00,0x80,0x20,0x84,0x01,0x26,0x40,0x08,0x64,0x00,0x80,0x2c,0x80,0x08,0x02,0x38]);
}else if(channelCount===5){
return new Uint8Array([0x00,0xc8,0x00,0x80,0x20,0x84,0x01,0x26,0x40,0x08,0x64,0x00,0x82,0x30,0x04,0x99,0x00,0x21,0x90,0x02,0x38]);
}else if(channelCount===6){
return new Uint8Array([0x00,0xc8,0x00,0x80,0x20,0x84,0x01,0x26,0x40,0x08,0x64,0x00,0x82,0x30,0x04,0x99,0x00,0x21,0x90,0x02,0x00,0xb2,0x00,0x20,0x08,0xe0]);
}

break;
// handle HE-AAC below (mp4a.40.5 / mp4a.40.29)
default:
if(channelCount===1){
// ffmpeg -y -f lavfi -i "aevalsrc=0:d=0.05" -c:a libfdk_aac -profile:a aac_he -b:a 4k output.aac && hexdump -v -e '16/1 "0x%x," "\n"' -v output.aac
return new Uint8Array([0x1,0x40,0x22,0x80,0xa3,0x4e,0xe6,0x80,0xba,0x8,0x0,0x0,0x0,0x1c,0x6,0xf1,0xc1,0xa,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5e]);
}else if(channelCount===2){
// ffmpeg -y -f lavfi -i "aevalsrc=0|0:d=0.05" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e '16/1 "0x%x," "\n"' -v output.aac
return new Uint8Array([0x1,0x40,0x22,0x80,0xa3,0x5e,0xe6,0x80,0xba,0x8,0x0,0x0,0x0,0x0,0x95,0x0,0x6,0xf1,0xa1,0xa,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5e]);
}else if(channelCount===3){
// ffmpeg -y -f lavfi -i "aevalsrc=0|0|0:d=0.05" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e '16/1 "0x%x," "\n"' -v output.aac
return new Uint8Array([0x1,0x40,0x22,0x80,0xa3,0x5e,0xe6,0x80,0xba,0x8,0x0,0x0,0x0,0x0,0x95,0x0,0x6,0xf1,0xa1,0xa,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5a,0x5e]);
}
break;}

return null;
}}]);


return AAC;
}();

exports.default=AAC;
module.exports=exports['default'];

/***/},
/* 52 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

/**
 * Generate MP4 Box
*/

var UINT32_MAX=Math.pow(2,32)-1;

var MP4=function(){
function MP4(){
_classCallCheck(this,MP4);
}

_createClass(MP4,null,[{
key:'init',
value:function init(){
MP4.types={
avc1:[],// codingname
avcC:[],
btrt:[],
dinf:[],
dref:[],
esds:[],
ftyp:[],
hdlr:[],
mdat:[],
mdhd:[],
mdia:[],
mfhd:[],
minf:[],
moof:[],
moov:[],
mp4a:[],
'.mp3':[],
mvex:[],
mvhd:[],
pasp:[],
sdtp:[],
stbl:[],
stco:[],
stsc:[],
stsd:[],
stsz:[],
stts:[],
tfdt:[],
tfhd:[],
traf:[],
trak:[],
trun:[],
trex:[],
tkhd:[],
vmhd:[],
smhd:[]};


var i=void 0;
for(i in MP4.types){
if(MP4.types.hasOwnProperty(i)){
MP4.types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)];
}
}

var videoHdlr=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,// pre_defined
0x76,0x69,0x64,0x65,// handler_type: 'vide'
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x56,0x69,0x64,0x65,0x6f,0x48,0x61,0x6e,0x64,0x6c,0x65,0x72,0x00// name: 'VideoHandler'
]);

var audioHdlr=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,// pre_defined
0x73,0x6f,0x75,0x6e,// handler_type: 'soun'
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x53,0x6f,0x75,0x6e,0x64,0x48,0x61,0x6e,0x64,0x6c,0x65,0x72,0x00// name: 'SoundHandler'
]);

MP4.HDLR_TYPES={
'video':videoHdlr,
'audio':audioHdlr};


var dref=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x01,// entry_count
0x00,0x00,0x00,0x0c,// entry_size
0x75,0x72,0x6c,0x20,// 'url' type
0x00,// version 0
0x00,0x00,0x01// entry_flags
]);

var stco=new Uint8Array([0x00,// version
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00// entry_count
]);

MP4.STTS=MP4.STSC=MP4.STCO=stco;

MP4.STSZ=new Uint8Array([0x00,// version
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,// sample_size
0x00,0x00,0x00,0x00// sample_count
]);
MP4.VMHD=new Uint8Array([0x00,// version
0x00,0x00,0x01,// flags
0x00,0x00,// graphicsmode
0x00,0x00,0x00,0x00,0x00,0x00// opcolor
]);
MP4.SMHD=new Uint8Array([0x00,// version
0x00,0x00,0x00,// flags
0x00,0x00,// balance
0x00,0x00// reserved
]);

MP4.STSD=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x01]);// entry_count

var majorBrand=new Uint8Array([105,115,111,109]);// isom
var avc1Brand=new Uint8Array([97,118,99,49]);// avc1
var minorVersion=new Uint8Array([0,0,0,1]);

MP4.FTYP=MP4.box(MP4.types.ftyp,majorBrand,minorVersion,majorBrand,avc1Brand);
MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,dref));
}},
{
key:'box',
value:function box(type){
var payload=Array.prototype.slice.call(arguments,1),
size=8,
i=payload.length,
len=i,
result=void 0;
// calculate the total size we need to allocate
while(i--){
size+=payload[i].byteLength;
}

result=new Uint8Array(size);
result[0]=size>>24&0xff;
result[1]=size>>16&0xff;
result[2]=size>>8&0xff;
result[3]=size&0xff;
result.set(type,4);
// copy the payload into the result
for(i=0,size=8;i<len;i++){
// copy payload[i] array @ offset size
result.set(payload[i],size);
size+=payload[i].byteLength;
}
return result;
}},
{
key:'hdlr',
value:function hdlr(type){
return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[type]);
}},
{
key:'mdat',
value:function mdat(data){
return MP4.box(MP4.types.mdat,data);
}},
{
key:'mdhd',
value:function mdhd(timescale,duration){
duration*=timescale;
var upperWordDuration=Math.floor(duration/(UINT32_MAX+1));
var lowerWordDuration=Math.floor(duration%(UINT32_MAX+1));
return MP4.box(MP4.types.mdhd,new Uint8Array([0x01,// version 1
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,// creation_time
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,// modification_time
timescale>>24&0xFF,timescale>>16&0xFF,timescale>>8&0xFF,timescale&0xFF,// timescale
upperWordDuration>>24,upperWordDuration>>16&0xFF,upperWordDuration>>8&0xFF,upperWordDuration&0xFF,lowerWordDuration>>24,lowerWordDuration>>16&0xFF,lowerWordDuration>>8&0xFF,lowerWordDuration&0xFF,0x55,0xc4,// 'und' language (undetermined)
0x00,0x00]));
}},
{
key:'mdia',
value:function mdia(track){
return MP4.box(MP4.types.mdia,MP4.mdhd(track.timescale,track.duration),MP4.hdlr(track.type),MP4.minf(track));
}},
{
key:'mfhd',
value:function mfhd(sequenceNumber){
return MP4.box(MP4.types.mfhd,new Uint8Array([0x00,0x00,0x00,0x00,// flags
sequenceNumber>>24,sequenceNumber>>16&0xFF,sequenceNumber>>8&0xFF,sequenceNumber&0xFF// sequence_number
]));
}},
{
key:'minf',
value:function minf(track){
if(track.type==='audio'){
return MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(track));
}else{
return MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(track));
}
}},
{
key:'moof',
value:function moof(sn,baseMediaDecodeTime,track){
return MP4.box(MP4.types.moof,MP4.mfhd(sn),MP4.traf(track,baseMediaDecodeTime));
}
/**
    * @param tracks... (optional) {array} the tracks associated with this movie
    */},

{
key:'moov',
value:function moov(tracks){
var i=tracks.length,
boxes=[];

while(i--){
boxes[i]=MP4.trak(tracks[i]);
}

return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(tracks[0].timescale,tracks[0].duration)].concat(boxes).concat(MP4.mvex(tracks)));
}},
{
key:'mvex',
value:function mvex(tracks){
var i=tracks.length,
boxes=[];

while(i--){
boxes[i]=MP4.trex(tracks[i]);
}

return MP4.box.apply(null,[MP4.types.mvex].concat(boxes));
}},
{
key:'mvhd',
value:function mvhd(timescale,duration){
duration*=timescale;
var upperWordDuration=Math.floor(duration/(UINT32_MAX+1));
var lowerWordDuration=Math.floor(duration%(UINT32_MAX+1));
var bytes=new Uint8Array([0x01,// version 1
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,// creation_time
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,// modification_time
timescale>>24&0xFF,timescale>>16&0xFF,timescale>>8&0xFF,timescale&0xFF,// timescale
upperWordDuration>>24,upperWordDuration>>16&0xFF,upperWordDuration>>8&0xFF,upperWordDuration&0xFF,lowerWordDuration>>24,lowerWordDuration>>16&0xFF,lowerWordDuration>>8&0xFF,lowerWordDuration&0xFF,0x00,0x01,0x00,0x00,// 1.0 rate
0x01,0x00,// 1.0 volume
0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,// transformation: unity matrix
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// pre_defined
0xff,0xff,0xff,0xff// next_track_ID
]);
return MP4.box(MP4.types.mvhd,bytes);
}},
{
key:'sdtp',
value:function sdtp(track){
var samples=track.samples||[],
bytes=new Uint8Array(4+samples.length),
flags=void 0,
i=void 0;
// leave the full box header (4 bytes) all zero
// write the sample table
for(i=0;i<samples.length;i++){
flags=samples[i].flags;
bytes[i+4]=flags.dependsOn<<4|flags.isDependedOn<<2|flags.hasRedundancy;
}

return MP4.box(MP4.types.sdtp,bytes);
}},
{
key:'stbl',
value:function stbl(track){
return MP4.box(MP4.types.stbl,MP4.stsd(track),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO));
}},
{
key:'avc1',
value:function avc1(track){
var sps=[],
pps=[],
i=void 0,
data=void 0,
len=void 0;
// assemble the SPSs

for(i=0;i<track.sps.length;i++){
data=track.sps[i];
len=data.byteLength;
sps.push(len>>>8&0xFF);
sps.push(len&0xFF);

// SPS
sps=sps.concat(Array.prototype.slice.call(data));
}

// assemble the PPSs
for(i=0;i<track.pps.length;i++){
data=track.pps[i];
len=data.byteLength;
pps.push(len>>>8&0xFF);
pps.push(len&0xFF);

pps=pps.concat(Array.prototype.slice.call(data));
}

var avcc=MP4.box(MP4.types.avcC,new Uint8Array([0x01,// version
sps[3],// profile
sps[4],// profile compat
sps[5],// level
0xfc|3,// lengthSizeMinusOne, hard-coded to 4 bytes
0xE0|track.sps.length// 3bit reserved (111) + numOfSequenceParameterSets
].concat(sps).concat([track.pps.length// numOfPictureParameterSets
]).concat(pps))),
// "PPS"
width=track.width,
height=track.height,
hSpacing=track.pixelRatio[0],
vSpacing=track.pixelRatio[1];

return MP4.box(MP4.types.avc1,new Uint8Array([0x00,0x00,0x00,// reserved
0x00,0x00,0x00,// reserved
0x00,0x01,// data_reference_index
0x00,0x00,// pre_defined
0x00,0x00,// reserved
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// pre_defined
width>>8&0xFF,width&0xff,// width
height>>8&0xFF,height&0xff,// height
0x00,0x48,0x00,0x00,// horizresolution
0x00,0x48,0x00,0x00,// vertresolution
0x00,0x00,0x00,0x00,// reserved
0x00,0x01,// frame_count
0x12,0x64,0x61,0x69,0x6C,// dailymotion/hls.js
0x79,0x6D,0x6F,0x74,0x69,0x6F,0x6E,0x2F,0x68,0x6C,0x73,0x2E,0x6A,0x73,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// compressorname
0x00,0x18,// depth = 24
0x11,0x11]),// pre_defined = -1
avcc,MP4.box(MP4.types.btrt,new Uint8Array([0x00,0x1c,0x9c,0x80,// bufferSizeDB
0x00,0x2d,0xc6,0xc0,// maxBitrate
0x00,0x2d,0xc6,0xc0])),// avgBitrate
MP4.box(MP4.types.pasp,new Uint8Array([hSpacing>>24,// hSpacing
hSpacing>>16&0xFF,hSpacing>>8&0xFF,hSpacing&0xFF,vSpacing>>24,// vSpacing
vSpacing>>16&0xFF,vSpacing>>8&0xFF,vSpacing&0xFF])));
}},
{
key:'esds',
value:function esds(track){
var configlen=track.config.length;
return new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags

0x03,// descriptor_type
0x17+configlen,// length
0x00,0x01,// es_id
0x00,// stream_priority

0x04,// descriptor_type
0x0f+configlen,// length
0x40,// codec : mpeg4_audio
0x15,// stream_type
0x00,0x00,0x00,// buffer_size
0x00,0x00,0x00,0x00,// maxBitrate
0x00,0x00,0x00,0x00,// avgBitrate

0x05// descriptor_type
].concat([configlen]).concat(track.config).concat([0x06,0x01,0x02]));// GASpecificConfig)); // length + audio config descriptor
}},
{
key:'mp4a',
value:function mp4a(track){
var samplerate=track.samplerate;
return MP4.box(MP4.types.mp4a,new Uint8Array([0x00,0x00,0x00,// reserved
0x00,0x00,0x00,// reserved
0x00,0x01,// data_reference_index
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// reserved
0x00,track.channelCount,// channelcount
0x00,0x10,// sampleSize:16bits
0x00,0x00,0x00,0x00,// reserved2
samplerate>>8&0xFF,samplerate&0xff,//
0x00,0x00]),MP4.box(MP4.types.esds,MP4.esds(track)));
}},
{
key:'mp3',
value:function mp3(track){
var samplerate=track.samplerate;
return MP4.box(MP4.types['.mp3'],new Uint8Array([0x00,0x00,0x00,// reserved
0x00,0x00,0x00,// reserved
0x00,0x01,// data_reference_index
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// reserved
0x00,track.channelCount,// channelcount
0x00,0x10,// sampleSize:16bits
0x00,0x00,0x00,0x00,// reserved2
samplerate>>8&0xFF,samplerate&0xff,//
0x00,0x00]));
}},
{
key:'stsd',
value:function stsd(track){
if(track.type==='audio'){
if(!track.isAAC&&track.codec==='mp3'){
return MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(track));
}

return MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(track));
}else{
return MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(track));
}
}},
{
key:'tkhd',
value:function tkhd(track){
var id=track.id,
duration=track.duration*track.timescale,
width=track.width,
height=track.height,
upperWordDuration=Math.floor(duration/(UINT32_MAX+1)),
lowerWordDuration=Math.floor(duration%(UINT32_MAX+1));
return MP4.box(MP4.types.tkhd,new Uint8Array([0x01,// version 1
0x00,0x00,0x07,// flags
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,// creation_time
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,// modification_time
id>>24&0xFF,id>>16&0xFF,id>>8&0xFF,id&0xFF,// track_ID
0x00,0x00,0x00,0x00,// reserved
upperWordDuration>>24,upperWordDuration>>16&0xFF,upperWordDuration>>8&0xFF,upperWordDuration&0xFF,lowerWordDuration>>24,lowerWordDuration>>16&0xFF,lowerWordDuration>>8&0xFF,lowerWordDuration&0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// reserved
0x00,0x00,// layer
0x00,0x00,// alternate_group
0x00,0x00,// non-audio track volume
0x00,0x00,// reserved
0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,// transformation: unity matrix
width>>8&0xFF,width&0xFF,0x00,0x00,// width
height>>8&0xFF,height&0xFF,0x00,0x00// height
]));
}},
{
key:'traf',
value:function traf(track,baseMediaDecodeTime){
var sampleDependencyTable=MP4.sdtp(track),
id=track.id,
upperWordBaseMediaDecodeTime=Math.floor(baseMediaDecodeTime/(UINT32_MAX+1)),
lowerWordBaseMediaDecodeTime=Math.floor(baseMediaDecodeTime%(UINT32_MAX+1));
return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
id>>24,id>>16&0XFF,id>>8&0XFF,id&0xFF])// track_ID
),MP4.box(MP4.types.tfdt,new Uint8Array([0x01,// version 1
0x00,0x00,0x00,// flags
upperWordBaseMediaDecodeTime>>24,upperWordBaseMediaDecodeTime>>16&0XFF,upperWordBaseMediaDecodeTime>>8&0XFF,upperWordBaseMediaDecodeTime&0xFF,lowerWordBaseMediaDecodeTime>>24,lowerWordBaseMediaDecodeTime>>16&0XFF,lowerWordBaseMediaDecodeTime>>8&0XFF,lowerWordBaseMediaDecodeTime&0xFF])),MP4.trun(track,sampleDependencyTable.length+16+// tfhd
20+// tfdt
8+// traf header
16+// mfhd
8+// moof header
8),// mdat header
sampleDependencyTable);
}

/**
     * Generate a track box.
     * @param track {object} a track definition
     * @return {Uint8Array} the track box
     */},

{
key:'trak',
value:function trak(track){
track.duration=track.duration||0xffffffff;
return MP4.box(MP4.types.trak,MP4.tkhd(track),MP4.mdia(track));
}},
{
key:'trex',
value:function trex(track){
var id=track.id;
return MP4.box(MP4.types.trex,new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
id>>24,id>>16&0XFF,id>>8&0XFF,id&0xFF,// track_ID
0x00,0x00,0x00,0x01,// default_sample_description_index
0x00,0x00,0x00,0x00,// default_sample_duration
0x00,0x00,0x00,0x00,// default_sample_size
0x00,0x01,0x00,0x01// default_sample_flags
]));
}},
{
key:'trun',
value:function trun(track,offset){
var samples=track.samples||[],
len=samples.length,
arraylen=12+16*len,
array=new Uint8Array(arraylen),
i=void 0,
sample=void 0,
duration=void 0,
size=void 0,
flags=void 0,
cts=void 0;
offset+=8+arraylen;
array.set([0x00,// version 0
0x00,0x0f,0x01,// flags
len>>>24&0xFF,len>>>16&0xFF,len>>>8&0xFF,len&0xFF,// sample_count
offset>>>24&0xFF,offset>>>16&0xFF,offset>>>8&0xFF,offset&0xFF// data_offset
],0);
for(i=0;i<len;i++){
sample=samples[i];
duration=sample.duration;
size=sample.size;
flags=sample.flags;
cts=sample.cts;
array.set([duration>>>24&0xFF,duration>>>16&0xFF,duration>>>8&0xFF,duration&0xFF,// sample_duration
size>>>24&0xFF,size>>>16&0xFF,size>>>8&0xFF,size&0xFF,// sample_size
flags.isLeading<<2|flags.dependsOn,flags.isDependedOn<<6|flags.hasRedundancy<<4|flags.paddingValue<<1|flags.isNonSync,flags.degradPrio&0xF0<<8,flags.degradPrio&0x0F,// sample_flags
cts>>>24&0xFF,cts>>>16&0xFF,cts>>>8&0xFF,cts&0xFF// sample_composition_time_offset
],12+16*i);
}
return MP4.box(MP4.types.trun,array);
}},
{
key:'initSegment',
value:function initSegment(tracks){
if(!MP4.types){
MP4.init();
}

var movie=MP4.moov(tracks),
result=void 0;
result=new Uint8Array(MP4.FTYP.byteLength+movie.byteLength);
result.set(MP4.FTYP);
result.set(movie,MP4.FTYP.byteLength);
return result;
}}]);


return MP4;
}();

exports.default=MP4;
module.exports=exports['default'];

/***/},
/* 53 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * passthrough remuxer
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */


var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var PassThroughRemuxer=function(){
function PassThroughRemuxer(observer){
_classCallCheck(this,PassThroughRemuxer);

this.observer=observer;
}

_createClass(PassThroughRemuxer,[{
key:'destroy',
value:function destroy(){}},
{
key:'resetTimeStamp',
value:function resetTimeStamp(){}},
{
key:'resetInitSegment',
value:function resetInitSegment(){}},
{
key:'remux',
value:function remux(audioTrack,videoTrack,id3Track,textTrack,timeOffset,contiguous,accurateTimeOffset,rawData){
var observer=this.observer;
var streamType='';
if(audioTrack){
streamType+='audio';
}

if(videoTrack){
streamType+='video';
}

observer.trigger(_events2.default.FRAG_PARSING_DATA,{
data1:rawData,
startPTS:timeOffset,
startDTS:timeOffset,
type:streamType,
hasAudio:!!audioTrack,
hasVideo:!!videoTrack,
nb:1,
dropped:0});

// notify end of parsing
observer.trigger(_events2.default.FRAG_PARSED);
}}]);


return PassThroughRemuxer;
}();

exports.default=PassThroughRemuxer;
module.exports=exports['default'];

/***/},
/* 54 */
/***/function(module,exports,__webpack_require__){

"use strict";


var has=Object.prototype.hasOwnProperty,
prefix='~';

/**
 * Constructor to create a storage for our `EE` objects.
 * An `Events` instance is a plain object whose properties are event names.
 *
 * @constructor
 * @private
 */
function Events(){}

//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
if(Object.create){
Events.prototype=Object.create(null);

//
// This hack is needed because the `__proto__` property is still inherited in
// some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.
//
if(!new Events().__proto__)prefix=false;
}

/**
 * Representation of a single event listener.
 *
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
 * @constructor
 * @private
 */
function EE(fn,context,once){
this.fn=fn;
this.context=context;
this.once=once||false;
}

/**
 * Add a listener for a given event.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} once Specify if the listener is a one-time listener.
 * @returns {EventEmitter}
 * @private
 */
function addListener(emitter,event,fn,context,once){
if(typeof fn!=='function'){
throw new TypeError('The listener must be a function');
}

var listener=new EE(fn,context||emitter,once),
evt=prefix?prefix+event:event;

if(!emitter._events[evt])emitter._events[evt]=listener,emitter._eventsCount++;else
if(!emitter._events[evt].fn)emitter._events[evt].push(listener);else
emitter._events[evt]=[emitter._events[evt],listener];

return emitter;
}

/**
 * Clear event by name.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} evt The Event name.
 * @private
 */
function clearEvent(emitter,evt){
if(--emitter._eventsCount===0)emitter._events=new Events();else
delete emitter._events[evt];
}

/**
 * Minimal `EventEmitter` interface that is molded against the Node.js
 * `EventEmitter` interface.
 *
 * @constructor
 * @public
 */
function EventEmitter(){
this._events=new Events();
this._eventsCount=0;
}

/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @public
 */
EventEmitter.prototype.eventNames=function eventNames(){
var names=[],
events,
name;

if(this._eventsCount===0)return names;

for(name in events=this._events){
if(has.call(events,name))names.push(prefix?name.slice(1):name);
}

if(Object.getOwnPropertySymbols){
return names.concat(Object.getOwnPropertySymbols(events));
}

return names;
};

/**
 * Return the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Array} The registered listeners.
 * @public
 */
EventEmitter.prototype.listeners=function listeners(event){
var evt=prefix?prefix+event:event,
handlers=this._events[evt];

if(!handlers)return[];
if(handlers.fn)return[handlers.fn];

for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++){
ee[i]=handlers[i].fn;
}

return ee;
};

/**
 * Return the number of listeners listening to a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Number} The number of listeners.
 * @public
 */
EventEmitter.prototype.listenerCount=function listenerCount(event){
var evt=prefix?prefix+event:event,
listeners=this._events[evt];

if(!listeners)return 0;
if(listeners.fn)return 1;
return listeners.length;
};

/**
 * Calls each of the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Boolean} `true` if the event had listeners, else `false`.
 * @public
 */
EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){
var evt=prefix?prefix+event:event;

if(!this._events[evt])return false;

var listeners=this._events[evt],
len=arguments.length,
args,
i;

if(listeners.fn){
if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);

switch(len){
case 1:return listeners.fn.call(listeners.context),true;
case 2:return listeners.fn.call(listeners.context,a1),true;
case 3:return listeners.fn.call(listeners.context,a1,a2),true;
case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;
case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;
case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true;}


for(i=1,args=new Array(len-1);i<len;i++){
args[i-1]=arguments[i];
}

listeners.fn.apply(listeners.context,args);
}else{
var length=listeners.length,
j;

for(i=0;i<length;i++){
if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);

switch(len){
case 1:listeners[i].fn.call(listeners[i].context);break;
case 2:listeners[i].fn.call(listeners[i].context,a1);break;
case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;
case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;
default:
if(!args)for(j=1,args=new Array(len-1);j<len;j++){
args[j-1]=arguments[j];
}

listeners[i].fn.apply(listeners[i].context,args);}

}
}

return true;
};

/**
 * Add a listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.on=function on(event,fn,context){
return addListener(this,event,fn,context,false);
};

/**
 * Add a one-time listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.once=function once(event,fn,context){
return addListener(this,event,fn,context,true);
};

/**
 * Remove the listeners of a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn Only remove the listeners that match this function.
 * @param {*} context Only remove the listeners that have this context.
 * @param {Boolean} once Only remove one-time listeners.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){
var evt=prefix?prefix+event:event;

if(!this._events[evt])return this;
if(!fn){
clearEvent(this,evt);
return this;
}

var listeners=this._events[evt];

if(listeners.fn){
if(
listeners.fn===fn&&(
!once||listeners.once)&&(
!context||listeners.context===context))
{
clearEvent(this,evt);
}
}else{
for(var i=0,events=[],length=listeners.length;i<length;i++){
if(
listeners[i].fn!==fn||
once&&!listeners[i].once||
context&&listeners[i].context!==context)
{
events.push(listeners[i]);
}
}

//
// Reset the array, or remove it completely if we have no more listeners.
//
if(events.length)this._events[evt]=events.length===1?events[0]:events;else
clearEvent(this,evt);
}

return this;
};

/**
 * Remove all listeners, or those of the specified event.
 *
 * @param {(String|Symbol)} [event] The event name.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){
var evt;

if(event){
evt=prefix?prefix+event:event;
if(this._events[evt])clearEvent(this,evt);
}else{
this._events=new Events();
this._eventsCount=0;
}

return this;
};

//
// Alias methods names because people roll like that.
//
EventEmitter.prototype.off=EventEmitter.prototype.removeListener;
EventEmitter.prototype.addListener=EventEmitter.prototype.on;

//
// Expose the prefix.
//
EventEmitter.prefixed=prefix;

//
// Allow `EventEmitter` to be imported as module namespace.
//
EventEmitter.EventEmitter=EventEmitter;

//
// Expose the module.
//
if(true){
module.exports=EventEmitter;
}


/***/},
/* 55 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _demuxerInline=__webpack_require__(21);

var _demuxerInline2=_interopRequireDefault(_demuxerInline);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _logger=__webpack_require__(0);

var _events3=__webpack_require__(20);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

/* demuxer web worker.
 *  - listen to worker message, and trigger DemuxerInline upon reception of Fragments.
 *  - provides MP4 Boxes back to main thread using [transferable objects](https://developers.google.com/web/updates/2011/12/Transferable-Objects-Lightning-Fast) in order to minimize message passing overhead.
 */

var DemuxerWorker=function DemuxerWorker(self){
// observer setup
var observer=new _events3.EventEmitter();
observer.trigger=function trigger(event){
for(var _len=arguments.length,data=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){
data[_key-1]=arguments[_key];
}

observer.emit.apply(observer,[event,event].concat(data));
};

observer.off=function off(event){
for(var _len2=arguments.length,data=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){
data[_key2-1]=arguments[_key2];
}

observer.removeListener.apply(observer,[event].concat(data));
};

var forwardMessage=function forwardMessage(ev,data){
self.postMessage({event:ev,data:data});
};

self.addEventListener('message',function(ev){
var data=ev.data;
// console.log('demuxer cmd:' + data.cmd);
switch(data.cmd){
case'init':
var config=JSON.parse(data.config);
self.demuxer=new _demuxerInline2.default(observer,data.typeSupported,config,data.vendor);

(0,_logger.enableLogs)(config.debug);

// signal end of worker init
forwardMessage('init',null);
break;
case'demux':
self.demuxer.push(data.data,data.decryptdata,data.initSegment,data.audioCodec,data.videoCodec,data.timeOffset,data.discontinuity,data.trackSwitch,data.contiguous,data.duration,data.accurateTimeOffset,data.defaultInitPTS);
break;
default:
break;}

});

// forward events to main thread
observer.on(_events2.default.FRAG_DECRYPTED,forwardMessage);
observer.on(_events2.default.FRAG_PARSING_INIT_SEGMENT,forwardMessage);
observer.on(_events2.default.FRAG_PARSED,forwardMessage);
observer.on(_events2.default.ERROR,forwardMessage);
observer.on(_events2.default.FRAG_PARSING_METADATA,forwardMessage);
observer.on(_events2.default.FRAG_PARSING_USERDATA,forwardMessage);
observer.on(_events2.default.INIT_PTS_FOUND,forwardMessage);

// special case for FRAG_PARSING_DATA: pass data1/data2 as transferable object (no copy)
observer.on(_events2.default.FRAG_PARSING_DATA,function(ev,data){
var transferable=[];
var message={event:ev,data:data};
if(data.data1){
message.data1=data.data1.buffer;
transferable.push(data.data1.buffer);
delete data.data1;
}
if(data.data2){
message.data2=data.data2.buffer;
transferable.push(data.data2.buffer);
delete data.data2;
}
self.postMessage(message,transferable);
});
};

exports.default=DemuxerWorker;
module.exports=exports['default'];

/***/},
/* 56 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _bufferHelper=__webpack_require__(4);

var _errors=__webpack_require__(2);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var stallDebounceInterval=1000;
var jumpThreshold=0.5;// tolerance needed as some browsers stalls playback before reaching buffered range end

var GapController=function(){
function GapController(config,media,fragmentTracker,hls){
_classCallCheck(this,GapController);

this.config=config;
this.media=media;
this.fragmentTracker=fragmentTracker;
this.hls=hls;
this.stallReported=false;
}

/**
   * Checks if the playhead is stuck within a gap, and if so, attempts to free it.
   * A gap is an unbuffered range between two buffered ranges (or the start and the first buffered range).
   * @param lastCurrentTime
   * @param buffered
   */


_createClass(GapController,[{
key:'poll',
value:function poll(lastCurrentTime,buffered){
var config=this.config,
media=this.media;

var currentTime=media.currentTime;
var tnow=window.performance.now();

if(currentTime!==lastCurrentTime){
// The playhead is now moving, but was previously stalled
if(this.stallReported){
_logger.logger.warn('playback not stuck anymore @'+currentTime+', after '+Math.round(tnow-this.stalled)+'ms');
this.stallReported=false;
}
this.stalled=null;
this.nudgeRetry=0;
return;
}

if(media.ended||!media.buffered.length||media.readyState>2){
return;
}

if(media.seeking&&_bufferHelper.BufferHelper.isBuffered(media,currentTime)){
return;
}

// The playhead isn't moving but it should be
// Allow some slack time to for small stalls to resolve themselves
var stalledDuration=tnow-this.stalled;
var bufferInfo=_bufferHelper.BufferHelper.bufferInfo(media,currentTime,config.maxBufferHole);
if(!this.stalled){
this.stalled=tnow;
return;
}else if(stalledDuration>=stallDebounceInterval){
// Report stalling after trying to fix
this._reportStall(bufferInfo.len);
}

this._tryFixBufferStall(bufferInfo,stalledDuration);
}

/**
     * Detects and attempts to fix known buffer stalling issues.
     * @param bufferInfo - The properties of the current buffer.
     * @param stalledDuration - The amount of time Hls.js has been stalling for.
     * @private
     */},

{
key:'_tryFixBufferStall',
value:function _tryFixBufferStall(bufferInfo,stalledDuration){
var config=this.config,
fragmentTracker=this.fragmentTracker,
media=this.media;

var currentTime=media.currentTime;

var partial=fragmentTracker.getPartialFragment(currentTime);
if(partial){
// Try to skip over the buffer hole caused by a partial fragment
// This method isn't limited by the size of the gap between buffered ranges
this._trySkipBufferHole(partial);
}

if(bufferInfo.len>jumpThreshold&&stalledDuration>config.highBufferWatchdogPeriod*1000){
// Try to nudge currentTime over a buffer hole if we've been stalling for the configured amount of seconds
// We only try to jump the hole if it's under the configured size
// Reset stalled so to rearm watchdog timer
this.stalled=null;
this._tryNudgeBuffer();
}
}

/**
     * Triggers a BUFFER_STALLED_ERROR event, but only once per stall period.
     * @param bufferLen - The playhead distance from the end of the current buffer segment.
     * @private
     */},

{
key:'_reportStall',
value:function _reportStall(bufferLen){
var hls=this.hls,
media=this.media,
stallReported=this.stallReported;

if(!stallReported){
// Report stalled error once
this.stallReported=true;
_logger.logger.warn('Playback stalling at @'+media.currentTime+' due to low buffer');
hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.MEDIA_ERROR,
details:_errors.ErrorDetails.BUFFER_STALLED_ERROR,
fatal:false,
buffer:bufferLen});

}
}

/**
     * Attempts to fix buffer stalls by jumping over known gaps caused by partial fragments
     * @param partial - The partial fragment found at the current time (where playback is stalling).
     * @private
     */},

{
key:'_trySkipBufferHole',
value:function _trySkipBufferHole(partial){
var hls=this.hls,
media=this.media;

var currentTime=media.currentTime;
var lastEndTime=0;
// Check if currentTime is between unbuffered regions of partial fragments
for(var i=0;i<media.buffered.length;i++){
var startTime=media.buffered.start(i);
if(currentTime>=lastEndTime&&currentTime<startTime){
media.currentTime=Math.max(startTime,media.currentTime+0.1);
_logger.logger.warn('skipping hole, adjusting currentTime from '+currentTime+' to '+media.currentTime);
this.stalled=null;
hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.MEDIA_ERROR,
details:_errors.ErrorDetails.BUFFER_SEEK_OVER_HOLE,
fatal:false,
reason:'fragment loaded with buffer holes, seeking from '+currentTime+' to '+media.currentTime,
frag:partial});

return;
}
lastEndTime=media.buffered.end(i);
}
}

/**
     * Attempts to fix buffer stalls by advancing the mediaElement's current time by a small amount.
     * @private
     */},

{
key:'_tryNudgeBuffer',
value:function _tryNudgeBuffer(){
var config=this.config,
hls=this.hls,
media=this.media;

var currentTime=media.currentTime;
var nudgeRetry=(this.nudgeRetry||0)+1;
this.nudgeRetry=nudgeRetry;

if(nudgeRetry<config.nudgeMaxRetry){
var targetTime=currentTime+nudgeRetry*config.nudgeOffset;
_logger.logger.log('adjust currentTime from '+currentTime+' to '+targetTime);
// playback stalled in buffered area ... let's nudge currentTime to try to overcome this
media.currentTime=targetTime;
hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.MEDIA_ERROR,
details:_errors.ErrorDetails.BUFFER_NUDGE_ON_STALL,
fatal:false});

}else{
_logger.logger.error('still stuck in high buffer @'+currentTime+' after '+config.nudgeMaxRetry+', raise fatal error');
hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.MEDIA_ERROR,
details:_errors.ErrorDetails.BUFFER_STALLED_ERROR,
fatal:true});

}
}}]);


return GapController;
}();

exports.default=GapController;
module.exports=exports['default'];

/***/},
/* 57 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};

var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _logger=__webpack_require__(0);

var _errors=__webpack_require__(2);

var _codecs=__webpack_require__(18);

var _levelHelper=__webpack_require__(7);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Level Controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var _window=window,
performance=_window.performance;

var chromeOrFirefox=void 0;

var LevelController=function(_EventHandler){
_inherits(LevelController,_EventHandler);

function LevelController(hls){
_classCallCheck(this,LevelController);

var _this=_possibleConstructorReturn(this,(LevelController.__proto__||Object.getPrototypeOf(LevelController)).call(this,hls,_events2.default.MANIFEST_LOADED,_events2.default.LEVEL_LOADED,_events2.default.AUDIO_TRACK_SWITCHED,_events2.default.FRAG_LOADED,_events2.default.ERROR));

_this.canload=false;
_this.currentLevelIndex=null;
_this.manualLevelIndex=-1;
_this.timer=null;

chromeOrFirefox=/chrome|firefox/.test(navigator.userAgent.toLowerCase());
return _this;
}

_createClass(LevelController,[{
key:'onHandlerDestroying',
value:function onHandlerDestroying(){
this.clearTimer();
this.manualLevelIndex=-1;
}},
{
key:'clearTimer',
value:function clearTimer(){
if(this.timer!==null){
clearTimeout(this.timer);
this.timer=null;
}
}},
{
key:'startLoad',
value:function startLoad(){
var levels=this._levels;

this.canload=true;
this.levelRetryCount=0;

// clean up live level details to force reload them, and reset load errors
if(levels){
levels.forEach(function(level){
level.loadError=0;
var levelDetails=level.details;
if(levelDetails&&levelDetails.live){
level.details=undefined;
}
});
}
// speed up live playlist refresh if timer exists
if(this.timer!==null){
this.loadLevel();
}
}},
{
key:'stopLoad',
value:function stopLoad(){
this.canload=false;
}},
{
key:'onManifestLoaded',
value:function onManifestLoaded(data){
var levels=[];
var audioTracks=[];
var bitrateStart=void 0;
var levelSet={};
var levelFromSet=null;
var videoCodecFound=false;
var audioCodecFound=false;

// regroup redundant levels together
data.levels.forEach(function(level){
var attributes=level.attrs;
level.loadError=0;
level.fragmentError=false;

videoCodecFound=videoCodecFound||!!level.videoCodec;
audioCodecFound=audioCodecFound||!!level.audioCodec;

// erase audio codec info if browser does not support mp4a.40.34.
// demuxer will autodetect codec and fallback to mpeg/audio
if(chromeOrFirefox&&level.audioCodec&&level.audioCodec.indexOf('mp4a.40.34')!==-1){
level.audioCodec=undefined;
}

levelFromSet=levelSet[level.bitrate];// FIXME: we would also have to match the resolution here

if(!levelFromSet){
level.url=[level.url];
level.urlId=0;
levelSet[level.bitrate]=level;
levels.push(level);
}else{
levelFromSet.url.push(level.url);
}

if(attributes){
if(attributes.AUDIO){
audioCodecFound=true;
(0,_levelHelper.addGroupId)(levelFromSet||level,'audio',attributes.AUDIO);
}
if(attributes.SUBTITLES){
(0,_levelHelper.addGroupId)(levelFromSet||level,'text',attributes.SUBTITLES);
}
}
});

// remove audio-only level if we also have levels with audio+video codecs signalled
if(videoCodecFound&&audioCodecFound){
levels=levels.filter(function(_ref){
var videoCodec=_ref.videoCodec;
return!!videoCodec;
});
}

// only keep levels with supported audio/video codecs
levels=levels.filter(function(_ref2){
var audioCodec=_ref2.audioCodec,
videoCodec=_ref2.videoCodec;

return(!audioCodec||(0,_codecs.isCodecSupportedInMp4)(audioCodec,'audio'))&&(!videoCodec||(0,_codecs.isCodecSupportedInMp4)(videoCodec,'video'));
});

if(data.audioTracks){
audioTracks=data.audioTracks.filter(function(track){
return!track.audioCodec||(0,_codecs.isCodecSupportedInMp4)(track.audioCodec,'audio');
});
// Reassign id's after filtering since they're used as array indices
audioTracks.forEach(function(track,index){
track.id=index;
});
}

if(levels.length>0){
// start bitrate is the first bitrate of the manifest
bitrateStart=levels[0].bitrate;
// sort level on bitrate
levels.sort(function(a,b){
return a.bitrate-b.bitrate;
});
this._levels=levels;
// find index of first level in sorted levels
for(var i=0;i<levels.length;i++){
if(levels[i].bitrate===bitrateStart){
this._firstLevel=i;
_logger.logger.log('manifest loaded,'+levels.length+' level(s) found, first bitrate:'+bitrateStart);
break;
}
}

// Audio is only alternate if manifest include a URI along with the audio group tag
this.hls.trigger(_events2.default.MANIFEST_PARSED,{
levels:levels,
audioTracks:audioTracks,
firstLevel:this._firstLevel,
stats:data.stats,
audio:audioCodecFound,
video:videoCodecFound,
altAudio:audioTracks.some(function(t){
return!!t.url;
})});

}else{
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.MEDIA_ERROR,
details:_errors.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
fatal:true,
url:this.hls.url,
reason:'no level with compatible codecs found in manifest'});

}
}},
{
key:'setLevelInternal',
value:function setLevelInternal(newLevel){
var levels=this._levels;
var hls=this.hls;
// check if level idx is valid
if(newLevel>=0&&newLevel<levels.length){
// stopping live reloading timer if any
this.clearTimer();
if(this.currentLevelIndex!==newLevel){
_logger.logger.log('switching to level '+newLevel);
this.currentLevelIndex=newLevel;
var levelProperties=levels[newLevel];
levelProperties.level=newLevel;
hls.trigger(_events2.default.LEVEL_SWITCHING,levelProperties);
}
var level=levels[newLevel];
var levelDetails=level.details;

// check if we need to load playlist for this level
if(!levelDetails||levelDetails.live){
// level not retrieved yet, or live playlist we need to (re)load it
var urlId=level.urlId;
hls.trigger(_events2.default.LEVEL_LOADING,{url:level.url[urlId],level:newLevel,id:urlId});
}
}else{
// invalid level id given, trigger error
hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.OTHER_ERROR,
details:_errors.ErrorDetails.LEVEL_SWITCH_ERROR,
level:newLevel,
fatal:false,
reason:'invalid level idx'});

}
}},
{
key:'onError',
value:function onError(data){
if(data.fatal){
if(data.type===_errors.ErrorTypes.NETWORK_ERROR){
this.clearTimer();
}

return;
}

var levelError=false,
fragmentError=false;
var levelIndex=void 0;

// try to recover not fatal errors
switch(data.details){
case _errors.ErrorDetails.FRAG_LOAD_ERROR:
case _errors.ErrorDetails.FRAG_LOAD_TIMEOUT:
case _errors.ErrorDetails.KEY_LOAD_ERROR:
case _errors.ErrorDetails.KEY_LOAD_TIMEOUT:
levelIndex=data.frag.level;
fragmentError=true;
break;
case _errors.ErrorDetails.LEVEL_LOAD_ERROR:
case _errors.ErrorDetails.LEVEL_LOAD_TIMEOUT:
levelIndex=data.context.level;
levelError=true;
break;
case _errors.ErrorDetails.REMUX_ALLOC_ERROR:
levelIndex=data.level;
levelError=true;
break;}


if(levelIndex!==undefined){
this.recoverLevel(data,levelIndex,levelError,fragmentError);
}
}

/**
     * Switch to a redundant stream if any available.
     * If redundant stream is not available, emergency switch down if ABR mode is enabled.
     *
     * @param {Object} errorEvent
     * @param {Number} levelIndex current level index
     * @param {Boolean} levelError
     * @param {Boolean} fragmentError
     */
// FIXME Find a better abstraction where fragment/level retry management is well decoupled
},
{
key:'recoverLevel',
value:function recoverLevel(errorEvent,levelIndex,levelError,fragmentError){
var _this2=this;

var config=this.hls.config;
var errorDetails=errorEvent.details;

var level=this._levels[levelIndex];
var redundantLevels=void 0,
delay=void 0,
nextLevel=void 0;

level.loadError++;
level.fragmentError=fragmentError;

if(levelError){
if(this.levelRetryCount+1<=config.levelLoadingMaxRetry){
// exponential backoff capped to max retry timeout
delay=Math.min(Math.pow(2,this.levelRetryCount)*config.levelLoadingRetryDelay,config.levelLoadingMaxRetryTimeout);
// Schedule level reload
this.timer=setTimeout(function(){
return _this2.loadLevel();
},delay);
// boolean used to inform stream controller not to switch back to IDLE on non fatal error
errorEvent.levelRetry=true;
this.levelRetryCount++;
_logger.logger.warn('level controller, '+errorDetails+', retry in '+delay+' ms, current retry count is '+this.levelRetryCount);
}else{
_logger.logger.error('level controller, cannot recover from '+errorDetails+' error');
this.currentLevelIndex=null;
// stopping live reloading timer if any
this.clearTimer();
// switch error to fatal
errorEvent.fatal=true;
return;
}
}

// Try any redundant streams if available for both errors: level and fragment
// If level.loadError reaches redundantLevels it means that we tried them all, no hope  => let's switch down
if(levelError||fragmentError){
redundantLevels=level.url.length;

if(redundantLevels>1&&level.loadError<redundantLevels){
level.urlId=(level.urlId+1)%redundantLevels;
level.details=undefined;

_logger.logger.warn('level controller, '+errorDetails+' for level '+levelIndex+': switching to redundant URL-id '+level.urlId);

// console.log('Current audio track group ID:', this.hls.audioTracks[this.hls.audioTrack].groupId);
// console.log('New video quality level audio group id:', level.attrs.AUDIO);
}else{
// Search for available level
if(this.manualLevelIndex===-1){
// When lowest level has been reached, let's start hunt from the top
nextLevel=levelIndex===0?this._levels.length-1:levelIndex-1;
_logger.logger.warn('level controller, '+errorDetails+': switch to '+nextLevel);
this.hls.nextAutoLevel=this.currentLevelIndex=nextLevel;
}else if(fragmentError){
// Allow fragment retry as long as configuration allows.
// reset this._level so that another call to set level() will trigger again a frag load
_logger.logger.warn('level controller, '+errorDetails+': reload a fragment');
this.currentLevelIndex=null;
}
}
}
}

// reset errors on the successful load of a fragment
},
{
key:'onFragLoaded',
value:function onFragLoaded(_ref3){
var frag=_ref3.frag;

if(frag!==undefined&&frag.type==='main'){
var level=this._levels[frag.level];
if(level!==undefined){
level.fragmentError=false;
level.loadError=0;
this.levelRetryCount=0;
}
}
}},
{
key:'onLevelLoaded',
value:function onLevelLoaded(data){
var _this3=this;

var level=data.level,
details=data.details;
// only process level loaded events matching with expected level

if(level!==this.currentLevelIndex){
return;
}

var curLevel=this._levels[level];
// reset level load error counter on successful level loaded only if there is no issues with fragments
if(!curLevel.fragmentError){
curLevel.loadError=0;
this.levelRetryCount=0;
}
// if current playlist is a live playlist, arm a timer to reload it
if(details.live){
var reloadInterval=(0,_levelHelper.computeReloadInterval)(curLevel.details,details,data.stats.trequest);
_logger.logger.log('live playlist, reload in '+Math.round(reloadInterval)+' ms');
this.timer=setTimeout(function(){
return _this3.loadLevel();
},reloadInterval);
}else{
this.clearTimer();
}
}},
{
key:'onAudioTrackSwitched',
value:function onAudioTrackSwitched(data){
var audioGroupId=this.hls.audioTracks[data.id].groupId;

var currentLevel=this.hls.levels[this.currentLevelIndex];
if(!currentLevel){
return;
}

if(currentLevel.audioGroupIds){
var urlId=-1;

for(var i=0;i<currentLevel.audioGroupIds.length;i++){
if(currentLevel.audioGroupIds[i]===audioGroupId){
urlId=i;
break;
}
}

if(urlId!==currentLevel.urlId){
currentLevel.urlId=urlId;
this.startLoad();
}
}
}},
{
key:'loadLevel',
value:function loadLevel(){
_logger.logger.debug('call to loadLevel');

if(this.currentLevelIndex!==null&&this.canload){
var levelObject=this._levels[this.currentLevelIndex];

if((typeof levelObject==='undefined'?'undefined':_typeof(levelObject))==='object'&&levelObject.url.length>0){
var level=this.currentLevelIndex;
var id=levelObject.urlId;
var url=levelObject.url[id];

_logger.logger.log('Attempt loading level index '+level+' with URL-id '+id);

// console.log('Current audio track group ID:', this.hls.audioTracks[this.hls.audioTrack].groupId);
// console.log('New video quality level audio group id:', levelObject.attrs.AUDIO, level);

this.hls.trigger(_events2.default.LEVEL_LOADING,{url:url,level:level,id:id});
}
}
}},
{
key:'levels',
get:function get(){
return this._levels;
}},
{
key:'level',
get:function get(){
return this.currentLevelIndex;
},
set:function set(newLevel){
var levels=this._levels;
if(levels){
newLevel=Math.min(newLevel,levels.length-1);
if(this.currentLevelIndex!==newLevel||!levels[newLevel].details){
this.setLevelInternal(newLevel);
}
}
}},
{
key:'manualLevel',
get:function get(){
return this.manualLevelIndex;
},
set:function set(newLevel){
this.manualLevelIndex=newLevel;
if(this._startLevel===undefined){
this._startLevel=newLevel;
}

if(newLevel!==-1){
this.level=newLevel;
}
}},
{
key:'firstLevel',
get:function get(){
return this._firstLevel;
},
set:function set(newLevel){
this._firstLevel=newLevel;
}},
{
key:'startLevel',
get:function get(){
// hls.startLevel takes precedence over config.startLevel
// if none of these values are defined, fallback on this._firstLevel (first quality level appearing in variant manifest)
if(this._startLevel===undefined){
var configStartLevel=this.hls.config.startLevel;
if(configStartLevel!==undefined){
return configStartLevel;
}else{
return this._firstLevel;
}
}else{
return this._startLevel;
}
},
set:function set(newLevel){
this._startLevel=newLevel;
}},
{
key:'nextLoadLevel',
get:function get(){
if(this.manualLevelIndex!==-1){
return this.manualLevelIndex;
}else{
return this.hls.nextAutoLevel;
}
},
set:function set(nextLevel){
this.level=nextLevel;
if(this.manualLevelIndex===-1){
this.hls.nextAutoLevel=nextLevel;
}
}}]);


return LevelController;
}(_eventHandler2.default);

exports.default=LevelController;
module.exports=exports['default'];

/***/},
/* 58 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _id=__webpack_require__(10);

var _id2=_interopRequireDefault(_id);

var _texttrackUtils=__webpack_require__(29);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * id3 metadata track controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var ID3TrackController=function(_EventHandler){
_inherits(ID3TrackController,_EventHandler);

function ID3TrackController(hls){
_classCallCheck(this,ID3TrackController);

var _this=_possibleConstructorReturn(this,(ID3TrackController.__proto__||Object.getPrototypeOf(ID3TrackController)).call(this,hls,_events2.default.MEDIA_ATTACHED,_events2.default.MEDIA_DETACHING,_events2.default.FRAG_PARSING_METADATA));

_this.id3Track=undefined;
_this.media=undefined;
return _this;
}

_createClass(ID3TrackController,[{
key:'destroy',
value:function destroy(){
_eventHandler2.default.prototype.destroy.call(this);
}

// Add ID3 metatadata text track.
},
{
key:'onMediaAttached',
value:function onMediaAttached(data){
this.media=data.media;
if(!this.media){}
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
(0,_texttrackUtils.clearCurrentCues)(this.id3Track);
this.id3Track=undefined;
this.media=undefined;
}},
{
key:'getID3Track',
value:function getID3Track(textTracks){
for(var i=0;i<textTracks.length;i++){
var textTrack=textTracks[i];
if(textTrack.kind==='metadata'&&textTrack.label==='id3'){
// send 'addtrack' when reusing the textTrack for metadata,
// same as what we do for captions
(0,_texttrackUtils.sendAddTrackEvent)(textTrack,this.media);

return textTrack;
}
}
return this.media.addTextTrack('metadata','id3');
}},
{
key:'onFragParsingMetadata',
value:function onFragParsingMetadata(data){
var fragment=data.frag;
var samples=data.samples;

// create track dynamically
if(!this.id3Track){
this.id3Track=this.getID3Track(this.media.textTracks);
this.id3Track.mode='hidden';
}

// Attempt to recreate Safari functionality by creating
// WebKitDataCue objects when available and store the decoded
// ID3 data in the value property of the cue
var Cue=window.WebKitDataCue||window.VTTCue||window.TextTrackCue;

for(var i=0;i<samples.length;i++){
var frames=_id2.default.getID3Frames(samples[i].data);
if(frames){
var startTime=samples[i].pts;
var endTime=i<samples.length-1?samples[i+1].pts:fragment.endPTS;

// Give a slight bump to the endTime if it's equal to startTime to avoid a SyntaxError in IE
if(startTime===endTime){
endTime+=0.0001;
}

for(var j=0;j<frames.length;j++){
var frame=frames[j];
// Safari doesn't put the timestamp frame in the TextTrack
if(!_id2.default.isTimeStampFrame(frame)){
var cue=new Cue(startTime,endTime,'');
cue.value=frame;
this.id3Track.addCue(cue);
}
}
}
}
}}]);


return ID3TrackController;
}(_eventHandler2.default);

exports.default=ID3TrackController;
module.exports=exports['default'];

/***/},
/* 59 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.isSupported=isSupported;

var _mediasourceHelper=__webpack_require__(13);

function isSupported(){
var mediaSource=(0,_mediasourceHelper.getMediaSource)();
var sourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer;
var isTypeSupported=mediaSource&&typeof mediaSource.isTypeSupported==='function'&&mediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');

// if SourceBuffer is exposed ensure its API is valid
// safari and old version of Chrome doe not expose SourceBuffer globally so checking SourceBuffer.prototype is impossible
var sourceBufferValidAPI=!sourceBuffer||sourceBuffer.prototype&&typeof sourceBuffer.prototype.appendBuffer==='function'&&typeof sourceBuffer.prototype.remove==='function';
return!!isTypeSupported&&!!sourceBufferValidAPI;
}

/***/},
/* 60 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.hlsDefaultConfig=undefined;

var _abrController=__webpack_require__(61);

var _abrController2=_interopRequireDefault(_abrController);

var _bufferController=__webpack_require__(64);

var _bufferController2=_interopRequireDefault(_bufferController);

var _capLevelController=__webpack_require__(65);

var _capLevelController2=_interopRequireDefault(_capLevelController);

var _fpsController=__webpack_require__(66);

var _fpsController2=_interopRequireDefault(_fpsController);

var _xhrLoader=__webpack_require__(67);

var _xhrLoader2=_interopRequireDefault(_xhrLoader);

var _audioTrackController=__webpack_require__(68);

var _audioTrackController2=_interopRequireDefault(_audioTrackController);

var _audioStreamController=__webpack_require__(69);

var _audioStreamController2=_interopRequireDefault(_audioStreamController);

var _cues=__webpack_require__(70);

var Cues=_interopRequireWildcard(_cues);

var _timelineController=__webpack_require__(72);

var _timelineController2=_interopRequireDefault(_timelineController);

var _subtitleTrackController=__webpack_require__(76);

var _subtitleTrackController2=_interopRequireDefault(_subtitleTrackController);

var _subtitleStreamController=__webpack_require__(77);

var _emeController=__webpack_require__(78);

var _emeController2=_interopRequireDefault(_emeController);

var _mediakeysHelper=__webpack_require__(79);

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

// import FetchLoader from './utils/fetch-loader';

var hlsDefaultConfig=exports.hlsDefaultConfig={
autoStartLoad:true,// used by stream-controller
startPosition:-1,// used by stream-controller
defaultAudioCodec:undefined,// used by stream-controller
debug:false,// used by logger
capLevelOnFPSDrop:false,// used by fps-controller
capLevelToPlayerSize:false,// used by cap-level-controller
initialLiveManifestSize:1,// used by stream-controller
maxBufferLength:30,// used by stream-controller
maxBufferSize:60*1000*1000,// used by stream-controller
maxBufferHole:0.5,// used by stream-controller

lowBufferWatchdogPeriod:0.5,// used by stream-controller
highBufferWatchdogPeriod:3,// used by stream-controller
nudgeOffset:0.1,// used by stream-controller
nudgeMaxRetry:3,// used by stream-controller
maxFragLookUpTolerance:0.25,// used by stream-controller
liveSyncDurationCount:3,// used by stream-controller
liveMaxLatencyDurationCount:Infinity,// used by stream-controller
liveSyncDuration:undefined,// used by stream-controller
liveMaxLatencyDuration:undefined,// used by stream-controller
liveDurationInfinity:false,// used by buffer-controller
liveBackBufferLength:Infinity,// used by buffer-controller
maxMaxBufferLength:600,// used by stream-controller
enableWorker:true,// used by demuxer
enableSoftwareAES:true,// used by decrypter
manifestLoadingTimeOut:10000,// used by playlist-loader
manifestLoadingMaxRetry:1,// used by playlist-loader
manifestLoadingRetryDelay:1000,// used by playlist-loader
manifestLoadingMaxRetryTimeout:64000,// used by playlist-loader
startLevel:undefined,// used by level-controller
levelLoadingTimeOut:10000,// used by playlist-loader
levelLoadingMaxRetry:4,// used by playlist-loader
levelLoadingRetryDelay:1000,// used by playlist-loader
levelLoadingMaxRetryTimeout:64000,// used by playlist-loader
fragLoadingTimeOut:20000,// used by fragment-loader
fragLoadingMaxRetry:6,// used by fragment-loader
fragLoadingRetryDelay:1000,// used by fragment-loader
fragLoadingMaxRetryTimeout:64000,// used by fragment-loader
startFragPrefetch:false,// used by stream-controller
fpsDroppedMonitoringPeriod:5000,// used by fps-controller
fpsDroppedMonitoringThreshold:0.2,// used by fps-controller
appendErrorMaxRetry:3,// used by buffer-controller
loader:_xhrLoader2.default,
// loader: FetchLoader,
fLoader:undefined,// used by fragment-loader
pLoader:undefined,// used by playlist-loader
xhrSetup:undefined,// used by xhr-loader
licenseXhrSetup:undefined,// used by eme-controller
// fetchSetup: undefined,
abrController:_abrController2.default,
bufferController:_bufferController2.default,
capLevelController:_capLevelController2.default,
fpsController:_fpsController2.default,
stretchShortVideoTrack:false,// used by mp4-remuxer
maxAudioFramesDrift:1,// used by mp4-remuxer
forceKeyFrameOnDiscontinuity:true,// used by ts-demuxer
abrEwmaFastLive:3,// used by abr-controller
abrEwmaSlowLive:9,// used by abr-controller
abrEwmaFastVoD:3,// used by abr-controller
abrEwmaSlowVoD:9,// used by abr-controller
abrEwmaDefaultEstimate:5e5,// 500 kbps  // used by abr-controller
abrBandWidthFactor:0.95,// used by abr-controller
abrBandWidthUpFactor:0.7,// used by abr-controller
abrMaxWithRealBitrate:false,// used by abr-controller
maxStarvationDelay:4,// used by abr-controller
maxLoadingDelay:4,// used by abr-controller
minAutoBitrate:0,// used by hls
emeEnabled:false,// used by eme-controller
widevineLicenseUrl:undefined,// used by eme-controller
requestMediaKeySystemAccessFunc:_mediakeysHelper.requestMediaKeySystemAccess// used by eme-controller
};/**
    * HLS config
    */

hlsDefaultConfig.subtitleStreamController=_subtitleStreamController.SubtitleStreamController;
hlsDefaultConfig.subtitleTrackController=_subtitleTrackController2.default;
hlsDefaultConfig.timelineController=_timelineController2.default;
hlsDefaultConfig.cueHandler=Cues;// used by timeline-controller
hlsDefaultConfig.enableCEA708Captions=true;// used by timeline-controller
hlsDefaultConfig.enableWebVTT=true;// used by timeline-controller
hlsDefaultConfig.captionsTextTrack1Label='English';// used by timeline-controller
hlsDefaultConfig.captionsTextTrack1LanguageCode='en';// used by timeline-controller
hlsDefaultConfig.captionsTextTrack2Label='Spanish';// used by timeline-controller
hlsDefaultConfig.captionsTextTrack2LanguageCode='es';// used by timeline-controller


hlsDefaultConfig.audioStreamController=_audioStreamController2.default;
hlsDefaultConfig.audioTrackController=_audioTrackController2.default;

hlsDefaultConfig.emeController=_emeController2.default;

/***/},
/* 61 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _bufferHelper=__webpack_require__(4);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

var _ewmaBandwidthEstimator=__webpack_require__(62);

var _ewmaBandwidthEstimator2=_interopRequireDefault(_ewmaBandwidthEstimator);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * simple ABR Controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  - compute next level based on last fragment bw heuristics
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *  - implement an abandon rules triggered if we have less than 2 frag buffered and if computed bw shows that we risk buffer stalling
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */

var _window=window,
performance=_window.performance;

var AbrController=function(_EventHandler){
_inherits(AbrController,_EventHandler);

function AbrController(hls){
_classCallCheck(this,AbrController);

var _this=_possibleConstructorReturn(this,(AbrController.__proto__||Object.getPrototypeOf(AbrController)).call(this,hls,_events2.default.FRAG_LOADING,_events2.default.FRAG_LOADED,_events2.default.FRAG_BUFFERED,_events2.default.ERROR));

_this.lastLoadedFragLevel=0;
_this._nextAutoLevel=-1;
_this.hls=hls;
_this.timer=null;
_this._bwEstimator=null;
_this.onCheck=_this._abandonRulesCheck.bind(_this);
return _this;
}

_createClass(AbrController,[{
key:'destroy',
value:function destroy(){
this.clearTimer();
_eventHandler2.default.prototype.destroy.call(this);
}},
{
key:'onFragLoading',
value:function onFragLoading(data){
var frag=data.frag;
if(frag.type==='main'){
if(!this.timer){
this.fragCurrent=frag;
this.timer=setInterval(this.onCheck,100);
}

// lazy init of BwEstimator, rationale is that we use different params for Live/VoD
// so we need to wait for stream manifest / playlist type to instantiate it.
if(!this._bwEstimator){
var hls=this.hls;
var config=hls.config;
var level=frag.level;
var isLive=hls.levels[level].details.live;

var ewmaFast=void 0,
ewmaSlow=void 0;
if(isLive){
ewmaFast=config.abrEwmaFastLive;
ewmaSlow=config.abrEwmaSlowLive;
}else{
ewmaFast=config.abrEwmaFastVoD;
ewmaSlow=config.abrEwmaSlowVoD;
}
this._bwEstimator=new _ewmaBandwidthEstimator2.default(hls,ewmaSlow,ewmaFast,config.abrEwmaDefaultEstimate);
}
}
}},
{
key:'_abandonRulesCheck',
value:function _abandonRulesCheck(){
/*
        monitor fragment retrieval time...
        we compute expected time of arrival of the complete fragment.
        we compare it to expected time of buffer starvation
      */
var hls=this.hls;
var video=hls.media;
var frag=this.fragCurrent;

if(!frag){
return;
}

var loader=frag.loader;
var minAutoLevel=hls.minAutoLevel;

// if loader has been destroyed or loading has been aborted, stop timer and return
if(!loader||loader.stats&&loader.stats.aborted){
_logger.logger.warn('frag loader destroy or aborted, disarm abandonRules');
this.clearTimer();
// reset forced auto level value so that next level will be selected
this._nextAutoLevel=-1;
return;
}
var stats=loader.stats;
/* only monitor frag retrieval time if
      (video not paused OR first fragment being loaded(ready state === HAVE_NOTHING = 0)) AND autoswitching enabled AND not lowest level (=> means that we have several levels) */
if(video&&stats&&(!video.paused&&video.playbackRate!==0||!video.readyState)&&frag.autoLevel&&frag.level){
var requestDelay=performance.now()-stats.trequest,
playbackRate=Math.abs(video.playbackRate);
// monitor fragment load progress after half of expected fragment duration,to stabilize bitrate
if(requestDelay>500*frag.duration/playbackRate){
var levels=hls.levels,
loadRate=Math.max(1,stats.bw?stats.bw/8:stats.loaded*1000/requestDelay),
// byte/s; at least 1 byte/s to avoid division by zero
// compute expected fragment length using frag duration and level bitrate. also ensure that expected len is gte than already loaded size
level=levels[frag.level],
levelBitrate=level.realBitrate?Math.max(level.realBitrate,level.bitrate):level.bitrate,
expectedLen=stats.total?stats.total:Math.max(stats.loaded,Math.round(frag.duration*levelBitrate/8)),
pos=video.currentTime,
fragLoadedDelay=(expectedLen-stats.loaded)/loadRate,
bufferStarvationDelay=(_bufferHelper.BufferHelper.bufferInfo(video,pos,hls.config.maxBufferHole).end-pos)/playbackRate;
// consider emergency switch down only if we have less than 2 frag buffered AND
// time to finish loading current fragment is bigger than buffer starvation delay
// ie if we risk buffer starvation if bw does not increase quickly
if(bufferStarvationDelay<2*frag.duration/playbackRate&&fragLoadedDelay>bufferStarvationDelay){
var fragLevelNextLoadedDelay=void 0,
nextLoadLevel=void 0;
// lets iterate through lower level and try to find the biggest one that could avoid rebuffering
// we start from current level - 1 and we step down , until we find a matching level
for(nextLoadLevel=frag.level-1;nextLoadLevel>minAutoLevel;nextLoadLevel--){
// compute time to load next fragment at lower level
// 0.8 : consider only 80% of current bw to be conservative
// 8 = bits per byte (bps/Bps)
var levelNextBitrate=levels[nextLoadLevel].realBitrate?Math.max(levels[nextLoadLevel].realBitrate,levels[nextLoadLevel].bitrate):levels[nextLoadLevel].bitrate;
fragLevelNextLoadedDelay=frag.duration*levelNextBitrate/(8*0.8*loadRate);
if(fragLevelNextLoadedDelay<bufferStarvationDelay){
// we found a lower level that be rebuffering free with current estimated bw !
break;
}
}
// only emergency switch down if it takes less time to load new fragment at lowest level instead
// of finishing loading current one ...
if(fragLevelNextLoadedDelay<fragLoadedDelay){
_logger.logger.warn('loading too slow, abort fragment loading and switch to level '+nextLoadLevel+':fragLoadedDelay['+nextLoadLevel+']<fragLoadedDelay['+(frag.level-1)+'];bufferStarvationDelay:'+fragLevelNextLoadedDelay.toFixed(1)+'<'+fragLoadedDelay.toFixed(1)+':'+bufferStarvationDelay.toFixed(1));
// force next load level in auto mode
hls.nextLoadLevel=nextLoadLevel;
// update bw estimate for this fragment before cancelling load (this will help reducing the bw)
this._bwEstimator.sample(requestDelay,stats.loaded);
// abort fragment loading
loader.abort();
// stop abandon rules timer
this.clearTimer();
hls.trigger(_events2.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:frag,stats:stats});
}
}
}
}
}},
{
key:'onFragLoaded',
value:function onFragLoaded(data){
var frag=data.frag;
if(frag.type==='main'&&Number.isFinite(frag.sn)){
// stop monitoring bw once frag loaded
this.clearTimer();
// store level id after successful fragment load
this.lastLoadedFragLevel=frag.level;
// reset forced auto level value so that next level will be selected
this._nextAutoLevel=-1;

// compute level average bitrate
if(this.hls.config.abrMaxWithRealBitrate){
var level=this.hls.levels[frag.level];
var loadedBytes=(level.loaded?level.loaded.bytes:0)+data.stats.loaded;
var loadedDuration=(level.loaded?level.loaded.duration:0)+data.frag.duration;
level.loaded={bytes:loadedBytes,duration:loadedDuration};
level.realBitrate=Math.round(8*loadedBytes/loadedDuration);
}
// if fragment has been loaded to perform a bitrate test,
if(data.frag.bitrateTest){
var stats=data.stats;
stats.tparsed=stats.tbuffered=stats.tload;
this.onFragBuffered(data);
}
}
}},
{
key:'onFragBuffered',
value:function onFragBuffered(data){
var stats=data.stats;
var frag=data.frag;
// only update stats on first frag buffering
// if same frag is loaded multiple times, it might be in browser cache, and loaded quickly
// and leading to wrong bw estimation
// on bitrate test, also only update stats once (if tload = tbuffered == on FRAG_LOADED)
if(stats.aborted!==true&&frag.type==='main'&&Number.isFinite(frag.sn)&&(!frag.bitrateTest||stats.tload===stats.tbuffered)){
// use tparsed-trequest instead of tbuffered-trequest to compute fragLoadingProcessing; rationale is that  buffer appending only happens once media is attached
// in case we use config.startFragPrefetch while media is not attached yet, fragment might be parsed while media not attached yet, but it will only be buffered on media attached
// as a consequence it could happen really late in the process. meaning that appending duration might appears huge ... leading to underestimated throughput estimation
var fragLoadingProcessingMs=stats.tparsed-stats.trequest;
_logger.logger.log('latency/loading/parsing/append/kbps:'+Math.round(stats.tfirst-stats.trequest)+'/'+Math.round(stats.tload-stats.tfirst)+'/'+Math.round(stats.tparsed-stats.tload)+'/'+Math.round(stats.tbuffered-stats.tparsed)+'/'+Math.round(8*stats.loaded/(stats.tbuffered-stats.trequest)));
this._bwEstimator.sample(fragLoadingProcessingMs,stats.loaded);
stats.bwEstimate=this._bwEstimator.getEstimate();
// if fragment has been loaded to perform a bitrate test, (hls.startLevel = -1), store bitrate test delay duration
if(frag.bitrateTest){
this.bitrateTestDelay=fragLoadingProcessingMs/1000;
}else{
this.bitrateTestDelay=0;
}
}
}},
{
key:'onError',
value:function onError(data){
// stop timer in case of frag loading error
switch(data.details){
case _errors.ErrorDetails.FRAG_LOAD_ERROR:
case _errors.ErrorDetails.FRAG_LOAD_TIMEOUT:
this.clearTimer();
break;
default:
break;}

}},
{
key:'clearTimer',
value:function clearTimer(){
clearInterval(this.timer);
this.timer=null;
}

// return next auto level
},
{
key:'_findBestLevel',
value:function _findBestLevel(currentLevel,currentFragDuration,currentBw,minAutoLevel,maxAutoLevel,maxFetchDuration,bwFactor,bwUpFactor,levels){
for(var i=maxAutoLevel;i>=minAutoLevel;i--){
var levelInfo=levels[i];

if(!levelInfo){
continue;
}

var levelDetails=levelInfo.details,
avgDuration=levelDetails?levelDetails.totalduration/levelDetails.fragments.length:currentFragDuration,
live=levelDetails?levelDetails.live:false,
adjustedbw=void 0;
// follow algorithm captured from stagefright :
// https://android.googlesource.com/platform/frameworks/av/+/master/media/libstagefright/httplive/LiveSession.cpp
// Pick the highest bandwidth stream below or equal to estimated bandwidth.
// consider only 80% of the available bandwidth, but if we are switching up,
// be even more conservative (70%) to avoid overestimating and immediately
// switching back.
if(i<=currentLevel){
adjustedbw=bwFactor*currentBw;
}else{
adjustedbw=bwUpFactor*currentBw;
}

var bitrate=levels[i].realBitrate?Math.max(levels[i].realBitrate,levels[i].bitrate):levels[i].bitrate,
fetchDuration=bitrate*avgDuration/adjustedbw;

_logger.logger.trace('level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: '+i+'/'+Math.round(adjustedbw)+'/'+bitrate+'/'+avgDuration+'/'+maxFetchDuration+'/'+fetchDuration);
// if adjusted bw is greater than level bitrate AND
if(adjustedbw>bitrate&&(
// fragment fetchDuration unknown OR live stream OR fragment fetchDuration less than max allowed fetch duration, then this level matches
// we don't account for max Fetch Duration for live streams, this is to avoid switching down when near the edge of live sliding window ...
// special case to support startLevel = -1 (bitrateTest) on live streams : in that case we should not exit loop so that _findBestLevel will return -1
!fetchDuration||live&&!this.bitrateTestDelay||fetchDuration<maxFetchDuration)){
// as we are looping from highest to lowest, this will return the best achievable quality level
return i;
}
}
// not enough time budget even with quality level 0 ... rebuffering might happen
return-1;
}},
{
key:'nextAutoLevel',
get:function get(){
var forcedAutoLevel=this._nextAutoLevel;
var bwEstimator=this._bwEstimator;
// in case next auto level has been forced, and bw not available or not reliable, return forced value
if(forcedAutoLevel!==-1&&(!bwEstimator||!bwEstimator.canEstimate())){
return forcedAutoLevel;
}

// compute next level using ABR logic
var nextABRAutoLevel=this._nextABRAutoLevel;
// if forced auto level has been defined, use it to cap ABR computed quality level
if(forcedAutoLevel!==-1){
nextABRAutoLevel=Math.min(forcedAutoLevel,nextABRAutoLevel);
}

return nextABRAutoLevel;
},
set:function set(nextLevel){
this._nextAutoLevel=nextLevel;
}},
{
key:'_nextABRAutoLevel',
get:function get(){
var hls=this.hls,
maxAutoLevel=hls.maxAutoLevel,
levels=hls.levels,
config=hls.config,
minAutoLevel=hls.minAutoLevel;
var video=hls.media,
currentLevel=this.lastLoadedFragLevel,
currentFragDuration=this.fragCurrent?this.fragCurrent.duration:0,
pos=video?video.currentTime:0,

// playbackRate is the absolute value of the playback rate; if video.playbackRate is 0, we use 1 to load as
// if we're playing back at the normal rate.
playbackRate=video&&video.playbackRate!==0?Math.abs(video.playbackRate):1.0,
avgbw=this._bwEstimator?this._bwEstimator.getEstimate():config.abrEwmaDefaultEstimate,

// bufferStarvationDelay is the wall-clock time left until the playback buffer is exhausted.
bufferStarvationDelay=(_bufferHelper.BufferHelper.bufferInfo(video,pos,config.maxBufferHole).end-pos)/playbackRate;

// First, look to see if we can find a level matching with our avg bandwidth AND that could also guarantee no rebuffering at all
var bestLevel=this._findBestLevel(currentLevel,currentFragDuration,avgbw,minAutoLevel,maxAutoLevel,bufferStarvationDelay,config.abrBandWidthFactor,config.abrBandWidthUpFactor,levels);
if(bestLevel>=0){
return bestLevel;
}else{
_logger.logger.trace('rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering');
// not possible to get rid of rebuffering ... let's try to find level that will guarantee less than maxStarvationDelay of rebuffering
// if no matching level found, logic will return 0
var maxStarvationDelay=currentFragDuration?Math.min(currentFragDuration,config.maxStarvationDelay):config.maxStarvationDelay,
bwFactor=config.abrBandWidthFactor,
bwUpFactor=config.abrBandWidthUpFactor;
if(bufferStarvationDelay===0){
// in case buffer is empty, let's check if previous fragment was loaded to perform a bitrate test
var bitrateTestDelay=this.bitrateTestDelay;
if(bitrateTestDelay){
// if it is the case, then we need to adjust our max starvation delay using maxLoadingDelay config value
// max video loading delay used in  automatic start level selection :
// in that mode ABR controller will ensure that video loading time (ie the time to fetch the first fragment at lowest quality level +
// the time to fetch the fragment at the appropriate quality level is less than ```maxLoadingDelay``` )
// cap maxLoadingDelay and ensure it is not bigger 'than bitrate test' frag duration
var maxLoadingDelay=currentFragDuration?Math.min(currentFragDuration,config.maxLoadingDelay):config.maxLoadingDelay;
maxStarvationDelay=maxLoadingDelay-bitrateTestDelay;
_logger.logger.trace('bitrate test took '+Math.round(1000*bitrateTestDelay)+'ms, set first fragment max fetchDuration to '+Math.round(1000*maxStarvationDelay)+' ms');
// don't use conservative factor on bitrate test
bwFactor=bwUpFactor=1;
}
}
bestLevel=this._findBestLevel(currentLevel,currentFragDuration,avgbw,minAutoLevel,maxAutoLevel,bufferStarvationDelay+maxStarvationDelay,bwFactor,bwUpFactor,levels);
return Math.max(bestLevel,0);
}
}}]);


return AbrController;
}(_eventHandler2.default);

exports.default=AbrController;
module.exports=exports['default'];

/***/},
/* 62 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * EWMA Bandwidth Estimator
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  - heavily inspired from shaka-player
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Tracks bandwidth samples and estimates available bandwidth.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Based on the minimum of two exponentially-weighted moving averages with
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * different half-lives.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */

var _ewma=__webpack_require__(63);

var _ewma2=_interopRequireDefault(_ewma);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var EwmaBandWidthEstimator=function(){
function EwmaBandWidthEstimator(hls,slow,fast,defaultEstimate){
_classCallCheck(this,EwmaBandWidthEstimator);

this.hls=hls;
this.defaultEstimate_=defaultEstimate;
this.minWeight_=0.001;
this.minDelayMs_=50;
this.slow_=new _ewma2.default(slow);
this.fast_=new _ewma2.default(fast);
}

_createClass(EwmaBandWidthEstimator,[{
key:'sample',
value:function sample(durationMs,numBytes){
durationMs=Math.max(durationMs,this.minDelayMs_);
var bandwidth=8000*numBytes/durationMs,

// console.log('instant bw:'+ Math.round(bandwidth));
// we weight sample using loading duration....
weight=durationMs/1000;
this.fast_.sample(weight,bandwidth);
this.slow_.sample(weight,bandwidth);
}},
{
key:'canEstimate',
value:function canEstimate(){
var fast=this.fast_;
return fast&&fast.getTotalWeight()>=this.minWeight_;
}},
{
key:'getEstimate',
value:function getEstimate(){
if(this.canEstimate()){
// console.log('slow estimate:'+ Math.round(this.slow_.getEstimate()));
// console.log('fast estimate:'+ Math.round(this.fast_.getEstimate()));
// Take the minimum of these two estimates.  This should have the effect of
// adapting down quickly, but up more slowly.
return Math.min(this.fast_.getEstimate(),this.slow_.getEstimate());
}else{
return this.defaultEstimate_;
}
}},
{
key:'destroy',
value:function destroy(){}}]);


return EwmaBandWidthEstimator;
}();

exports.default=EwmaBandWidthEstimator;
module.exports=exports['default'];

/***/},
/* 63 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

/*
 * compute an Exponential Weighted moving average
 * - https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average
 *  - heavily inspired from shaka-player
 */

var EWMA=function(){
//  About half of the estimated value will be from the last |halfLife| samples by weight.
function EWMA(halfLife){
_classCallCheck(this,EWMA);

// Larger values of alpha expire historical data more slowly.
this.alpha_=halfLife?Math.exp(Math.log(0.5)/halfLife):0;
this.estimate_=0;
this.totalWeight_=0;
}

_createClass(EWMA,[{
key:"sample",
value:function sample(weight,value){
var adjAlpha=Math.pow(this.alpha_,weight);
this.estimate_=value*(1-adjAlpha)+adjAlpha*this.estimate_;
this.totalWeight_+=weight;
}},
{
key:"getTotalWeight",
value:function getTotalWeight(){
return this.totalWeight_;
}},
{
key:"getEstimate",
value:function getEstimate(){
if(this.alpha_){
var zeroFactor=1-Math.pow(this.alpha_,this.totalWeight_);
return this.estimate_/zeroFactor;
}else{
return this.estimate_;
}
}}]);


return EWMA;
}();

exports.default=EWMA;
module.exports=exports["default"];

/***/},
/* 64 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _logger=__webpack_require__(0);

var _errors=__webpack_require__(2);

var _mediasourceHelper=__webpack_require__(13);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Buffer Controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var MediaSource=(0,_mediasourceHelper.getMediaSource)();

var BufferController=function(_EventHandler){
_inherits(BufferController,_EventHandler);

function BufferController(hls){
_classCallCheck(this,BufferController);

// the value that we have set mediasource.duration to
// (the actual duration may be tweaked slighly by the browser)
var _this=_possibleConstructorReturn(this,(BufferController.__proto__||Object.getPrototypeOf(BufferController)).call(this,hls,_events2.default.MEDIA_ATTACHING,_events2.default.MEDIA_DETACHING,_events2.default.MANIFEST_PARSED,_events2.default.BUFFER_RESET,_events2.default.BUFFER_APPENDING,_events2.default.BUFFER_CODECS,_events2.default.BUFFER_EOS,_events2.default.BUFFER_FLUSHING,_events2.default.LEVEL_PTS_UPDATED,_events2.default.LEVEL_UPDATED));

_this._msDuration=null;
// the value that we want to set mediaSource.duration to
_this._levelDuration=null;
// the target duration of the current media playlist
_this._levelTargetDuration=10;
// current stream state: true - for live broadcast, false - for VoD content
_this._live=null;
// cache the self generated object url to detect hijack of video tag
_this._objectUrl=null;
// The number of BUFFER_CODEC events received before any sourceBuffers are created
_this.bufferCodecEventsExpected=0;

// Source Buffer listeners
_this.onsbue=_this.onSBUpdateEnd.bind(_this);
_this.onsbe=_this.onSBUpdateError.bind(_this);
_this.pendingTracks={};
_this.tracks={};
return _this;
}

_createClass(BufferController,[{
key:'destroy',
value:function destroy(){
_eventHandler2.default.prototype.destroy.call(this);
}},
{
key:'onLevelPtsUpdated',
value:function onLevelPtsUpdated(data){
var type=data.type;
var audioTrack=this.tracks.audio;

// Adjusting `SourceBuffer.timestampOffset` (desired point in the timeline where the next frames should be appended)
// in Chrome browser when we detect MPEG audio container and time delta between level PTS and `SourceBuffer.timestampOffset`
// is greater than 100ms (this is enough to handle seek for VOD or level change for LIVE videos). At the time of change we issue
// `SourceBuffer.abort()` and adjusting `SourceBuffer.timestampOffset` if `SourceBuffer.updating` is false or awaiting `updateend`
// event if SB is in updating state.
// More info here: https://github.com/video-dev/hls.js/issues/332#issuecomment-257986486

if(type==='audio'&&audioTrack&&audioTrack.container==='audio/mpeg'){
// Chrome audio mp3 track
var audioBuffer=this.sourceBuffer.audio;
var delta=Math.abs(audioBuffer.timestampOffset-data.start);

// adjust timestamp offset if time delta is greater than 100ms
if(delta>0.1){
var updating=audioBuffer.updating;

try{
audioBuffer.abort();
}catch(err){
_logger.logger.warn('can not abort audio buffer: '+err);
}

if(!updating){
_logger.logger.warn('change mpeg audio timestamp offset from '+audioBuffer.timestampOffset+' to '+data.start);
audioBuffer.timestampOffset=data.start;
}else{
this.audioTimestampOffset=data.start;
}
}
}
}},
{
key:'onManifestParsed',
value:function onManifestParsed(data){
// in case of alt audio 2 BUFFER_CODECS events will be triggered, one per stream controller
// sourcebuffers will be created all at once when the expected nb of tracks will be reached
// in case alt audio is not used, only one BUFFER_CODEC event will be fired from main stream controller
// it will contain the expected nb of source buffers, no need to compute it
this.bufferCodecEventsExpected=data.altAudio?2:1;
_logger.logger.log(this.bufferCodecEventsExpected+' bufferCodec event(s) expected');
}},
{
key:'onMediaAttaching',
value:function onMediaAttaching(data){
var media=this.media=data.media;
if(media){
// setup the media source
var ms=this.mediaSource=new MediaSource();
// Media Source listeners
this.onmso=this.onMediaSourceOpen.bind(this);
this.onmse=this.onMediaSourceEnded.bind(this);
this.onmsc=this.onMediaSourceClose.bind(this);
ms.addEventListener('sourceopen',this.onmso);
ms.addEventListener('sourceended',this.onmse);
ms.addEventListener('sourceclose',this.onmsc);
// link video and media Source
media.src=window.URL.createObjectURL(ms);
// cache the locally generated object url
this._objectUrl=media.src;
}
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
_logger.logger.log('media source detaching');
var ms=this.mediaSource;
if(ms){
if(ms.readyState==='open'){
try{
// endOfStream could trigger exception if any sourcebuffer is in updating state
// we don't really care about checking sourcebuffer state here,
// as we are anyway detaching the MediaSource
// let's just avoid this exception to propagate
ms.endOfStream();
}catch(err){
_logger.logger.warn('onMediaDetaching:'+err.message+' while calling endOfStream');
}
}
ms.removeEventListener('sourceopen',this.onmso);
ms.removeEventListener('sourceended',this.onmse);
ms.removeEventListener('sourceclose',this.onmsc);

// Detach properly the MediaSource from the HTMLMediaElement as
// suggested in https://github.com/w3c/media-source/issues/53.
if(this.media){
window.URL.revokeObjectURL(this._objectUrl);

// clean up video tag src only if it's our own url. some external libraries might
// hijack the video tag and change its 'src' without destroying the Hls instance first
if(this.media.src===this._objectUrl){
this.media.removeAttribute('src');
this.media.load();
}else{
_logger.logger.warn('media.src was changed by a third party - skip cleanup');
}
}

this.mediaSource=null;
this.media=null;
this._objectUrl=null;
this.pendingTracks={};
this.tracks={};
this.sourceBuffer={};
this.flushRange=[];
this.segments=[];
this.appended=0;
}
this.onmso=this.onmse=this.onmsc=null;
this.hls.trigger(_events2.default.MEDIA_DETACHED);
}},
{
key:'onMediaSourceOpen',
value:function onMediaSourceOpen(){
_logger.logger.log('media source opened');
this.hls.trigger(_events2.default.MEDIA_ATTACHED,{media:this.media});
var mediaSource=this.mediaSource;
if(mediaSource){
// once received, don't listen anymore to sourceopen event
mediaSource.removeEventListener('sourceopen',this.onmso);
}
this.checkPendingTracks();
}},
{
key:'checkPendingTracks',
value:function checkPendingTracks(){
var bufferCodecEventsExpected=this.bufferCodecEventsExpected,
pendingTracks=this.pendingTracks;
// Check if we've received all of the expected bufferCodec events. When none remain, create all the sourceBuffers at once.
// This is important because the MSE spec allows implementations to throw QuotaExceededErrors if creating new sourceBuffers after
// data has been appended to existing ones.
// 2 tracks is the max (one for audio, one for video). If we've reach this max go ahead and create the buffers.

var pendingTracksCount=Object.keys(pendingTracks).length;
if(pendingTracksCount&&!bufferCodecEventsExpected||pendingTracksCount===2){
// ok, let's create them now !
this.createSourceBuffers(pendingTracks);
this.pendingTracks={};
// append any pending segments now !
this.doAppending();
}
}},
{
key:'onMediaSourceClose',
value:function onMediaSourceClose(){
_logger.logger.log('media source closed');
}},
{
key:'onMediaSourceEnded',
value:function onMediaSourceEnded(){
_logger.logger.log('media source ended');
}},
{
key:'onSBUpdateEnd',
value:function onSBUpdateEnd(){
// update timestampOffset
if(this.audioTimestampOffset){
var audioBuffer=this.sourceBuffer.audio;
_logger.logger.warn('change mpeg audio timestamp offset from '+audioBuffer.timestampOffset+' to '+this.audioTimestampOffset);
audioBuffer.timestampOffset=this.audioTimestampOffset;
delete this.audioTimestampOffset;
}

if(this._needsFlush){
this.doFlush();
}

if(this._needsEos){
this.checkEos();
}

this.appending=false;
var parent=this.parent;
// count nb of pending segments waiting for appending on this sourcebuffer
var pending=this.segments.reduce(function(counter,segment){
return segment.parent===parent?counter+1:counter;
},0);

// this.sourceBuffer is better to use than media.buffered as it is closer to the PTS data from the fragments
var timeRanges={};
var sourceBuffer=this.sourceBuffer;
for(var streamType in sourceBuffer){
timeRanges[streamType]=sourceBuffer[streamType].buffered;
}

// 寻找可播放的起始点。如果没有自动播放，需要手动Seek
if(this._paused===false&&timeRanges["video"]&&timeRanges["video"].length>0&&timeRanges["audio"]&&timeRanges["audio"].length>0){

if(timeRanges["video"].end(0)-timeRanges["video"].start(0)>1&&timeRanges["audio"].end(0)-timeRanges["audio"].start(0)>1){
// Seek to the point that can play;
var startTime=Math.max(timeRanges["video"].start(0),timeRanges["audio"].start(0));
this.media.currentTime=startTime;
this.media.play();
delete this["_paused"];
}else{
// Try to seek more
var endTime=Math.max(timeRanges["video"].end(0),timeRanges["audio"].end(0));
this.media.currentTime=endTime;
this.media.play();
}
}

this.hls.trigger(_events2.default.BUFFER_APPENDED,{parent:parent,pending:pending,timeRanges:timeRanges});
// don't append in flushing mode
if(!this._needsFlush){
this.doAppending();
}

this.updateMediaElementDuration();

// appending goes first
if(pending===0){
this.flushLiveBackBuffer();
}
}},
{
key:'onSBUpdateError',
value:function onSBUpdateError(event){
_logger.logger.error('sourceBuffer error:',event);
// according to http://www.w3.org/TR/media-source/#sourcebuffer-append-error
// this error might not always be fatal (it is fatal if decode error is set, in that case
// it will be followed by a mediaElement error ...)
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:false});
// we don't need to do more than that, as accordin to the spec, updateend will be fired just after
}},
{
key:'onBufferReset',
value:function onBufferReset(){
var sourceBuffer=this.sourceBuffer;
for(var type in sourceBuffer){
var sb=sourceBuffer[type];
try{
this.mediaSource.removeSourceBuffer(sb);
sb.removeEventListener('updateend',this.onsbue);
sb.removeEventListener('error',this.onsbe);
}catch(err){}
}
this.sourceBuffer={};
this.flushRange=[];
this.segments=[];
this.appended=0;
}},
{
key:'onBufferCodecs',
value:function onBufferCodecs(tracks){
var _this2=this;

// if source buffer(s) not created yet, appended buffer tracks in this.pendingTracks
// if sourcebuffers already created, do nothing ...
/** 需要放过tracks, 有新的track需要重新加buffer 使得画面到达时，可以播放画面
      if (Object.keys(this.sourceBuffer).length) {
        return;
      }*/

Object.keys(tracks).forEach(function(trackName){
_this2.pendingTracks[trackName]=tracks[trackName];
});
var mediaSource=this.mediaSource;

this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0);
if(mediaSource&&mediaSource.readyState==='open'){
this.checkPendingTracks();
}
}},
{
key:'createSourceBuffers',
value:function createSourceBuffers(tracks){
var sourceBuffer=this.sourceBuffer,
mediaSource=this.mediaSource;
for(var trackName in tracks){
if(!sourceBuffer[trackName]){
var track=tracks[trackName];
// use levelCodec as first priority
var codec=track.levelCodec||track.codec;
var mimeType=track.container+';codecs='+codec;
_logger.logger.log('creating sourceBuffer('+mimeType+')');
try{
var sb=sourceBuffer[trackName]=mediaSource.addSourceBuffer(mimeType);
sb.addEventListener('updateend',this.onsbue);
sb.addEventListener('error',this.onsbe);
this.tracks[trackName]={codec:codec,container:track.container};
track.buffer=sb;
}catch(err){
if(err.code==22){
_logger.logger.log("Found new track, try to rebuild");
this._paused=false;
// setup the media source
var ms=this.mediaSource=new MediaSource();
// Media Source listeners
this.onmso=this.onMediaSourceOpen.bind(this);
this.onmse=this.onMediaSourceEnded.bind(this);
this.onmsc=this.onMediaSourceClose.bind(this);

for(var i=0;i<Object.keys(this.tracks).length;i++){
var _track=this.tracks[Object.keys(this.tracks)[i]];
this.pendingTracks[Object.keys(this.tracks)[i]]=_track;
}
this.tracks={};
this.sourceBuffer={};
ms.addEventListener('sourceopen',this.onmso);
ms.addEventListener('sourceended',this.onmse);
ms.addEventListener('sourceclose',this.onmsc);
// link video and media Source
this.media.src=window.URL.createObjectURL(ms);
// cache the locally generated object url
this._objectUrl=media.src;
}else{
_logger.logger.error('error while trying to add sourceBuffer:'+err.message);
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:false,err:err,mimeType:mimeType});
}
}
}
}

this.hls.trigger(_events2.default.BUFFER_CREATED,{tracks:tracks});
}},
{
key:'onBufferAppending',
value:function onBufferAppending(data){
if(!this._needsFlush){
if(!this.segments){
this.segments=[data];
}else{
this.segments.push(data);
}

this.doAppending();
}
}},
{
key:'onBufferAppendFail',
value:function onBufferAppendFail(data){
_logger.logger.error('sourceBuffer error:',data.event);
// according to http://www.w3.org/TR/media-source/#sourcebuffer-append-error
// this error might not always be fatal (it is fatal if decode error is set, in that case
// it will be followed by a mediaElement error ...)
this.hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:_errors.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:false});
}

// on BUFFER_EOS mark matching sourcebuffer(s) as ended and trigger checkEos()
},
{
key:'onBufferEos',
value:function onBufferEos(data){
var sb=this.sourceBuffer;
var dataType=data.type;
for(var type in sb){
if(!dataType||type===dataType){
if(!sb[type].ended){
sb[type].ended=true;
_logger.logger.log(type+' sourceBuffer now EOS');
}
}
}
this.checkEos();
}

// if all source buffers are marked as ended, signal endOfStream() to MediaSource.
},
{
key:'checkEos',
value:function checkEos(){
var sb=this.sourceBuffer,
mediaSource=this.mediaSource;
if(!mediaSource||mediaSource.readyState!=='open'){
this._needsEos=false;
return;
}
for(var type in sb){
var sbobj=sb[type];
if(!sbobj.ended){
return;
}

if(sbobj.updating){
this._needsEos=true;
return;
}
}
_logger.logger.log('all media data are available, signal endOfStream() to MediaSource and stop loading fragment');
// Notify the media element that it now has all of the media data
try{
mediaSource.endOfStream();
}catch(e){
_logger.logger.warn('exception while calling mediaSource.endOfStream()');
}
this._needsEos=false;
}},
{
key:'onBufferFlushing',
value:function onBufferFlushing(data){
this.flushRange.push({start:data.startOffset,end:data.endOffset,type:data.type});
// attempt flush immediately
this.flushBufferCounter=0;
this.doFlush();
}},
{
key:'flushLiveBackBuffer',
value:function flushLiveBackBuffer(){
// clear back buffer for live only
if(!this._live){
return;
}

var liveBackBufferLength=this.hls.config.liveBackBufferLength;
if(!isFinite(liveBackBufferLength)||liveBackBufferLength<0){
return;
}

var currentTime=this.media.currentTime;
var sourceBuffer=this.sourceBuffer;
var bufferTypes=Object.keys(sourceBuffer);
var targetBackBufferPosition=currentTime-Math.max(liveBackBufferLength,this._levelTargetDuration);

for(var index=bufferTypes.length-1;index>=0;index--){
var bufferType=bufferTypes[index],
buffered=sourceBuffer[bufferType].buffered;

// when target buffer start exceeds actual buffer start
if(buffered.length>0&&targetBackBufferPosition>buffered.start(0)){
// remove buffer up until current time minus minimum back buffer length (removing buffer too close to current
// time will lead to playback freezing)
// credits for level target duration - https://github.com/videojs/http-streaming/blob/3132933b6aa99ddefab29c10447624efd6fd6e52/src/segment-loader.js#L91
this.removeBufferRange(bufferType,sourceBuffer[bufferType],0,targetBackBufferPosition);
}
}
}},
{
key:'onLevelUpdated',
value:function onLevelUpdated(_ref){
var details=_ref.details;

if(details.fragments.length>0){
this._levelDuration=details.totalduration+details.fragments[0].start;
this._levelTargetDuration=details.averagetargetduration||details.targetduration||10;
this._live=details.live;
this.updateMediaElementDuration();
}
}

/**
     * Update Media Source duration to current level duration or override to Infinity if configuration parameter
     * 'liveDurationInfinity` is set to `true`
     * More details: https://github.com/video-dev/hls.js/issues/355
     */},

{
key:'updateMediaElementDuration',
value:function updateMediaElementDuration(){
var config=this.hls.config;

var duration=void 0;

if(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=='open'){
return;
}

for(var type in this.sourceBuffer){
if(this.sourceBuffer[type].updating===true){
// can't set duration whilst a buffer is updating
return;
}
}

duration=this.media.duration;
// initialise to the value that the media source is reporting
if(this._msDuration===null){
this._msDuration=this.mediaSource.duration;
}

if(this._live===true&&config.liveDurationInfinity===true){
// Override duration to Infinity
_logger.logger.log('Media Source duration is set to Infinity');
this._msDuration=this.mediaSource.duration=Infinity;
}else if(this._levelDuration>this._msDuration&&this._levelDuration>duration||!Number.isFinite(duration)){
// levelDuration was the last value we set.
// not using mediaSource.duration as the browser may tweak this value
// only update Media Source duration if its value increase, this is to avoid
// flushing already buffered portion when switching between quality level
_logger.logger.log('Updating Media Source duration to '+this._levelDuration.toFixed(3));
this._msDuration=this.mediaSource.duration=this._levelDuration;
}
}},
{
key:'doFlush',
value:function doFlush(){
// loop through all buffer ranges to flush
while(this.flushRange.length){
var range=this.flushRange[0];
// flushBuffer will abort any buffer append in progress and flush Audio/Video Buffer
if(this.flushBuffer(range.start,range.end,range.type)){
// range flushed, remove from flush array
this.flushRange.shift();
this.flushBufferCounter=0;
}else{
this._needsFlush=true;
// avoid looping, wait for SB update end to retrigger a flush
return;
}
}
if(this.flushRange.length===0){
// everything flushed
this._needsFlush=false;

// let's recompute this.appended, which is used to avoid flush looping
var appended=0;
var sourceBuffer=this.sourceBuffer;
try{
for(var type in sourceBuffer){
appended+=sourceBuffer[type].buffered.length;
}
}catch(error){
// error could be thrown while accessing buffered, in case sourcebuffer has already been removed from MediaSource
// this is harmess at this stage, catch this to avoid reporting an internal exception
_logger.logger.error('error while accessing sourceBuffer.buffered');
}
this.appended=appended;
this.hls.trigger(_events2.default.BUFFER_FLUSHED);
}
}},
{
key:'doAppending',
value:function doAppending(){
var hls=this.hls,
segments=this.segments,
sourceBuffer=this.sourceBuffer;

if(Object.keys(sourceBuffer).length){
if(this.media.error){
this.segments=[];
_logger.logger.error('trying to append although a media error occured, flush segment and abort');
return;
}
if(this.appending){
// logger.log(`sb appending in progress`);
return;
}
if(segments&&segments.length){
var segment=segments.shift();
try{
var type=segment.type,
sb=sourceBuffer[type];
if(sb){
if(!sb.updating){
// reset sourceBuffer ended flag before appending segment
sb.ended=false;
// logger.log(`appending ${segment.content} ${type} SB, size:${segment.data.length}, ${segment.parent}`);
this.parent=segment.parent;
// console.log('append buffer ', segment)
sb.appendBuffer(segment.data);
this.appendError=0;
this.appended++;
this.appending=true;
}else{
segments.unshift(segment);
}
}else{
// in case we don't have any source buffer matching with this segment type,
// it means that Mediasource fails to create sourcebuffer
// discard this segment, and trigger update end
this.onSBUpdateEnd();
}
}catch(err){
// in case any error occured while appending, put back segment in segments table
_logger.logger.error('error while trying to append buffer:'+err.message);
segments.unshift(segment);
var event={type:_errors.ErrorTypes.MEDIA_ERROR,parent:segment.parent};
if(err.code!==22){
if(this.appendError){
this.appendError++;
}else{
this.appendError=1;
}

event.details=_errors.ErrorDetails.BUFFER_APPEND_ERROR;
/* with UHD content, we could get loop of quota exceeded error until
                browser is able to evict some data from sourcebuffer. retrying help recovering this
              */
if(this.appendError>hls.config.appendErrorMaxRetry){
_logger.logger.log('fail '+hls.config.appendErrorMaxRetry+' times to append segment in sourceBuffer');
this.segments=[];
event.fatal=true;
hls.trigger(_events2.default.ERROR,event);
}else{
event.fatal=false;
hls.trigger(_events2.default.ERROR,event);
}
}else{
// QuotaExceededError: http://www.w3.org/TR/html5/infrastructure.html#quotaexceedederror
// let's stop appending any segments, and report BUFFER_FULL_ERROR error
this.segments=[];
event.details=_errors.ErrorDetails.BUFFER_FULL_ERROR;
event.fatal=false;
hls.trigger(_events2.default.ERROR,event);
}
}
}
}
}

/*
      flush specified buffered range,
      return true once range has been flushed.
      as sourceBuffer.remove() is asynchronous, flushBuffer will be retriggered on sourceBuffer update end
    */},

{
key:'flushBuffer',
value:function flushBuffer(startOffset,endOffset,typeIn){
var sb=void 0;
var sourceBuffer=this.sourceBuffer;
if(Object.keys(sourceBuffer).length){
_logger.logger.log('flushBuffer,pos/start/end: '+this.media.currentTime.toFixed(3)+'/'+startOffset+'/'+endOffset);
// safeguard to avoid infinite looping : don't try to flush more than the nb of appended segments
if(this.flushBufferCounter<this.appended){
for(var type in sourceBuffer){
// check if sourcebuffer type is defined (typeIn): if yes, let's only flush this one
// if no, let's flush all sourcebuffers
if(typeIn&&type!==typeIn){
continue;
}

sb=sourceBuffer[type];
// we are going to flush buffer, mark source buffer as 'not ended'
sb.ended=false;
if(!sb.updating){
if(this.removeBufferRange(type,sb,startOffset,endOffset)){
this.flushBufferCounter++;
return false;
}
}else{
_logger.logger.warn('cannot flush, sb updating in progress');
return false;
}
}
}else{
_logger.logger.warn('abort flushing too many retries');
}
_logger.logger.log('buffer flushed');
}
// everything flushed !
return true;
}

/**
     * Removes first buffered range from provided source buffer that lies within given start and end offsets.
     *
     * @param type Type of the source buffer, logging purposes only.
     * @param sb Target SourceBuffer instance.
     * @param startOffset
     * @param endOffset
     *
     * @returns {boolean} True when source buffer remove requested.
     */},

{
key:'removeBufferRange',
value:function removeBufferRange(type,sb,startOffset,endOffset){
try{
for(var i=0;i<sb.buffered.length;i++){
var bufStart=sb.buffered.start(i);
var bufEnd=sb.buffered.end(i);
var removeStart=Math.max(bufStart,startOffset);
var removeEnd=Math.min(bufEnd,endOffset);

/* sometimes sourcebuffer.remove() does not flush
            the exact expected time range.
            to avoid rounding issues/infinite loop,
            only flush buffer range of length greater than 500ms.
          */
if(Math.min(removeEnd,bufEnd)-removeStart>0.5){
_logger.logger.log('sb remove '+type+' ['+removeStart+','+removeEnd+'], of ['+bufStart+','+bufEnd+'], pos:'+this.media.currentTime);
sb.remove(removeStart,removeEnd);
return true;
}
}
}catch(error){
_logger.logger.warn('removeBufferRange failed',error);
}

return false;
}}]);


return BufferController;
}(_eventHandler2.default);

exports.default=BufferController;
module.exports=exports['default'];

/***/},
/* 65 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * cap stream level to media size dimension controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var CapLevelController=function(_EventHandler){
_inherits(CapLevelController,_EventHandler);

function CapLevelController(hls){
_classCallCheck(this,CapLevelController);

var _this=_possibleConstructorReturn(this,(CapLevelController.__proto__||Object.getPrototypeOf(CapLevelController)).call(this,hls,_events2.default.FPS_DROP_LEVEL_CAPPING,_events2.default.MEDIA_ATTACHING,_events2.default.MANIFEST_PARSED,_events2.default.BUFFER_CODECS,_events2.default.MEDIA_DETACHING));

_this.autoLevelCapping=Number.POSITIVE_INFINITY;
_this.firstLevel=null;
_this.levels=[];
_this.media=null;
_this.restrictedLevels=[];
_this.timer=null;
return _this;
}

_createClass(CapLevelController,[{
key:'destroy',
value:function destroy(){
if(this.hls.config.capLevelToPlayerSize){
this.media=null;
this._stopCapping();
}
}},
{
key:'onFpsDropLevelCapping',
value:function onFpsDropLevelCapping(data){
// Don't add a restricted level more than once
if(CapLevelController.isLevelAllowed(data.droppedLevel,this.restrictedLevels)){
this.restrictedLevels.push(data.droppedLevel);
}
}},
{
key:'onMediaAttaching',
value:function onMediaAttaching(data){
this.media=data.media instanceof window.HTMLVideoElement?data.media:null;
}},
{
key:'onManifestParsed',
value:function onManifestParsed(data){
var hls=this.hls;
this.restrictedLevels=[];
this.levels=data.levels;
this.firstLevel=data.firstLevel;
if(hls.config.capLevelToPlayerSize&&data.video){
// Start capping immediately if the manifest has signaled video codecs
this._startCapping();
}
}

// Only activate capping when playing a video stream; otherwise, multi-bitrate audio-only streams will be restricted
// to the first level
},
{
key:'onBufferCodecs',
value:function onBufferCodecs(data){
var hls=this.hls;
if(hls.config.capLevelToPlayerSize&&data.video){
// If the manifest did not signal a video codec capping has been deferred until we're certain video is present
this._startCapping();
}
}},
{
key:'onLevelsUpdated',
value:function onLevelsUpdated(data){
this.levels=data.levels;
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
this._stopCapping();
}},
{
key:'detectPlayerSize',
value:function detectPlayerSize(){
if(this.media){
var levelsLength=this.levels?this.levels.length:0;
if(levelsLength){
var hls=this.hls;
hls.autoLevelCapping=this.getMaxLevel(levelsLength-1);
if(hls.autoLevelCapping>this.autoLevelCapping){
// if auto level capping has a higher value for the previous one, flush the buffer using nextLevelSwitch
// usually happen when the user go to the fullscreen mode.
hls.streamController.nextLevelSwitch();
}
this.autoLevelCapping=hls.autoLevelCapping;
}
}
}

/*
    * returns level should be the one with the dimensions equal or greater than the media (player) dimensions (so the video will be downscaled)
    */},

{
key:'getMaxLevel',
value:function getMaxLevel(capLevelIndex){
var _this2=this;

if(!this.levels){
return-1;
}

var validLevels=this.levels.filter(function(level,index){
return CapLevelController.isLevelAllowed(index,_this2.restrictedLevels)&&index<=capLevelIndex;
});

return CapLevelController.getMaxLevelByMediaSize(validLevels,this.mediaWidth,this.mediaHeight);
}},
{
key:'_startCapping',
value:function _startCapping(){
if(this.timer){
// Don't reset capping if started twice; this can happen if the manifest signals a video codec
return;
}
this.autoLevelCapping=Number.POSITIVE_INFINITY;
this.hls.firstLevel=this.getMaxLevel(this.firstLevel);
clearInterval(this.timer);
this.timer=setInterval(this.detectPlayerSize.bind(this),1000);
this.detectPlayerSize();
}},
{
key:'_stopCapping',
value:function _stopCapping(){
this.restrictedLevels=[];
this.firstLevel=null;
this.autoLevelCapping=Number.POSITIVE_INFINITY;
if(this.timer){
this.timer=clearInterval(this.timer);
this.timer=null;
}
}},
{
key:'mediaWidth',
get:function get(){
var width=void 0;
var media=this.media;
if(media){
width=media.width||media.clientWidth||media.offsetWidth;
width*=CapLevelController.contentScaleFactor;
}
return width;
}},
{
key:'mediaHeight',
get:function get(){
var height=void 0;
var media=this.media;
if(media){
height=media.height||media.clientHeight||media.offsetHeight;
height*=CapLevelController.contentScaleFactor;
}
return height;
}}],
[{
key:'isLevelAllowed',
value:function isLevelAllowed(level){
var restrictedLevels=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];

return restrictedLevels.indexOf(level)===-1;
}},
{
key:'getMaxLevelByMediaSize',
value:function getMaxLevelByMediaSize(levels,width,height){
if(!levels||levels&&!levels.length){
return-1;
}

// Levels can have the same dimensions but differing bandwidths - since levels are ordered, we can look to the next
// to determine whether we've chosen the greatest bandwidth for the media's dimensions
var atGreatestBandiwdth=function atGreatestBandiwdth(curLevel,nextLevel){
if(!nextLevel){
return true;
}

return curLevel.width!==nextLevel.width||curLevel.height!==nextLevel.height;
};

// If we run through the loop without breaking, the media's dimensions are greater than every level, so default to
// the max level
var maxLevelIndex=levels.length-1;

for(var i=0;i<levels.length;i+=1){
var level=levels[i];
if((level.width>=width||level.height>=height)&&atGreatestBandiwdth(level,levels[i+1])){
maxLevelIndex=i;
break;
}
}

return maxLevelIndex;
}},
{
key:'contentScaleFactor',
get:function get(){
var pixelRatio=1;
try{
pixelRatio=window.devicePixelRatio;
}catch(e){}
return pixelRatio;
}}]);


return CapLevelController;
}(_eventHandler2.default);

exports.default=CapLevelController;
module.exports=exports['default'];

/***/},
/* 66 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * FPS Controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var _window=window,
performance=_window.performance;

var FPSController=function(_EventHandler){
_inherits(FPSController,_EventHandler);

function FPSController(hls){
_classCallCheck(this,FPSController);

return _possibleConstructorReturn(this,(FPSController.__proto__||Object.getPrototypeOf(FPSController)).call(this,hls,_events2.default.MEDIA_ATTACHING));
}

_createClass(FPSController,[{
key:'destroy',
value:function destroy(){
if(this.timer){
clearInterval(this.timer);
}

this.isVideoPlaybackQualityAvailable=false;
}},
{
key:'onMediaAttaching',
value:function onMediaAttaching(data){
var config=this.hls.config;
if(config.capLevelOnFPSDrop){
var video=this.video=data.media instanceof window.HTMLVideoElement?data.media:null;
if(typeof video.getVideoPlaybackQuality==='function'){
this.isVideoPlaybackQualityAvailable=true;
}

clearInterval(this.timer);
this.timer=setInterval(this.checkFPSInterval.bind(this),config.fpsDroppedMonitoringPeriod);
}
}},
{
key:'checkFPS',
value:function checkFPS(video,decodedFrames,droppedFrames){
var currentTime=performance.now();
if(decodedFrames){
if(this.lastTime){
var currentPeriod=currentTime-this.lastTime,
currentDropped=droppedFrames-this.lastDroppedFrames,
currentDecoded=decodedFrames-this.lastDecodedFrames,
droppedFPS=1000*currentDropped/currentPeriod,
hls=this.hls;
hls.trigger(_events2.default.FPS_DROP,{currentDropped:currentDropped,currentDecoded:currentDecoded,totalDroppedFrames:droppedFrames});
if(droppedFPS>0){
// logger.log('checkFPS : droppedFPS/decodedFPS:' + droppedFPS/(1000 * currentDecoded / currentPeriod));
if(currentDropped>hls.config.fpsDroppedMonitoringThreshold*currentDecoded){
var currentLevel=hls.currentLevel;
_logger.logger.warn('drop FPS ratio greater than max allowed value for currentLevel: '+currentLevel);
if(currentLevel>0&&(hls.autoLevelCapping===-1||hls.autoLevelCapping>=currentLevel)){
currentLevel=currentLevel-1;
hls.trigger(_events2.default.FPS_DROP_LEVEL_CAPPING,{level:currentLevel,droppedLevel:hls.currentLevel});
hls.autoLevelCapping=currentLevel;
hls.streamController.nextLevelSwitch();
}
}
}
}
this.lastTime=currentTime;
this.lastDroppedFrames=droppedFrames;
this.lastDecodedFrames=decodedFrames;
}
}},
{
key:'checkFPSInterval',
value:function checkFPSInterval(){
var video=this.video;
if(video){
if(this.isVideoPlaybackQualityAvailable){
var videoPlaybackQuality=video.getVideoPlaybackQuality();
this.checkFPS(video,videoPlaybackQuality.totalVideoFrames,videoPlaybackQuality.droppedVideoFrames);
}else{
this.checkFPS(video,video.webkitDecodedFrameCount,video.webkitDroppedFrameCount);
}
}
}}]);


return FPSController;
}(_eventHandler2.default);

exports.default=FPSController;
module.exports=exports['default'];

/***/},
/* 67 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * XHR based logger
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */

var _logger=__webpack_require__(0);

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var _window=window,
performance=_window.performance,
XMLHttpRequest=_window.XMLHttpRequest;

var XhrLoader=function(){
function XhrLoader(config){
_classCallCheck(this,XhrLoader);

if(config&&config.xhrSetup){
this.xhrSetup=config.xhrSetup;
}
}

_createClass(XhrLoader,[{
key:'destroy',
value:function destroy(){
this.abort();
this.loader=null;
}},
{
key:'abort',
value:function abort(){
var loader=this.loader;
if(loader&&loader.readyState!==4){
this.stats.aborted=true;
loader.abort();
}

window.clearTimeout(this.requestTimeout);
this.requestTimeout=null;
window.clearTimeout(this.retryTimeout);
this.retryTimeout=null;
}},
{
key:'load',
value:function load(context,config,callbacks){
this.context=context;
this.config=config;
this.callbacks=callbacks;
this.stats={trequest:performance.now(),retry:0};
this.retryDelay=config.retryDelay;
this.loadInternal();
}},
{
key:'loadInternal',
value:function loadInternal(){
var xhr=void 0,
context=this.context;
xhr=this.loader=new XMLHttpRequest();

var stats=this.stats;
stats.tfirst=0;
stats.loaded=0;
var xhrSetup=this.xhrSetup;

try{
if(xhrSetup){
try{
xhrSetup(xhr,context.url);
}catch(e){
// fix xhrSetup: (xhr, url) => {xhr.setRequestHeader("Content-Language", "test");}
// not working, as xhr.setRequestHeader expects xhr.readyState === OPEN
xhr.open('GET',context.url,true);
xhrSetup(xhr,context.url);
}
}
if(!xhr.readyState){
xhr.open('GET',context.url,true);
}
}catch(e){
// IE11 throws an exception on xhr.open if attempting to access an HTTP resource over HTTPS
this.callbacks.onError({code:xhr.status,text:e.message},context,xhr);
return;
}

if(context.rangeEnd){
xhr.setRequestHeader('Range','bytes='+context.rangeStart+'-'+(context.rangeEnd-1));
}

xhr.onreadystatechange=this.readystatechange.bind(this);
xhr.onprogress=this.loadprogress.bind(this);
xhr.responseType=context.responseType;

// setup timeout before we perform request
this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout);
xhr.send();
}},
{
key:'readystatechange',
value:function readystatechange(event){
var xhr=event.currentTarget,
readyState=xhr.readyState,
stats=this.stats,
context=this.context,
config=this.config;

// don't proceed if xhr has been aborted
if(stats.aborted){
return;
}

// >= HEADERS_RECEIVED
if(readyState>=2){
// clear xhr timeout and rearm it if readyState less than 4
window.clearTimeout(this.requestTimeout);
if(stats.tfirst===0){
stats.tfirst=Math.max(performance.now(),stats.trequest);
}

if(readyState===4){
var status=xhr.status;
// http status between 200 to 299 are all successful
if(status>=200&&status<300){
stats.tload=Math.max(stats.tfirst,performance.now());
var data=void 0,
len=void 0;
if(context.responseType==='arraybuffer'){
data=xhr.response;
len=data.byteLength;
}else{
data=xhr.responseText;
len=data.length;
}
stats.loaded=stats.total=len;
var response={url:xhr.responseURL,data:data};
this.callbacks.onSuccess(response,stats,context,xhr);
}else{
// if max nb of retries reached or if http status between 400 and 499 (such error cannot be recovered, retrying is useless), return error
if(stats.retry>=config.maxRetry||status>=400&&status<499){
_logger.logger.error(status+' while loading '+context.url);
this.callbacks.onError({code:status,text:xhr.statusText},context,xhr);
}else{
// retry
_logger.logger.warn(status+' while loading '+context.url+', retrying in '+this.retryDelay+'...');
// aborts and resets internal state
this.destroy();
// schedule retry
this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay);
// set exponential backoff
this.retryDelay=Math.min(2*this.retryDelay,config.maxRetryDelay);
stats.retry++;
}
}
}else{
// readyState >= 2 AND readyState !==4 (readyState = HEADERS_RECEIVED || LOADING) rearm timeout as xhr not finished yet
this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),config.timeout);
}
}
}},
{
key:'loadtimeout',
value:function loadtimeout(){
_logger.logger.warn('timeout while loading '+this.context.url);
this.callbacks.onTimeout(this.stats,this.context,null);
}},
{
key:'loadprogress',
value:function loadprogress(event){
var xhr=event.currentTarget,
stats=this.stats;

stats.loaded=event.loaded;
if(event.lengthComputable){
stats.total=event.total;
}

var onProgress=this.callbacks.onProgress;
if(onProgress){
// third arg is to provide on progress data
onProgress(stats,this.context,null,xhr);
}
}}]);


return XhrLoader;
}();

exports.default=XhrLoader;
module.exports=exports['default'];

/***/},
/* 68 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _taskLoop=__webpack_require__(28);

var _taskLoop2=_interopRequireDefault(_taskLoop);

var _logger=__webpack_require__(0);

var _errors=__webpack_require__(2);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

/**
 * @class AudioTrackController
 * @implements {EventHandler}
 *
 * Handles main manifest and audio-track metadata loaded,
 * owns and exposes the selectable audio-tracks data-models.
 *
 * Exposes internal interface to select available audio-tracks.
 *
 * Handles errors on loading audio-track playlists. Manages fallback mechanism
 * with redundants tracks (group-IDs).
 *
 * Handles level-loading and group-ID switches for video (fallback on video levels),
 * and eventually adapts the audio-track group-ID to match.
 *
 * @fires AUDIO_TRACK_LOADING
 * @fires AUDIO_TRACK_SWITCHING
 * @fires AUDIO_TRACKS_UPDATED
 * @fires ERROR
 *
 */
var AudioTrackController=function(_TaskLoop){
_inherits(AudioTrackController,_TaskLoop);

function AudioTrackController(hls){
_classCallCheck(this,AudioTrackController);

/**
     * @private
     * Currently selected index in `tracks`
     * @member {number} trackId
     */
var _this=_possibleConstructorReturn(this,(AudioTrackController.__proto__||Object.getPrototypeOf(AudioTrackController)).call(this,hls,_events2.default.MANIFEST_LOADING,_events2.default.MANIFEST_PARSED,_events2.default.AUDIO_TRACK_LOADED,_events2.default.AUDIO_TRACK_SWITCHED,_events2.default.LEVEL_LOADED,_events2.default.ERROR));

_this._trackId=-1;

/**
     * @private
     * If should select tracks according to default track attribute
     * @member {boolean} _selectDefaultTrack
     */
_this._selectDefaultTrack=true;

/**
     * @public
     * All tracks available
     * @member {AudioTrack[]}
     */
_this.tracks=[];

/**
     * @public
     * List of blacklisted audio track IDs (that have caused failure)
     * @member {number[]}
     */
_this.trackIdBlacklist=Object.create(null);

/**
     * @public
     * The currently running group ID for audio
     * (we grab this on manifest-parsed and new level-loaded)
     * @member {string}
     */
_this.audioGroupId=null;
return _this;
}

/**
   * Reset audio tracks on new manifest loading.
   */


_createClass(AudioTrackController,[{
key:'onManifestLoading',
value:function onManifestLoading(){
this.tracks=[];
this._trackId=-1;
this._selectDefaultTrack=true;
}

/**
     * Store tracks data from manifest parsed data.
     *
     * Trigger AUDIO_TRACKS_UPDATED event.
     *
     * @param {*} data
     */},

{
key:'onManifestParsed',
value:function onManifestParsed(data){
var tracks=this.tracks=data.audioTracks||[];
this.hls.trigger(_events2.default.AUDIO_TRACKS_UPDATED,{audioTracks:tracks});
}

/**
     * Store track details of loaded track in our data-model.
     *
     * Set-up metadata update interval task for live-mode streams.
     *
     * @param {} data
     */},

{
key:'onAudioTrackLoaded',
value:function onAudioTrackLoaded(data){
if(data.id>=this.tracks.length){
_logger.logger.warn('Invalid audio track id:',data.id);
return;
}

_logger.logger.log('audioTrack '+data.id+' loaded');

this.tracks[data.id].details=data.details;

// check if current playlist is a live playlist
// and if we have already our reload interval setup
if(data.details.live&&!this.hasInterval()){
// if live playlist we will have to reload it periodically
// set reload period to playlist target duration
var updatePeriodMs=data.details.targetduration*1000;
this.setInterval(updatePeriodMs);
}

if(!data.details.live&&this.hasInterval()){
// playlist is not live and timer is scheduled: cancel it
this.clearInterval();
}
}

/**
     * Update the internal group ID to any audio-track we may have set manually
     * or because of a failure-handling fallback.
     *
     * Quality-levels should update to that group ID in this case.
     *
     * @param {*} data
     */},

{
key:'onAudioTrackSwitched',
value:function onAudioTrackSwitched(data){
var audioGroupId=this.tracks[data.id].groupId;
if(audioGroupId&&this.audioGroupId!==audioGroupId){
this.audioGroupId=audioGroupId;
}
}

/**
     * When a level gets loaded, if it has redundant audioGroupIds (in the same ordinality as it's redundant URLs)
     * we are setting our audio-group ID internally to the one set, if it is different from the group ID currently set.
     *
     * If group-ID got update, we re-select the appropriate audio-track with this group-ID matching the currently
     * selected one (based on NAME property).
     *
     * @param {*} data
     */},

{
key:'onLevelLoaded',
value:function onLevelLoaded(data){
// FIXME: crashes because currentLevel is undefined
// const levelInfo = this.hls.levels[this.hls.currentLevel];

var levelInfo=this.hls.levels[data.level];

if(!levelInfo.audioGroupIds){
return;
}

var audioGroupId=levelInfo.audioGroupIds[levelInfo.urlId];
if(this.audioGroupId!==audioGroupId){
this.audioGroupId=audioGroupId;
this._selectInitialAudioTrack();
}
}

/**
     * Handle network errors loading audio track manifests
     * and also pausing on any netwok errors.
     *
     * @param {ErrorEventData} data
     */},

{
key:'onError',
value:function onError(data){
// Only handle network errors
if(data.type!==_errors.ErrorTypes.NETWORK_ERROR){
return;
}

// If fatal network error, cancel update task
if(data.fatal){
this.clearInterval();
}

// If not an audio-track loading error don't handle further
if(data.details!==_errors.ErrorDetails.AUDIO_TRACK_LOAD_ERROR){
return;
}

_logger.logger.warn('Network failure on audio-track id:',data.context.id);
this._handleLoadError();
}

/**
     * @type {AudioTrack[]} Audio-track list we own
     */},

{
key:'_setAudioTrack',


/**
     * @private
     * @param {number} newId
     */
value:function _setAudioTrack(newId){
// noop on same audio track id as already set
if(this._trackId===newId&&this.tracks[this._trackId].details){
_logger.logger.debug('Same id as current audio-track passed, and track details available -> no-op');
return;
}

// check if level idx is valid
if(newId<0||newId>=this.tracks.length){
_logger.logger.warn('Invalid id passed to audio-track controller');
return;
}

var audioTrack=this.tracks[newId];

_logger.logger.log('Now switching to audio-track index '+newId);

// stopping live reloading timer if any
this.clearInterval();
this._trackId=newId;

var url=audioTrack.url,
type=audioTrack.type,
id=audioTrack.id;

this.hls.trigger(_events2.default.AUDIO_TRACK_SWITCHING,{id:id,type:type,url:url});
this._loadTrackDetailsIfNeeded(audioTrack);
}

/**
     * @override
     */},

{
key:'doTick',
value:function doTick(){
this._updateTrack(this._trackId);
}

/**
     * Select initial track
     * @private
     */},

{
key:'_selectInitialAudioTrack',
value:function _selectInitialAudioTrack(){
var _this2=this;

var tracks=this.tracks;
if(!tracks.length){
return;
}

var currentAudioTrack=this.tracks[this._trackId];

var name=null;
if(currentAudioTrack){
name=currentAudioTrack.name;
}

// Pre-select default tracks if there are any
if(this._selectDefaultTrack){
var defaultTracks=tracks.filter(function(track){
return track.default;
});
if(defaultTracks.length){
tracks=defaultTracks;
}else{
_logger.logger.warn('No default audio tracks defined');
}
}

var trackFound=false;

var traverseTracks=function traverseTracks(){
// Select track with right group ID
tracks.forEach(function(track){
if(trackFound){
return;
}
// We need to match the (pre-)selected group ID
// and the NAME of the current track.
if((!_this2.audioGroupId||track.groupId===_this2.audioGroupId)&&(!name||name===track.name)){
// If there was a previous track try to stay with the same `NAME`.
// It should be unique across tracks of same group, and consistent through redundant track groups.
_this2._setAudioTrack(track.id);
trackFound=true;
}
});
};

traverseTracks();

if(!trackFound){
name=null;
traverseTracks();
}

if(!trackFound){
_logger.logger.error('No track found for running audio group-ID: '+this.audioGroupId);

this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.MEDIA_ERROR,
details:_errors.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,
fatal:true});

}
}

/**
     * @private
     * @param {AudioTrack} audioTrack
     * @returns {boolean}
     */},

{
key:'_needsTrackLoading',
value:function _needsTrackLoading(audioTrack){
var details=audioTrack.details,
url=audioTrack.url;


if(!details||details.live){
// check if we face an audio track embedded in main playlist (audio track without URI attribute)
return!!url;
}

return false;
}

/**
     * @private
     * @param {AudioTrack} audioTrack
     */},

{
key:'_loadTrackDetailsIfNeeded',
value:function _loadTrackDetailsIfNeeded(audioTrack){
if(this._needsTrackLoading(audioTrack)){
var url=audioTrack.url,
id=audioTrack.id;
// track not retrieved yet, or live playlist we need to (re)load it

_logger.logger.log('loading audio-track playlist for id: '+id);
this.hls.trigger(_events2.default.AUDIO_TRACK_LOADING,{url:url,id:id});
}
}

/**
     * @private
     * @param {number} newId
     */},

{
key:'_updateTrack',
value:function _updateTrack(newId){
// check if level idx is valid
if(newId<0||newId>=this.tracks.length){
return;
}

// stopping live reloading timer if any
this.clearInterval();
this._trackId=newId;
_logger.logger.log('trying to update audio-track '+newId);
var audioTrack=this.tracks[newId];
this._loadTrackDetailsIfNeeded(audioTrack);
}

/**
     * @private
     */},

{
key:'_handleLoadError',
value:function _handleLoadError(){
// First, let's black list current track id
this.trackIdBlacklist[this._trackId]=true;

// Let's try to fall back on a functional audio-track with the same group ID
var previousId=this._trackId;
var _tracks$previousId=this.tracks[previousId],
name=_tracks$previousId.name,
language=_tracks$previousId.language,
groupId=_tracks$previousId.groupId;


_logger.logger.warn('Loading failed on audio track id: '+previousId+', group-id: '+groupId+', name/language: "'+name+'" / "'+language+'"');

// Find a non-blacklisted track ID with the same NAME
// At least a track that is not blacklisted, thus on another group-ID.
var newId=previousId;
for(var i=0;i<this.tracks.length;i++){
if(this.trackIdBlacklist[i]){
continue;
}
var newTrack=this.tracks[i];
if(newTrack.name===name){
newId=i;
break;
}
}

if(newId===previousId){
_logger.logger.warn('No fallback audio-track found for name/language: "'+name+'" / "'+language+'"');
return;
}

_logger.logger.log('Attempting audio-track fallback id:',newId,'group-id:',this.tracks[newId].groupId);

this._setAudioTrack(newId);
}},
{
key:'audioTracks',
get:function get(){
return this.tracks;
}

/**
     * @type {number} Index into audio-tracks list of currently selected track.
     */},

{
key:'audioTrack',
get:function get(){
return this._trackId;
}

/**
     * Select current track by index
     */,

set:function set(newId){
this._setAudioTrack(newId);
// If audio track is selected from API then don't choose from the manifest default track
this._selectDefaultTrack=false;
}}]);


return AudioTrackController;
}(_taskLoop2.default);

exports.default=AudioTrackController;
module.exports=exports['default'];

/***/},
/* 69 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _binarySearch=__webpack_require__(9);

var _binarySearch2=_interopRequireDefault(_binarySearch);

var _bufferHelper=__webpack_require__(4);

var _demuxer=__webpack_require__(19);

var _demuxer2=_interopRequireDefault(_demuxer);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _levelHelper=__webpack_require__(7);

var LevelHelper=_interopRequireWildcard(_levelHelper);

var _timeRanges=__webpack_require__(25);

var _timeRanges2=_interopRequireDefault(_timeRanges);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

var _discontinuities=__webpack_require__(26);

var _fragmentTracker=__webpack_require__(6);

var _fragment=__webpack_require__(11);

var _fragment2=_interopRequireDefault(_fragment);

var _baseStreamController=__webpack_require__(14);

var _baseStreamController2=_interopRequireDefault(_baseStreamController);

function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Audio Stream Controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

var _window=window,
performance=_window.performance;


var TICK_INTERVAL=100;// how often to tick in ms

var AudioStreamController=function(_BaseStreamController){
_inherits(AudioStreamController,_BaseStreamController);

function AudioStreamController(hls,fragmentTracker){
_classCallCheck(this,AudioStreamController);

var _this=_possibleConstructorReturn(this,(AudioStreamController.__proto__||Object.getPrototypeOf(AudioStreamController)).call(this,hls,_events2.default.MEDIA_ATTACHED,_events2.default.MEDIA_DETACHING,_events2.default.AUDIO_TRACKS_UPDATED,_events2.default.AUDIO_TRACK_SWITCHING,_events2.default.AUDIO_TRACK_LOADED,_events2.default.KEY_LOADED,_events2.default.FRAG_LOADED,_events2.default.FRAG_PARSING_INIT_SEGMENT,_events2.default.FRAG_PARSING_DATA,_events2.default.FRAG_PARSED,_events2.default.ERROR,_events2.default.BUFFER_RESET,_events2.default.BUFFER_CREATED,_events2.default.BUFFER_APPENDED,_events2.default.BUFFER_FLUSHED,_events2.default.INIT_PTS_FOUND));

_this.fragmentTracker=fragmentTracker;
_this.config=hls.config;
_this.audioCodecSwap=false;
_this._state=_baseStreamController.State.STOPPED;
_this.initPTS=[];
_this.waitingFragment=null;
_this.videoTrackCC=null;
return _this;
}

// Signal that video PTS was found


_createClass(AudioStreamController,[{
key:'onInitPtsFound',
value:function onInitPtsFound(data){
var demuxerId=data.id,
cc=data.frag.cc,
initPTS=data.initPTS;
if(demuxerId==='main'){
// Always update the new INIT PTS
// Can change due level switch
this.initPTS[cc]=initPTS;
this.videoTrackCC=cc;
_logger.logger.log('InitPTS for cc: '+cc+' found from video track: '+initPTS);

// If we are waiting we need to demux/remux the waiting frag
// With the new initPTS
if(this.state===_baseStreamController.State.WAITING_INIT_PTS){
this.tick();
}
}
}},
{
key:'startLoad',
value:function startLoad(startPosition){
if(this.tracks){
var lastCurrentTime=this.lastCurrentTime;
this.stopLoad();
this.setInterval(TICK_INTERVAL);
this.fragLoadError=0;
if(lastCurrentTime>0&&startPosition===-1){
_logger.logger.log('audio:override startPosition with lastCurrentTime @'+lastCurrentTime.toFixed(3));
this.state=_baseStreamController.State.IDLE;
}else{
this.lastCurrentTime=this.startPosition?this.startPosition:startPosition;
this.state=_baseStreamController.State.STARTING;
}
this.nextLoadPosition=this.startPosition=this.lastCurrentTime;
this.tick();
}else{
this.startPosition=startPosition;
this.state=_baseStreamController.State.STOPPED;
}
}},
{
key:'doTick',
value:function doTick(){
var pos=void 0,
track=void 0,
trackDetails=void 0,
hls=this.hls,
config=hls.config;
// logger.log('audioStream:' + this.state);
switch(this.state){
case _baseStreamController.State.ERROR:
// don't do anything in error state to avoid breaking further ...
case _baseStreamController.State.PAUSED:
// don't do anything in paused state either ...
case _baseStreamController.State.BUFFER_FLUSHING:
break;
case _baseStreamController.State.STARTING:
this.state=_baseStreamController.State.WAITING_TRACK;
this.loadedmetadata=false;
break;
case _baseStreamController.State.IDLE:
var tracks=this.tracks;
// audio tracks not received => exit loop
if(!tracks){
break;
}

// if video not attached AND
// start fragment already requested OR start frag prefetch disable
// exit loop
// => if media not attached but start frag prefetch is enabled and start frag not requested yet, we will not exit loop
if(!this.media&&(this.startFragRequested||!config.startFragPrefetch)){
break;
}

// determine next candidate fragment to be loaded, based on current position and
//  end of buffer position
// if we have not yet loaded any fragment, start loading from start position
if(this.loadedmetadata){
pos=this.media.currentTime;
}else{
pos=this.nextLoadPosition;
if(pos===undefined){
break;
}
}
var media=this.mediaBuffer?this.mediaBuffer:this.media,
videoBuffer=this.videoBuffer?this.videoBuffer:this.media,
bufferInfo=_bufferHelper.BufferHelper.bufferInfo(media,pos,config.maxBufferHole),
mainBufferInfo=_bufferHelper.BufferHelper.bufferInfo(videoBuffer,pos,config.maxBufferHole),
bufferLen=bufferInfo.len,
bufferEnd=bufferInfo.end,
fragPrevious=this.fragPrevious,

// ensure we buffer at least config.maxBufferLength (default 30s) or config.maxMaxBufferLength (default: 600s)
// whichever is smaller.
// once we reach that threshold, don't buffer more than video (mainBufferInfo.len)
maxConfigBuffer=Math.min(config.maxBufferLength,config.maxMaxBufferLength),
maxBufLen=Math.max(maxConfigBuffer,mainBufferInfo.len),
audioSwitch=this.audioSwitch,
trackId=this.trackId;

// if buffer length is less than maxBufLen try to load a new fragment
if((bufferLen<maxBufLen||audioSwitch)&&trackId<tracks.length){
trackDetails=tracks[trackId].details;
// if track info not retrieved yet, switch state and wait for track retrieval
if(typeof trackDetails==='undefined'){
this.state=_baseStreamController.State.WAITING_TRACK;
break;
}

if(!audioSwitch&&this._streamEnded(bufferInfo,trackDetails)){
this.hls.trigger(_events2.default.BUFFER_EOS,{type:'audio'});
this.state=_baseStreamController.State.ENDED;
return;
}

// find fragment index, contiguous with end of buffer position
var fragments=trackDetails.fragments,
fragLen=fragments.length,
start=fragments[0].start,
end=fragments[fragLen-1].start+fragments[fragLen-1].duration,
frag=void 0;

// When switching audio track, reload audio as close as possible to currentTime
if(audioSwitch){
if(trackDetails.live&&!trackDetails.PTSKnown){
_logger.logger.log('switching audiotrack, live stream, unknown PTS,load first fragment');
bufferEnd=0;
}else{
bufferEnd=pos;
// if currentTime (pos) is less than alt audio playlist start time, it means that alt audio is ahead of currentTime
if(trackDetails.PTSKnown&&pos<start){
// if everything is buffered from pos to start or if audio buffer upfront, let's seek to start
if(bufferInfo.end>start||bufferInfo.nextStart){
_logger.logger.log('alt audio track ahead of main track, seek to start of alt audio track');
this.media.currentTime=start+0.05;
}else{
return;
}
}
}
}
if(trackDetails.initSegment&&!trackDetails.initSegment.data){
frag=trackDetails.initSegment;
}// eslint-disable-line brace-style
// if bufferEnd before start of playlist, load first fragment
else if(bufferEnd<=start){
frag=fragments[0];
if(this.videoTrackCC!==null&&frag.cc!==this.videoTrackCC){
// Ensure we find a fragment which matches the continuity of the video track
frag=(0,_discontinuities.findFragWithCC)(fragments,this.videoTrackCC);
}
if(trackDetails.live&&frag.loadIdx&&frag.loadIdx===this.fragLoadIdx){
// we just loaded this first fragment, and we are still lagging behind the start of the live playlist
// let's force seek to start
var nextBuffered=bufferInfo.nextStart?bufferInfo.nextStart:start;
_logger.logger.log('no alt audio available @currentTime:'+this.media.currentTime+', seeking @'+(nextBuffered+0.05));
this.media.currentTime=nextBuffered+0.05;
return;
}
}else{
var foundFrag=void 0;
var maxFragLookUpTolerance=config.maxFragLookUpTolerance;
var fragNext=fragPrevious?fragments[fragPrevious.sn-fragments[0].sn+1]:undefined;
var fragmentWithinToleranceTest=function fragmentWithinToleranceTest(candidate){
// offset should be within fragment boundary - config.maxFragLookUpTolerance
// this is to cope with situations like
// bufferEnd = 9.991
// frag[Ø] : [0,10]
// frag[1] : [10,20]
// bufferEnd is within frag[0] range ... although what we are expecting is to return frag[1] here
//              frag start               frag start+duration
//                  |-----------------------------|
//              <--->                         <--->
//  ...--------><-----------------------------><---------....
// previous frag         matching fragment         next frag
//  return -1             return 0                 return 1
// logger.log(`level/sn/start/end/bufEnd:${level}/${candidate.sn}/${candidate.start}/${(candidate.start+candidate.duration)}/${bufferEnd}`);
// Set the lookup tolerance to be small enough to detect the current segment - ensures we don't skip over very small segments
var candidateLookupTolerance=Math.min(maxFragLookUpTolerance,candidate.duration);
if(candidate.start+candidate.duration-candidateLookupTolerance<=bufferEnd){
return 1;
}else if(candidate.start-candidateLookupTolerance>bufferEnd&&candidate.start){
// if maxFragLookUpTolerance will have negative value then don't return -1 for first element
return-1;
}

return 0;
};

if(bufferEnd<end){
if(bufferEnd>end-maxFragLookUpTolerance){
maxFragLookUpTolerance=0;
}

// Prefer the next fragment if it's within tolerance
if(fragNext&&!fragmentWithinToleranceTest(fragNext)){
foundFrag=fragNext;
}else{
foundFrag=_binarySearch2.default.search(fragments,fragmentWithinToleranceTest);
}
}else{
// reach end of playlist
foundFrag=fragments[fragLen-1];
}
if(foundFrag){
frag=foundFrag;
start=foundFrag.start;
// logger.log('find SN matching with pos:' +  bufferEnd + ':' + frag.sn);
if(fragPrevious&&frag.level===fragPrevious.level&&frag.sn===fragPrevious.sn){
if(frag.sn<trackDetails.endSN){
frag=fragments[frag.sn+1-trackDetails.startSN];
_logger.logger.log('SN just loaded, load next one: '+frag.sn);
}else{
frag=null;
}
}
}
}
if(frag){
// logger.log('      loading frag ' + i +',pos/bufEnd:' + pos.toFixed(3) + '/' + bufferEnd.toFixed(3));
if(frag.encrypted){
_logger.logger.log('Loading key for '+frag.sn+' of ['+trackDetails.startSN+' ,'+trackDetails.endSN+'],track '+trackId);
this.state=_baseStreamController.State.KEY_LOADING;
hls.trigger(_events2.default.KEY_LOADING,{frag:frag});
}else{
_logger.logger.log('Loading '+frag.sn+', cc: '+frag.cc+' of ['+trackDetails.startSN+' ,'+trackDetails.endSN+'],track '+trackId+', currentTime:'+pos+',bufferEnd:'+bufferEnd.toFixed(3));
// only load if fragment is not loaded or if in audio switch
// we force a frag loading in audio switch as fragment tracker might not have evicted previous frags in case of quick audio switch
this.fragCurrent=frag;
if(audioSwitch||this.fragmentTracker.getState(frag)===_fragmentTracker.FragmentState.NOT_LOADED){
this.startFragRequested=true;
if(Number.isFinite(frag.sn)){
this.nextLoadPosition=frag.start+frag.duration;
}

hls.trigger(_events2.default.FRAG_LOADING,{frag:frag});
this.state=_baseStreamController.State.FRAG_LOADING;
}
}
}
}
break;
case _baseStreamController.State.WAITING_TRACK:
track=this.tracks[this.trackId];
// check if playlist is already loaded
if(track&&track.details){
this.state=_baseStreamController.State.IDLE;
}

break;
case _baseStreamController.State.FRAG_LOADING_WAITING_RETRY:
var now=performance.now();
var retryDate=this.retryDate;
media=this.media;
var isSeeking=media&&media.seeking;
// if current time is gt than retryDate, or if media seeking let's switch to IDLE state to retry loading
if(!retryDate||now>=retryDate||isSeeking){
_logger.logger.log('audioStreamController: retryDate reached, switch back to IDLE state');
this.state=_baseStreamController.State.IDLE;
}
break;
case _baseStreamController.State.WAITING_INIT_PTS:
var videoTrackCC=this.videoTrackCC;
if(this.initPTS[videoTrackCC]===undefined){
break;
}

// Ensure we don't get stuck in the WAITING_INIT_PTS state if the waiting frag CC doesn't match any initPTS
var waitingFrag=this.waitingFragment;
if(waitingFrag){
var waitingFragCC=waitingFrag.frag.cc;
if(videoTrackCC!==waitingFragCC){
track=this.tracks[this.trackId];
if(track.details&&track.details.live){
_logger.logger.warn('Waiting fragment CC ('+waitingFragCC+') does not match video track CC ('+videoTrackCC+')');
this.waitingFragment=null;
this.state=_baseStreamController.State.IDLE;
}
}else{
this.state=_baseStreamController.State.FRAG_LOADING;
this.onFragLoaded(this.waitingFragment);
this.waitingFragment=null;
}
}else{
this.state=_baseStreamController.State.IDLE;
}

break;
case _baseStreamController.State.STOPPED:
case _baseStreamController.State.FRAG_LOADING:
case _baseStreamController.State.PARSING:
case _baseStreamController.State.PARSED:
case _baseStreamController.State.ENDED:
break;
default:
break;}

}},
{
key:'onMediaAttached',
value:function onMediaAttached(data){
var media=this.media=this.mediaBuffer=data.media;
this.onvseeking=this.onMediaSeeking.bind(this);
this.onvended=this.onMediaEnded.bind(this);
media.addEventListener('seeking',this.onvseeking);
media.addEventListener('ended',this.onvended);
var config=this.config;
if(this.tracks&&config.autoStartLoad){
this.startLoad(config.startPosition);
}
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
var media=this.media;
if(media&&media.ended){
_logger.logger.log('MSE detaching and video ended, reset startPosition');
this.startPosition=this.lastCurrentTime=0;
}

// remove video listeners
if(media){
media.removeEventListener('seeking',this.onvseeking);
media.removeEventListener('ended',this.onvended);
this.onvseeking=this.onvseeked=this.onvended=null;
}
this.media=this.mediaBuffer=this.videoBuffer=null;
this.loadedmetadata=false;
this.stopLoad();
}},
{
key:'onAudioTracksUpdated',
value:function onAudioTracksUpdated(data){
_logger.logger.log('audio tracks updated');
this.tracks=data.audioTracks;
}},
{
key:'onAudioTrackSwitching',
value:function onAudioTrackSwitching(data){
// if any URL found on new audio track, it is an alternate audio track
var altAudio=!!data.url;
this.trackId=data.id;

this.fragCurrent=null;
this.state=_baseStreamController.State.PAUSED;
this.waitingFragment=null;
// destroy useless demuxer when switching audio to main
if(!altAudio){
if(this.demuxer){
this.demuxer.destroy();
this.demuxer=null;
}
}else{
// switching to audio track, start timer if not already started
this.setInterval(TICK_INTERVAL);
}

// should we switch tracks ?
if(altAudio){
this.audioSwitch=true;
// main audio track are handled by stream-controller, just do something if switching to alt audio track
this.state=_baseStreamController.State.IDLE;
}
this.tick();
}},
{
key:'onAudioTrackLoaded',
value:function onAudioTrackLoaded(data){
var newDetails=data.details,
trackId=data.id,
track=this.tracks[trackId],
duration=newDetails.totalduration,
sliding=0;

_logger.logger.log('track '+trackId+' loaded ['+newDetails.startSN+','+newDetails.endSN+'],duration:'+duration);

if(newDetails.live){
var curDetails=track.details;
if(curDetails&&newDetails.fragments.length>0){
// we already have details for that level, merge them
LevelHelper.mergeDetails(curDetails,newDetails);
sliding=newDetails.fragments[0].start;
// TODO
// this.liveSyncPosition = this.computeLivePosition(sliding, curDetails);
if(newDetails.PTSKnown){
_logger.logger.log('live audio playlist sliding:'+sliding.toFixed(3));
}else{
_logger.logger.log('live audio playlist - outdated PTS, unknown sliding');
}
}else{
newDetails.PTSKnown=false;
_logger.logger.log('live audio playlist - first load, unknown sliding');
}
}else{
newDetails.PTSKnown=false;
}
track.details=newDetails;

// compute start position
if(!this.startFragRequested){
// compute start position if set to -1. use it straight away if value is defined
if(this.startPosition===-1){
// first, check if start time offset has been set in playlist, if yes, use this value
var startTimeOffset=newDetails.startTimeOffset;
if(Number.isFinite(startTimeOffset)){
_logger.logger.log('start time offset found in playlist, adjust startPosition to '+startTimeOffset);
this.startPosition=startTimeOffset;
}else{
this.startPosition=0;
}
}
this.nextLoadPosition=this.startPosition;
}
// only switch batck to IDLE state if we were waiting for track to start downloading a new fragment
if(this.state===_baseStreamController.State.WAITING_TRACK){
this.state=_baseStreamController.State.IDLE;
}

// trigger handler right now
this.tick();
}},
{
key:'onKeyLoaded',
value:function onKeyLoaded(){
if(this.state===_baseStreamController.State.KEY_LOADING){
this.state=_baseStreamController.State.IDLE;
this.tick();
}
}},
{
key:'onFragLoaded',
value:function onFragLoaded(data){
var fragCurrent=this.fragCurrent,
fragLoaded=data.frag;
if(this.state===_baseStreamController.State.FRAG_LOADING&&fragCurrent&&fragLoaded.type==='audio'&&fragLoaded.level===fragCurrent.level&&fragLoaded.sn===fragCurrent.sn){
var track=this.tracks[this.trackId],
details=track.details,
duration=details.totalduration,
trackId=fragCurrent.level,
sn=fragCurrent.sn,
cc=fragCurrent.cc,
audioCodec=this.config.defaultAudioCodec||track.audioCodec||'mp4a.40.2',
stats=this.stats=data.stats;
if(sn==='initSegment'){
this.state=_baseStreamController.State.IDLE;

stats.tparsed=stats.tbuffered=performance.now();
details.initSegment.data=data.payload;
this.hls.trigger(_events2.default.FRAG_BUFFERED,{stats:stats,frag:fragCurrent,id:'audio'});
this.tick();
}else{
this.state=_baseStreamController.State.PARSING;
// transmux the MPEG-TS data to ISO-BMFF segments
this.appended=false;
if(!this.demuxer){
this.demuxer=new _demuxer2.default(this.hls,'audio');
}

// Check if we have video initPTS
// If not we need to wait for it
var initPTS=this.initPTS[cc];
var initSegmentData=details.initSegment?details.initSegment.data:[];
if(details.initSegment||initPTS!==undefined){
this.pendingBuffering=true;
_logger.logger.log('Demuxing '+sn+' of ['+details.startSN+' ,'+details.endSN+'],track '+trackId);
// time Offset is accurate if level PTS is known, or if playlist is not sliding (not live)
var accurateTimeOffset=false;// details.PTSKnown || !details.live;
this.demuxer.push(data.payload,initSegmentData,audioCodec,null,fragCurrent,duration,accurateTimeOffset,initPTS);
}else{
_logger.logger.log('unknown video PTS for continuity counter '+cc+', waiting for video PTS before demuxing audio frag '+sn+' of ['+details.startSN+' ,'+details.endSN+'],track '+trackId);
this.waitingFragment=data;
this.state=_baseStreamController.State.WAITING_INIT_PTS;
}
}
}
this.fragLoadError=0;
}},
{
key:'onFragParsingInitSegment',
value:function onFragParsingInitSegment(data){
var fragCurrent=this.fragCurrent;
var fragNew=data.frag;
if(fragCurrent&&data.id==='audio'&&fragNew.sn===fragCurrent.sn&&fragNew.level===fragCurrent.level&&this.state===_baseStreamController.State.PARSING){
var tracks=data.tracks,
track=void 0;

// delete any video track found on audio demuxer
if(tracks.video){
delete tracks.video;
}

// include levelCodec in audio and video tracks
track=tracks.audio;
if(track){
track.levelCodec=track.codec;
track.id=data.id;
this.hls.trigger(_events2.default.BUFFER_CODECS,tracks);
_logger.logger.log('audio track:audio,container:'+track.container+',codecs[level/parsed]=['+track.levelCodec+'/'+track.codec+']');
var initSegment=track.initSegment;
if(initSegment){
var appendObj={type:'audio',data:initSegment,parent:'audio',content:'initSegment'};
if(this.audioSwitch){
this.pendingData=[appendObj];
}else{
this.appended=true;
// arm pending Buffering flag before appending a segment
this.pendingBuffering=true;
this.hls.trigger(_events2.default.BUFFER_APPENDING,appendObj);
}
}
// trigger handler right now
this.tick();
}
}
}},
{
key:'onFragParsingData',
value:function onFragParsingData(data){
var _this2=this;

var fragCurrent=this.fragCurrent;
var fragNew=data.frag;
if(fragCurrent&&data.id==='audio'&&data.type==='audio'&&fragNew.sn===fragCurrent.sn&&fragNew.level===fragCurrent.level&&this.state===_baseStreamController.State.PARSING){
var trackId=this.trackId,
track=this.tracks[trackId],
hls=this.hls;

if(!Number.isFinite(data.endPTS)){
data.endPTS=data.startPTS+fragCurrent.duration;
data.endDTS=data.startDTS+fragCurrent.duration;
}

fragCurrent.addElementaryStream(_fragment2.default.ElementaryStreamTypes.AUDIO);

_logger.logger.log('parsed '+data.type+',PTS:['+data.startPTS.toFixed(3)+','+data.endPTS.toFixed(3)+'],DTS:['+data.startDTS.toFixed(3)+'/'+data.endDTS.toFixed(3)+'],nb:'+data.nb);
LevelHelper.updateFragPTSDTS(track.details,fragCurrent,data.startPTS,data.endPTS);

var audioSwitch=this.audioSwitch,
media=this.media,
appendOnBufferFlush=false;
// Only flush audio from old audio tracks when PTS is known on new audio track
if(audioSwitch&&media){
if(media.readyState){
var currentTime=media.currentTime;
_logger.logger.log('switching audio track : currentTime:'+currentTime);
if(currentTime>=data.startPTS){
_logger.logger.log('switching audio track : flushing all audio');
this.state=_baseStreamController.State.BUFFER_FLUSHING;
hls.trigger(_events2.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:'audio'});
appendOnBufferFlush=true;
// Lets announce that the initial audio track switch flush occur
this.audioSwitch=false;
hls.trigger(_events2.default.AUDIO_TRACK_SWITCHED,{id:trackId});
}
}else{
// Lets announce that the initial audio track switch flush occur
this.audioSwitch=false;
hls.trigger(_events2.default.AUDIO_TRACK_SWITCHED,{id:trackId});
}
}

var pendingData=this.pendingData;

if(!pendingData){
_logger.logger.warn('Apparently attempt to enqueue media payload without codec initialization data upfront');
hls.trigger(_events2.default.ERROR,{type:_errors.ErrorTypes.MEDIA_ERROR,details:null,fatal:true});
return;
}

if(!this.audioSwitch){
[data.data1,data.data2].forEach(function(buffer){
if(buffer&&buffer.length){
pendingData.push({type:data.type,data:buffer,parent:'audio',content:'data'});
}
});
if(!appendOnBufferFlush&&pendingData.length){
pendingData.forEach(function(appendObj){
// only append in PARSING state (rationale is that an appending error could happen synchronously on first segment appending)
// in that case it is useless to append following segments
if(_this2.state===_baseStreamController.State.PARSING){
// arm pending Buffering flag before appending a segment
_this2.pendingBuffering=true;
_this2.hls.trigger(_events2.default.BUFFER_APPENDING,appendObj);
}
});
this.pendingData=[];
this.appended=true;
}
}
// trigger handler right now
this.tick();
}
}},
{
key:'onFragParsed',
value:function onFragParsed(data){
var fragCurrent=this.fragCurrent;
var fragNew=data.frag;
if(fragCurrent&&data.id==='audio'&&fragNew.sn===fragCurrent.sn&&fragNew.level===fragCurrent.level&&this.state===_baseStreamController.State.PARSING){
this.stats.tparsed=performance.now();
this.state=_baseStreamController.State.PARSED;
this._checkAppendedParsed();
}
}},
{
key:'onBufferReset',
value:function onBufferReset(){
// reset reference to sourcebuffers
this.mediaBuffer=this.videoBuffer=null;
this.loadedmetadata=false;
}},
{
key:'onBufferCreated',
value:function onBufferCreated(data){
var audioTrack=data.tracks.audio;
if(audioTrack){
this.mediaBuffer=audioTrack.buffer;
this.loadedmetadata=true;
}
if(data.tracks.video){
this.videoBuffer=data.tracks.video.buffer;
}
}},
{
key:'onBufferAppended',
value:function onBufferAppended(data){
if(data.parent==='audio'){
var state=this.state;
if(state===_baseStreamController.State.PARSING||state===_baseStreamController.State.PARSED){
// check if all buffers have been appended
this.pendingBuffering=data.pending>0;
this._checkAppendedParsed();
}
}
}},
{
key:'_checkAppendedParsed',
value:function _checkAppendedParsed(){
// trigger handler right now
if(this.state===_baseStreamController.State.PARSED&&(!this.appended||!this.pendingBuffering)){
var frag=this.fragCurrent,
stats=this.stats,
hls=this.hls;
if(frag){
this.fragPrevious=frag;
stats.tbuffered=performance.now();
hls.trigger(_events2.default.FRAG_BUFFERED,{stats:stats,frag:frag,id:'audio'});
var media=this.mediaBuffer?this.mediaBuffer:this.media;
_logger.logger.log('audio buffered : '+_timeRanges2.default.toString(media.buffered));
if(this.audioSwitch&&this.appended){
this.audioSwitch=false;
hls.trigger(_events2.default.AUDIO_TRACK_SWITCHED,{id:this.trackId});
}
this.state=_baseStreamController.State.IDLE;
}
this.tick();
}
}},
{
key:'onError',
value:function onError(data){
var frag=data.frag;
// don't handle frag error not related to audio fragment
if(frag&&frag.type!=='audio'){
return;
}

switch(data.details){
case _errors.ErrorDetails.FRAG_LOAD_ERROR:
case _errors.ErrorDetails.FRAG_LOAD_TIMEOUT:
var _frag=data.frag;
// don't handle frag error not related to audio fragment
if(_frag&&_frag.type!=='audio'){
break;
}

if(!data.fatal){
var loadError=this.fragLoadError;
if(loadError){
loadError++;
}else{
loadError=1;
}

var config=this.config;
if(loadError<=config.fragLoadingMaxRetry){
this.fragLoadError=loadError;
// exponential backoff capped to config.fragLoadingMaxRetryTimeout
var delay=Math.min(Math.pow(2,loadError-1)*config.fragLoadingRetryDelay,config.fragLoadingMaxRetryTimeout);
_logger.logger.warn('AudioStreamController: frag loading failed, retry in '+delay+' ms');
this.retryDate=performance.now()+delay;
// retry loading state
this.state=_baseStreamController.State.FRAG_LOADING_WAITING_RETRY;
}else{
_logger.logger.error('AudioStreamController: '+data.details+' reaches max retry, redispatch as fatal ...');
// switch error to fatal
data.fatal=true;
this.state=_baseStreamController.State.ERROR;
}
}
break;
case _errors.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:
case _errors.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:
case _errors.ErrorDetails.KEY_LOAD_ERROR:
case _errors.ErrorDetails.KEY_LOAD_TIMEOUT:
//  when in ERROR state, don't switch back to IDLE state in case a non-fatal error is received
if(this.state!==_baseStreamController.State.ERROR){
// if fatal error, stop processing, otherwise move to IDLE to retry loading
this.state=data.fatal?_baseStreamController.State.ERROR:_baseStreamController.State.IDLE;
_logger.logger.warn('AudioStreamController: '+data.details+' while loading frag, now switching to '+this.state+' state ...');
}
break;
case _errors.ErrorDetails.BUFFER_FULL_ERROR:
// if in appending state
if(data.parent==='audio'&&(this.state===_baseStreamController.State.PARSING||this.state===_baseStreamController.State.PARSED)){
var media=this.mediaBuffer,
currentTime=this.media.currentTime,
mediaBuffered=media&&_bufferHelper.BufferHelper.isBuffered(media,currentTime)&&_bufferHelper.BufferHelper.isBuffered(media,currentTime+0.5);
// reduce max buf len if current position is buffered
if(mediaBuffered){
var _config=this.config;
if(_config.maxMaxBufferLength>=_config.maxBufferLength){
// reduce max buffer length as it might be too high. we do this to avoid loop flushing ...
_config.maxMaxBufferLength/=2;
_logger.logger.warn('AudioStreamController: reduce max buffer length to '+_config.maxMaxBufferLength+'s');
}
this.state=_baseStreamController.State.IDLE;
}else{
// current position is not buffered, but browser is still complaining about buffer full error
// this happens on IE/Edge, refer to https://github.com/video-dev/hls.js/pull/708
// in that case flush the whole audio buffer to recover
_logger.logger.warn('AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer');
this.fragCurrent=null;
// flush everything
this.state=_baseStreamController.State.BUFFER_FLUSHING;
this.hls.trigger(_events2.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:'audio'});
}
}
break;
default:
break;}

}},
{
key:'onBufferFlushed',
value:function onBufferFlushed(){
var _this3=this;

var pendingData=this.pendingData;
if(pendingData&&pendingData.length){
_logger.logger.log('AudioStreamController: appending pending audio data after buffer flushed');
pendingData.forEach(function(appendObj){
_this3.hls.trigger(_events2.default.BUFFER_APPENDING,appendObj);
});
this.appended=true;
this.pendingData=[];
this.state=_baseStreamController.State.PARSED;
}else{
// move to IDLE once flush complete. this should trigger new fragment loading
this.state=_baseStreamController.State.IDLE;
// reset reference to frag
this.fragPrevious=null;
this.tick();
}
}},
{
key:'state',
set:function set(nextState){
if(this.state!==nextState){
var previousState=this.state;
this._state=nextState;
_logger.logger.log('audio stream:'+previousState+'->'+nextState);
}
},
get:function get(){
return this._state;
}}]);


return AudioStreamController;
}(_baseStreamController2.default);

exports.default=AudioStreamController;
module.exports=exports['default'];

/***/},
/* 70 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.newCue=newCue;

var _vttparser=__webpack_require__(30);

function newCue(track,startTime,endTime,captionScreen){
var row=void 0;
var cue=void 0;
var indenting=void 0;
var indent=void 0;
var text=void 0;
var VTTCue=window.VTTCue||window.TextTrackCue;

for(var r=0;r<captionScreen.rows.length;r++){
row=captionScreen.rows[r];
indenting=true;
indent=0;
text='';

if(!row.isEmpty()){
for(var c=0;c<row.chars.length;c++){
if(row.chars[c].uchar.match(/\s/)&&indenting){
indent++;
}else{
text+=row.chars[c].uchar;
indenting=false;
}
}
// To be used for cleaning-up orphaned roll-up captions
row.cueStartTime=startTime;

// Give a slight bump to the endTime if it's equal to startTime to avoid a SyntaxError in IE
if(startTime===endTime){
endTime+=0.0001;
}

cue=new VTTCue(startTime,endTime,(0,_vttparser.fixLineBreaks)(text.trim()));

if(indent>=16){
indent--;
}else{
indent++;
}

// VTTCue.line get's flakey when using controls, so let's now include line 13&14
// also, drop line 1 since it's to close to the top
if(navigator.userAgent.match(/Firefox\//)){
cue.line=r+1;
}else{
cue.line=r>7?r-2:r+1;
}

cue.align='left';
// Clamp the position between 0 and 100 - if out of these bounds, Firefox throws an exception and captions break
cue.position=Math.max(0,Math.min(100,100*(indent/32)+(navigator.userAgent.match(/Firefox\//)?50:0)));
track.addCue(cue);
}
}
}

/***/},
/* 71 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

exports.default=function(){
if(typeof window!=='undefined'&&window.VTTCue){
return window.VTTCue;
}

var autoKeyword='auto';
var directionSetting={
'':true,
lr:true,
rl:true};

var alignSetting={
start:true,
middle:true,
end:true,
left:true,
right:true};


function findDirectionSetting(value){
if(typeof value!=='string'){
return false;
}

var dir=directionSetting[value.toLowerCase()];
return dir?value.toLowerCase():false;
}

function findAlignSetting(value){
if(typeof value!=='string'){
return false;
}

var align=alignSetting[value.toLowerCase()];
return align?value.toLowerCase():false;
}

function extend(obj){
var i=1;
for(;i<arguments.length;i++){
var cobj=arguments[i];
for(var p in cobj){
obj[p]=cobj[p];
}
}

return obj;
}

function VTTCue(startTime,endTime,text){
var cue=this;
var isIE8=function(){
if(typeof navigator==='undefined'){
return;
}

return /MSIE\s8\.0/.test(navigator.userAgent);

}();
var baseObj={};

if(isIE8){
cue=document.createElement('custom');
}else{
baseObj.enumerable=true;
}

/**
     * Shim implementation specific properties. These properties are not in
     * the spec.
     */

// Lets us know when the VTTCue's data has changed in such a way that we need
// to recompute its display state. This lets us compute its display state
// lazily.
cue.hasBeenReset=false;

/**
     * VTTCue and TextTrackCue properties
     * http://dev.w3.org/html5/webvtt/#vttcue-interface
     */

var _id='';
var _pauseOnExit=false;
var _startTime=startTime;
var _endTime=endTime;
var _text=text;
var _region=null;
var _vertical='';
var _snapToLines=true;
var _line='auto';
var _lineAlign='start';
var _position=50;
var _positionAlign='middle';
var _size=50;
var _align='middle';

Object.defineProperty(cue,'id',extend({},baseObj,{
get:function get(){
return _id;
},
set:function set(value){
_id=''+value;
}}));


Object.defineProperty(cue,'pauseOnExit',extend({},baseObj,{
get:function get(){
return _pauseOnExit;
},
set:function set(value){
_pauseOnExit=!!value;
}}));


Object.defineProperty(cue,'startTime',extend({},baseObj,{
get:function get(){
return _startTime;
},
set:function set(value){
if(typeof value!=='number'){
throw new TypeError('Start time must be set to a number.');
}

_startTime=value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'endTime',extend({},baseObj,{
get:function get(){
return _endTime;
},
set:function set(value){
if(typeof value!=='number'){
throw new TypeError('End time must be set to a number.');
}

_endTime=value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'text',extend({},baseObj,{
get:function get(){
return _text;
},
set:function set(value){
_text=''+value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'region',extend({},baseObj,{
get:function get(){
return _region;
},
set:function set(value){
_region=value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'vertical',extend({},baseObj,{
get:function get(){
return _vertical;
},
set:function set(value){
var setting=findDirectionSetting(value);
// Have to check for false because the setting an be an empty string.
if(setting===false){
throw new SyntaxError('An invalid or illegal string was specified.');
}

_vertical=setting;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'snapToLines',extend({},baseObj,{
get:function get(){
return _snapToLines;
},
set:function set(value){
_snapToLines=!!value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'line',extend({},baseObj,{
get:function get(){
return _line;
},
set:function set(value){
if(typeof value!=='number'&&value!==autoKeyword){
throw new SyntaxError('An invalid number or illegal string was specified.');
}

_line=value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'lineAlign',extend({},baseObj,{
get:function get(){
return _lineAlign;
},
set:function set(value){
var setting=findAlignSetting(value);
if(!setting){
throw new SyntaxError('An invalid or illegal string was specified.');
}

_lineAlign=setting;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'position',extend({},baseObj,{
get:function get(){
return _position;
},
set:function set(value){
if(value<0||value>100){
throw new Error('Position must be between 0 and 100.');
}

_position=value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'positionAlign',extend({},baseObj,{
get:function get(){
return _positionAlign;
},
set:function set(value){
var setting=findAlignSetting(value);
if(!setting){
throw new SyntaxError('An invalid or illegal string was specified.');
}

_positionAlign=setting;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'size',extend({},baseObj,{
get:function get(){
return _size;
},
set:function set(value){
if(value<0||value>100){
throw new Error('Size must be between 0 and 100.');
}

_size=value;
this.hasBeenReset=true;
}}));


Object.defineProperty(cue,'align',extend({},baseObj,{
get:function get(){
return _align;
},
set:function set(value){
var setting=findAlignSetting(value);
if(!setting){
throw new SyntaxError('An invalid or illegal string was specified.');
}

_align=setting;
this.hasBeenReset=true;
}}));


/**
     * Other <track> spec defined properties
     */

// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state
cue.displayState=undefined;

if(isIE8){
return cue;
}
}

/**
   * VTTCue methods
   */

VTTCue.prototype.getCueAsHTML=function(){
// Assume WebVTT.convertCueToDOMTree is on the global.
var WebVTT=window.WebVTT;
return WebVTT.convertCueToDOMTree(window,this.text);
};

return VTTCue;
}();

module.exports=exports['default'];

/***/},
/* 72 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _cea608Parser=__webpack_require__(73);

var _cea608Parser2=_interopRequireDefault(_cea608Parser);

var _outputFilter=__webpack_require__(74);

var _outputFilter2=_interopRequireDefault(_outputFilter);

var _webvttParser=__webpack_require__(75);

var _webvttParser2=_interopRequireDefault(_webvttParser);

var _logger=__webpack_require__(0);

var _texttrackUtils=__webpack_require__(29);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Timeline Controller
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */

function canReuseVttTextTrack(inUseTrack,manifestTrack){
return inUseTrack&&inUseTrack.label===manifestTrack.name&&!(inUseTrack.textTrack1||inUseTrack.textTrack2);
}

function intersection(x1,x2,y1,y2){
return Math.min(x2,y2)-Math.max(x1,y1);
}

var TimelineController=function(_EventHandler){
_inherits(TimelineController,_EventHandler);

function TimelineController(hls){
_classCallCheck(this,TimelineController);

var _this=_possibleConstructorReturn(this,(TimelineController.__proto__||Object.getPrototypeOf(TimelineController)).call(this,hls,_events2.default.MEDIA_ATTACHING,_events2.default.MEDIA_DETACHING,_events2.default.FRAG_PARSING_USERDATA,_events2.default.FRAG_DECRYPTED,_events2.default.MANIFEST_LOADING,_events2.default.MANIFEST_LOADED,_events2.default.FRAG_LOADED,_events2.default.LEVEL_SWITCHING,_events2.default.INIT_PTS_FOUND));

_this.hls=hls;
_this.config=hls.config;
_this.enabled=true;
_this.Cues=hls.config.cueHandler;
_this.textTracks=[];
_this.tracks=[];
_this.unparsedVttFrags=[];
_this.initPTS=[];
_this.cueRanges=[];
_this.captionsTracks={};

_this.captionsProperties={
textTrack1:{
label:_this.config.captionsTextTrack1Label,
languageCode:_this.config.captionsTextTrack1LanguageCode},

textTrack2:{
label:_this.config.captionsTextTrack2Label,
languageCode:_this.config.captionsTextTrack2LanguageCode}};



if(_this.config.enableCEA708Captions){
var channel1=new _outputFilter2.default(_this,'textTrack1');
var channel2=new _outputFilter2.default(_this,'textTrack2');

_this.cea608Parser=new _cea608Parser2.default(0,channel1,channel2);
}
return _this;
}

_createClass(TimelineController,[{
key:'addCues',
value:function addCues(trackName,startTime,endTime,screen){
// skip cues which overlap more than 50% with previously parsed time ranges
var ranges=this.cueRanges;
var merged=false;
for(var i=ranges.length;i--;){
var cueRange=ranges[i];
var overlap=intersection(cueRange[0],cueRange[1],startTime,endTime);
if(overlap>=0){
cueRange[0]=Math.min(cueRange[0],startTime);
cueRange[1]=Math.max(cueRange[1],endTime);
merged=true;
if(overlap/(endTime-startTime)>0.5){
return;
}
}
}
if(!merged){
ranges.push([startTime,endTime]);
}

this.Cues.newCue(this.captionsTracks[trackName],startTime,endTime,screen);
}

// Triggered when an initial PTS is found; used for synchronisation of WebVTT.
},
{
key:'onInitPtsFound',
value:function onInitPtsFound(data){
var _this2=this;

if(data.id==='main'){
this.initPTS[data.frag.cc]=data.initPTS;
}

// Due to asynchronous processing, initial PTS may arrive later than the first VTT fragments are loaded.
// Parse any unparsed fragments upon receiving the initial PTS.
if(this.unparsedVttFrags.length){
var unparsedVttFrags=this.unparsedVttFrags;
this.unparsedVttFrags=[];
unparsedVttFrags.forEach(function(frag){
_this2.onFragLoaded(frag);
});
}
}},
{
key:'getExistingTrack',
value:function getExistingTrack(trackName){
var media=this.media;

if(media){
for(var i=0;i<media.textTracks.length;i++){
var textTrack=media.textTracks[i];
if(textTrack[trackName]){
return textTrack;
}
}
}
return null;
}},
{
key:'createCaptionsTrack',
value:function createCaptionsTrack(trackName){
var _captionsProperties$t=this.captionsProperties[trackName],
label=_captionsProperties$t.label,
languageCode=_captionsProperties$t.languageCode;

var captionsTracks=this.captionsTracks;
if(!captionsTracks[trackName]){
// Enable reuse of existing text track.
var existingTrack=this.getExistingTrack(trackName);
if(!existingTrack){
var textTrack=this.createTextTrack('captions',label,languageCode);
if(textTrack){
// Set a special property on the track so we know it's managed by Hls.js
textTrack[trackName]=true;
captionsTracks[trackName]=textTrack;
}
}else{
captionsTracks[trackName]=existingTrack;
(0,_texttrackUtils.clearCurrentCues)(captionsTracks[trackName]);
(0,_texttrackUtils.sendAddTrackEvent)(captionsTracks[trackName],this.media);
}
}
}},
{
key:'createTextTrack',
value:function createTextTrack(kind,label,lang){
var media=this.media;
if(media){
return media.addTextTrack(kind,label,lang);
}
}},
{
key:'destroy',
value:function destroy(){
_eventHandler2.default.prototype.destroy.call(this);
}},
{
key:'onMediaAttaching',
value:function onMediaAttaching(data){
this.media=data.media;
this._cleanTracks();
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
var captionsTracks=this.captionsTracks;

Object.keys(captionsTracks).forEach(function(trackName){
(0,_texttrackUtils.clearCurrentCues)(captionsTracks[trackName]);
delete captionsTracks[trackName];
});
}},
{
key:'onManifestLoading',
value:function onManifestLoading(){
this.lastSn=-1;// Detect discontiguity in fragment parsing
this.prevCC=-1;
this.vttCCs={// Detect discontinuity in subtitle manifests
ccOffset:0,
presentationOffset:0,
0:{
start:0,prevCC:-1,new:false}};


this._cleanTracks();
}},
{
key:'_cleanTracks',
value:function _cleanTracks(){
// clear outdated subtitles
var media=this.media;
if(media){
var textTracks=media.textTracks;
if(textTracks){
for(var i=0;i<textTracks.length;i++){
(0,_texttrackUtils.clearCurrentCues)(textTracks[i]);
}
}
}
}},
{
key:'onManifestLoaded',
value:function onManifestLoaded(data){
var _this3=this;

this.textTracks=[];
this.unparsedVttFrags=this.unparsedVttFrags||[];
this.initPTS=[];
this.cueRanges=[];

if(this.config.enableWebVTT){
this.tracks=data.subtitles||[];
var inUseTracks=this.media?this.media.textTracks:[];

this.tracks.forEach(function(track,index){
var textTrack=void 0;
if(index<inUseTracks.length){
var inUseTrack=null;

for(var i=0;i<inUseTracks.length;i++){
if(canReuseVttTextTrack(inUseTracks[i],track)){
inUseTrack=inUseTracks[i];
break;
}
}

// Reuse tracks with the same label, but do not reuse 608/708 tracks
if(inUseTrack){
textTrack=inUseTrack;
}
}
if(!textTrack){
textTrack=_this3.createTextTrack('subtitles',track.name,track.lang);
}

if(track.default){
textTrack.mode=_this3.hls.subtitleDisplay?'showing':'hidden';
}else{
textTrack.mode='disabled';
}

_this3.textTracks.push(textTrack);
});
}
}},
{
key:'onLevelSwitching',
value:function onLevelSwitching(){
this.enabled=this.hls.currentLevel.closedCaptions!=='NONE';
}},
{
key:'onFragLoaded',
value:function onFragLoaded(data){
var frag=data.frag,
payload=data.payload;
if(frag.type==='main'){
var sn=frag.sn;
// if this frag isn't contiguous, clear the parser so cues with bad start/end times aren't added to the textTrack
if(sn!==this.lastSn+1){
var cea608Parser=this.cea608Parser;
if(cea608Parser){
cea608Parser.reset();
}
}
this.lastSn=sn;
}// eslint-disable-line brace-style
// If fragment is subtitle type, parse as WebVTT.
else if(frag.type==='subtitle'){
if(payload.byteLength){
// We need an initial synchronisation PTS. Store fragments as long as none has arrived.
if(!Number.isFinite(this.initPTS[frag.cc])){
this.unparsedVttFrags.push(data);
if(this.initPTS.length){
// finish unsuccessfully, otherwise the subtitle-stream-controller could be blocked from loading new frags.
this.hls.trigger(_events2.default.SUBTITLE_FRAG_PROCESSED,{success:false,frag:frag});
}
return;
}

var decryptData=frag.decryptdata;
// If the subtitles are not encrypted, parse VTTs now. Otherwise, we need to wait.
if(decryptData==null||decryptData.key==null||decryptData.method!=='AES-128'){
this._parseVTTs(frag,payload);
}
}else{
// In case there is no payload, finish unsuccessfully.
this.hls.trigger(_events2.default.SUBTITLE_FRAG_PROCESSED,{success:false,frag:frag});
}
}
}},
{
key:'_parseVTTs',
value:function _parseVTTs(frag,payload){
var vttCCs=this.vttCCs;
if(!vttCCs[frag.cc]){
vttCCs[frag.cc]={start:frag.start,prevCC:this.prevCC,new:true};
this.prevCC=frag.cc;
}
var textTracks=this.textTracks,
hls=this.hls;

// Parse the WebVTT file contents.
_webvttParser2.default.parse(payload,this.initPTS[frag.cc],vttCCs,frag.cc,function(cues){
var currentTrack=textTracks[frag.level];
// WebVTTParser.parse is an async method and if the currently selected text track mode is set to "disabled"
// before parsing is done then don't try to access currentTrack.cues.getCueById as cues will be null
// and trying to access getCueById method of cues will throw an exception
if(currentTrack.mode==='disabled'){
hls.trigger(_events2.default.SUBTITLE_FRAG_PROCESSED,{success:false,frag:frag});
return;
}
// Add cues and trigger event with success true.
cues.forEach(function(cue){
// Sometimes there are cue overlaps on segmented vtts so the same
// cue can appear more than once in different vtt files.
// This avoid showing duplicated cues with same timecode and text.
if(!currentTrack.cues.getCueById(cue.id)){
try{
currentTrack.addCue(cue);
}catch(err){
var textTrackCue=new window.TextTrackCue(cue.startTime,cue.endTime,cue.text);
textTrackCue.id=cue.id;
currentTrack.addCue(textTrackCue);
}
}
});
hls.trigger(_events2.default.SUBTITLE_FRAG_PROCESSED,{success:true,frag:frag});
},function(e){
// Something went wrong while parsing. Trigger event with success false.
_logger.logger.log('Failed to parse VTT cue: '+e);
hls.trigger(_events2.default.SUBTITLE_FRAG_PROCESSED,{success:false,frag:frag});
});
}},
{
key:'onFragDecrypted',
value:function onFragDecrypted(data){
var decryptedData=data.payload,
frag=data.frag;

if(frag.type==='subtitle'){
if(!Number.isFinite(this.initPTS[frag.cc])){
this.unparsedVttFrags.push(data);
return;
}

this._parseVTTs(frag,decryptedData);
}
}},
{
key:'onFragParsingUserdata',
value:function onFragParsingUserdata(data){
// push all of the CEA-708 messages into the interpreter
// immediately. It will create the proper timestamps based on our PTS value
if(this.enabled&&this.config.enableCEA708Captions){
for(var i=0;i<data.samples.length;i++){
var ccdatas=this.extractCea608Data(data.samples[i].bytes);
this.cea608Parser.addData(data.samples[i].pts,ccdatas);
}
}
}},
{
key:'extractCea608Data',
value:function extractCea608Data(byteArray){
var count=byteArray[0]&31;
var position=2;
var tmpByte=void 0,
ccbyte1=void 0,
ccbyte2=void 0,
ccValid=void 0,
ccType=void 0;
var actualCCBytes=[];

for(var j=0;j<count;j++){
tmpByte=byteArray[position++];
ccbyte1=0x7F&byteArray[position++];
ccbyte2=0x7F&byteArray[position++];
ccValid=(4&tmpByte)!==0;
ccType=3&tmpByte;

if(ccbyte1===0&&ccbyte2===0){
continue;
}

if(ccValid){
if(ccType===0){
// || ccType === 1
actualCCBytes.push(ccbyte1);
actualCCBytes.push(ccbyte2);
}
}
}
return actualCCBytes;
}}]);


return TimelineController;
}(_eventHandler2.default);

exports.default=TimelineController;
module.exports=exports['default'];

/***/},
/* 73 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

/**
 *
 * This code was ported from the dash.js project at:
 *   https://github.com/Dash-Industry-Forum/dash.js/blob/development/externals/cea608-parser.js
 *   https://github.com/Dash-Industry-Forum/dash.js/commit/8269b26a761e0853bb21d78780ed945144ecdd4d#diff-71bc295a2d6b6b7093a1d3290d53a4b2
 *
 * The original copyright appears below:
 *
 * The copyright in this software is being made available under the BSD License,
 * included below. This software may be subject to other third party and contributor
 * rights, including patent rights, and no such rights are granted under this license.
 *
 * Copyright (c) 2015-2016, DASH Industry Forum.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *  1. Redistributions of source code must retain the above copyright notice, this
 *  list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation and/or
 *  other materials provided with the distribution.
 *  2. Neither the name of Dash Industry Forum nor the names of its
 *  contributors may be used to endorse or promote products derived from this software
 *  without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY
 *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 *  POSSIBILITY OF SUCH DAMAGE.
 */
/**
     *  Exceptions from regular ASCII. CodePoints are mapped to UTF-16 codes
     */

var specialCea608CharsCodes={
0x2a:0xe1,// lowercase a, acute accent
0x5c:0xe9,// lowercase e, acute accent
0x5e:0xed,// lowercase i, acute accent
0x5f:0xf3,// lowercase o, acute accent
0x60:0xfa,// lowercase u, acute accent
0x7b:0xe7,// lowercase c with cedilla
0x7c:0xf7,// division symbol
0x7d:0xd1,// uppercase N tilde
0x7e:0xf1,// lowercase n tilde
0x7f:0x2588,// Full block
// THIS BLOCK INCLUDES THE 16 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS
// THAT COME FROM HI BYTE=0x11 AND LOW BETWEEN 0x30 AND 0x3F
// THIS MEANS THAT \x50 MUST BE ADDED TO THE VALUES
0x80:0xae,// Registered symbol (R)
0x81:0xb0,// degree sign
0x82:0xbd,// 1/2 symbol
0x83:0xbf,// Inverted (open) question mark
0x84:0x2122,// Trademark symbol (TM)
0x85:0xa2,// Cents symbol
0x86:0xa3,// Pounds sterling
0x87:0x266a,// Music 8'th note
0x88:0xe0,// lowercase a, grave accent
0x89:0x20,// transparent space (regular)
0x8a:0xe8,// lowercase e, grave accent
0x8b:0xe2,// lowercase a, circumflex accent
0x8c:0xea,// lowercase e, circumflex accent
0x8d:0xee,// lowercase i, circumflex accent
0x8e:0xf4,// lowercase o, circumflex accent
0x8f:0xfb,// lowercase u, circumflex accent
// THIS BLOCK INCLUDES THE 32 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS
// THAT COME FROM HI BYTE=0x12 AND LOW BETWEEN 0x20 AND 0x3F
0x90:0xc1,// capital letter A with acute
0x91:0xc9,// capital letter E with acute
0x92:0xd3,// capital letter O with acute
0x93:0xda,// capital letter U with acute
0x94:0xdc,// capital letter U with diaresis
0x95:0xfc,// lowercase letter U with diaeresis
0x96:0x2018,// opening single quote
0x97:0xa1,// inverted exclamation mark
0x98:0x2a,// asterisk
0x99:0x2019,// closing single quote
0x9a:0x2501,// box drawings heavy horizontal
0x9b:0xa9,// copyright sign
0x9c:0x2120,// Service mark
0x9d:0x2022,// (round) bullet
0x9e:0x201c,// Left double quotation mark
0x9f:0x201d,// Right double quotation mark
0xa0:0xc0,// uppercase A, grave accent
0xa1:0xc2,// uppercase A, circumflex
0xa2:0xc7,// uppercase C with cedilla
0xa3:0xc8,// uppercase E, grave accent
0xa4:0xca,// uppercase E, circumflex
0xa5:0xcb,// capital letter E with diaresis
0xa6:0xeb,// lowercase letter e with diaresis
0xa7:0xce,// uppercase I, circumflex
0xa8:0xcf,// uppercase I, with diaresis
0xa9:0xef,// lowercase i, with diaresis
0xaa:0xd4,// uppercase O, circumflex
0xab:0xd9,// uppercase U, grave accent
0xac:0xf9,// lowercase u, grave accent
0xad:0xdb,// uppercase U, circumflex
0xae:0xab,// left-pointing double angle quotation mark
0xaf:0xbb,// right-pointing double angle quotation mark
// THIS BLOCK INCLUDES THE 32 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS
// THAT COME FROM HI BYTE=0x13 AND LOW BETWEEN 0x20 AND 0x3F
0xb0:0xc3,// Uppercase A, tilde
0xb1:0xe3,// Lowercase a, tilde
0xb2:0xcd,// Uppercase I, acute accent
0xb3:0xcc,// Uppercase I, grave accent
0xb4:0xec,// Lowercase i, grave accent
0xb5:0xd2,// Uppercase O, grave accent
0xb6:0xf2,// Lowercase o, grave accent
0xb7:0xd5,// Uppercase O, tilde
0xb8:0xf5,// Lowercase o, tilde
0xb9:0x7b,// Open curly brace
0xba:0x7d,// Closing curly brace
0xbb:0x5c,// Backslash
0xbc:0x5e,// Caret
0xbd:0x5f,// Underscore
0xbe:0x7c,// Pipe (vertical line)
0xbf:0x223c,// Tilde operator
0xc0:0xc4,// Uppercase A, umlaut
0xc1:0xe4,// Lowercase A, umlaut
0xc2:0xd6,// Uppercase O, umlaut
0xc3:0xf6,// Lowercase o, umlaut
0xc4:0xdf,// Esszett (sharp S)
0xc5:0xa5,// Yen symbol
0xc6:0xa4,// Generic currency sign
0xc7:0x2503,// Box drawings heavy vertical
0xc8:0xc5,// Uppercase A, ring
0xc9:0xe5,// Lowercase A, ring
0xca:0xd8,// Uppercase O, stroke
0xcb:0xf8,// Lowercase o, strok
0xcc:0x250f,// Box drawings heavy down and right
0xcd:0x2513,// Box drawings heavy down and left
0xce:0x2517,// Box drawings heavy up and right
0xcf:0x251b// Box drawings heavy up and left
};

/**
 * Utils
 */
var getCharForByte=function getCharForByte(_byte){
var charCode=_byte;
if(specialCea608CharsCodes.hasOwnProperty(_byte)){
charCode=specialCea608CharsCodes[_byte];
}

return String.fromCharCode(charCode);
};

var NR_ROWS=15,
NR_COLS=100;
// Tables to look up row from PAC data
var rowsLowCh1={0x11:1,0x12:3,0x15:5,0x16:7,0x17:9,0x10:11,0x13:12,0x14:14};
var rowsHighCh1={0x11:2,0x12:4,0x15:6,0x16:8,0x17:10,0x13:13,0x14:15};
var rowsLowCh2={0x19:1,0x1A:3,0x1D:5,0x1E:7,0x1F:9,0x18:11,0x1B:12,0x1C:14};
var rowsHighCh2={0x19:2,0x1A:4,0x1D:6,0x1E:8,0x1F:10,0x1B:13,0x1C:15};

var backgroundColors=['white','green','blue','cyan','red','yellow','magenta','black','transparent'];

/**
 * Simple logger class to be able to write with time-stamps and filter on level.
 */
var logger={
verboseFilter:{'DATA':3,'DEBUG':3,'INFO':2,'WARNING':2,'TEXT':1,'ERROR':0},
time:null,
verboseLevel:0,// Only write errors
setTime:function setTime(newTime){
this.time=newTime;
},
log:function log(severity,msg){
var minLevel=this.verboseFilter[severity];
if(this.verboseLevel>=minLevel){
// console.log(this.time + ' [' + severity + '] ' + msg);
}
}};


var numArrayToHexArray=function numArrayToHexArray(numArray){
var hexArray=[];
for(var j=0;j<numArray.length;j++){
hexArray.push(numArray[j].toString(16));
}

return hexArray;
};

var PenState=function(){
function PenState(foreground,underline,italics,background,flash){
_classCallCheck(this,PenState);

this.foreground=foreground||'white';
this.underline=underline||false;
this.italics=italics||false;
this.background=background||'black';
this.flash=flash||false;
}

_createClass(PenState,[{
key:'reset',
value:function reset(){
this.foreground='white';
this.underline=false;
this.italics=false;
this.background='black';
this.flash=false;
}},
{
key:'setStyles',
value:function setStyles(styles){
var attribs=['foreground','underline','italics','background','flash'];
for(var i=0;i<attribs.length;i++){
var style=attribs[i];
if(styles.hasOwnProperty(style)){
this[style]=styles[style];
}
}
}},
{
key:'isDefault',
value:function isDefault(){
return this.foreground==='white'&&!this.underline&&!this.italics&&this.background==='black'&&!this.flash;
}},
{
key:'equals',
value:function equals(other){
return this.foreground===other.foreground&&this.underline===other.underline&&this.italics===other.italics&&this.background===other.background&&this.flash===other.flash;
}},
{
key:'copy',
value:function copy(newPenState){
this.foreground=newPenState.foreground;
this.underline=newPenState.underline;
this.italics=newPenState.italics;
this.background=newPenState.background;
this.flash=newPenState.flash;
}},
{
key:'toString',
value:function toString(){
return'color='+this.foreground+', underline='+this.underline+', italics='+this.italics+', background='+this.background+', flash='+this.flash;
}}]);


return PenState;
}();

/**
 * Unicode character with styling and background.
 * @constructor
 */


var StyledUnicodeChar=function(){
function StyledUnicodeChar(uchar,foreground,underline,italics,background,flash){
_classCallCheck(this,StyledUnicodeChar);

this.uchar=uchar||' ';// unicode character
this.penState=new PenState(foreground,underline,italics,background,flash);
}

_createClass(StyledUnicodeChar,[{
key:'reset',
value:function reset(){
this.uchar=' ';
this.penState.reset();
}},
{
key:'setChar',
value:function setChar(uchar,newPenState){
this.uchar=uchar;
this.penState.copy(newPenState);
}},
{
key:'setPenState',
value:function setPenState(newPenState){
this.penState.copy(newPenState);
}},
{
key:'equals',
value:function equals(other){
return this.uchar===other.uchar&&this.penState.equals(other.penState);
}},
{
key:'copy',
value:function copy(newChar){
this.uchar=newChar.uchar;
this.penState.copy(newChar.penState);
}},
{
key:'isEmpty',
value:function isEmpty(){
return this.uchar===' '&&this.penState.isDefault();
}}]);


return StyledUnicodeChar;
}();

/**
 * CEA-608 row consisting of NR_COLS instances of StyledUnicodeChar.
 * @constructor
 */


var Row=function(){
function Row(){
_classCallCheck(this,Row);

this.chars=[];
for(var i=0;i<NR_COLS;i++){
this.chars.push(new StyledUnicodeChar());
}

this.pos=0;
this.currPenState=new PenState();
}

_createClass(Row,[{
key:'equals',
value:function equals(other){
var equal=true;
for(var i=0;i<NR_COLS;i++){
if(!this.chars[i].equals(other.chars[i])){
equal=false;
break;
}
}
return equal;
}},
{
key:'copy',
value:function copy(other){
for(var i=0;i<NR_COLS;i++){
this.chars[i].copy(other.chars[i]);
}
}},
{
key:'isEmpty',
value:function isEmpty(){
var empty=true;
for(var i=0;i<NR_COLS;i++){
if(!this.chars[i].isEmpty()){
empty=false;
break;
}
}
return empty;
}

/**
       *  Set the cursor to a valid column.
       */},

{
key:'setCursor',
value:function setCursor(absPos){
if(this.pos!==absPos){
this.pos=absPos;
}

if(this.pos<0){
logger.log('ERROR','Negative cursor position '+this.pos);
this.pos=0;
}else if(this.pos>NR_COLS){
logger.log('ERROR','Too large cursor position '+this.pos);
this.pos=NR_COLS;
}
}

/**
       * Move the cursor relative to current position.
       */},

{
key:'moveCursor',
value:function moveCursor(relPos){
var newPos=this.pos+relPos;
if(relPos>1){
for(var i=this.pos+1;i<newPos+1;i++){
this.chars[i].setPenState(this.currPenState);
}
}
this.setCursor(newPos);
}

/**
       * Backspace, move one step back and clear character.
       */},

{
key:'backSpace',
value:function backSpace(){
this.moveCursor(-1);
this.chars[this.pos].setChar(' ',this.currPenState);
}},
{
key:'insertChar',
value:function insertChar(_byte2){
if(_byte2>=0x90){
// Extended char
this.backSpace();
}
var _char=getCharForByte(_byte2);
if(this.pos>=NR_COLS){
logger.log('ERROR','Cannot insert '+_byte2.toString(16)+' ('+_char+') at position '+this.pos+'. Skipping it!');
return;
}
this.chars[this.pos].setChar(_char,this.currPenState);
this.moveCursor(1);
}},
{
key:'clearFromPos',
value:function clearFromPos(startPos){
var i=void 0;
for(i=startPos;i<NR_COLS;i++){
this.chars[i].reset();
}
}},
{
key:'clear',
value:function clear(){
this.clearFromPos(0);
this.pos=0;
this.currPenState.reset();
}},
{
key:'clearToEndOfRow',
value:function clearToEndOfRow(){
this.clearFromPos(this.pos);
}},
{
key:'getTextString',
value:function getTextString(){
var chars=[];
var empty=true;
for(var i=0;i<NR_COLS;i++){
var _char2=this.chars[i].uchar;
if(_char2!==' '){
empty=false;
}

chars.push(_char2);
}
if(empty){
return'';
}else{
return chars.join('');
}
}},
{
key:'setPenStyles',
value:function setPenStyles(styles){
this.currPenState.setStyles(styles);
var currChar=this.chars[this.pos];
currChar.setPenState(this.currPenState);
}}]);


return Row;
}();

/**
 * Keep a CEA-608 screen of 32x15 styled characters
 * @constructor
*/


var CaptionScreen=function(){
function CaptionScreen(){
_classCallCheck(this,CaptionScreen);

this.rows=[];
for(var i=0;i<NR_ROWS;i++){
this.rows.push(new Row());
}// Note that we use zero-based numbering (0-14)

this.currRow=NR_ROWS-1;
this.nrRollUpRows=null;
this.reset();
}

_createClass(CaptionScreen,[{
key:'reset',
value:function reset(){
for(var i=0;i<NR_ROWS;i++){
this.rows[i].clear();
}

this.currRow=NR_ROWS-1;
}},
{
key:'equals',
value:function equals(other){
var equal=true;
for(var i=0;i<NR_ROWS;i++){
if(!this.rows[i].equals(other.rows[i])){
equal=false;
break;
}
}
return equal;
}},
{
key:'copy',
value:function copy(other){
for(var i=0;i<NR_ROWS;i++){
this.rows[i].copy(other.rows[i]);
}
}},
{
key:'isEmpty',
value:function isEmpty(){
var empty=true;
for(var i=0;i<NR_ROWS;i++){
if(!this.rows[i].isEmpty()){
empty=false;
break;
}
}
return empty;
}},
{
key:'backSpace',
value:function backSpace(){
var row=this.rows[this.currRow];
row.backSpace();
}},
{
key:'clearToEndOfRow',
value:function clearToEndOfRow(){
var row=this.rows[this.currRow];
row.clearToEndOfRow();
}

/**
       * Insert a character (without styling) in the current row.
       */},

{
key:'insertChar',
value:function insertChar(_char3){
var row=this.rows[this.currRow];
row.insertChar(_char3);
}},
{
key:'setPen',
value:function setPen(styles){
var row=this.rows[this.currRow];
row.setPenStyles(styles);
}},
{
key:'moveCursor',
value:function moveCursor(relPos){
var row=this.rows[this.currRow];
row.moveCursor(relPos);
}},
{
key:'setCursor',
value:function setCursor(absPos){
logger.log('INFO','setCursor: '+absPos);
var row=this.rows[this.currRow];
row.setCursor(absPos);
}},
{
key:'setPAC',
value:function setPAC(pacData){
logger.log('INFO','pacData = '+JSON.stringify(pacData));
var newRow=pacData.row-1;
if(this.nrRollUpRows&&newRow<this.nrRollUpRows-1){
newRow=this.nrRollUpRows-1;
}

// Make sure this only affects Roll-up Captions by checking this.nrRollUpRows
if(this.nrRollUpRows&&this.currRow!==newRow){
// clear all rows first
for(var i=0;i<NR_ROWS;i++){
this.rows[i].clear();
}

// Copy this.nrRollUpRows rows from lastOutputScreen and place it in the newRow location
// topRowIndex - the start of rows to copy (inclusive index)
var topRowIndex=this.currRow+1-this.nrRollUpRows;
// We only copy if the last position was already shown.
// We use the cueStartTime value to check this.
var lastOutputScreen=this.lastOutputScreen;
if(lastOutputScreen){
var prevLineTime=lastOutputScreen.rows[topRowIndex].cueStartTime;
if(prevLineTime&&prevLineTime<logger.time){
for(var _i=0;_i<this.nrRollUpRows;_i++){
this.rows[newRow-this.nrRollUpRows+_i+1].copy(lastOutputScreen.rows[topRowIndex+_i]);
}
}
}
}

this.currRow=newRow;
var row=this.rows[this.currRow];
if(pacData.indent!==null){
var indent=pacData.indent;
var prevPos=Math.max(indent-1,0);
row.setCursor(pacData.indent);
pacData.color=row.chars[prevPos].penState.foreground;
}
var styles={foreground:pacData.color,underline:pacData.underline,italics:pacData.italics,background:'black',flash:false};
this.setPen(styles);
}

/**
       * Set background/extra foreground, but first do back_space, and then insert space (backwards compatibility).
       */},

{
key:'setBkgData',
value:function setBkgData(bkgData){
logger.log('INFO','bkgData = '+JSON.stringify(bkgData));
this.backSpace();
this.setPen(bkgData);
this.insertChar(0x20);// Space
}},
{
key:'setRollUpRows',
value:function setRollUpRows(nrRows){
this.nrRollUpRows=nrRows;
}},
{
key:'rollUp',
value:function rollUp(){
if(this.nrRollUpRows===null){
logger.log('DEBUG','roll_up but nrRollUpRows not set yet');
return;// Not properly setup
}
logger.log('TEXT',this.getDisplayText());
var topRowIndex=this.currRow+1-this.nrRollUpRows;
var topRow=this.rows.splice(topRowIndex,1)[0];
topRow.clear();
this.rows.splice(this.currRow,0,topRow);
logger.log('INFO','Rolling up');
// logger.log('TEXT', this.get_display_text())
}

/**
      * Get all non-empty rows with as unicode text.
      */},

{
key:'getDisplayText',
value:function getDisplayText(asOneRow){
asOneRow=asOneRow||false;
var displayText=[];
var text='';
var rowNr=-1;
for(var i=0;i<NR_ROWS;i++){
var rowText=this.rows[i].getTextString();
if(rowText){
rowNr=i+1;
if(asOneRow){
displayText.push('Row '+rowNr+': \''+rowText+'\'');
}else{
displayText.push(rowText.trim());
}
}
}
if(displayText.length>0){
if(asOneRow){
text='['+displayText.join(' | ')+']';
}else{
text=displayText.join('\n');
}
}
return text;
}},
{
key:'getTextAndFormat',
value:function getTextAndFormat(){
return this.rows;
}}]);


return CaptionScreen;
}();

// var modes = ['MODE_ROLL-UP', 'MODE_POP-ON', 'MODE_PAINT-ON', 'MODE_TEXT'];

var Cea608Channel=function(){
function Cea608Channel(channelNumber,outputFilter){
_classCallCheck(this,Cea608Channel);

this.chNr=channelNumber;
this.outputFilter=outputFilter;
this.mode=null;
this.verbose=0;
this.displayedMemory=new CaptionScreen();
this.nonDisplayedMemory=new CaptionScreen();
this.lastOutputScreen=new CaptionScreen();
this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1];
this.writeScreen=this.displayedMemory;
this.mode=null;
this.cueStartTime=null;// Keeps track of where a cue started.
}

_createClass(Cea608Channel,[{
key:'reset',
value:function reset(){
this.mode=null;
this.displayedMemory.reset();
this.nonDisplayedMemory.reset();
this.lastOutputScreen.reset();
this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1];
this.writeScreen=this.displayedMemory;
this.mode=null;
this.cueStartTime=null;
this.lastCueEndTime=null;
}},
{
key:'getHandler',
value:function getHandler(){
return this.outputFilter;
}},
{
key:'setHandler',
value:function setHandler(newHandler){
this.outputFilter=newHandler;
}},
{
key:'setPAC',
value:function setPAC(pacData){
this.writeScreen.setPAC(pacData);
}},
{
key:'setBkgData',
value:function setBkgData(bkgData){
this.writeScreen.setBkgData(bkgData);
}},
{
key:'setMode',
value:function setMode(newMode){
if(newMode===this.mode){
return;
}

this.mode=newMode;
logger.log('INFO','MODE='+newMode);
if(this.mode==='MODE_POP-ON'){
this.writeScreen=this.nonDisplayedMemory;
}else{
this.writeScreen=this.displayedMemory;
this.writeScreen.reset();
}
if(this.mode!=='MODE_ROLL-UP'){
this.displayedMemory.nrRollUpRows=null;
this.nonDisplayedMemory.nrRollUpRows=null;
}
this.mode=newMode;
}},
{
key:'insertChars',
value:function insertChars(chars){
for(var i=0;i<chars.length;i++){
this.writeScreen.insertChar(chars[i]);
}

var screen=this.writeScreen===this.displayedMemory?'DISP':'NON_DISP';
logger.log('INFO',screen+': '+this.writeScreen.getDisplayText(true));
if(this.mode==='MODE_PAINT-ON'||this.mode==='MODE_ROLL-UP'){
logger.log('TEXT','DISPLAYED: '+this.displayedMemory.getDisplayText(true));
this.outputDataUpdate();
}
}},
{
key:'ccRCL',
value:function ccRCL(){
// Resume Caption Loading (switch mode to Pop On)
logger.log('INFO','RCL - Resume Caption Loading');
this.setMode('MODE_POP-ON');
}},
{
key:'ccBS',
value:function ccBS(){
// BackSpace
logger.log('INFO','BS - BackSpace');
if(this.mode==='MODE_TEXT'){
return;
}

this.writeScreen.backSpace();
if(this.writeScreen===this.displayedMemory){
this.outputDataUpdate();
}
}},
{
key:'ccAOF',
value:function ccAOF(){// Reserved (formerly Alarm Off)

}},
{
key:'ccAON',
value:function ccAON(){// Reserved (formerly Alarm On)

}},
{
key:'ccDER',
value:function ccDER(){
// Delete to End of Row
logger.log('INFO','DER- Delete to End of Row');
this.writeScreen.clearToEndOfRow();
this.outputDataUpdate();
}},
{
key:'ccRU',
value:function ccRU(nrRows){
// Roll-Up Captions-2,3,or 4 Rows
logger.log('INFO','RU('+nrRows+') - Roll Up');
this.writeScreen=this.displayedMemory;
this.setMode('MODE_ROLL-UP');
this.writeScreen.setRollUpRows(nrRows);
}},
{
key:'ccFON',
value:function ccFON(){
// Flash On
logger.log('INFO','FON - Flash On');
this.writeScreen.setPen({flash:true});
}},
{
key:'ccRDC',
value:function ccRDC(){
// Resume Direct Captioning (switch mode to PaintOn)
logger.log('INFO','RDC - Resume Direct Captioning');
this.setMode('MODE_PAINT-ON');
}},
{
key:'ccTR',
value:function ccTR(){
// Text Restart in text mode (not supported, however)
logger.log('INFO','TR');
this.setMode('MODE_TEXT');
}},
{
key:'ccRTD',
value:function ccRTD(){
// Resume Text Display in Text mode (not supported, however)
logger.log('INFO','RTD');
this.setMode('MODE_TEXT');
}},
{
key:'ccEDM',
value:function ccEDM(){
// Erase Displayed Memory
logger.log('INFO','EDM - Erase Displayed Memory');
this.displayedMemory.reset();
this.outputDataUpdate(true);
}},
{
key:'ccCR',
value:function ccCR(){
// Carriage Return
logger.log('CR - Carriage Return');
this.writeScreen.rollUp();
this.outputDataUpdate(true);
}},
{
key:'ccENM',
value:function ccENM(){
// Erase Non-Displayed Memory
logger.log('INFO','ENM - Erase Non-displayed Memory');
this.nonDisplayedMemory.reset();
}},
{
key:'ccEOC',
value:function ccEOC(){
// End of Caption (Flip Memories)
logger.log('INFO','EOC - End Of Caption');
if(this.mode==='MODE_POP-ON'){
var tmp=this.displayedMemory;
this.displayedMemory=this.nonDisplayedMemory;
this.nonDisplayedMemory=tmp;
this.writeScreen=this.nonDisplayedMemory;
logger.log('TEXT','DISP: '+this.displayedMemory.getDisplayText());
}
this.outputDataUpdate(true);
}},
{
key:'ccTO',
value:function ccTO(nrCols){
// Tab Offset 1,2, or 3 columns
logger.log('INFO','TO('+nrCols+') - Tab Offset');
this.writeScreen.moveCursor(nrCols);
}},
{
key:'ccMIDROW',
value:function ccMIDROW(secondByte){
// Parse MIDROW command
var styles={flash:false};
styles.underline=secondByte%2===1;
styles.italics=secondByte>=0x2e;
if(!styles.italics){
var colorIndex=Math.floor(secondByte/2)-0x10;
var colors=['white','green','blue','cyan','red','yellow','magenta'];
styles.foreground=colors[colorIndex];
}else{
styles.foreground='white';
}
logger.log('INFO','MIDROW: '+JSON.stringify(styles));
this.writeScreen.setPen(styles);
}},
{
key:'outputDataUpdate',
value:function outputDataUpdate(){
var dispatch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;

var t=logger.time;
if(t===null){
return;
}

if(this.outputFilter){
if(this.cueStartTime===null&&!this.displayedMemory.isEmpty()){
// Start of a new cue
this.cueStartTime=t;
}else{
if(!this.displayedMemory.equals(this.lastOutputScreen)){
if(this.outputFilter.newCue){
this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen);
if(dispatch===true&&this.outputFilter.dispatchCue){
this.outputFilter.dispatchCue();
}
}
this.cueStartTime=this.displayedMemory.isEmpty()?null:t;
}
}
this.lastOutputScreen.copy(this.displayedMemory);
}
}},
{
key:'cueSplitAtTime',
value:function cueSplitAtTime(t){
if(this.outputFilter){
if(!this.displayedMemory.isEmpty()){
if(this.outputFilter.newCue){
this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory);
}

this.cueStartTime=t;
}
}
}}]);


return Cea608Channel;
}();

var Cea608Parser=function(){
function Cea608Parser(field,out1,out2){
_classCallCheck(this,Cea608Parser);

this.field=field||1;
this.outputs=[out1,out2];
this.channels=[new Cea608Channel(1,out1),new Cea608Channel(2,out2)];
this.currChNr=-1;// Will be 1 or 2
this.lastCmdA=null;// First byte of last command
this.lastCmdB=null;// Second byte of last command
this.bufferedData=[];
this.startTime=null;
this.lastTime=null;
this.dataCounters={'padding':0,'char':0,'cmd':0,'other':0};
}

_createClass(Cea608Parser,[{
key:'getHandler',
value:function getHandler(index){
return this.channels[index].getHandler();
}},
{
key:'setHandler',
value:function setHandler(index,newHandler){
this.channels[index].setHandler(newHandler);
}

/**
       * Add data for time t in forms of list of bytes (unsigned ints). The bytes are treated as pairs.
       */},

{
key:'addData',
value:function addData(t,byteList){
var cmdFound=void 0,
a=void 0,
b=void 0,
charsFound=false;

this.lastTime=t;
logger.setTime(t);

for(var i=0;i<byteList.length;i+=2){
a=byteList[i]&0x7f;
b=byteList[i+1]&0x7f;
if(a===0&&b===0){
this.dataCounters.padding+=2;
continue;
}else{
logger.log('DATA','['+numArrayToHexArray([byteList[i],byteList[i+1]])+'] -> ('+numArrayToHexArray([a,b])+')');
}
cmdFound=this.parseCmd(a,b);
if(!cmdFound){
cmdFound=this.parseMidrow(a,b);
}

if(!cmdFound){
cmdFound=this.parsePAC(a,b);
}

if(!cmdFound){
cmdFound=this.parseBackgroundAttributes(a,b);
}

if(!cmdFound){
charsFound=this.parseChars(a,b);
if(charsFound){
if(this.currChNr&&this.currChNr>=0){
var channel=this.channels[this.currChNr-1];
channel.insertChars(charsFound);
}else{
logger.log('WARNING','No channel found yet. TEXT-MODE?');
}
}
}
if(cmdFound){
this.dataCounters.cmd+=2;
}else if(charsFound){
this.dataCounters.char+=2;
}else{
this.dataCounters.other+=2;
logger.log('WARNING','Couldn\'t parse cleaned data '+numArrayToHexArray([a,b])+' orig: '+numArrayToHexArray([byteList[i],byteList[i+1]]));
}
}
}

/**
       * Parse Command.
       * @returns {Boolean} Tells if a command was found
       */},

{
key:'parseCmd',
value:function parseCmd(a,b){
var chNr=null;

var cond1=(a===0x14||a===0x1C)&&b>=0x20&&b<=0x2F;
var cond2=(a===0x17||a===0x1F)&&b>=0x21&&b<=0x23;
if(!(cond1||cond2)){
return false;
}

if(a===this.lastCmdA&&b===this.lastCmdB){
this.lastCmdA=null;
this.lastCmdB=null;// Repeated commands are dropped (once)
logger.log('DEBUG','Repeated command ('+numArrayToHexArray([a,b])+') is dropped');
return true;
}

if(a===0x14||a===0x17){
chNr=1;
}else{
chNr=2;
}// (a === 0x1C || a=== 0x1f)

var channel=this.channels[chNr-1];

if(a===0x14||a===0x1C){
if(b===0x20){
channel.ccRCL();
}else if(b===0x21){
channel.ccBS();
}else if(b===0x22){
channel.ccAOF();
}else if(b===0x23){
channel.ccAON();
}else if(b===0x24){
channel.ccDER();
}else if(b===0x25){
channel.ccRU(2);
}else if(b===0x26){
channel.ccRU(3);
}else if(b===0x27){
channel.ccRU(4);
}else if(b===0x28){
channel.ccFON();
}else if(b===0x29){
channel.ccRDC();
}else if(b===0x2A){
channel.ccTR();
}else if(b===0x2B){
channel.ccRTD();
}else if(b===0x2C){
channel.ccEDM();
}else if(b===0x2D){
channel.ccCR();
}else if(b===0x2E){
channel.ccENM();
}else if(b===0x2F){
channel.ccEOC();
}
}else{
// a == 0x17 || a == 0x1F
channel.ccTO(b-0x20);
}
this.lastCmdA=a;
this.lastCmdB=b;
this.currChNr=chNr;
return true;
}

/**
       * Parse midrow styling command
       * @returns {Boolean}
       */},

{
key:'parseMidrow',
value:function parseMidrow(a,b){
var chNr=null;

if((a===0x11||a===0x19)&&b>=0x20&&b<=0x2f){
if(a===0x11){
chNr=1;
}else{
chNr=2;
}

if(chNr!==this.currChNr){
logger.log('ERROR','Mismatch channel in midrow parsing');
return false;
}
var channel=this.channels[chNr-1];
channel.ccMIDROW(b);
logger.log('DEBUG','MIDROW ('+numArrayToHexArray([a,b])+')');
return true;
}
return false;
}
/**
       * Parse Preable Access Codes (Table 53).
       * @returns {Boolean} Tells if PAC found
       */},

{
key:'parsePAC',
value:function parsePAC(a,b){
var chNr=null;
var row=null;

var case1=(a>=0x11&&a<=0x17||a>=0x19&&a<=0x1F)&&b>=0x40&&b<=0x7F;
var case2=(a===0x10||a===0x18)&&b>=0x40&&b<=0x5F;
if(!(case1||case2)){
return false;
}

if(a===this.lastCmdA&&b===this.lastCmdB){
this.lastCmdA=null;
this.lastCmdB=null;
return true;// Repeated commands are dropped (once)
}

chNr=a<=0x17?1:2;

if(b>=0x40&&b<=0x5F){
row=chNr===1?rowsLowCh1[a]:rowsLowCh2[a];
}else{
// 0x60 <= b <= 0x7F
row=chNr===1?rowsHighCh1[a]:rowsHighCh2[a];
}
var pacData=this.interpretPAC(row,b);
var channel=this.channels[chNr-1];
channel.setPAC(pacData);
this.lastCmdA=a;
this.lastCmdB=b;
this.currChNr=chNr;
return true;
}

/**
       * Interpret the second byte of the pac, and return the information.
       * @returns {Object} pacData with style parameters.
       */},

{
key:'interpretPAC',
value:function interpretPAC(row,_byte3){
var pacIndex=_byte3;
var pacData={color:null,italics:false,indent:null,underline:false,row:row};

if(_byte3>0x5F){
pacIndex=_byte3-0x60;
}else{
pacIndex=_byte3-0x40;
}

pacData.underline=(pacIndex&1)===1;
if(pacIndex<=0xd){
pacData.color=['white','green','blue','cyan','red','yellow','magenta','white'][Math.floor(pacIndex/2)];
}else if(pacIndex<=0xf){
pacData.italics=true;
pacData.color='white';
}else{
pacData.indent=Math.floor((pacIndex-0x10)/2)*4;
}
return pacData;// Note that row has zero offset. The spec uses 1.
}

/**
       * Parse characters.
       * @returns An array with 1 to 2 codes corresponding to chars, if found. null otherwise.
       */},

{
key:'parseChars',
value:function parseChars(a,b){
var channelNr=null,
charCodes=null,
charCode1=null;

if(a>=0x19){
channelNr=2;
charCode1=a-8;
}else{
channelNr=1;
charCode1=a;
}
if(charCode1>=0x11&&charCode1<=0x13){
// Special character
var oneCode=b;
if(charCode1===0x11){
oneCode=b+0x50;
}else if(charCode1===0x12){
oneCode=b+0x70;
}else{
oneCode=b+0x90;
}

logger.log('INFO','Special char \''+getCharForByte(oneCode)+'\' in channel '+channelNr);
charCodes=[oneCode];
}else if(a>=0x20&&a<=0x7f){
charCodes=b===0?[a]:[a,b];
}
if(charCodes){
var hexCodes=numArrayToHexArray(charCodes);
logger.log('DEBUG','Char codes =  '+hexCodes.join(','));
this.lastCmdA=null;
this.lastCmdB=null;
}
return charCodes;
}

/**
      * Parse extended background attributes as well as new foreground color black.
      * @returns{Boolean} Tells if background attributes are found
      */},

{
key:'parseBackgroundAttributes',
value:function parseBackgroundAttributes(a,b){
var bkgData=void 0,
index=void 0,
chNr=void 0,
channel=void 0;

var case1=(a===0x10||a===0x18)&&b>=0x20&&b<=0x2f;
var case2=(a===0x17||a===0x1f)&&b>=0x2d&&b<=0x2f;
if(!(case1||case2)){
return false;
}

bkgData={};
if(a===0x10||a===0x18){
index=Math.floor((b-0x20)/2);
bkgData.background=backgroundColors[index];
if(b%2===1){
bkgData.background=bkgData.background+'_semi';
}
}else if(b===0x2d){
bkgData.background='transparent';
}else{
bkgData.foreground='black';
if(b===0x2f){
bkgData.underline=true;
}
}
chNr=a<0x18?1:2;
channel=this.channels[chNr-1];
channel.setBkgData(bkgData);
this.lastCmdA=null;
this.lastCmdB=null;
return true;
}

/**
       * Reset state of parser and its channels.
       */},

{
key:'reset',
value:function reset(){
for(var i=0;i<this.channels.length;i++){
if(this.channels[i]){
this.channels[i].reset();
}
}
this.lastCmdA=null;
this.lastCmdB=null;
}

/**
       * Trigger the generation of a cue, and the start of a new one if displayScreens are not empty.
       */},

{
key:'cueSplitAtTime',
value:function cueSplitAtTime(t){
for(var i=0;i<this.channels.length;i++){
if(this.channels[i]){
this.channels[i].cueSplitAtTime(t);
}
}
}}]);


return Cea608Parser;
}();

exports.default=Cea608Parser;
module.exports=exports['default'];

/***/},
/* 74 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

var OutputFilter=function(){
function OutputFilter(timelineController,trackName){
_classCallCheck(this,OutputFilter);

this.timelineController=timelineController;
this.trackName=trackName;
this.startTime=null;
this.endTime=null;
this.screen=null;
}

_createClass(OutputFilter,[{
key:"dispatchCue",
value:function dispatchCue(){
if(this.startTime===null){
return;
}

this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen);
this.startTime=null;
}},
{
key:"newCue",
value:function newCue(startTime,endTime,screen){
if(this.startTime===null||this.startTime>startTime){
this.startTime=startTime;
}

this.endTime=endTime;
this.screen=screen;
this.timelineController.createCaptionsTrack(this.trackName);
}}]);


return OutputFilter;
}();

exports.default=OutputFilter;
module.exports=exports["default"];

/***/},
/* 75 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _vttparser=__webpack_require__(30);

var _vttparser2=_interopRequireDefault(_vttparser);

var _id=__webpack_require__(10);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

// String.prototype.startsWith is not supported in IE11
var startsWith=function startsWith(inputString,searchString,position){
return inputString.substr(position||0,searchString.length)===searchString;
};

var cueString2millis=function cueString2millis(timeString){
var ts=parseInt(timeString.substr(-3));
var secs=parseInt(timeString.substr(-6,2));
var mins=parseInt(timeString.substr(-9,2));
var hours=timeString.length>9?parseInt(timeString.substr(0,timeString.indexOf(':'))):0;

if(!Number.isFinite(ts)||!Number.isFinite(secs)||!Number.isFinite(mins)||!Number.isFinite(hours)){
return-1;
}

ts+=1000*secs;
ts+=60*1000*mins;
ts+=60*60*1000*hours;

return ts;
};

// From https://github.com/darkskyapp/string-hash
var hash=function hash(text){
var hash=5381;
var i=text.length;
while(i){
hash=hash*33^text.charCodeAt(--i);
}

return(hash>>>0).toString();
};

var calculateOffset=function calculateOffset(vttCCs,cc,presentationTime){
var currCC=vttCCs[cc];
var prevCC=vttCCs[currCC.prevCC];

// This is the first discontinuity or cues have been processed since the last discontinuity
// Offset = current discontinuity time
if(!prevCC||!prevCC.new&&currCC.new){
vttCCs.ccOffset=vttCCs.presentationOffset=currCC.start;
currCC.new=false;
return;
}

// There have been discontinuities since cues were last parsed.
// Offset = time elapsed
while(prevCC&&prevCC.new){
vttCCs.ccOffset+=currCC.start-prevCC.start;
currCC.new=false;
currCC=prevCC;
prevCC=vttCCs[currCC.prevCC];
}

vttCCs.presentationOffset=presentationTime;
};

var WebVTTParser={
parse:function parse(vttByteArray,syncPTS,vttCCs,cc,callBack,errorCallBack){
// Convert byteArray into string, replacing any somewhat exotic linefeeds with "\n", then split on that character.
var re=/\r\n|\n\r|\n|\r/g;
// Uint8Array.prototype.reduce is not implemented in IE11
var vttLines=(0,_id.utf8ArrayToStr)(new Uint8Array(vttByteArray)).trim().replace(re,'\n').split('\n');

var cueTime='00:00.000';
var mpegTs=0;
var localTime=0;
var presentationTime=0;
var cues=[];
var parsingError=void 0;
var inHeader=true;
// let VTTCue = VTTCue || window.TextTrackCue;

// Create parser object using VTTCue with TextTrackCue fallback on certain browsers.
var parser=new _vttparser2.default();

parser.oncue=function(cue){
// Adjust cue timing; clamp cues to start no earlier than - and drop cues that don't end after - 0 on timeline.
var currCC=vttCCs[cc];
var cueOffset=vttCCs.ccOffset;

// Update offsets for new discontinuities
if(currCC&&currCC.new){
if(localTime!==undefined){
// When local time is provided, offset = discontinuity start time - local time
cueOffset=vttCCs.ccOffset=currCC.start;
}else{
calculateOffset(vttCCs,cc,presentationTime);
}
}

if(presentationTime){
// If we have MPEGTS, offset = presentation time + discontinuity offset
cueOffset=presentationTime-vttCCs.presentationOffset;
}

cue.startTime+=cueOffset-localTime;
cue.endTime+=cueOffset-localTime;

// Create a unique hash id for a cue based on start/end times and text.
// This helps timeline-controller to avoid showing repeated captions.
cue.id=hash(cue.startTime.toString())+hash(cue.endTime.toString())+hash(cue.text);

// Fix encoding of special characters. TODO: Test with all sorts of weird characters.
cue.text=decodeURIComponent(encodeURIComponent(cue.text));
if(cue.endTime>0){
cues.push(cue);
}
};

parser.onparsingerror=function(e){
parsingError=e;
};

parser.onflush=function(){
if(parsingError&&errorCallBack){
errorCallBack(parsingError);
return;
}
callBack(cues);
};

// Go through contents line by line.
vttLines.forEach(function(line){
if(inHeader){
// Look for X-TIMESTAMP-MAP in header.
if(startsWith(line,'X-TIMESTAMP-MAP=')){
// Once found, no more are allowed anyway, so stop searching.
inHeader=false;
// Extract LOCAL and MPEGTS.
line.substr(16).split(',').forEach(function(timestamp){
if(startsWith(timestamp,'LOCAL:')){
cueTime=timestamp.substr(6);
}else if(startsWith(timestamp,'MPEGTS:')){
mpegTs=parseInt(timestamp.substr(7));
}
});
try{
// Calculate subtitle offset in milliseconds.
if(syncPTS+(vttCCs[cc].start*90000||0)<0){
syncPTS+=8589934592;
}
// Adjust MPEGTS by sync PTS.
mpegTs-=syncPTS;
// Convert cue time to seconds
localTime=cueString2millis(cueTime)/1000;
// Convert MPEGTS to seconds from 90kHz.
presentationTime=mpegTs/90000;

if(localTime===-1){
parsingError=new Error('Malformed X-TIMESTAMP-MAP: '+line);
}
}catch(e){
parsingError=new Error('Malformed X-TIMESTAMP-MAP: '+line);
}
// Return without parsing X-TIMESTAMP-MAP line.
return;
}else if(line===''){
inHeader=false;
}
}
// Parse line by default.
parser.parse(line+'\n');
});

parser.flush();
}};


exports.default=WebVTTParser;
module.exports=exports['default'];

/***/},
/* 76 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _logger=__webpack_require__(0);

var _levelHelper=__webpack_require__(7);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}

var SubtitleTrackController=function(_EventHandler){
_inherits(SubtitleTrackController,_EventHandler);

function SubtitleTrackController(hls){
_classCallCheck(this,SubtitleTrackController);

var _this=_possibleConstructorReturn(this,(SubtitleTrackController.__proto__||Object.getPrototypeOf(SubtitleTrackController)).call(this,hls,_events2.default.MEDIA_ATTACHED,_events2.default.MEDIA_DETACHING,_events2.default.MANIFEST_LOADED,_events2.default.SUBTITLE_TRACK_LOADED));

_this.tracks=[];
_this.trackId=-1;
_this.media=null;
_this.stopped=true;

/**
     * @member {boolean} subtitleDisplay Enable/disable subtitle display rendering
     */
_this.subtitleDisplay=true;
return _this;
}

_createClass(SubtitleTrackController,[{
key:'destroy',
value:function destroy(){
_eventHandler2.default.prototype.destroy.call(this);
}

// Listen for subtitle track change, then extract the current track ID.
},
{
key:'onMediaAttached',
value:function onMediaAttached(data){
var _this2=this;

this.media=data.media;
if(!this.media){
return;
}

if(this.queuedDefaultTrack){
this.subtitleTrack=this.queuedDefaultTrack;
delete this.queuedDefaultTrack;
}

this.trackChangeListener=this._onTextTracksChanged.bind(this);

this.useTextTrackPolling=!(this.media.textTracks&&'onchange'in this.media.textTracks);
if(this.useTextTrackPolling){
this.subtitlePollingInterval=setInterval(function(){
_this2.trackChangeListener();
},500);
}else{
this.media.textTracks.addEventListener('change',this.trackChangeListener);
}
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
if(!this.media){
return;
}

if(this.useTextTrackPolling){
clearInterval(this.subtitlePollingInterval);
}else{
this.media.textTracks.removeEventListener('change',this.trackChangeListener);
}

this.media=null;
}

// Fired whenever a new manifest is loaded.
},
{
key:'onManifestLoaded',
value:function onManifestLoaded(data){
var _this3=this;

var tracks=data.subtitles||[];
this.tracks=tracks;
this.hls.trigger(_events2.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:tracks});

// loop through available subtitle tracks and autoselect default if needed
// TODO: improve selection logic to handle forced, etc
tracks.forEach(function(track){
if(track.default){
// setting this.subtitleTrack will trigger internal logic
// if media has not been attached yet, it will fail
// we keep a reference to the default track id
// and we'll set subtitleTrack when onMediaAttached is triggered
if(_this3.media){
_this3.subtitleTrack=track.id;
}else{
_this3.queuedDefaultTrack=track.id;
}
}
});
}},
{
key:'onSubtitleTrackLoaded',
value:function onSubtitleTrackLoaded(data){
var _this4=this;

var id=data.id,
details=data.details;
var trackId=this.trackId,
tracks=this.tracks;

var currentTrack=tracks[trackId];
if(id>=tracks.length||id!==trackId||!currentTrack||this.stopped){
this._clearReloadTimer();
return;
}

_logger.logger.log('subtitle track '+id+' loaded');
if(details.live){
var reloadInterval=(0,_levelHelper.computeReloadInterval)(currentTrack.details,details,data.stats.trequest);
_logger.logger.log('Reloading live subtitle playlist in '+reloadInterval+'ms');
this.timer=setTimeout(function(){
_this4._loadCurrentTrack();
},reloadInterval);
}else{
this._clearReloadTimer();
}
}},
{
key:'startLoad',
value:function startLoad(){
this.stopped=false;
this._loadCurrentTrack();
}},
{
key:'stopLoad',
value:function stopLoad(){
this.stopped=true;
this._clearReloadTimer();
}

/** get alternate subtitle tracks list from playlist **/},

{
key:'_clearReloadTimer',
value:function _clearReloadTimer(){
if(this.timer){
clearTimeout(this.timer);
this.timer=null;
}
}},
{
key:'_loadCurrentTrack',
value:function _loadCurrentTrack(){
var trackId=this.trackId,
tracks=this.tracks,
hls=this.hls;

var currentTrack=tracks[trackId];
if(trackId<0||!currentTrack||currentTrack.details&&!currentTrack.details.live){
return;
}
_logger.logger.log('Loading subtitle track '+trackId);
hls.trigger(_events2.default.SUBTITLE_TRACK_LOADING,{url:currentTrack.url,id:trackId});
}

/**
     * Disables the old subtitleTrack and sets current mode on the next subtitleTrack.
     * This operates on the DOM textTracks.
     * A value of -1 will disable all subtitle tracks.
     * @param newId - The id of the next track to enable
     * @private
     */},

{
key:'_toggleTrackModes',
value:function _toggleTrackModes(newId){
var media=this.media,
subtitleDisplay=this.subtitleDisplay,
trackId=this.trackId;

if(!media){
return;
}

var textTracks=filterSubtitleTracks(media.textTracks);
if(newId===-1){
[].slice.call(textTracks).forEach(function(track){
track.mode='disabled';
});
}else{
var oldTrack=textTracks[trackId];
if(oldTrack){
oldTrack.mode='disabled';
}
}

var nextTrack=textTracks[newId];
if(nextTrack){
nextTrack.mode=subtitleDisplay?'showing':'hidden';
}
}

/**
       * This method is responsible for validating the subtitle index and periodically reloading if live.
       * Dispatches the SUBTITLE_TRACK_SWITCH event, which instructs the subtitle-stream-controller to load the selected track.
       * @param newId - The id of the subtitle track to activate.
       */},

{
key:'_setSubtitleTrackInternal',
value:function _setSubtitleTrackInternal(newId){
var hls=this.hls,
tracks=this.tracks;

if(!Number.isFinite(newId)||newId<-1||newId>=tracks.length){
return;
}

this.trackId=newId;
_logger.logger.log('Switching to subtitle track '+newId);
hls.trigger(_events2.default.SUBTITLE_TRACK_SWITCH,{id:newId});
this._loadCurrentTrack();
}},
{
key:'_onTextTracksChanged',
value:function _onTextTracksChanged(){
// Media is undefined when switching streams via loadSource()
if(!this.media){
return;
}

var trackId=-1;
var tracks=filterSubtitleTracks(this.media.textTracks);
for(var id=0;id<tracks.length;id++){
if(tracks[id].mode==='hidden'){
// Do not break in case there is a following track with showing.
trackId=id;
}else if(tracks[id].mode==='showing'){
trackId=id;
break;
}
}

// Setting current subtitleTrack will invoke code.
this.subtitleTrack=trackId;
}},
{
key:'subtitleTracks',
get:function get(){
return this.tracks;
}

/** get index of the selected subtitle track (index in subtitle track lists) **/},

{
key:'subtitleTrack',
get:function get(){
return this.trackId;
}

/** select a subtitle track, based on its index in subtitle track lists**/,

set:function set(subtitleTrackId){
if(this.trackId!==subtitleTrackId){
this._toggleTrackModes(subtitleTrackId);
this._setSubtitleTrackInternal(subtitleTrackId);
}
}}]);


return SubtitleTrackController;
}(_eventHandler2.default);

function filterSubtitleTracks(textTrackList){
var tracks=[];
for(var i=0;i<textTrackList.length;i++){
var track=textTrackList[i];
// Edge adds a track without a label; we don't want to use it
if(track.kind==='subtitles'&&track.label){
tracks.push(textTrackList[i]);
}
}
return tracks;
}

exports.default=SubtitleTrackController;
module.exports=exports['default'];

/***/},
/* 77 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

exports.SubtitleStreamController=undefined;

var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _logger=__webpack_require__(0);

var _decrypter=__webpack_require__(12);

var _decrypter2=_interopRequireDefault(_decrypter);

var _bufferHelper=__webpack_require__(4);

var _fragmentFinders=__webpack_require__(27);

var _fragmentTracker=__webpack_require__(6);

var _baseStreamController=__webpack_require__(14);

var _baseStreamController2=_interopRequireDefault(_baseStreamController);

var _levelHelper=__webpack_require__(7);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @class SubtitleStreamController
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */

var _window=window,
performance=_window.performance;

var TICK_INTERVAL=500;// how often to tick in ms

var SubtitleStreamController=exports.SubtitleStreamController=function(_BaseStreamController){
_inherits(SubtitleStreamController,_BaseStreamController);

function SubtitleStreamController(hls,fragmentTracker){
_classCallCheck(this,SubtitleStreamController);

var _this=_possibleConstructorReturn(this,(SubtitleStreamController.__proto__||Object.getPrototypeOf(SubtitleStreamController)).call(this,hls,_events2.default.MEDIA_ATTACHED,_events2.default.MEDIA_DETACHING,_events2.default.ERROR,_events2.default.KEY_LOADED,_events2.default.FRAG_LOADED,_events2.default.SUBTITLE_TRACKS_UPDATED,_events2.default.SUBTITLE_TRACK_SWITCH,_events2.default.SUBTITLE_TRACK_LOADED,_events2.default.SUBTITLE_FRAG_PROCESSED,_events2.default.LEVEL_UPDATED));

_this.fragmentTracker=fragmentTracker;
_this.config=hls.config;
_this.state=_baseStreamController.State.STOPPED;
_this.tracks=[];
_this.tracksBuffered=[];
_this.currentTrackId=-1;
_this.decrypter=new _decrypter2.default(hls,hls.config);
// lastAVStart stores the time in seconds for the start time of a level load
_this.lastAVStart=0;
_this._onMediaSeeking=_this.onMediaSeeking.bind(_this);
return _this;
}

_createClass(SubtitleStreamController,[{
key:'onSubtitleFragProcessed',
value:function onSubtitleFragProcessed(data){
var frag=data.frag,
success=data.success;

this.fragPrevious=frag;
this.state=_baseStreamController.State.IDLE;
if(!success){
return;
}

var buffered=this.tracksBuffered[this.currentTrackId];
if(!buffered){
return;
}

// Create/update a buffered array matching the interface used by BufferHelper.bufferedInfo
// so we can re-use the logic used to detect how much have been buffered
var timeRange=void 0;
var fragStart=frag.start;
for(var i=0;i<buffered.length;i++){
if(fragStart>=buffered[i].start&&fragStart<=buffered[i].end){
timeRange=buffered[i];
break;
}
}

var fragEnd=frag.start+frag.duration;
if(timeRange){
timeRange.end=fragEnd;
}else{
timeRange={
start:fragStart,
end:fragEnd};

buffered.push(timeRange);
}
}},
{
key:'onMediaAttached',
value:function onMediaAttached(_ref){
var media=_ref.media;

this.media=media;
media.addEventListener('seeking',this._onMediaSeeking);
this.state=_baseStreamController.State.IDLE;
}},
{
key:'onMediaDetaching',
value:function onMediaDetaching(){
this.media.removeEventListener('seeking',this._onMediaSeeking);
this.media=null;
this.state=_baseStreamController.State.STOPPED;
}

// If something goes wrong, proceed to next frag, if we were processing one.
},
{
key:'onError',
value:function onError(data){
var frag=data.frag;
// don't handle error not related to subtitle fragment
if(!frag||frag.type!=='subtitle'){
return;
}
this.state=_baseStreamController.State.IDLE;
}

// Got all new subtitle tracks.
},
{
key:'onSubtitleTracksUpdated',
value:function onSubtitleTracksUpdated(data){
var _this2=this;

_logger.logger.log('subtitle tracks updated');
this.tracksBuffered=[];
this.tracks=data.subtitleTracks;
this.tracks.forEach(function(track){
_this2.tracksBuffered[track.id]=[];
});
}},
{
key:'onSubtitleTrackSwitch',
value:function onSubtitleTrackSwitch(data){
this.currentTrackId=data.id;

if(!this.tracks||this.currentTrackId===-1){
this.clearInterval();
return;
}

// Check if track has the necessary details to load fragments
var currentTrack=this.tracks[this.currentTrackId];
if(currentTrack&&currentTrack.details){
this.setInterval(TICK_INTERVAL);
}
}

// Got a new set of subtitle fragments.
},
{
key:'onSubtitleTrackLoaded',
value:function onSubtitleTrackLoaded(data){
var id=data.id,
details=data.details;
var currentTrackId=this.currentTrackId,
tracks=this.tracks;

var currentTrack=tracks[currentTrackId];
if(id>=tracks.length||id!==currentTrackId||!currentTrack){
return;
}

if(details.live){
(0,_levelHelper.mergeSubtitlePlaylists)(currentTrack.details,details,this.lastAVStart);
}
currentTrack.details=details;
this.setInterval(TICK_INTERVAL);
}},
{
key:'onKeyLoaded',
value:function onKeyLoaded(){
if(this.state===_baseStreamController.State.KEY_LOADING){
this.state=_baseStreamController.State.IDLE;
}
}},
{
key:'onFragLoaded',
value:function onFragLoaded(data){
var fragCurrent=this.fragCurrent;
var decryptData=data.frag.decryptdata;
var fragLoaded=data.frag;
var hls=this.hls;

if(this.state===_baseStreamController.State.FRAG_LOADING&&fragCurrent&&data.frag.type==='subtitle'&&fragCurrent.sn===data.frag.sn){
// check to see if the payload needs to be decrypted
if(data.payload.byteLength>0&&decryptData&&decryptData.key&&decryptData.method==='AES-128'){
var startTime=performance.now();

// decrypt the subtitles
this.decrypter.decrypt(data.payload,decryptData.key.buffer,decryptData.iv.buffer,function(decryptedData){
var endTime=performance.now();
hls.trigger(_events2.default.FRAG_DECRYPTED,{frag:fragLoaded,payload:decryptedData,stats:{tstart:startTime,tdecrypt:endTime}});
});
}
}
}},
{
key:'onLevelUpdated',
value:function onLevelUpdated(_ref2){
var details=_ref2.details;

var frags=details.fragments;
this.lastAVStart=frags.length?frags[0].start:0;
}},
{
key:'doTick',
value:function doTick(){
if(!this.media){
this.state=_baseStreamController.State.IDLE;
return;
}

switch(this.state){
case _baseStreamController.State.IDLE:
{
var config=this.config,
currentTrackId=this.currentTrackId,
fragmentTracker=this.fragmentTracker,
media=this.media,
tracks=this.tracks;

if(!tracks||!tracks[currentTrackId]||!tracks[currentTrackId].details){
break;
}

var maxBufferHole=config.maxBufferHole,
maxFragLookUpTolerance=config.maxFragLookUpTolerance;

var maxConfigBuffer=Math.min(config.maxBufferLength,config.maxMaxBufferLength);
var bufferedInfo=_bufferHelper.BufferHelper.bufferedInfo(this._getBuffered(),media.currentTime,maxBufferHole);
var bufferEnd=bufferedInfo.end,
bufferLen=bufferedInfo.len;


var trackDetails=tracks[currentTrackId].details;
var fragments=trackDetails.fragments;
var fragLen=fragments.length;
var end=fragments[fragLen-1].start+fragments[fragLen-1].duration;

if(bufferLen>maxConfigBuffer){
return;
}

var foundFrag=void 0;
var fragPrevious=this.fragPrevious;
if(bufferEnd<end){
if(fragPrevious&&trackDetails.hasProgramDateTime){
foundFrag=(0,_fragmentFinders.findFragmentByPDT)(fragments,fragPrevious.endProgramDateTime,maxFragLookUpTolerance);
}
if(!foundFrag){
foundFrag=(0,_fragmentFinders.findFragmentByPTS)(fragPrevious,fragments,bufferEnd,maxFragLookUpTolerance);
}
}else{
foundFrag=fragments[fragLen-1];
}

if(foundFrag&&foundFrag.encrypted){
_logger.logger.log('Loading key for '+foundFrag.sn);
this.state=_baseStreamController.State.KEY_LOADING;
this.hls.trigger(_events2.default.KEY_LOADING,{frag:foundFrag});
}else if(foundFrag&&fragmentTracker.getState(foundFrag)===_fragmentTracker.FragmentState.NOT_LOADED){
// only load if fragment is not loaded
this.fragCurrent=foundFrag;
this.state=_baseStreamController.State.FRAG_LOADING;
this.hls.trigger(_events2.default.FRAG_LOADING,{frag:foundFrag});
}
}}

}},
{
key:'stopLoad',
value:function stopLoad(){
this.lastAVStart=0;
_get(SubtitleStreamController.prototype.__proto__||Object.getPrototypeOf(SubtitleStreamController.prototype),'stopLoad',this).call(this);
}},
{
key:'_getBuffered',
value:function _getBuffered(){
return this.tracksBuffered[this.currentTrackId]||[];
}},
{
key:'onMediaSeeking',
value:function onMediaSeeking(){
this.fragPrevious=null;
}}]);


return SubtitleStreamController;
}(_baseStreamController2.default);

/***/},
/* 78 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();

var _eventHandler=__webpack_require__(3);

var _eventHandler2=_interopRequireDefault(_eventHandler);

var _events=__webpack_require__(1);

var _events2=_interopRequireDefault(_events);

var _errors=__webpack_require__(2);

var _logger=__webpack_require__(0);

function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}

function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}

function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}

function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author Stephan Hesse <disparat@gmail.com> | <tchakabam@gmail.com>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * DRM support for Hls.js
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */

var _window=window,
XMLHttpRequest=_window.XMLHttpRequest;


var MAX_LICENSE_REQUEST_FAILURES=3;

/**
 * @see https://developer.mozilla.org/en-US/docs/Web/API/Navigator/requestMediaKeySystemAccess
 */
var KeySystems={
WIDEVINE:'com.widevine.alpha',
PLAYREADY:'com.microsoft.playready'};


/**
 * @see https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySystemConfiguration
 * @param {Array<string>} audioCodecs List of required audio codecs to support
 * @param {Array<string>} videoCodecs List of required video codecs to support
 * @param {object} drmSystemOptions Optional parameters/requirements for the key-system
 * @returns {Array<MediaSystemConfiguration>} An array of supported configurations
 */

var createWidevineMediaKeySystemConfigurations=function createWidevineMediaKeySystemConfigurations(audioCodecs,videoCodecs,drmSystemOptions){
/* jshint ignore:line */
var baseConfig={
// initDataTypes: ['keyids', 'mp4'],
// label: "",
// persistentState: "not-allowed", // or "required" ?
// distinctiveIdentifier: "not-allowed", // or "required" ?
// sessionTypes: ['temporary'],
videoCapabilities:[
// { contentType: 'video/mp4; codecs="avc1.42E01E"' }
]};


videoCodecs.forEach(function(codec){
baseConfig.videoCapabilities.push({
contentType:'video/mp4; codecs="'+codec+'"'});

});

return[baseConfig];
};

/**
 * The idea here is to handle key-system (and their respective platforms) specific configuration differences
 * in order to work with the local requestMediaKeySystemAccess method.
 *
 * We can also rule-out platform-related key-system support at this point by throwing an error or returning null.
 *
 * @param {string} keySystem Identifier for the key-system, see `KeySystems` enum
 * @param {Array<string>} audioCodecs List of required audio codecs to support
 * @param {Array<string>} videoCodecs List of required video codecs to support
 * @returns {Array<MediaSystemConfiguration> | null} A non-empty Array of MediaKeySystemConfiguration objects or `null`
 */
var getSupportedMediaKeySystemConfigurations=function getSupportedMediaKeySystemConfigurations(keySystem,audioCodecs,videoCodecs){
switch(keySystem){
case KeySystems.WIDEVINE:
return createWidevineMediaKeySystemConfigurations(audioCodecs,videoCodecs);
default:
throw Error('Unknown key-system: '+keySystem);}

};

/**
 * Controller to deal with encrypted media extensions (EME)
 * @see https://developer.mozilla.org/en-US/docs/Web/API/Encrypted_Media_Extensions_API
 *
 * @class
 * @constructor
 */

var EMEController=function(_EventHandler){
_inherits(EMEController,_EventHandler);

/**
     * @constructs
     * @param {Hls} hls Our Hls.js instance
     */
function EMEController(hls){
_classCallCheck(this,EMEController);

var _this=_possibleConstructorReturn(this,(EMEController.__proto__||Object.getPrototypeOf(EMEController)).call(this,hls,_events2.default.MEDIA_ATTACHED,_events2.default.MANIFEST_PARSED));

_this._widevineLicenseUrl=hls.config.widevineLicenseUrl;
_this._licenseXhrSetup=hls.config.licenseXhrSetup;
_this._emeEnabled=hls.config.emeEnabled;

_this._requestMediaKeySystemAccess=hls.config.requestMediaKeySystemAccessFunc;

_this._mediaKeysList=[];
_this._media=null;

_this._hasSetMediaKeys=false;
_this._isMediaEncrypted=false;

_this._requestLicenseFailureCount=0;
return _this;
}

/**
     *
     * @param {string} keySystem Identifier for the key-system, see `KeySystems` enum
     * @returns {string} License server URL for key-system (if any configured, otherwise causes error)
     */


_createClass(EMEController,[{
key:'getLicenseServerUrl',
value:function getLicenseServerUrl(keySystem){
var url=void 0;
switch(keySystem){
case KeySystems.WIDEVINE:
url=this._widevineLicenseUrl;
break;
default:
url=null;
break;}


if(!url){
_logger.logger.error('No license server URL configured for key-system "'+keySystem+'"');
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
fatal:true});

}

return url;
}

/**
       * Requests access object and adds it to our list upon success
       * @private
       * @param {string} keySystem System ID (see `KeySystems`)
       * @param {Array<string>} audioCodecs List of required audio codecs to support
       * @param {Array<string>} videoCodecs List of required video codecs to support
       */},

{
key:'_attemptKeySystemAccess',
value:function _attemptKeySystemAccess(keySystem,audioCodecs,videoCodecs){
var _this2=this;

// TODO: add other DRM "options"

var mediaKeySystemConfigs=getSupportedMediaKeySystemConfigurations(keySystem,audioCodecs,videoCodecs);

if(!mediaKeySystemConfigs){
_logger.logger.warn('Can not create config for key-system (maybe because platform is not supported):',keySystem);
return;
}

_logger.logger.log('Requesting encrypted media key-system access');

// expecting interface like window.navigator.requestMediaKeySystemAccess
this.requestMediaKeySystemAccess(keySystem,mediaKeySystemConfigs).then(function(mediaKeySystemAccess){
_this2._onMediaKeySystemAccessObtained(keySystem,mediaKeySystemAccess);
}).catch(function(err){
_logger.logger.error('Failed to obtain key-system "'+keySystem+'" access:',err);
});
}},
{
key:'_onMediaKeySystemAccessObtained',


/**
       * Handles obtaining access to a key-system
       *
       * @param {string} keySystem
       * @param {MediaKeySystemAccess} mediaKeySystemAccess https://developer.mozilla.org/en-US/docs/Web/API/MediaKeySystemAccess
       */
value:function _onMediaKeySystemAccessObtained(keySystem,mediaKeySystemAccess){
var _this3=this;

_logger.logger.log('Access for key-system "'+keySystem+'" obtained');

var mediaKeysListItem={
mediaKeys:null,
mediaKeysSession:null,
mediaKeysSessionInitialized:false,
mediaKeySystemAccess:mediaKeySystemAccess,
mediaKeySystemDomain:keySystem};


this._mediaKeysList.push(mediaKeysListItem);

mediaKeySystemAccess.createMediaKeys().then(function(mediaKeys){
mediaKeysListItem.mediaKeys=mediaKeys;

_logger.logger.log('Media-keys created for key-system "'+keySystem+'"');

_this3._onMediaKeysCreated();
}).catch(function(err){
_logger.logger.error('Failed to create media-keys:',err);
});
}

/**
       * Handles key-creation (represents access to CDM). We are going to create key-sessions upon this
       * for all existing keys where no session exists yet.
       */},

{
key:'_onMediaKeysCreated',
value:function _onMediaKeysCreated(){
var _this4=this;

// check for all key-list items if a session exists, otherwise, create one
this._mediaKeysList.forEach(function(mediaKeysListItem){
if(!mediaKeysListItem.mediaKeysSession){
mediaKeysListItem.mediaKeysSession=mediaKeysListItem.mediaKeys.createSession();
_this4._onNewMediaKeySession(mediaKeysListItem.mediaKeysSession);
}
});
}

/**
       *
       * @param {*} keySession
       */},

{
key:'_onNewMediaKeySession',
value:function _onNewMediaKeySession(keySession){
var _this5=this;

_logger.logger.log('New key-system session '+keySession.sessionId);

keySession.addEventListener('message',function(event){
_this5._onKeySessionMessage(keySession,event.message);
},false);
}},
{
key:'_onKeySessionMessage',
value:function _onKeySessionMessage(keySession,message){
_logger.logger.log('Got EME message event, creating license request');

this._requestLicense(message,function(data){
_logger.logger.log('Received license data, updating key-session');
keySession.update(data);
});
}},
{
key:'_onMediaEncrypted',
value:function _onMediaEncrypted(initDataType,initData){
_logger.logger.log('Media is encrypted using "'+initDataType+'" init data type');

this._isMediaEncrypted=true;
this._mediaEncryptionInitDataType=initDataType;
this._mediaEncryptionInitData=initData;

this._attemptSetMediaKeys();
this._generateRequestWithPreferredKeySession();
}},
{
key:'_attemptSetMediaKeys',
value:function _attemptSetMediaKeys(){
if(!this._hasSetMediaKeys){
// FIXME: see if we can/want/need-to really to deal with several potential key-sessions?
var keysListItem=this._mediaKeysList[0];
if(!keysListItem||!keysListItem.mediaKeys){
_logger.logger.error('Fatal: Media is encrypted but no CDM access or no keys have been obtained yet');
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_NO_KEYS,
fatal:true});

return;
}

_logger.logger.log('Setting keys for encrypted media');

this._media.setMediaKeys(keysListItem.mediaKeys);
this._hasSetMediaKeys=true;
}
}},
{
key:'_generateRequestWithPreferredKeySession',
value:function _generateRequestWithPreferredKeySession(){
var _this6=this;

// FIXME: see if we can/want/need-to really to deal with several potential key-sessions?
var keysListItem=this._mediaKeysList[0];
if(!keysListItem){
_logger.logger.error('Fatal: Media is encrypted but not any key-system access has been obtained yet');
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
fatal:true});

return;
}

if(keysListItem.mediaKeysSessionInitialized){
_logger.logger.warn('Key-Session already initialized but requested again');
return;
}

var keySession=keysListItem.mediaKeysSession;
if(!keySession){
_logger.logger.error('Fatal: Media is encrypted but no key-session existing');
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_NO_SESSION,
fatal:true});

}

var initDataType=this._mediaEncryptionInitDataType;
var initData=this._mediaEncryptionInitData;

_logger.logger.log('Generating key-session request for "'+initDataType+'" init data type');

keysListItem.mediaKeysSessionInitialized=true;

keySession.generateRequest(initDataType,initData).then(function(){
_logger.logger.debug('Key-session generation succeeded');
}).catch(function(err){
_logger.logger.error('Error generating key-session request:',err);
_this6.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_NO_SESSION,
fatal:false});

});
}

/**
       * @param {string} url License server URL
       * @param {ArrayBuffer} keyMessage Message data issued by key-system
       * @param {function} callback Called when XHR has succeeded
       * @returns {XMLHttpRequest} Unsent (but opened state) XHR object
       */},

{
key:'_createLicenseXhr',
value:function _createLicenseXhr(url,keyMessage,callback){
var xhr=new XMLHttpRequest();
var licenseXhrSetup=this._licenseXhrSetup;

try{
if(licenseXhrSetup){
try{
licenseXhrSetup(xhr,url);
}catch(e){
// let's try to open before running setup
xhr.open('POST',url,true);
licenseXhrSetup(xhr,url);
}
}
// if licenseXhrSetup did not yet call open, let's do it now
if(!xhr.readyState){
xhr.open('POST',url,true);
}
}catch(e){
// IE11 throws an exception on xhr.open if attempting to access an HTTP resource over HTTPS
_logger.logger.error('Error setting up key-system license XHR',e);
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
fatal:true});

return;
}

xhr.responseType='arraybuffer';
xhr.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,xhr,url,keyMessage,callback);
return xhr;
}

/**
       * @param {XMLHttpRequest} xhr
       * @param {string} url License server URL
       * @param {ArrayBuffer} keyMessage Message data issued by key-system
       * @param {function} callback Called when XHR has succeeded
       *
       */},

{
key:'_onLicenseRequestReadyStageChange',
value:function _onLicenseRequestReadyStageChange(xhr,url,keyMessage,callback){
switch(xhr.readyState){
case 4:
if(xhr.status===200){
this._requestLicenseFailureCount=0;
_logger.logger.log('License request succeeded');
callback(xhr.response);
}else{
_logger.logger.error('License Request XHR failed ('+url+'). Status: '+xhr.status+' ('+xhr.statusText+')');

this._requestLicenseFailureCount++;
if(this._requestLicenseFailureCount<=MAX_LICENSE_REQUEST_FAILURES){
var attemptsLeft=MAX_LICENSE_REQUEST_FAILURES-this._requestLicenseFailureCount+1;
_logger.logger.warn('Retrying license request, '+attemptsLeft+' attempts left');
this._requestLicense(keyMessage,callback);
return;
}

this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
fatal:true});

}
break;}

}

/**
       * @param {object} keysListItem
       * @param {ArrayBuffer} keyMessage
       * @returns {ArrayBuffer} Challenge data posted to license server
       */},

{
key:'_generateLicenseRequestChallenge',
value:function _generateLicenseRequestChallenge(keysListItem,keyMessage){
var challenge=void 0;

if(keysListItem.mediaKeySystemDomain===KeySystems.PLAYREADY){
_logger.logger.error('PlayReady is not supported (yet)');

// from https://github.com/MicrosoftEdge/Demos/blob/master/eme/scripts/demo.js
/*
          if (this.licenseType !== this.LICENSE_TYPE_WIDEVINE) {
              // For PlayReady CDMs, we need to dig the Challenge out of the XML.
              var keyMessageXml = new DOMParser().parseFromString(String.fromCharCode.apply(null, new Uint16Array(keyMessage)), 'application/xml');
              if (keyMessageXml.getElementsByTagName('Challenge')[0]) {
                  challenge = atob(keyMessageXml.getElementsByTagName('Challenge')[0].childNodes[0].nodeValue);
              } else {
                  throw 'Cannot find <Challenge> in key message';
              }
              var headerNames = keyMessageXml.getElementsByTagName('name');
              var headerValues = keyMessageXml.getElementsByTagName('value');
              if (headerNames.length !== headerValues.length) {
                  throw 'Mismatched header <name>/<value> pair in key message';
              }
              for (var i = 0; i < headerNames.length; i++) {
                  xhr.setRequestHeader(headerNames[i].childNodes[0].nodeValue, headerValues[i].childNodes[0].nodeValue);
              }
          }
          */
}else if(keysListItem.mediaKeySystemDomain===KeySystems.WIDEVINE){
// For Widevine CDMs, the challenge is the keyMessage.
challenge=keyMessage;
}else{
_logger.logger.error('Unsupported key-system:',keysListItem.mediaKeySystemDomain);
}

return challenge;
}},
{
key:'_requestLicense',
value:function _requestLicense(keyMessage,callback){
_logger.logger.log('Requesting content license for key-system');

var keysListItem=this._mediaKeysList[0];
if(!keysListItem){
_logger.logger.error('Fatal error: Media is encrypted but no key-system access has been obtained yet');
this.hls.trigger(_events2.default.ERROR,{
type:_errors.ErrorTypes.KEY_SYSTEM_ERROR,
details:_errors.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
fatal:true});

return;
}

var url=this.getLicenseServerUrl(keysListItem.mediaKeySystemDomain);
var xhr=this._createLicenseXhr(url,keyMessage,callback);

_logger.logger.log('Sending license request to URL: '+url);

xhr.send(this._generateLicenseRequestChallenge(keysListItem,keyMessage));
}},
{
key:'onMediaAttached',
value:function onMediaAttached(data){
var _this7=this;

if(!this._emeEnabled){
return;
}

var media=data.media;

// keep reference of media
this._media=media;

// FIXME: also handle detaching media !

media.addEventListener('encrypted',function(e){
_this7._onMediaEncrypted(e.initDataType,e.initData);
});
}},
{
key:'onManifestParsed',
value:function onManifestParsed(data){
if(!this._emeEnabled){
return;
}

var audioCodecs=data.levels.map(function(level){
return level.audioCodec;
});
var videoCodecs=data.levels.map(function(level){
return level.videoCodec;
});

this._attemptKeySystemAccess(KeySystems.WIDEVINE,audioCodecs,videoCodecs);
}},
{
key:'requestMediaKeySystemAccess',
get:function get(){
if(!this._requestMediaKeySystemAccess){
throw new Error('No requestMediaKeySystemAccess function configured');
}

return this._requestMediaKeySystemAccess;
}}]);


return EMEController;
}(_eventHandler2.default);

exports.default=EMEController;
module.exports=exports['default'];

/***/},
/* 79 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

var requestMediaKeySystemAccess=function(){
if(typeof window!=='undefined'&&window.navigator&&window.navigator.requestMediaKeySystemAccess){
return window.navigator.requestMediaKeySystemAccess.bind(window.navigator);
}else{
return null;
}
}();

exports.requestMediaKeySystemAccess=requestMediaKeySystemAccess;

/***/},
/* 80 */
/***/function(module,exports,__webpack_require__){

"use strict";


Object.defineProperty(exports,"__esModule",{
value:true});

var util={};

util.getBrowserVersion=function(){
var userAgent=navigator.userAgent;//取得浏览器的userAgent字符串
if(userAgent.toLowerCase().indexOf("mobile")>-1){
return"Unknown";
}
if(userAgent.indexOf("Firefox")>-1){
var version=userAgent.match(/firefox\/[\d.]+/gi)[0].match(/[\d]+/)[0];
return"Firefox "+version;
}else if(userAgent.indexOf("Edge")>-1){
var _version=userAgent.match(/edge\/[\d.]+/gi)[0].match(/[\d]+/)[0];
return"Edge "+_version;
}else if(userAgent.indexOf("rv:11")>-1){
return"IE 11";
}else if(userAgent.indexOf("Opera")>-1||userAgent.indexOf("OPR")>-1){
if(userAgent.indexOf("Opera")>-1){
var _version2=userAgent.match(/opera\/[\d.]+/gi)[0].match(/[\d]+/)[0];
return"Opera "+_version2;
}
if(userAgent.indexOf("OPR")>-1){
var _version3=userAgent.match(/opr\/[\d.]+/gi)[0].match(/[\d]+/)[0];
return"Opera "+_version3;
}
}else if(userAgent.indexOf("Chrome")>-1){
var _version4=userAgent.match(/chrome\/[\d.]+/gi)[0].match(/[\d]+/)[0];
return"Chrome "+_version4;
}else if(userAgent.indexOf("Safari")>-1){
var _version5=userAgent.match(/safari\/[\d.]+/gi)[0].match(/[\d]+/)[0];
return"Safari "+_version5;
}else if(userAgent.indexOf("MSIE")>-1||userAgent.indexOf("Trident")>-1){
if(userAgent.indexOf("MSIE")>-1){
var _version6=userAgent.match(/msie [\d.]+/gi)[0].match(/[\d]+/)[0];
return"IE "+_version6;
}
if(userAgent.indexOf("Trident")>-1){
var versionTrident=userAgent.match(/trident\/[\d.]+/gi)[0].match(/[\d]+/)[0];
var _version7=parseInt(versionTrident)+4;
return"IE "+_version7;
}
}else{
return"Unknown";
}
};

exports.default=util;
module.exports=exports["default"];

/***/}
/******/]));
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/lib/format-log.js */ 8)["default"]))

/***/ }),
/* 10 */
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js ***!
  \**********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return normalizeComponent; });
/* globals __VUE_SSR_CONTEXT__ */

// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).
// This module is a runtime utility for cleaner component module output and will
// be included in the final webpack user bundle.

function normalizeComponent (
  scriptExports,
  render,
  staticRenderFns,
  functionalTemplate,
  injectStyles,
  scopeId,
  moduleIdentifier, /* server only */
  shadowMode, /* vue-cli only */
  components, // fixed by xxxxxx auto components
  renderjs // fixed by xxxxxx renderjs
) {
  // Vue.extend constructor export interop
  var options = typeof scriptExports === 'function'
    ? scriptExports.options
    : scriptExports

  // fixed by xxxxxx auto components
  if (components) {
    if (!options.components) {
      options.components = {}
    }
    var hasOwn = Object.prototype.hasOwnProperty
    for (var name in components) {
      if (hasOwn.call(components, name) && !hasOwn.call(options.components, name)) {
        options.components[name] = components[name]
      }
    }
  }
  // fixed by xxxxxx renderjs
  if (renderjs) {
    (renderjs.beforeCreate || (renderjs.beforeCreate = [])).unshift(function() {
      this[renderjs.__module] = this
    });
    (options.mixins || (options.mixins = [])).push(renderjs)
  }

  // render functions
  if (render) {
    options.render = render
    options.staticRenderFns = staticRenderFns
    options._compiled = true
  }

  // functional template
  if (functionalTemplate) {
    options.functional = true
  }

  // scopedId
  if (scopeId) {
    options._scopeId = 'data-v-' + scopeId
  }

  var hook
  if (moduleIdentifier) { // server build
    hook = function (context) {
      // 2.3 injection
      context =
        context || // cached call
        (this.$vnode && this.$vnode.ssrContext) || // stateful
        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional
      // 2.2 with runInNewContext: true
      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {
        context = __VUE_SSR_CONTEXT__
      }
      // inject component styles
      if (injectStyles) {
        injectStyles.call(this, context)
      }
      // register component module identifier for async chunk inferrence
      if (context && context._registeredComponents) {
        context._registeredComponents.add(moduleIdentifier)
      }
    }
    // used by ssr in case component is cached and beforeCreate
    // never gets called
    options._ssrRegister = hook
  } else if (injectStyles) {
    hook = shadowMode
      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }
      : injectStyles
  }

  if (hook) {
    if (options.functional) {
      // for template-only hot-reload because in that case the render fn doesn't
      // go through the normalizer
      options._injectStyles = hook
      // register for functioal component in vue file
      var originalRender = options.render
      options.render = function renderWithStyleInjection (h, context) {
        hook.call(context)
        return originalRender(h, context)
      }
    } else {
      // inject component registration as beforeCreate hook
      var existing = options.beforeCreate
      options.beforeCreate = existing
        ? [].concat(existing, hook)
        : [hook]
    }
  }

  return {
    exports: scriptExports,
    options: options
  }
}


/***/ }),
/* 11 */
/*!**********************!*\
  !*** external "Vue" ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = Vue;

/***/ }),
/* 12 */
/*!*************************************!*\
  !*** E:/work/html/H5-Video/App.vue ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./App.vue?vue&type=script&lang=js& */ 13);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 10);\nvar render, staticRenderFns, recyclableRender, components\nvar renderjs\n\n\n\n\n/* normalize component */\n\nvar component = Object(_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\n  _App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUN1RDtBQUNMOzs7QUFHbEQ7QUFDMks7QUFDM0ssZ0JBQWdCLHdMQUFVO0FBQzFCLEVBQUUseUVBQU07QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNlLGdGIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHJlbmRlciwgc3RhdGljUmVuZGVyRm5zLCByZWN5Y2xhYmxlUmVuZGVyLCBjb21wb25lbnRzXG52YXIgcmVuZGVyanNcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vQXBwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vQXBwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdnVlLWNsaS1wbHVnaW4tdW5pL3BhY2thZ2VzL3Z1ZS1sb2FkZXIvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIG51bGwsXG4gIG51bGwsXG4gIGZhbHNlLFxuICBjb21wb25lbnRzLFxuICByZW5kZXJqc1xuKVxuXG5jb21wb25lbnQub3B0aW9ucy5fX2ZpbGUgPSBcIkFwcC52dWVcIlxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!**************************************************************!*\
  !*** E:/work/html/H5-Video/App.vue?vue&type=script&lang=js& ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-1!../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/using-components.js!../../../java_tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./App.vue?vue&type=script&lang=js& */ 14);\n/* harmony import */ var _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n /* harmony default export */ __webpack_exports__[\"default\"] = (_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_1_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_java_tools_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQStqQixDQUFnQixxbUJBQUcsRUFBQyIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4uLy4uLy4uL2phdmFfdG9vbHMvSEJ1aWxkZXJYL3BsdWdpbnMvdW5pYXBwLWNsaS9ub2RlX21vZHVsZXMvQGRjbG91ZGlvL3Z1ZS1jbGktcGx1Z2luLXVuaS9wYWNrYWdlcy93ZWJwYWNrLXByZXByb2Nlc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTYtMSEuLi8uLi8uLi9qYXZhX3Rvb2xzL0hCdWlsZGVyWC9wbHVnaW5zL3VuaWFwcC1jbGkvbm9kZV9tb2R1bGVzL0BkY2xvdWRpby92dWUtY2xpLXBsdWdpbi11bmkvcGFja2FnZXMvd2VicGFjay11bmktYXBwLWxvYWRlci91c2luZy1jb21wb25lbnRzLmpzIS4uLy4uLy4uL2phdmFfdG9vbHMvSEJ1aWxkZXJYL3BsdWdpbnMvdW5pYXBwLWNsaS9ub2RlX21vZHVsZXMvQGRjbG91ZGlvL3Z1ZS1jbGktcGx1Z2luLXVuaS9wYWNrYWdlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vQXBwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi9qYXZhX3Rvb2xzL0hCdWlsZGVyWC9wbHVnaW5zL3VuaWFwcC1jbGkvbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanMhLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdnVlLWNsaS1wbHVnaW4tdW5pL3BhY2thZ2VzL3dlYnBhY2stcHJlcHJvY2Vzcy1sb2FkZXIvaW5kZXguanM/P3JlZi0tNi0xIS4uLy4uLy4uL2phdmFfdG9vbHMvSEJ1aWxkZXJYL3BsdWdpbnMvdW5pYXBwLWNsaS9ub2RlX21vZHVsZXMvQGRjbG91ZGlvL3Z1ZS1jbGktcGx1Z2luLXVuaS9wYWNrYWdlcy93ZWJwYWNrLXVuaS1hcHAtbG9hZGVyL3VzaW5nLWNvbXBvbmVudHMuanMhLi4vLi4vLi4vamF2YV90b29scy9IQnVpbGRlclgvcGx1Z2lucy91bmlhcHAtY2xpL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdnVlLWNsaS1wbHVnaW4tdW5pL3BhY2thZ2VzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9BcHAudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/using-components.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!E:/work/html/H5-Video/App.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(__f__) {Object.defineProperty(exports, \"__esModule\", { value: true });exports.default = void 0;var _default =\n{\n  onLaunch: function onLaunch() {\n    __f__(\"log\", 'App Launch', \" at App.vue:4\");\n  },\n  onShow: function onShow() {\n    __f__(\"log\", 'App Show', \" at App.vue:7\");\n  },\n  onHide: function onHide() {\n    __f__(\"log\", 'App Hide', \" at App.vue:10\");\n  } };exports.default = _default;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/lib/format-log.js */ 8)[\"default\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVuaS1hcHA6Ly8vQXBwLnZ1ZSJdLCJuYW1lcyI6WyJvbkxhdW5jaCIsIm9uU2hvdyIsIm9uSGlkZSJdLCJtYXBwaW5ncyI6IjtBQUNlO0FBQ2RBLFVBQVEsRUFBRSxvQkFBVztBQUNwQixpQkFBWSxZQUFaO0FBQ0EsR0FIYTtBQUlkQyxRQUFNLEVBQUUsa0JBQVc7QUFDbEIsaUJBQVksVUFBWjtBQUNBLEdBTmE7QUFPZEMsUUFBTSxFQUFFLGtCQUFXO0FBQ2xCLGlCQUFZLFVBQVo7QUFDQSxHQVRhLEUiLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBkZWZhdWx0IHtcblx0b25MYXVuY2g6IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnNvbGUubG9nKCdBcHAgTGF1bmNoJylcblx0fSxcblx0b25TaG93OiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLmxvZygnQXBwIFNob3cnKVxuXHR9LFxuXHRvbkhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnNvbGUubG9nKCdBcHAgSGlkZScpXG5cdH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/*!************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/index.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__f__) {Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;
var _mixin = _interopRequireDefault(__webpack_require__(/*! ./libs/mixin/mixin.js */ 16));



var _request = _interopRequireDefault(__webpack_require__(/*! ./libs/request */ 17));




















var _queryParams = _interopRequireDefault(__webpack_require__(/*! ./libs/function/queryParams.js */ 21));

var _route = _interopRequireDefault(__webpack_require__(/*! ./libs/function/route.js */ 22));

var _timeFormat = _interopRequireDefault(__webpack_require__(/*! ./libs/function/timeFormat.js */ 26));

var _timeFrom = _interopRequireDefault(__webpack_require__(/*! ./libs/function/timeFrom.js */ 27));

var _colorGradient = _interopRequireDefault(__webpack_require__(/*! ./libs/function/colorGradient.js */ 28));

var _guid = _interopRequireDefault(__webpack_require__(/*! ./libs/function/guid.js */ 29));

var _color = _interopRequireDefault(__webpack_require__(/*! ./libs/function/color.js */ 30));

var _type2icon = _interopRequireDefault(__webpack_require__(/*! ./libs/function/type2icon.js */ 31));

var _randomArray = _interopRequireDefault(__webpack_require__(/*! ./libs/function/randomArray.js */ 32));

var _deepClone = _interopRequireDefault(__webpack_require__(/*! ./libs/function/deepClone.js */ 19));

var _deepMerge = _interopRequireDefault(__webpack_require__(/*! ./libs/function/deepMerge.js */ 18));

var _addUnit = _interopRequireDefault(__webpack_require__(/*! ./libs/function/addUnit.js */ 33));


var _test = _interopRequireDefault(__webpack_require__(/*! ./libs/function/test.js */ 20));

var _random = _interopRequireDefault(__webpack_require__(/*! ./libs/function/random.js */ 34));

var _trim = _interopRequireDefault(__webpack_require__(/*! ./libs/function/trim.js */ 35));

var _toast = _interopRequireDefault(__webpack_require__(/*! ./libs/function/toast.js */ 36));

var _getParent = _interopRequireDefault(__webpack_require__(/*! ./libs/function/getParent.js */ 37));

var _$parent = _interopRequireDefault(__webpack_require__(/*! ./libs/function/$parent.js */ 38));



var _sys = __webpack_require__(/*! ./libs/function/sys.js */ 39);

var _debounce = _interopRequireDefault(__webpack_require__(/*! ./libs/function/debounce.js */ 40));

var _throttle = _interopRequireDefault(__webpack_require__(/*! ./libs/function/throttle.js */ 41));



var _config = _interopRequireDefault(__webpack_require__(/*! ./libs/config/config.js */ 42));

var _zIndex = _interopRequireDefault(__webpack_require__(/*! ./libs/config/zIndex.js */ 43));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };} // 引入全局mixin
// 引入关于是否mixin集成小程序分享的配置
// import wxshare from './libs/mixin/mpShare.js'
// 全局挂载引入http相关请求拦截插件
function wranning(str) {// 开发环境进行信息输出,主要是一些报错信息
  // 这个环境的来由是在程序编写时候,点击hx编辑器运行调试代码的时候,详见:
  // 	https://uniapp.dcloud.io/frame?id=%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e5%92%8c%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83
  if (true) {__f__("warn", str, " at node_modules/uview-ui/index.js:13");}} // 尝试判断在根目录的/store中是否有$u.mixin.js，此文件uView默认为需要挂在到全局的vuex的state变量
// HX2.6.11版本,放到try中,控制台依然会警告,暂时不用此方式，
// let vuexStore = {};
// try {
// 	vuexStore = require("@/store/$u.mixin.js");
// } catch (e) {
// 	//TODO handle the exception
// }
// post类型对象参数转为get类型url参数
var $u = { queryParams: _queryParams.default, route: _route.default, timeFormat: _timeFormat.default, date: _timeFormat.default, // 另名date
  timeFrom: _timeFrom.default, colorGradient: _colorGradient.default.colorGradient, colorToRgba: _colorGradient.default.colorToRgba, guid: _guid.default, color: _color.default, sys: _sys.sys, os: _sys.os, type2icon: _type2icon.default, randomArray: _randomArray.default, wranning: wranning, get: _request.default.get,
  post: _request.default.post,
  put: _request.default.put,
  'delete': _request.default.delete,
  hexToRgb: _colorGradient.default.hexToRgb,
  rgbToHex: _colorGradient.default.rgbToHex,
  test: _test.default,
  random: _random.default,
  deepClone: _deepClone.default,
  deepMerge: _deepMerge.default,
  getParent: _getParent.default,
  $parent: _$parent.default,
  addUnit: _addUnit.default,
  trim: _trim.default,
  type: ['primary', 'success', 'error', 'warning', 'info'],
  http: _request.default,
  toast: _toast.default,
  config: _config.default, // uView配置信息相关，比如版本号
  zIndex: _zIndex.default,
  debounce: _debounce.default,
  throttle: _throttle.default };


// $u挂载到uni对象上
uni.$u = $u;

var install = function install(Vue) {
  Vue.mixin(_mixin.default);
  if (Vue.prototype.openShare) {
    Vue.mixin(mpShare);
  }
  // Vue.mixin(vuexStore);
  // 时间格式化，同时两个名称，date和timeFormat
  Vue.filter('timeFormat', function (timestamp, format) {
    return (0, _timeFormat.default)(timestamp, format);
  });
  Vue.filter('date', function (timestamp, format) {
    return (0, _timeFormat.default)(timestamp, format);
  });
  // 将多久以前的方法，注入到全局过滤器
  Vue.filter('timeFrom', function (timestamp, format) {
    return (0, _timeFrom.default)(timestamp, format);
  });
  Vue.prototype.$u = $u;
};var _default =

{
  install: install };exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/lib/format-log.js */ 8)["default"]))

/***/ }),
/* 16 */
/*!***********************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/mixin/mixin.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {
  data: function data() {
    return {};
  },
  onLoad: function onLoad() {
    // getRect挂载到$u上，因为这方法需要使用in(this)，所以无法把它独立成一个单独的文件导出
    this.$u.getRect = this.$uGetRect;
  },
  methods: {
    // 查询节点信息
    // 目前此方法在支付宝小程序中无法获取组件跟接点的尺寸，为支付宝的bug(2020-07-21)
    // 解决办法为在组件根部再套一个没有任何作用的view元素
    $uGetRect: function $uGetRect(selector, all) {var _this = this;
      return new Promise(function (resolve) {
        uni.createSelectorQuery().
        in(_this)[all ? 'selectAll' : 'select'](selector).
        boundingClientRect(function (rect) {
          if (all && Array.isArray(rect) && rect.length) {
            resolve(rect);
          }
          if (!all && rect) {
            resolve(rect);
          }
        }).
        exec();
      });
    },
    getParentData: function getParentData() {var _this2 = this;var parentName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      // 避免在created中去定义parent变量
      if (!this.parent) this.parent = false;
      // 这里的本质原理是，通过获取父组件实例(也即u-radio-group的this)
      // 将父组件this中对应的参数，赋值给本组件(u-radio的this)的parentData对象中对应的属性
      // 之所以需要这么做，是因为所有端中，头条小程序不支持通过this.parent.xxx去监听父组件参数的变化
      this.parent = this.$u.$parent.call(this, parentName);
      if (this.parent) {
        // 历遍parentData中的属性，将parent中的同名属性赋值给parentData
        Object.keys(this.parentData).map(function (key) {
          _this2.parentData[key] = _this2.parent[key];
        });
      }
    },
    // 阻止事件冒泡
    preventEvent: function preventEvent(e) {
      e && e.stopPropagation && e.stopPropagation();
    } },

  onReachBottom: function onReachBottom() {
    uni.$emit('uOnReachBottom');
  },
  beforeDestroy: function beforeDestroy() {var _this3 = this;
    // 判断当前页面是否存在parent和chldren，一般在checkbox和checkbox-group父子联动的场景会有此情况
    // 组件销毁时，移除子组件在父组件children数组中的实例，释放资源，避免数据混乱
    if (this.parent && uni.$u.test.array(this.parent.children)) {
      // 组件销毁时，移除父组件中的children数组中对应的实例
      var childrenList = this.parent.children;
      childrenList.map(function (child, index) {
        // 如果相等，则移除
        if (child === _this3) {
          childrenList.splice(index, 1);
        }
      });
    }
  } };

/***/ }),
/* 17 */
/*!*************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/request/index.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _deepMerge = _interopRequireDefault(__webpack_require__(/*! ../function/deepMerge */ 18));
var _test = _interopRequireDefault(__webpack_require__(/*! ../function/test */ 20));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}var
Request = /*#__PURE__*/function () {_createClass(Request, [{ key: "setConfig",
    // 设置全局默认配置
    value: function setConfig(customConfig) {
      // 深度合并对象，否则会造成对象深层属性丢失
      this.config = (0, _deepMerge.default)(this.config, customConfig);
    }

    // 主要请求部分
  }, { key: "request", value: function request() {var _this = this;var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      // 检查请求拦截
      if (this.interceptor.request && typeof this.interceptor.request === 'function') {
        var tmpConfig = {};
        var interceptorRequest = this.interceptor.request(options);
        if (interceptorRequest === false) {
          // 返回一个处于pending状态中的Promise，来取消原promise，避免进入then()回调
          return new Promise(function () {});
        }
        this.options = interceptorRequest;
      }
      options.dataType = options.dataType || this.config.dataType;
      options.responseType = options.responseType || this.config.responseType;
      options.url = options.url || '';
      options.params = options.params || {};
      options.header = Object.assign({}, this.config.header, options.header);
      options.method = options.method || this.config.method;

      return new Promise(function (resolve, reject) {
        options.complete = function (response) {
          // 请求返回后，隐藏loading(如果请求返回快的话，可能会没有loading)
          uni.hideLoading();
          // 清除定时器，如果请求回来了，就无需loading
          clearTimeout(_this.config.timer);
          _this.config.timer = null;
          // 判断用户对拦截返回数据的要求，如果originalData为true，返回所有的数据(response)到拦截器，否则只返回response.data
          if (_this.config.originalData) {
            // 判断是否存在拦截器
            if (_this.interceptor.response && typeof _this.interceptor.response === 'function') {
              var resInterceptors = _this.interceptor.response(response);
              // 如果拦截器不返回false，就将拦截器返回的内容给this.$u.post的then回调
              if (resInterceptors !== false) {
                resolve(resInterceptors);
              } else {
                // 如果拦截器返回false，意味着拦截器定义者认为返回有问题，直接接入catch回调
                reject(response);
              }
            } else {
              // 如果要求返回原始数据，就算没有拦截器，也返回最原始的数据
              resolve(response);
            }
          } else {
            if (response.statusCode == 200) {
              if (_this.interceptor.response && typeof _this.interceptor.response === 'function') {
                var _resInterceptors = _this.interceptor.response(response.data);
                if (_resInterceptors !== false) {
                  resolve(_resInterceptors);
                } else {
                  reject(response.data);
                }
              } else {
                // 如果不是返回原始数据(originalData=false)，且没有拦截器的情况下，返回纯数据给then回调
                resolve(response.data);
              }
            } else {
              // 不返回原始数据的情况下，服务器状态码不为200，modal弹框提示
              // if(response.errMsg) {
              // 	uni.showModal({
              // 		title: response.errMsg
              // 	});
              // }
              reject(response);
            }
          }
        };

        // 判断用户传递的URL是否/开头,如果不是,加上/，这里使用了uView的test.js验证库的url()方法
        options.url = _test.default.url(options.url) ? options.url : _this.config.baseUrl + (options.url.indexOf('/') == 0 ?
        options.url : '/' + options.url);

        // 是否显示loading
        // 加一个是否已有timer定时器的判断，否则有两个同时请求的时候，后者会清除前者的定时器id
        // 而没有清除前者的定时器，导致前者超时，一直显示loading
        if (_this.config.showLoading && !_this.config.timer) {
          _this.config.timer = setTimeout(function () {
            uni.showLoading({
              title: _this.config.loadingText,
              mask: _this.config.loadingMask });

            _this.config.timer = null;
          }, _this.config.loadingTime);
        }
        uni.request(options);
      });
      // .catch(res => {
      // 	// 如果返回reject()，不让其进入this.$u.post().then().catch()后面的catct()
      // 	// 因为很多人都会忘了写后面的catch()，导致报错捕获不到catch
      // 	return new Promise(()=>{});
      // })
    } }]);

  function Request() {var _this2 = this;_classCallCheck(this, Request);
    this.config = {
      baseUrl: '', // 请求的根域名
      // 默认的请求头
      header: {},
      method: 'POST',
      // 设置为json，返回后uni.request会对数据进行一次JSON.parse
      dataType: 'json',
      // 此参数无需处理，因为5+和支付宝小程序不支持，默认为text即可
      responseType: 'text',
      showLoading: true, // 是否显示请求中的loading
      loadingText: '请求中...',
      loadingTime: 800, // 在此时间内，请求还没回来的话，就显示加载中动画，单位ms
      timer: null, // 定时器
      originalData: false, // 是否在拦截器中返回服务端的原始数据，见文档说明
      loadingMask: true // 展示loading的时候，是否给一个透明的蒙层，防止触摸穿透
    };

    // 拦截器
    this.interceptor = {
      // 请求前的拦截
      request: null,
      // 请求后的拦截
      response: null };


    // get请求
    this.get = function (url) {var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};var header = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      return _this2.request({
        method: 'GET',
        url: url,
        header: header,
        data: data });

    };

    // post请求
    this.post = function (url) {var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};var header = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      return _this2.request({
        url: url,
        method: 'POST',
        header: header,
        data: data });

    };

    // put请求，不支持支付宝小程序(HX2.6.15)
    this.put = function (url) {var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};var header = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      return _this2.request({
        url: url,
        method: 'PUT',
        header: header,
        data: data });

    };

    // delete请求，不支持支付宝和头条小程序(HX2.6.15)
    this.delete = function (url) {var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};var header = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      return _this2.request({
        url: url,
        method: 'DELETE',
        header: header,
        data: data });

    };
  }return Request;}();var _default =

new Request();exports.default = _default;

/***/ }),
/* 18 */
/*!******************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/deepMerge.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _deepClone = _interopRequireDefault(__webpack_require__(/*! ./deepClone */ 19));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

// JS对象深度合并
function deepMerge() {var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  target = (0, _deepClone.default)(target);
  if (typeof target !== 'object' || typeof source !== 'object') return false;
  for (var prop in source) {
    if (!source.hasOwnProperty(prop)) continue;
    if (prop in target) {
      if (typeof target[prop] !== 'object') {
        target[prop] = source[prop];
      } else {
        if (typeof source[prop] !== 'object') {
          target[prop] = source[prop];
        } else {
          if (target[prop].concat && source[prop].concat) {
            target[prop] = target[prop].concat(source[prop]);
          } else {
            target[prop] = deepMerge(target[prop], source[prop]);
          }
        }
      }
    } else {
      target[prop] = source[prop];
    }
  }
  return target;
}var _default =

deepMerge;exports.default = _default;

/***/ }),
/* 19 */
/*!******************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/deepClone.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; // 判断arr是否为一个数组，返回一个bool值
function isArray(arr) {
  return Object.prototype.toString.call(arr) === '[object Array]';
}

// 深度克隆
function deepClone(obj) {
  // 对常见的“非”值，直接返回原来值
  if ([null, undefined, NaN, false].includes(obj)) return obj;
  if (typeof obj !== "object" && typeof obj !== 'function') {
    //原始类型直接返回
    return obj;
  }
  var o = isArray(obj) ? [] : {};
  for (var i in obj) {
    if (obj.hasOwnProperty(i)) {
      o[i] = typeof obj[i] === "object" ? deepClone(obj[i]) : obj[i];
    }
  }
  return o;
}var _default =

deepClone;exports.default = _default;

/***/ }),
/* 20 */
/*!*************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/test.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; /**
                                                                                                      * 验证电子邮箱格式
                                                                                                      */
function email(value) {
  return /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(value);
}

/**
   * 验证手机格式
   */
function mobile(value) {
  return /^1[3-9]\d{9}$/.test(value);
}

/**
   * 验证URL格式
   */
function url(value) {
  return /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?/.test(value);
}

/**
   * 验证日期格式
   */
function date(value) {
  return !/Invalid|NaN/.test(new Date(value).toString());
}

/**
   * 验证ISO类型的日期格式
   */
function dateISO(value) {
  return /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value);
}

/**
   * 验证十进制数字
   */
function number(value) {
  return /^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);
}

/**
   * 验证整数
   */
function digits(value) {
  return /^\d+$/.test(value);
}

/**
   * 验证身份证号码
   */
function idCard(value) {
  return /^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(
  value);
}

/**
   * 是否车牌号
   */
function carNo(value) {
  // 新能源车牌
  var xreg = /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/;
  // 旧车牌
  var creg = /^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/;
  if (value.length === 7) {
    return creg.test(value);
  } else if (value.length === 8) {
    return xreg.test(value);
  } else {
    return false;
  }
}

/**
   * 金额,只允许2位小数
   */
function amount(value) {
  //金额，只允许保留两位小数
  return /^[1-9]\d*(,\d{3})*(\.\d{1,2})?$|^0\.\d{1,2}$/.test(value);
}

/**
   * 中文
   */
function chinese(value) {
  var reg = /^[\u4e00-\u9fa5]+$/gi;
  return reg.test(value);
}

/**
   * 只能输入字母
   */
function letter(value) {
  return /^[a-zA-Z]*$/.test(value);
}

/**
   * 只能是字母或者数字
   */
function enOrNum(value) {
  //英文或者数字
  var reg = /^[0-9a-zA-Z]*$/g;
  return reg.test(value);
}

/**
   * 验证是否包含某个值
   */
function contains(value, param) {
  return value.indexOf(param) >= 0;
}

/**
   * 验证一个值范围[min, max]
   */
function range(value, param) {
  return value >= param[0] && value <= param[1];
}

/**
   * 验证一个长度范围[min, max]
   */
function rangeLength(value, param) {
  return value.length >= param[0] && value.length <= param[1];
}

/**
   * 是否固定电话
   */
function landline(value) {
  var reg = /^\d{3,4}-\d{7,8}(-\d{3,4})?$/;
  return reg.test(value);
}

/**
   * 判断是否为空
   */
function empty(value) {
  switch (typeof value) {
    case 'undefined':
      return true;
    case 'string':
      if (value.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g, '').length == 0) return true;
      break;
    case 'boolean':
      if (!value) return true;
      break;
    case 'number':
      if (0 === value || isNaN(value)) return true;
      break;
    case 'object':
      if (null === value || value.length === 0) return true;
      for (var i in value) {
        return false;
      }
      return true;}

  return false;
}

/**
   * 是否json字符串
   */
function jsonString(value) {
  if (typeof value == 'string') {
    try {
      var obj = JSON.parse(value);
      if (typeof obj == 'object' && obj) {
        return true;
      } else {
        return false;
      }
    } catch (e) {
      return false;
    }
  }
  return false;
}


/**
   * 是否数组
   */
function array(value) {
  if (typeof Array.isArray === "function") {
    return Array.isArray(value);
  } else {
    return Object.prototype.toString.call(value) === "[object Array]";
  }
}

/**
   * 是否对象
   */
function object(value) {
  return Object.prototype.toString.call(value) === '[object Object]';
}

/**
   * 是否短信验证码
   */
function code(value) {var len = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 6;
  return new RegExp("^\\d{".concat(len, "}$")).test(value);
}var _default =


{
  email: email,
  mobile: mobile,
  url: url,
  date: date,
  dateISO: dateISO,
  number: number,
  digits: digits,
  idCard: idCard,
  carNo: carNo,
  amount: amount,
  chinese: chinese,
  letter: letter,
  enOrNum: enOrNum,
  contains: contains,
  range: range,
  rangeLength: rangeLength,
  empty: empty,
  isEmpty: empty,
  jsonString: jsonString,
  landline: landline,
  object: object,
  array: array,
  code: code };exports.default = _default;

/***/ }),
/* 21 */
/*!********************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/queryParams.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; /**
                                                                                                      * 对象转url参数
                                                                                                      * @param {*} data,对象
                                                                                                      * @param {*} isPrefix,是否自动加上"?"
                                                                                                      */
function queryParams() {var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};var isPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;var arrayFormat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'brackets';
  var prefix = isPrefix ? '?' : '';
  var _result = [];
  if (['indices', 'brackets', 'repeat', 'comma'].indexOf(arrayFormat) == -1) arrayFormat = 'brackets';var _loop = function _loop(
  key) {
    var value = data[key];
    // 去掉为空的参数
    if (['', undefined, null].indexOf(value) >= 0) {
      return "continue";
    }
    // 如果值为数组，另行处理
    if (value.constructor === Array) {
      // e.g. {ids: [1, 2, 3]}
      switch (arrayFormat) {
        case 'indices':
          // 结果: ids[0]=1&ids[1]=2&ids[2]=3
          for (var i = 0; i < value.length; i++) {
            _result.push(key + '[' + i + ']=' + value[i]);
          }
          break;
        case 'brackets':
          // 结果: ids[]=1&ids[]=2&ids[]=3
          value.forEach(function (_value) {
            _result.push(key + '[]=' + _value);
          });
          break;
        case 'repeat':
          // 结果: ids=1&ids=2&ids=3
          value.forEach(function (_value) {
            _result.push(key + '=' + _value);
          });
          break;
        case 'comma':
          // 结果: ids=1,2,3
          var commaStr = "";
          value.forEach(function (_value) {
            commaStr += (commaStr ? "," : "") + _value;
          });
          _result.push(key + '=' + commaStr);
          break;
        default:
          value.forEach(function (_value) {
            _result.push(key + '[]=' + _value);
          });}

    } else {
      _result.push(key + '=' + value);
    }};for (var key in data) {var _ret = _loop(key);if (_ret === "continue") continue;
  }
  return _result.length ? prefix + _result.join('&') : '';
}var _default =

queryParams;exports.default = _default;

/***/ }),
/* 22 */
/*!**************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/route.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _regenerator = _interopRequireDefault(__webpack_require__(/*! ./node_modules/@babel/runtime/regenerator */ 23));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * 路由跳转方法，该方法相对于直接使用uni.xxx的好处是使用更加简单快捷
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * 并且带有路由拦截功能
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */var

Router = /*#__PURE__*/function () {
  function Router() {_classCallCheck(this, Router);
    // 原始属性定义
    this.config = {
      type: 'navigateTo',
      url: '',
      delta: 1, // navigateBack页面后退时,回退的层数
      params: {}, // 传递的参数
      animationType: 'pop-in', // 窗口动画,只在APP有效
      animationDuration: 300, // 窗口动画持续时间,单位毫秒,只在APP有效
      intercept: false // 是否需要拦截
    };
    // 因为route方法是需要对外赋值给另外的对象使用，同时route内部有使用this，会导致route失去上下文
    // 这里在构造函数中进行this绑定
    this.route = this.route.bind(this);
  }

  // 判断url前面是否有"/"，如果没有则加上，否则无法跳转
  _createClass(Router, [{ key: "addRootPath", value: function addRootPath(url) {
      return url[0] === '/' ? url : "/".concat(url);
    }

    // 整合路由参数
  }, { key: "mixinParam", value: function mixinParam(url, params) {
      url = url && this.addRootPath(url);

      // 使用正则匹配，主要依据是判断是否有"/","?","="等，如“/page/index/index?name=mary"
      // 如果有url中有get参数，转换后无需带上"?"
      var query = '';
      if (/.*\/.*\?.*=.*/.test(url)) {
        // object对象转为get类型的参数
        query = uni.$u.queryParams(params, false);
        // 因为已有get参数,所以后面拼接的参数需要带上"&"隔开
        return url += "&" + query;
      } else {
        // 直接拼接参数，因为此处url中没有后面的query参数，也就没有"?/&"之类的符号
        query = uni.$u.queryParams(params);
        return url += query;
      }
    }

    // 对外的方法名称
  }, { key: "route", value: function () {var _route = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee() {var options,params,mergeConfig,isNext,_args = arguments;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};params = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};
                // 合并用户的配置和内部的默认配置
                mergeConfig = {};

                if (typeof options === 'string') {
                  // 如果options为字符串，则为route(url, params)的形式
                  mergeConfig.url = this.mixinParam(options, params);
                  mergeConfig.type = 'navigateTo';
                } else {
                  mergeConfig = uni.$u.deepClone(options, this.config);
                  // 否则正常使用mergeConfig中的url和params进行拼接
                  mergeConfig.url = this.mixinParam(options.url, options.params);
                }

                if (params.intercept) {
                  this.config.intercept = params.intercept;
                }
                // params参数也带给拦截器
                mergeConfig.params = params;
                // 合并内外部参数
                mergeConfig = uni.$u.deepMerge(this.config, mergeConfig);
                // 判断用户是否定义了拦截器
                if (!(typeof uni.$u.routeIntercept === 'function')) {_context.next = 14;break;}_context.next = 10;return (

                  new Promise(function (resolve, reject) {
                    uni.$u.routeIntercept(mergeConfig, resolve);
                  }));case 10:isNext = _context.sent;
                // 如果isNext为true，则执行路由跳转
                isNext && this.openPage(mergeConfig);_context.next = 15;break;case 14:

                this.openPage(mergeConfig);case 15:case "end":return _context.stop();}}}, _callee, this);}));function route() {return _route.apply(this, arguments);}return route;}()



    // 执行路由跳转
  }, { key: "openPage", value: function openPage(config) {
      // 解构参数
      var
      url =




      config.url,type = config.type,delta = config.delta,animationType = config.animationType,animationDuration = config.animationDuration;
      if (config.type == 'navigateTo' || config.type == 'to') {
        uni.navigateTo({
          url: url,
          animationType: animationType,
          animationDuration: animationDuration });

      }
      if (config.type == 'redirectTo' || config.type == 'redirect') {
        uni.redirectTo({
          url: url });

      }
      if (config.type == 'switchTab' || config.type == 'tab') {
        uni.switchTab({
          url: url });

      }
      if (config.type == 'reLaunch' || config.type == 'launch') {
        uni.reLaunch({
          url: url });

      }
      if (config.type == 'navigateBack' || config.type == 'back') {
        uni.navigateBack({
          delta: delta });

      }
    } }]);return Router;}();var _default =


new Router().route;exports.default = _default;

/***/ }),
/* 23 */
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! regenerator-runtime */ 24);

/***/ }),
/* 24 */
/*!************************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime-module.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

// This method of obtaining a reference to the global object needs to be
// kept identical to the way it is obtained in runtime.js
var g = (function() {
  return this || (typeof self === "object" && self);
})() || Function("return this")();

// Use `getOwnPropertyNames` because not all browsers support calling
// `hasOwnProperty` on the global `self` object in a worker. See #183.
var hadRuntime = g.regeneratorRuntime &&
  Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime") >= 0;

// Save the old regeneratorRuntime in case it needs to be restored later.
var oldRuntime = hadRuntime && g.regeneratorRuntime;

// Force reevalutation of runtime.js.
g.regeneratorRuntime = undefined;

module.exports = __webpack_require__(/*! ./runtime */ 25);

if (hadRuntime) {
  // Restore the original runtime.
  g.regeneratorRuntime = oldRuntime;
} else {
  // Remove the global property added by runtime.js.
  try {
    delete g.regeneratorRuntime;
  } catch(e) {
    g.regeneratorRuntime = undefined;
  }
}


/***/ }),
/* 25 */
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

!(function(global) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  var inModule = typeof module === "object";
  var runtime = global.regeneratorRuntime;
  if (runtime) {
    if (inModule) {
      // If regeneratorRuntime is defined globally and we're in a module,
      // make the exports object identical to regeneratorRuntime.
      module.exports = runtime;
    }
    // Don't bother evaluating the rest of this file if the runtime was
    // already defined globally.
    return;
  }

  // Define the runtime globally (as expected by generated code) as either
  // module.exports (if we're in a module) or a new, empty object.
  runtime = global.regeneratorRuntime = inModule ? module.exports : {};

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  runtime.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunctionPrototype[toStringTagSymbol] =
    GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  runtime.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  runtime.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      if (!(toStringTagSymbol in genFun)) {
        genFun[toStringTagSymbol] = "GeneratorFunction";
      }
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  runtime.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return Promise.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return Promise.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new Promise(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  runtime.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  runtime.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return runtime.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        if (delegate.iterator.return) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[toStringTagSymbol] = "Generator";

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  runtime.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  runtime.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };
})(
  // In sloppy mode, unbound `this` refers to the global object, fallback to
  // Function constructor if we're in global strict mode. That is sadly a form
  // of indirect eval which violates Content Security Policy.
  (function() {
    return this || (typeof self === "object" && self);
  })() || Function("return this")()
);


/***/ }),
/* 26 */
/*!*******************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/timeFormat.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; // padStart 的 polyfill，因为某些机型或情况，还无法支持es7的padStart，比如电脑版的微信小程序
// 所以这里做一个兼容polyfill的兼容处理
if (!String.prototype.padStart) {
  // 为了方便表示这里 fillString 用了ES6 的默认参数，不影响理解
  String.prototype.padStart = function (maxLength) {var fillString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ' ';
    if (Object.prototype.toString.call(fillString) !== "[object String]") throw new TypeError(
    'fillString must be String');
    var str = this;
    // 返回 String(str) 这里是为了使返回的值是字符串字面量，在控制台中更符合直觉
    if (str.length >= maxLength) return String(str);

    var fillLength = maxLength - str.length,
    times = Math.ceil(fillLength / fillString.length);
    while (times >>= 1) {
      fillString += fillString;
      if (times === 1) {
        fillString += fillString;
      }
    }
    return fillString.slice(0, fillLength) + str;
  };
}

// 其他更多是格式化有如下:
// yyyy:mm:dd|yyyy:mm|yyyy年mm月dd日|yyyy年mm月dd日 hh时MM分等,可自定义组合
function timeFormat() {var dateTime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;var fmt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'yyyy-mm-dd';
  // 如果为null,则格式化当前时间
  if (!dateTime) dateTime = Number(new Date());
  // 如果dateTime长度为10或者13，则为秒和毫秒的时间戳，如果超过13位，则为其他的时间格式
  if (dateTime.toString().length == 10) dateTime *= 1000;
  var date = new Date(dateTime);
  var ret;
  var opt = {
    "y+": date.getFullYear().toString(), // 年
    "m+": (date.getMonth() + 1).toString(), // 月
    "d+": date.getDate().toString(), // 日
    "h+": date.getHours().toString(), // 时
    "M+": date.getMinutes().toString(), // 分
    "s+": date.getSeconds().toString() // 秒
    // 有其他格式化字符需求可以继续添加，必须转化成字符串
  };
  for (var k in opt) {
    ret = new RegExp("(" + k + ")").exec(fmt);
    if (ret) {
      fmt = fmt.replace(ret[1], ret[1].length == 1 ? opt[k] : opt[k].padStart(ret[1].length, "0"));
    };
  };
  return fmt;
}var _default =

timeFormat;exports.default = _default;

/***/ }),
/* 27 */
/*!*****************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/timeFrom.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _timeFormat = _interopRequireDefault(__webpack_require__(/*! ../../libs/function/timeFormat.js */ 26));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

/**
                                                                                                                                                                                                                                                                                          * 时间戳转为多久之前
                                                                                                                                                                                                                                                                                          * @param String timestamp 时间戳
                                                                                                                                                                                                                                                                                          * @param String | Boolean format 如果为时间格式字符串，超出一定时间范围，返回固定的时间格式；
                                                                                                                                                                                                                                                                                          * 如果为布尔值false，无论什么时间，都返回多久以前的格式
                                                                                                                                                                                                                                                                                          */
function timeFrom() {var dateTime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'yyyy-mm-dd';
  // 如果为null,则格式化当前时间
  if (!dateTime) dateTime = Number(new Date());
  // 如果dateTime长度为10或者13，则为秒和毫秒的时间戳，如果超过13位，则为其他的时间格式
  if (dateTime.toString().length == 10) dateTime *= 1000;
  var timestamp = +new Date(Number(dateTime));

  var timer = (Number(new Date()) - timestamp) / 1000;
  // 如果小于5分钟,则返回"刚刚",其他以此类推
  var tips = '';
  switch (true) {
    case timer < 300:
      tips = '刚刚';
      break;
    case timer >= 300 && timer < 3600:
      tips = parseInt(timer / 60) + '分钟前';
      break;
    case timer >= 3600 && timer < 86400:
      tips = parseInt(timer / 3600) + '小时前';
      break;
    case timer >= 86400 && timer < 2592000:
      tips = parseInt(timer / 86400) + '天前';
      break;
    default:
      // 如果format为false，则无论什么时间戳，都显示xx之前
      if (format === false) {
        if (timer >= 2592000 && timer < 365 * 86400) {
          tips = parseInt(timer / (86400 * 30)) + '个月前';
        } else {
          tips = parseInt(timer / (86400 * 365)) + '年前';
        }
      } else {
        tips = (0, _timeFormat.default)(timestamp, format);
      }}

  return tips;
}var _default =

timeFrom;exports.default = _default;

/***/ }),
/* 28 */
/*!**********************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/colorGradient.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; /**
                                                                                                      * 求两个颜色之间的渐变值
                                                                                                      * @param {string} startColor 开始的颜色
                                                                                                      * @param {string} endColor 结束的颜色
                                                                                                      * @param {number} step 颜色等分的份额
                                                                                                      * */
function colorGradient() {var startColor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'rgb(0, 0, 0)';var endColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'rgb(255, 255, 255)';var step = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;
  var startRGB = hexToRgb(startColor, false); //转换为rgb数组模式
  var startR = startRGB[0];
  var startG = startRGB[1];
  var startB = startRGB[2];

  var endRGB = hexToRgb(endColor, false);
  var endR = endRGB[0];
  var endG = endRGB[1];
  var endB = endRGB[2];

  var sR = (endR - startR) / step; //总差值
  var sG = (endG - startG) / step;
  var sB = (endB - startB) / step;
  var colorArr = [];
  for (var i = 0; i < step; i++) {
    //计算每一步的hex值 
    var hex = rgbToHex('rgb(' + Math.round(sR * i + startR) + ',' + Math.round(sG * i + startG) + ',' + Math.round(sB *
    i + startB) + ')');
    colorArr.push(hex);
  }
  return colorArr;
}

// 将hex表示方式转换为rgb表示方式(这里返回rgb数组模式)
function hexToRgb(sColor) {var str = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
  sColor = sColor.toLowerCase();
  if (sColor && reg.test(sColor)) {
    if (sColor.length === 4) {
      var sColorNew = "#";
      for (var i = 1; i < 4; i += 1) {
        sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));
      }
      sColor = sColorNew;
    }
    //处理六位的颜色值
    var sColorChange = [];
    for (var _i = 1; _i < 7; _i += 2) {
      sColorChange.push(parseInt("0x" + sColor.slice(_i, _i + 2)));
    }
    if (!str) {
      return sColorChange;
    } else {
      return "rgb(".concat(sColorChange[0], ",").concat(sColorChange[1], ",").concat(sColorChange[2], ")");
    }
  } else if (/^(rgb|RGB)/.test(sColor)) {
    var arr = sColor.replace(/(?:\(|\)|rgb|RGB)*/g, "").split(",");
    return arr.map(function (val) {return Number(val);});
  } else {
    return sColor;
  }
};

// 将rgb表示方式转换为hex表示方式
function rgbToHex(rgb) {
  var _this = rgb;
  var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
  if (/^(rgb|RGB)/.test(_this)) {
    var aColor = _this.replace(/(?:\(|\)|rgb|RGB)*/g, "").split(",");
    var strHex = "#";
    for (var i = 0; i < aColor.length; i++) {
      var hex = Number(aColor[i]).toString(16);
      hex = String(hex).length == 1 ? 0 + '' + hex : hex; // 保证每个rgb的值为2位
      if (hex === "0") {
        hex += hex;
      }
      strHex += hex;
    }
    if (strHex.length !== 7) {
      strHex = _this;
    }
    return strHex;
  } else if (reg.test(_this)) {
    var aNum = _this.replace(/#/, "").split("");
    if (aNum.length === 6) {
      return _this;
    } else if (aNum.length === 3) {
      var numHex = "#";
      for (var _i2 = 0; _i2 < aNum.length; _i2 += 1) {
        numHex += aNum[_i2] + aNum[_i2];
      }
      return numHex;
    }
  } else {
    return _this;
  }
}


/**
  * JS颜色十六进制转换为rgb或rgba,返回的格式为 rgba（255，255，255，0.5）字符串
  * sHex为传入的十六进制的色值
  * alpha为rgba的透明度
  */
function colorToRgba(color) {var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.3;
  color = rgbToHex(color);
  // 十六进制颜色值的正则表达式
  var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
  /* 16进制颜色转为RGB格式 */
  var sColor = color.toLowerCase();
  if (sColor && reg.test(sColor)) {
    if (sColor.length === 4) {
      var sColorNew = '#';
      for (var i = 1; i < 4; i += 1) {
        sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));
      }
      sColor = sColorNew;
    }
    // 处理六位的颜色值
    var sColorChange = [];
    for (var _i3 = 1; _i3 < 7; _i3 += 2) {
      sColorChange.push(parseInt('0x' + sColor.slice(_i3, _i3 + 2)));
    }
    // return sColorChange.join(',')
    return 'rgba(' + sColorChange.join(',') + ',' + alpha + ')';
  } else
  {
    return sColor;
  }
}var _default =

{
  colorGradient: colorGradient,
  hexToRgb: hexToRgb,
  rgbToHex: rgbToHex,
  colorToRgba: colorToRgba };exports.default = _default;

/***/ }),
/* 29 */
/*!*************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/guid.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; /**
                                                                                                      * 本算法来源于简书开源代码，详见：https://www.jianshu.com/p/fdbf293d0a85
                                                                                                      * 全局唯一标识符（uuid，Globally Unique Identifier）,也称作 uuid(Universally Unique IDentifier) 
                                                                                                      * 一般用于多个组件之间,给它一个唯一的标识符,或者v-for循环的时候,如果使用数组的index可能会导致更新列表出现问题
                                                                                                      * 最可能的情况是左滑删除item或者对某条信息流"不喜欢"并去掉它的时候,会导致组件内的数据可能出现错乱
                                                                                                      * v-for的时候,推荐使用后端返回的id而不是循环的index
                                                                                                      * @param {Number} len uuid的长度
                                                                                                      * @param {Boolean} firstU 将返回的首字母置为"u"
                                                                                                      * @param {Nubmer} radix 生成uuid的基数(意味着返回的字符串都是这个基数),2-二进制,8-八进制,10-十进制,16-十六进制
                                                                                                      */
function guid() {var len = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 32;var firstU = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;var radix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');
  var uuid = [];
  radix = radix || chars.length;

  if (len) {
    // 如果指定uuid长度,只是取随机的字符,0|x为位运算,能去掉x的小数位,返回整数位
    for (var i = 0; i < len; i++) {uuid[i] = chars[0 | Math.random() * radix];}
  } else {
    var r;
    // rfc4122标准要求返回的uuid中,某些位为固定的字符
    uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';
    uuid[14] = '4';

    for (var _i = 0; _i < 36; _i++) {
      if (!uuid[_i]) {
        r = 0 | Math.random() * 16;
        uuid[_i] = chars[_i == 19 ? r & 0x3 | 0x8 : r];
      }
    }
  }
  // 移除第一个字符,并用u替代,因为第一个字符为数值时,该guuid不能用作id或者class
  if (firstU) {
    uuid.shift();
    return 'u' + uuid.join('');
  } else {
    return uuid.join('');
  }
}var _default =

guid;exports.default = _default;

/***/ }),
/* 30 */
/*!**************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/color.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; // 为了让用户能够自定义主题，会逐步弃用此文件，各颜色通过css提供
// 为了给某些特殊场景使用和向后兼容，无需删除此文件(2020-06-20)
var color = {
  primary: "#2979ff",
  primaryDark: "#2b85e4",
  primaryDisabled: "#a0cfff",
  primaryLight: "#ecf5ff",
  bgColor: "#f3f4f6",

  info: "#909399",
  infoDark: "#82848a",
  infoDisabled: "#c8c9cc",
  infoLight: "#f4f4f5",

  warning: "#ff9900",
  warningDark: "#f29100",
  warningDisabled: "#fcbd71",
  warningLight: "#fdf6ec",

  error: "#fa3534",
  errorDark: "#dd6161",
  errorDisabled: "#fab6b6",
  errorLight: "#fef0f0",

  success: "#19be6b",
  successDark: "#18b566",
  successDisabled: "#71d5a1",
  successLight: "#dbf1e1",

  mainColor: "#303133",
  contentColor: "#606266",
  tipsColor: "#909399",
  lightColor: "#c0c4cc",
  borderColor: "#e4e7ed" };var _default =


color;exports.default = _default;

/***/ }),
/* 31 */
/*!******************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/type2icon.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; /**
                                                                                                      * 根据主题type值,获取对应的图标
                                                                                                      * @param String type 主题名称,primary|info|error|warning|success
                                                                                                      * @param String fill 是否使用fill填充实体的图标  
                                                                                                      */
function type2icon() {var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'success';var fill = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  // 如果非预置值,默认为success
  if (['primary', 'info', 'error', 'warning', 'success'].indexOf(type) == -1) type = 'success';
  var iconName = '';
  // 目前(2019-12-12),info和primary使用同一个图标
  switch (type) {
    case 'primary':
      iconName = 'info-circle';
      break;
    case 'info':
      iconName = 'info-circle';
      break;
    case 'error':
      iconName = 'close-circle';
      break;
    case 'warning':
      iconName = 'error-circle';
      break;
    case 'success':
      iconName = 'checkmark-circle';
      break;
    default:
      iconName = 'checkmark-circle';}

  // 是否是实体类型,加上-fill,在icon组件库中,实体的类名是后面加-fill的
  if (fill) iconName += '-fill';
  return iconName;
}var _default =

type2icon;exports.default = _default;

/***/ }),
/* 32 */
/*!********************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/randomArray.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; // 打乱数组
function randomArray() {var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  // 原理是sort排序,Math.random()产生0<= x < 1之间的数,会导致x-0.05大于或者小于0
  return array.sort(function () {return Math.random() - 0.5;});
}var _default =

randomArray;exports.default = _default;

/***/ }),
/* 33 */
/*!****************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/addUnit.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = addUnit;var _test = _interopRequireDefault(__webpack_require__(/*! ./test.js */ 20));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

// 添加单位，如果有rpx，%，px等单位结尾或者值为auto，直接返回，否则加上rpx单位结尾
function addUnit() {var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'auto';var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'rpx';
  value = String(value);
  // 用uView内置验证规则中的number判断是否为数值
  return _test.default.number(value) ? "".concat(value).concat(unit) : value;
}

/***/ }),
/* 34 */
/*!***************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/random.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;function random(min, max) {
  if (min >= 0 && max > 0 && max >= min) {
    var gab = max - min + 1;
    return Math.floor(Math.random() * gab + min);
  } else {
    return 0;
  }
}var _default =

random;exports.default = _default;

/***/ }),
/* 35 */
/*!*************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/trim.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;function trim(str) {var pos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'both';
  if (pos == 'both') {
    return str.replace(/^\s+|\s+$/g, "");
  } else if (pos == "left") {
    return str.replace(/^\s*/, '');
  } else if (pos == 'right') {
    return str.replace(/(\s*$)/g, "");
  } else if (pos == 'all') {
    return str.replace(/\s+/g, "");
  } else {
    return str;
  }
}var _default =

trim;exports.default = _default;

/***/ }),
/* 36 */
/*!**************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/toast.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;function toast(title) {var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1500;
  uni.showToast({
    title: title,
    icon: 'none',
    duration: duration });

}var _default =

toast;exports.default = _default;

/***/ }),
/* 37 */
/*!******************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/getParent.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = getParent; // 获取父组件的参数，因为支付宝小程序不支持provide/inject的写法
// this.$parent在非H5中，可以准确获取到父组件，但是在H5中，需要多次this.$parent.$parent.xxx
function getParent(name, keys) {
  var parent = this.$parent;
  // 通过while历遍，这里主要是为了H5需要多层解析的问题
  while (parent) {
    // 父组件
    if (parent.$options.name !== name) {
      // 如果组件的name不相等，继续上一级寻找
      parent = parent.$parent;
    } else {var _ret = function () {
        var data = {};
        // 判断keys是否数组，如果传过来的是一个数组，那么直接使用数组元素值当做键值去父组件寻找
        if (Array.isArray(keys)) {
          keys.map(function (val) {
            data[val] = parent[val] ? parent[val] : '';
          });
        } else {
          // 历遍传过来的对象参数
          for (var i in keys) {
            // 如果子组件有此值则用，无此值则用父组件的值
            // 判断是否空数组，如果是，则用父组件的值，否则用子组件的值
            if (Array.isArray(keys[i])) {
              if (keys[i].length) {
                data[i] = keys[i];
              } else {
                data[i] = parent[i];
              }
            } else if (keys[i].constructor === Object) {
              // 判断是否对象，如果是对象，且有属性，那么使用子组件的值，否则使用父组件的值
              if (Object.keys(keys[i]).length) {
                data[i] = keys[i];
              } else {
                data[i] = parent[i];
              }
            } else {
              // 只要子组件有传值，即使是false值，也是“传值”了，也需要覆盖父组件的同名参数
              data[i] = keys[i] || keys[i] === false ? keys[i] : parent[i];
            }
          }
        }
        return { v: data };}();if (typeof _ret === "object") return _ret.v;
    }
  }

  return {};
}

/***/ }),
/* 38 */
/*!****************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/$parent.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = $parent; // 获取父组件的参数，因为支付宝小程序不支持provide/inject的写法
// this.$parent在非H5中，可以准确获取到父组件，但是在H5中，需要多次this.$parent.$parent.xxx
// 这里默认值等于undefined有它的含义，因为最顶层元素(组件)的$parent就是undefined，意味着不传name
// 值(默认为undefined)，就是查找最顶层的$parent
function $parent() {var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;
  var parent = this.$parent;
  // 通过while历遍，这里主要是为了H5需要多层解析的问题
  while (parent) {
    // 父组件
    if (parent.$options && parent.$options.name !== name) {
      // 如果组件的name不相等，继续上一级寻找
      parent = parent.$parent;
    } else {
      return parent;
    }
  }
  return false;
}

/***/ }),
/* 39 */
/*!************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/sys.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.os = os;exports.sys = sys;function os() {
  return uni.getSystemInfoSync().platform;
};

function sys() {
  return uni.getSystemInfoSync();
}

/***/ }),
/* 40 */
/*!*****************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/debounce.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var timeout = null;

/**
                                                                                                                         * 防抖原理：一定时间内，只有最后一次操作，再过wait毫秒后才执行函数
                                                                                                                         * 
                                                                                                                         * @param {Function} func 要执行的回调函数 
                                                                                                                         * @param {Number} wait 延时的时间
                                                                                                                         * @param {Boolean} immediate 是否立即执行 
                                                                                                                         * @return null
                                                                                                                         */
function debounce(func) {var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  // 清除定时器
  if (timeout !== null) clearTimeout(timeout);
  // 立即执行，此类情况一般用不到
  if (immediate) {
    var callNow = !timeout;
    timeout = setTimeout(function () {
      timeout = null;
    }, wait);
    if (callNow) typeof func === 'function' && func();
  } else {
    // 设置定时器，当最后一次操作后，timeout不会再被清除，所以在延时wait毫秒后执行func回调方法
    timeout = setTimeout(function () {
      typeof func === 'function' && func();
    }, wait);
  }
}var _default =

debounce;exports.default = _default;

/***/ }),
/* 41 */
/*!*****************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/function/throttle.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var timer, flag;
/**
                                                                                                                      * 节流原理：在一定时间内，只能触发一次
                                                                                                                      * 
                                                                                                                      * @param {Function} func 要执行的回调函数 
                                                                                                                      * @param {Number} wait 延时的时间
                                                                                                                      * @param {Boolean} immediate 是否立即执行
                                                                                                                      * @return null
                                                                                                                      */
function throttle(func) {var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  if (immediate) {
    if (!flag) {
      flag = true;
      // 如果是立即执行，则在wait毫秒内开始时执行
      typeof func === 'function' && func();
      timer = setTimeout(function () {
        flag = false;
      }, wait);
    }
  } else {
    if (!flag) {
      flag = true;
      // 如果是非立即执行，则在wait毫秒内的结束处执行
      timer = setTimeout(function () {
        flag = false;
        typeof func === 'function' && func();
      }, wait);
    }

  }
};var _default =
throttle;exports.default = _default;

/***/ }),
/* 42 */
/*!*************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/config/config.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; // 此版本发布于2020-12-17
var version = '1.8.3';var _default =

{
  v: version,
  version: version,
  // 主题名称
  type: [
  'primary',
  'success',
  'info',
  'error',
  'warning'] };exports.default = _default;

/***/ }),
/* 43 */
/*!*************************************************************************!*\
  !*** E:/work/html/H5-Video/node_modules/uview-ui/libs/config/zIndex.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; // uniapp在H5中各API的z-index值如下：
/**
 * actionsheet: 999
 * modal: 999
 * navigate: 998
 * tabbar: 998
 * toast: 999
 */var _default =

{
  toast: 10090,
  noNetwork: 10080,
  // popup包含popup，actionsheet，keyboard，picker的值
  popup: 10075,
  mask: 10070,
  navbar: 980,
  topTips: 975,
  sticky: 970,
  indexListSticky: 965 };exports.default = _default;

/***/ })
],[[0,"app-config"]]]);